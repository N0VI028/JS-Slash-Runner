import{getRequestHeaders as e,saveSettings as t,addOneMessage as n,chat as r,saveChatConditional as i,characters as o,this_chid as a,clearChat as s,printMessages as l,eventSource as c,event_types as u,reloadCurrentChat as d,substituteParamsExtended as p,name1 as f,name2 as h,system_message_types as m,messageFormatting as g,getCurrentChatId as v,chat_metadata as y,saveSettingsDebounced as b,activateSendButtons as w,showSwipeButtons as k,setGenerationProgress as x,setExtensionPrompt as S,extension_prompt_types as E,extension_prompt_roles as O,extension_prompts as I,baseChatReplace as T,getCharacterCardFields as A,getBiasStrings as C,getExtensionPromptRoleByName as N,getMaxContextSize as P,substituteParams as j,getExtensionPromptByName as D,MAX_INJECTION_DEPTH as R,deactivateSendButtons as U,cleanUpMessage as L,isOdd as V,countOccurrences as M,stopGeneration as B,getPastCharacterChats as F,getThumbnailUrl as Z,saveMetadata as H,saveCharacterDebounced as q,getOneCharacter as K,main_api as G,online_status as W,Generate as J,user_avatar as Y}from'../../../../../script.js';import{world_names as X,selected_world_info as Q,world_info_include_names as ee,getWorldInfoPrompt as te,wi_anchor_position as ne,createNewWorldInfo as re,METADATA_KEY as ie,deleteWorldInfo as oe,setWorldInfoButtonClass as ae,world_info as se,getWorldInfoSettings as le,saveWorldInfo as ce,loadWorldInfo as ue,parseRegexFromString as de}from'../../../../../scripts/world-info.js';import{promptManager as pe,oai_settings as fe,setOpenAIMessageExamples as he,setOpenAIMessages as me,prepareOpenAIMessages as ge,ChatCompletion as ve,Message as ye,MessageCollection as be,isImageInliningSupported as _e,setupChatCompletionPromptManager as we,sendOpenAIRequest as ke}from'../../../../../scripts/openai.js';import{getPresetManager as xe}from'../../../../../scripts/preset-manager.js';import{t as Se,getCurrentLocale as Ee}from'../../../../../scripts/i18n.js';import{getLastMessageId as $e,MacrosParser as Oe}from'../../../../../scripts/macros.js';import{uuidv4 as Ie,getStringHash as Te,isDataURL as Ae,getBase64Async as Ce,Stopwatch as Ne,getCharaFilename as Pe,ensureImageFormatSupported as je,showFontAwesomePicker as De,getSanitizedFilename as Re,download as Ue}from'../../../../../scripts/utils.js';import{writeExtensionField as Le,saveMetadataDebounced as ze,extension_settings as Ve,extensionTypes as Me,getContext as Be}from'../../../../../scripts/extensions.js';import{isAdmin as Fe}from'../../../../../scripts/user.js';import{getRegexedString as Ze,regex_placement as He}from'../../../../../scripts/extensions/regex/engine.js';import{flushEphemeralStoppingStrings as qe,power_user as Ke,persona_description_positions as Ge}from'../../../../../scripts/power-user.js';import{NOTE_MODULE_NAME as We,metadata_keys as Je,shouldWIAddPrompt as Ye}from'../../../../../scripts/authors-note.js';import{PromptCollection as Xe,Prompt as Qe}from'../../../../../scripts/PromptManager.js';import{executeSlashCommandsWithOptions as et}from'../../../../../scripts/slash-commands.js';import{SlashCommand as tt}from'../../../../../scripts/slash-commands/SlashCommand.js';import{SlashCommandNamedArgument as nt,ARGUMENT_TYPE as rt,SlashCommandArgument as it}from'../../../../../scripts/slash-commands/SlashCommandArgument.js';import{enumIcons as ot,commonEnumProviders as at}from'../../../../../scripts/slash-commands/SlashCommandCommonEnumsProvider.js';import{SlashCommandEnumValue as st,enumTypes as lt}from'../../../../../scripts/slash-commands/SlashCommandEnumValue.js';import{SlashCommandParser as ct}from'../../../../../scripts/slash-commands/SlashCommandParser.js';import'../../../../../scripts/popup.js';import{isMobile as ut}from'../../../../../scripts/RossAscends-mods.js';import{getTokenCountAsync as dt}from'../../../../../scripts/tokenizers.js';import{createJSONEditor as pt}from'https://cdn.jsdelivr.net/gh/StageDog/svelte-jsoneditor-for-tavern-helper/package-vanilla/standalone.js';
/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function ft(e){const t=Object.create(null);for(const n of e.split(','))t[n]=1;return e=>e in t}const ht={},mt=[],gt=()=>{},vt=()=>!1,yt=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),bt=e=>e.startsWith('onUpdate:'),_t=Object.assign,wt=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},kt=Object.prototype.hasOwnProperty,xt=(e,t)=>kt.call(e,t),St=Array.isArray,Et=e=>'[object Map]'===jt(e),$t=e=>'[object Set]'===jt(e),Ot=e=>'[object Date]'===jt(e),It=e=>'function'==typeof e,Tt=e=>'string'==typeof e,At=e=>'symbol'==typeof e,Ct=e=>null!==e&&'object'==typeof e,Nt=e=>(Ct(e)||It(e))&&It(e.then)&&It(e.catch),Pt=Object.prototype.toString,jt=e=>Pt.call(e),Dt=e=>'[object Object]'===jt(e),Rt=e=>Tt(e)&&'NaN'!==e&&'-'!==e[0]&&''+parseInt(e,10)===e,Ut=ft(',key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted'),Lt=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},zt=/-\w/g,Vt=Lt((e=>e.replace(zt,(e=>e.slice(1).toUpperCase())))),Mt=/\B([A-Z])/g,Bt=Lt((e=>e.replace(Mt,'-$1').toLowerCase())),Ft=Lt((e=>e.charAt(0).toUpperCase()+e.slice(1))),Zt=Lt((e=>e?`on${Ft(e)}`:'')),Ht=(e,t)=>!Object.is(e,t),qt=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Kt=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Gt=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Wt;const Jt=()=>Wt||(Wt='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof self?self:'undefined'!=typeof window?window:'undefined'!=typeof global?global:{});function Yt(e){if(St(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Tt(r)?tn(r):Yt(r);if(i)for(const e in i)t[e]=i[e]}return t}if(Tt(e)||Ct(e))return e}const Xt=/;(?![^(]*\))/g,Qt=/:([^]+)/,en=/\/\*[^]*?\*\//g;function tn(e){const t={};return e.replace(en,'').split(Xt).forEach((e=>{if(e){const n=e.split(Qt);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function nn(e){let t='';if(Tt(e))t=e;else if(St(e))for(let n=0;n<e.length;n++){const r=nn(e[n]);r&&(t+=r+' ')}else if(Ct(e))for(const n in e)e[n]&&(t+=n+' ');return t.trim()}function rn(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Tt(t)&&(e.class=nn(t)),n&&(e.style=Yt(n)),e}const on=ft('itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly');function an(e){return!!e||''===e}function sn(e,t){if(e===t)return!0;let n=Ot(e),r=Ot(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=At(e),r=At(t),n||r)return e===t;if(n=St(e),r=St(t),n||r)return!(!n||!r)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=sn(e[r],t[r]);return n}(e,t);if(n=Ct(e),r=Ct(t),n||r){if(!n||!r)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!sn(e[n],t[n]))return!1}}return String(e)===String(t)}function ln(e,t){return e.findIndex((e=>sn(e,t)))}const cn=e=>!(!e||!0!==e.__v_isRef),un=e=>Tt(e)?e:null==e?'':St(e)||Ct(e)&&(e.toString===Pt||!It(e.toString))?cn(e)?un(e.value):JSON.stringify(e,dn,2):String(e),dn=(e,t)=>cn(t)?dn(e,t.value):Et(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n],r)=>(e[pn(t,r)+' =>']=n,e)),{})}:$t(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>pn(e)))}:At(t)?pn(t):!Ct(t)||St(t)||Dt(t)?t:String(t),pn=(e,t='')=>{var n;return At(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};
/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let fn,hn;class mn{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!e&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=fn;try{return fn=this,e()}finally{fn=t}}}on(){1==++this._on&&(this.prevScope=fn,fn=this)}off(){this._on>0&&0==--this._on&&(fn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function gn(e){return new mn(e)}function vn(){return fn}function yn(e,t=!1){fn&&fn.cleanups.push(e)}const bn=new WeakSet;class _n{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,bn.has(this)&&(bn.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||Sn(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,Un(this),On(this);const e=hn,t=Pn;hn=this,Pn=!0;try{return this.fn()}finally{In(this),hn=e,Pn=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)Cn(e);this.deps=this.depsTail=void 0,Un(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?bn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Tn(this)&&this.run()}get dirty(){return Tn(this)}}let wn,kn,xn=0;function Sn(e,t=!1){if(e.flags|=8,t)return e.next=kn,void(kn=e);e.next=wn,wn=e}function En(){xn++}function $n(){if(--xn>0)return;if(kn){let e=kn;for(kn=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;wn;){let n=wn;for(wn=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(t){e||(e=t)}n=r}}if(e)throw e}function On(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function In(e){let t,n=e.depsTail,r=n;for(;r;){const e=r.prevDep;-1===r.version?(r===n&&(n=e),Cn(r),Nn(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function Tn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(An(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function An(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===Ln)return;if(e.globalVersion=Ln,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!Tn(e)))return;e.flags|=2;const t=e.dep,n=hn,r=Pn;hn=e,Pn=!0;try{On(e);const n=e.fn(e._value);(0===t.version||Ht(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(i){throw t.version++,i}finally{hn=n,Pn=r,In(e),e.flags&=-3}}function Cn(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)Cn(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function Nn(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Pn=!0;const jn=[];function Dn(){jn.push(Pn),Pn=!1}function Rn(){const e=jn.pop();Pn=void 0===e||e}function Un(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=hn;hn=void 0;try{t()}finally{hn=e}}}let Ln=0;class zn{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vn{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!hn||!Pn||hn===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==hn)t=this.activeLink=new zn(hn,this),hn.deps?(t.prevDep=hn.depsTail,hn.depsTail.nextDep=t,hn.depsTail=t):hn.deps=hn.depsTail=t,Mn(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=hn.depsTail,t.nextDep=void 0,hn.depsTail.nextDep=t,hn.depsTail=t,hn.deps===t&&(hn.deps=e)}return t}trigger(e){this.version++,Ln++,this.notify(e)}notify(e){En();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{$n()}}}function Mn(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Mn(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Bn=new WeakMap,Fn=Symbol(''),Zn=Symbol(''),Hn=Symbol('');function qn(e,t,n){if(Pn&&hn){let t=Bn.get(e);t||Bn.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new Vn),r.map=t,r.key=n),r.track()}}function Kn(e,t,n,r,i,o){const a=Bn.get(e);if(!a)return void Ln++;const s=e=>{e&&e.trigger()};if(En(),'clear'===t)a.forEach(s);else{const i=St(e),o=i&&Rt(n);if(i&&'length'===n){const e=Number(r);a.forEach(((t,n)=>{('length'===n||n===Hn||!At(n)&&n>=e)&&s(t)}))}else switch((void 0!==n||a.has(void 0))&&s(a.get(n)),o&&s(a.get(Hn)),t){case'add':i?o&&s(a.get('length')):(s(a.get(Fn)),Et(e)&&s(a.get(Zn)));break;case'delete':i||(s(a.get(Fn)),Et(e)&&s(a.get(Zn)));break;case'set':Et(e)&&s(a.get(Fn))}}$n()}function Gn(e){const t=Rr(e);return t===e?t:(qn(t,0,Hn),jr(e)?t:t.map(Lr))}function Wn(e){return qn(e=Rr(e),0,Hn),e}const Jn={__proto__:null,[Symbol.iterator](){return Yn(this,Symbol.iterator,Lr)},concat(...e){return Gn(this).concat(...e.map((e=>St(e)?Gn(e):e)))},entries(){return Yn(this,'entries',(e=>(e[1]=Lr(e[1]),e)))},every(e,t){return Qn(this,'every',e,t,void 0,arguments)},filter(e,t){return Qn(this,'filter',e,t,(e=>e.map(Lr)),arguments)},find(e,t){return Qn(this,'find',e,t,Lr,arguments)},findIndex(e,t){return Qn(this,'findIndex',e,t,void 0,arguments)},findLast(e,t){return Qn(this,'findLast',e,t,Lr,arguments)},findLastIndex(e,t){return Qn(this,'findLastIndex',e,t,void 0,arguments)},forEach(e,t){return Qn(this,'forEach',e,t,void 0,arguments)},includes(...e){return tr(this,'includes',e)},indexOf(...e){return tr(this,'indexOf',e)},join(e){return Gn(this).join(e)},lastIndexOf(...e){return tr(this,'lastIndexOf',e)},map(e,t){return Qn(this,'map',e,t,void 0,arguments)},pop(){return nr(this,'pop')},push(...e){return nr(this,'push',e)},reduce(e,...t){return er(this,'reduce',e,t)},reduceRight(e,...t){return er(this,'reduceRight',e,t)},shift(){return nr(this,'shift')},some(e,t){return Qn(this,'some',e,t,void 0,arguments)},splice(...e){return nr(this,'splice',e)},toReversed(){return Gn(this).toReversed()},toSorted(e){return Gn(this).toSorted(e)},toSpliced(...e){return Gn(this).toSpliced(...e)},unshift(...e){return nr(this,'unshift',e)},values(){return Yn(this,'values',Lr)}};function Yn(e,t,n){const r=Wn(e),i=r[t]();return r===e||jr(e)||(i._next=i.next,i.next=()=>{const e=i._next();return e.done||(e.value=n(e.value)),e}),i}const Xn=Array.prototype;function Qn(e,t,n,r,i,o){const a=Wn(e),s=a!==e&&!jr(e),l=a[t];if(l!==Xn[t]){const t=l.apply(e,o);return s?Lr(t):t}let c=n;a!==e&&(s?c=function(t,r){return n.call(this,Lr(t),r,e)}:n.length>2&&(c=function(t,r){return n.call(this,t,r,e)}));const u=l.call(a,c,r);return s&&i?i(u):u}function er(e,t,n,r){const i=Wn(e);let o=n;return i!==e&&(jr(e)?n.length>3&&(o=function(t,r,i){return n.call(this,t,r,i,e)}):o=function(t,r,i){return n.call(this,t,Lr(r),i,e)}),i[t](o,...r)}function tr(e,t,n){const r=Rr(e);qn(r,0,Hn);const i=r[t](...n);return-1!==i&&!1!==i||!Dr(n[0])?i:(n[0]=Rr(n[0]),r[t](...n))}function nr(e,t,n=[]){Dn(),En();const r=Rr(e)[t].apply(e,n);return $n(),Rn(),r}const rr=ft('__proto__,__v_isRef,__isVue'),ir=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>'arguments'!==e&&'caller'!==e)).map((e=>Symbol[e])).filter(At));function or(e){At(e)||(e=String(e));const t=Rr(this);return qn(t,0,e),t.hasOwnProperty(e)}class ar{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if('__v_skip'===t)return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if('__v_isReactive'===t)return!r;if('__v_isReadonly'===t)return r;if('__v_isShallow'===t)return i;if('__v_raw'===t)return n===(r?i?Er:Sr:i?xr:kr).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=St(e);if(!r){let e;if(o&&(e=Jn[t]))return e;if('hasOwnProperty'===t)return or}const a=Reflect.get(e,t,Vr(e)?e:n);if(At(t)?ir.has(t):rr(t))return a;if(r||qn(e,0,t),i)return a;if(Vr(a)){const e=o&&Rt(t)?a:a.value;return r&&Ct(e)?Tr(e):e}return Ct(a)?r?Tr(a):Or(a):a}}class sr extends ar{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const t=Pr(i);if(jr(n)||Pr(n)||(i=Rr(i),n=Rr(n)),!St(e)&&Vr(i)&&!Vr(n))return t||(i.value=n),!0}const o=St(e)&&Rt(t)?Number(t)<e.length:xt(e,t),a=Reflect.set(e,t,n,Vr(e)?e:r);return e===Rr(r)&&(o?Ht(n,i)&&Kn(e,'set',t,n):Kn(e,'add',t,n)),a}deleteProperty(e,t){const n=xt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Kn(e,'delete',t,void 0),r}has(e,t){const n=Reflect.has(e,t);return At(t)&&ir.has(t)||qn(e,0,t),n}ownKeys(e){return qn(e,0,St(e)?'length':Fn),Reflect.ownKeys(e)}}class lr extends ar{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const cr=new sr,ur=new lr,dr=new sr(!0),pr=new lr(!0),fr=e=>e,hr=e=>Reflect.getPrototypeOf(e);function mr(e){return function(...t){return'delete'!==e&&('clear'===e?void 0:this)}}function gr(e,t){const n={get(n){const r=this.__v_raw,i=Rr(r),o=Rr(n);e||(Ht(n,o)&&qn(i,0,n),qn(i,0,o));const{has:a}=hr(i),s=t?fr:e?zr:Lr;return a.call(i,n)?s(r.get(n)):a.call(i,o)?s(r.get(o)):void(r!==i&&r.get(n))},get size(){const t=this.__v_raw;return!e&&qn(Rr(t),0,Fn),t.size},has(t){const n=this.__v_raw,r=Rr(n),i=Rr(t);return e||(Ht(t,i)&&qn(r,0,t),qn(r,0,i)),t===i?n.has(t):n.has(t)||n.has(i)},forEach(n,r){const i=this,o=i.__v_raw,a=Rr(o),s=t?fr:e?zr:Lr;return!e&&qn(a,0,Fn),o.forEach(((e,t)=>n.call(r,s(e),s(t),i)))}};_t(n,e?{add:mr('add'),set:mr('set'),delete:mr('delete'),clear:mr('clear')}:{add(e){t||jr(e)||Pr(e)||(e=Rr(e));const n=Rr(this);return hr(n).has.call(n,e)||(n.add(e),Kn(n,'add',e,e)),this},set(e,n){t||jr(n)||Pr(n)||(n=Rr(n));const r=Rr(this),{has:i,get:o}=hr(r);let a=i.call(r,e);a||(e=Rr(e),a=i.call(r,e));const s=o.call(r,e);return r.set(e,n),a?Ht(n,s)&&Kn(r,'set',e,n):Kn(r,'add',e,n),this},delete(e){const t=Rr(this),{has:n,get:r}=hr(t);let i=n.call(t,e);i||(e=Rr(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&Kn(t,'delete',e,void 0),o},clear(){const e=Rr(this),t=0!==e.size,n=e.clear();return t&&Kn(e,'clear',void 0,void 0),n}});return['keys','values','entries',Symbol.iterator].forEach((r=>{n[r]=function(e,t,n){return function(...r){const i=this.__v_raw,o=Rr(i),a=Et(o),s='entries'===e||e===Symbol.iterator&&a,l='keys'===e&&a,c=i[e](...r),u=n?fr:t?zr:Lr;return!t&&qn(o,0,l?Zn:Fn),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(r,e,t)})),n}function vr(e,t){const n=gr(e,t);return(t,r,i)=>'__v_isReactive'===r?!e:'__v_isReadonly'===r?e:'__v_raw'===r?t:Reflect.get(xt(n,r)&&r in t?n:t,r,i)}const yr={get:vr(!1,!1)},br={get:vr(!1,!0)},_r={get:vr(!0,!1)},wr={get:vr(!0,!0)},kr=new WeakMap,xr=new WeakMap,Sr=new WeakMap,Er=new WeakMap;function $r(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case'Object':case'Array':return 1;case'Map':case'Set':case'WeakMap':case'WeakSet':return 2;default:return 0}}((e=>jt(e).slice(8,-1))(e))}function Or(e){return Pr(e)?e:Cr(e,!1,cr,yr,kr)}function Ir(e){return Cr(e,!1,dr,br,xr)}function Tr(e){return Cr(e,!0,ur,_r,Sr)}function Ar(e){return Cr(e,!0,pr,wr,Er)}function Cr(e,t,n,r,i){if(!Ct(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=$r(e);if(0===o)return e;const a=i.get(e);if(a)return a;const s=new Proxy(e,2===o?r:n);return i.set(e,s),s}function Nr(e){return Pr(e)?Nr(e.__v_raw):!(!e||!e.__v_isReactive)}function Pr(e){return!(!e||!e.__v_isReadonly)}function jr(e){return!(!e||!e.__v_isShallow)}function Dr(e){return!!e&&!!e.__v_raw}function Rr(e){const t=e&&e.__v_raw;return t?Rr(t):e}function Ur(e){return!xt(e,'__v_skip')&&Object.isExtensible(e)&&Kt(e,'__v_skip',!0),e}const Lr=e=>Ct(e)?Or(e):e,zr=e=>Ct(e)?Tr(e):e;function Vr(e){return!!e&&!0===e.__v_isRef}function Mr(e){return Fr(e,!1)}function Br(e){return Fr(e,!0)}function Fr(e,t){return Vr(e)?e:new Zr(e,t)}class Zr{constructor(e,t){this.dep=new Vn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Rr(e),this._value=t?e:Lr(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||jr(e)||Pr(e);e=n?e:Rr(e),Ht(e,t)&&(this._rawValue=e,this._value=n?e:Lr(e),this.dep.trigger())}}function Hr(e){return Vr(e)?e.value:e}function qr(e){return It(e)?e():Hr(e)}const Kr={get:(e,t,n)=>'__v_raw'===t?e:Hr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Vr(i)&&!Vr(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Gr(e){return Nr(e)?e:new Proxy(e,Kr)}class Wr{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Vn,{get:n,set:r}=e(t.track.bind(t),t.trigger.bind(t));this._get=n,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Jr(e){return new Wr(e)}function Yr(e){const t=St(e)?new Array(e.length):{};for(const n in e)t[n]=ti(e,n);return t}class Xr{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){const n=Bn.get(e);return n&&n.get(t)}(Rr(this._object),this._key)}}class Qr{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ei(e,t,n){return Vr(e)?e:It(e)?new Qr(e):Ct(e)&&arguments.length>1?ti(e,t,n):Mr(e)}function ti(e,t,n){const r=e[t];return Vr(r)?r:new Xr(e,t,n)}class ni{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Vn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ln-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags)&&hn!==this)return Sn(this,!0),!0}get value(){const e=this.dep.track();return An(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const ri={},ii=new WeakMap;let oi;function ai(e,t,n=ht){const{immediate:r,deep:i,once:o,scheduler:a,augmentJob:s,call:l}=n,c=e=>i?e:jr(e)||!1===i||0===i?si(e,1):si(e);let u,d,p,f,h=!1,m=!1;if(Vr(e)?(d=()=>e.value,h=jr(e)):Nr(e)?(d=()=>c(e),h=!0):St(e)?(m=!0,h=e.some((e=>Nr(e)||jr(e))),d=()=>e.map((e=>Vr(e)?e.value:Nr(e)?c(e):It(e)?l?l(e,2):e():void 0))):d=It(e)?t?l?()=>l(e,2):e:()=>{if(p){Dn();try{p()}finally{Rn()}}const t=oi;oi=u;try{return l?l(e,3,[f]):e(f)}finally{oi=t}}:gt,t&&i){const e=d,t=!0===i?1/0:i;d=()=>si(e(),t)}const g=vn(),v=()=>{u.stop(),g&&g.active&&wt(g.effects,u)};if(o&&t){const e=t;t=(...t)=>{e(...t),v()}}let y=m?new Array(e.length).fill(ri):ri;const b=e=>{if(1&u.flags&&(u.dirty||e))if(t){const e=u.run();if(i||h||(m?e.some(((e,t)=>Ht(e,y[t]))):Ht(e,y))){p&&p();const n=oi;oi=u;try{const n=[e,y===ri?void 0:m&&y[0]===ri?[]:y,f];y=e,l?l(t,3,n):t(...n)}finally{oi=n}}}else u.run()};return s&&s(b),u=new _n(d),u.scheduler=a?()=>a(b,!1):b,f=e=>function(e,t=!1,n=oi){if(n){let t=ii.get(n);t||ii.set(n,t=[]),t.push(e)}}(e,!1,u),p=u.onStop=()=>{const e=ii.get(u);if(e){if(l)l(e,4);else for(const t of e)t();ii.delete(u)}},t?r?b(!0):y=u.run():a?a(b.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function si(e,t=1/0,n){if(t<=0||!Ct(e)||e.__v_skip)return e;if(((n=n||new Map).get(e)||0)>=t)return e;if(n.set(e,t),t--,Vr(e))si(e.value,t,n);else if(St(e))for(let r=0;r<e.length;r++)si(e[r],t,n);else if($t(e)||Et(e))e.forEach((e=>{si(e,t,n)}));else if(Dt(e)){for(const r in e)si(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&si(e[r],t,n)}return e}
/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function li(e,t,n,r){try{return r?e(...r):e()}catch(i){ui(i,t,n)}}function ci(e,t,n,r){if(It(e)){const i=li(e,t,n,r);return i&&Nt(i)&&i.catch((e=>{ui(e,t,n)})),i}if(St(e)){const i=[];for(let o=0;o<e.length;o++)i.push(ci(e[o],t,n,r));return i}}function ui(e,t,n,r=!0){t&&t.vnode;const{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ht;if(t){let r=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,o,a))return;r=r.parent}if(i)return Dn(),li(i,null,10,[e,o,a]),void Rn()}!function(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}(e,0,0,r,o)}const di=[];let pi=-1;const fi=[];let hi=null,mi=0;const gi=Promise.resolve();let vi=null;function yi(e){const t=vi||gi;return e?t.then(this?e.bind(this):e):t}function bi(e){if(!(1&e.flags)){const t=xi(e),n=di[di.length-1];!n||!(2&e.flags)&&t>=xi(n)?di.push(e):di.splice(function(e){let t=pi+1,n=di.length;for(;t<n;){const r=t+n>>>1,i=di[r],o=xi(i);o<e||o===e&&2&i.flags?t=r+1:n=r}return t}(t),0,e),e.flags|=1,_i()}}function _i(){vi||(vi=gi.then(Si))}function wi(e,t,n=pi+1){for(;n<di.length;n++){const t=di[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;di.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function ki(e){if(fi.length){const e=[...new Set(fi)].sort(((e,t)=>xi(e)-xi(t)));if(fi.length=0,hi)return void hi.push(...e);for(hi=e,mi=0;mi<hi.length;mi++){const e=hi[mi];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}hi=null,mi=0}}const xi=e=>null==e.id?2&e.flags?-1:1/0:e.id;function Si(e){try{for(pi=0;pi<di.length;pi++){const e=di[pi];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),li(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;pi<di.length;pi++){const e=di[pi];e&&(e.flags&=-2)}pi=-1,di.length=0,ki(),vi=null,(di.length||fi.length)&&Si()}}let Ei,$i=[],Oi=!1;function Ii(e,...t){Ei?Ei.emit(e,...t):Oi||$i.push({event:e,args:t})}function Ti(e,t){var n,r;if(Ei=e,Ei)Ei.enabled=!0,$i.forEach((({event:e,args:t})=>Ei.emit(e,...t))),$i=[];else if('undefined'!=typeof window&&window.HTMLElement&&!(null==(r=null==(n=window.navigator)?void 0:n.userAgent)?void 0:r.includes('jsdom'))){(t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push((e=>{Ti(e,t)})),setTimeout((()=>{Ei||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Oi=!0,$i=[])}),3e3)}else Oi=!0,$i=[]}const Ai=Pi('component:added'),Ci=Pi('component:updated'),Ni=Pi('component:removed');function Pi(e){return t=>{Ii(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}let ji=null,Di=null;function Ri(e){const t=ji;return ji=e,Di=e&&e.type.__scopeId||null,t}function Ui(e,t=ji,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Va(-1);const i=Ri(t);let o;try{o=e(...n)}finally{Ri(i),r._d&&Va(1)}return Ci(t),o};return r._n=!0,r._c=!0,r._d=!0,r}function Li(e,t){if(null===ji)return e;const n=_s(ji),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[e,o,a,s=ht]=t[i];e&&(It(e)&&(e={mounted:e,updated:e}),e.deep&&si(o),r.push({dir:e,instance:n,value:o,oldValue:void 0,arg:a,modifiers:s}))}return e}function zi(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(Dn(),ci(l,n,8,[e.el,s,e,t]),Rn())}}const Vi=Symbol('_vte'),Mi=e=>e.__isTeleport,Bi=e=>e&&(e.disabled||''===e.disabled),Fi=e=>e&&(e.defer||''===e.defer),Zi=e=>'undefined'!=typeof SVGElement&&e instanceof SVGElement,Hi=e=>'function'==typeof MathMLElement&&e instanceof MathMLElement,qi=(e,t)=>{const n=e&&e.to;if(Tt(n)){if(t){return t(n)}return null}return n},Ki={name:'Teleport',__isTeleport:!0,process(e,t,n,r,i,o,a,s,l,c){const{mc:u,pc:d,pbc:p,o:{insert:f,querySelector:h,createText:m,createComment:g}}=c,v=Bi(t.props);let{shapeFlag:y,children:b,dynamicChildren:w}=t;if(null==e){const e=t.el=m(''),c=t.anchor=m('');f(e,n,r),f(c,n,r);const d=(e,t)=>{16&y&&u(b,e,t,i,o,a,s,l)},p=()=>{const e=t.target=qi(t.props,h),n=Yi(e,t,m,f);e&&('svg'!==a&&Zi(e)?a='svg':'mathml'!==a&&Hi(e)&&(a='mathml'),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(e),v||(d(e,n),Ji(t,!1)))};v&&(d(n,c),Ji(t,!0)),Fi(t.props)?(t.el.__isMounted=!1,da((()=>{p(),delete t.el.__isMounted}),o)):p()}else{if(Fi(t.props)&&!1===e.el.__isMounted)return void da((()=>{Ki.process(e,t,n,r,i,o,a,s,l,c)}),o);t.el=e.el,t.targetStart=e.targetStart;const u=t.anchor=e.anchor,f=t.target=e.target,m=t.targetAnchor=e.targetAnchor,g=Bi(e.props),y=g?n:f,b=g?u:m;if('svg'===a||Zi(f)?a='svg':('mathml'===a||Hi(f))&&(a='mathml'),w?(p(e.dynamicChildren,w,y,i,o,a,s),ma(e,t,!0)):l||d(e,t,y,b,i,o,a,s,!1),v)g?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Gi(t,n,u,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=qi(t.props,h);e&&Gi(t,e,null,c,0)}else g&&Gi(t,f,m,c,1);Ji(t,v)}},remove(e,t,n,{um:r,o:{remove:i}},o){const{shapeFlag:a,children:s,anchor:l,targetStart:c,targetAnchor:u,target:d,props:p}=e;if(d&&(i(c),i(u)),o&&i(l),16&a){const e=o||!Bi(p);for(let i=0;i<s.length;i++){const o=s[i];r(o,t,n,e,!!o.dynamicChildren)}}},move:Gi,hydrate:function(e,t,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:l,insert:c,createText:u}},d){function p(e,t,l,c){t.anchor=d(a(e),t,s(e),n,r,i,o),t.targetStart=l,t.targetAnchor=c}const f=t.target=qi(t.props,l),h=Bi(t.props);if(f){const s=f._lpa||f.firstChild;if(16&t.shapeFlag)if(h)p(e,t,s,s&&a(s));else{t.anchor=a(e);let l=s;for(;l;){if(l&&8===l.nodeType)if('teleport start anchor'===l.data)t.targetStart=l;else if('teleport anchor'===l.data){t.targetAnchor=l,f._lpa=t.targetAnchor&&a(t.targetAnchor);break}l=a(l)}t.targetAnchor||Yi(f,t,u,c),d(s&&a(s),t,f,n,r,i,o)}Ji(t,h)}else h&&16&t.shapeFlag&&p(e,t,e,a(e));return t.anchor&&a(t.anchor)}};function Gi(e,t,n,{o:{insert:r},m:i},o=2){0===o&&r(e.targetAnchor,t,n);const{el:a,anchor:s,shapeFlag:l,children:c,props:u}=e,d=2===o;if(d&&r(a,t,n),(!d||Bi(u))&&16&l)for(let p=0;p<c.length;p++)i(c[p],t,n,2);d&&r(s,t,n)}const Wi=Ki;function Ji(e,t){const n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)1===r.nodeType&&r.setAttribute('data-v-owner',n.uid),r=r.nextSibling;n.ut()}}function Yi(e,t,n,r){const i=t.targetStart=n(''),o=t.targetAnchor=n('');return i[Vi]=o,e&&(r(i,e),r(o,e)),o}const Xi=Symbol('_leaveCb'),Qi=Symbol('_enterCb');const eo=[Function,Array],to={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:eo,onEnter:eo,onAfterEnter:eo,onEnterCancelled:eo,onBeforeLeave:eo,onLeave:eo,onAfterLeave:eo,onLeaveCancelled:eo,onBeforeAppear:eo,onAppear:eo,onAfterAppear:eo,onAppearCancelled:eo},no=e=>{const t=e.subTree;return t.component?no(t.component):t},ro={name:'BaseTransition',props:to,setup(e,{slots:t}){const n=cs(),r=function(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Eo((()=>{e.isMounted=!0})),$o((()=>{e.isUnmounting=!0})),e}();return()=>{const i=t.default&&po(t.default(),!0);if(!i||!i.length)return;const o=io(i),a=Rr(e),{mode:s}=a;if(r.isLeaving)return lo(o);const l=co(o);if(!l)return lo(o);let c=so(l,a,r,n,(e=>c=e));l.type!==ja&&uo(l,c);let u=n.subTree&&co(n.subTree);if(u&&u.type!==ja&&!Ha(u,l)&&no(n).type!==ja){let e=so(u,a,r,n);if(uo(u,e),'out-in'===s&&l.type!==ja)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,8&n.job.flags||n.update(),delete e.afterLeave,u=void 0},lo(o);'in-out'===s&&l.type!==ja?e.delayLeave=(e,t,n)=>{ao(r,u)[String(u.key)]=u,e[Xi]=()=>{t(),e[Xi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{n(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return o}}};function io(e){let t=e[0];if(e.length>1)for(const n of e)if(n.type!==ja){t=n;break}return t}const oo=ro;function ao(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function so(e,t,n,r,i){const{appear:o,mode:a,persisted:s=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:p,onLeave:f,onAfterLeave:h,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=t,w=String(e.key),k=ao(n,e),x=(e,t)=>{e&&ci(e,r,9,t)},S=(e,t)=>{const n=t[1];x(e,t),St(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},E={mode:a,persisted:s,beforeEnter(t){let r=l;if(!n.isMounted){if(!o)return;r=g||l}t[Xi]&&t[Xi](!0);const i=k[w];i&&Ha(e,i)&&i.el[Xi]&&i.el[Xi](),x(r,[t])},enter(e){let t=c,r=u,i=d;if(!n.isMounted){if(!o)return;t=v||c,r=y||u,i=b||d}let a=!1;const s=e[Qi]=t=>{a||(a=!0,x(t?i:r,[e]),E.delayedLeave&&E.delayedLeave(),e[Qi]=void 0)};t?S(t,[e,s]):s()},leave(t,r){const i=String(e.key);if(t[Qi]&&t[Qi](!0),n.isUnmounting)return r();x(p,[t]);let o=!1;const a=t[Xi]=n=>{o||(o=!0,r(),x(n?m:h,[t]),t[Xi]=void 0,k[i]===e&&delete k[i])};k[i]=e,f?S(f,[t,a]):a()},clone(e){const o=so(e,t,n,r,i);return i&&i(o),o}};return E}function lo(e){if(bo(e))return(e=Ya(e)).children=null,e}function co(e){if(!bo(e))return Mi(e.type)&&e.children?io(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(16&t)return n[0];if(32&t&&It(n.default))return n.default()}}function uo(e,t){6&e.shapeFlag&&e.component?(e.transition=t,uo(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function po(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let a=e[o];const s=null==n?a.key:String(n)+String(null!=a.key?a.key:o);a.type===Na?(128&a.patchFlag&&i++,r=r.concat(po(a.children,t,s))):(t||a.type!==ja)&&r.push(null!=s?Ya(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function fo(e,t){return It(e)?(()=>_t({name:e.name},t,{setup:e}))():e}function ho(e){const t=cs(),n=Br(null);if(t){const r=t.refs===ht?t.refs={}:t.refs;Object.defineProperty(r,e,{enumerable:!0,get:()=>n.value,set:e=>n.value=e})}return n}const mo=new WeakMap;function go(e,t,n,r,i=!1){if(St(e))return void e.forEach(((e,o)=>go(e,t&&(St(t)?t[o]:t),n,r,i)));if(yo(r)&&!i)return void(512&r.shapeFlag&&r.type.__asyncResolved&&r.component.subTree.component&&go(e,t,n,r.component.subTree));const o=4&r.shapeFlag?_s(r.component):r.el,a=i?null:o,{i:s,r:l}=e,c=t&&t.r,u=s.refs===ht?s.refs={}:s.refs,d=s.setupState,p=Rr(d),f=d===ht?vt:e=>xt(p,e);if(null!=c&&c!==l)if(vo(t),Tt(c))u[c]=null,f(c)&&(d[c]=null);else if(Vr(c)){c.value=null;const e=t;e.k&&(u[e.k]=null)}if(It(l))li(l,s,12,[a,u]);else{const t=Tt(l),r=Vr(l);if(t||r){const s=()=>{if(e.f){const n=t?f(l)?d[l]:u[l]:l.value;if(i)St(n)&&wt(n,o);else if(St(n))n.includes(o)||n.push(o);else if(t)u[l]=[o],f(l)&&(d[l]=u[l]);else{const t=[o];l.value=t,e.k&&(u[e.k]=t)}}else t?(u[l]=a,f(l)&&(d[l]=a)):r&&(l.value=a,e.k&&(u[e.k]=a))};if(a){const t=()=>{s(),mo.delete(e)};t.id=-1,mo.set(e,t),da(t,n)}else vo(e),s()}}}function vo(e){const t=mo.get(e);t&&(t.flags|=8,mo.delete(e))}Jt().requestIdleCallback,Jt().cancelIdleCallback;const yo=e=>!!e.type.__asyncLoader,bo=e=>e.type.__isKeepAlive;function _o(e,t){!function(e,t,n=ls){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(ko(t,r,n),n){let e=n.parent;for(;e&&e.parent;)bo(e.parent.vnode)&&wo(r,t,n,e),e=e.parent}}(e,'a',t)}function wo(e,t,n,r){const i=ko(t,e,r,!0);Oo((()=>{wt(r[t],i)}),n)}function ko(e,t,n=ls,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{Dn();const i=ps(n),o=ci(t,n,e,r);return i(),Rn(),o});return r?i.unshift(o):i.push(o),o}}const xo=e=>(t,n=ls)=>{ms&&'sp'!==e||ko(e,((...e)=>t(...e)),n)},So=xo('bm'),Eo=xo('m'),$o=xo('bum'),Oo=xo('um'),Io='components';function To(e,t){return No(Io,e,!0,t)||e}const Ao=Symbol.for('v-ndc');function Co(e){return Tt(e)?No(Io,e,!1)||e:e||Ao}function No(e,t,n=!0,r=!1){const i=ji||ls;if(i){const n=i.type;{const e=ws(n,!1);if(e&&(e===t||e===Vt(t)||e===Ft(Vt(t))))return n}const o=Po(i[e]||n[e],t)||Po(i.appContext[e],t);return!o&&r?n:o}}function Po(e,t){return e&&(e[t]||e[Vt(t)]||e[Ft(Vt(t))])}function jo(e,t,n,r){let i;const o=n,a=St(e);if(a||Tt(e)){let n=!1,r=!1;a&&Nr(e)&&(n=!jr(e),r=Pr(e),e=Wn(e)),i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(n?r?zr(Lr(e[a])):Lr(e[a]):e[a],a,void 0,o)}else if('number'==typeof e){i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,o)}else if(Ct(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,o)));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];i[r]=t(e[a],a,r,o)}}else i=[];return i}function Do(e,t,n={},r,i){if(ji.ce||ji.parent&&yo(ji.parent)&&ji.parent.ce){const e=Object.keys(n).length>0;return'default'!==t&&(n.name=t),La(),Fa(Na,null,[Wa('slot',n,r&&r())],e?-2:64)}let o=e[t];o&&o._c&&(o._d=!1),La();const a=o&&Ro(o(n)),s=n.key||a&&a.key,l=Fa(Na,{key:(s&&!At(s)?s:`_${t}`)+(!a&&r?'_fb':'')},a||(r?r():[]),a&&1===e._?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+'-s']),o&&o._c&&(o._d=!0),l}function Ro(e){return e.some((e=>!Za(e)||e.type!==ja&&!(e.type===Na&&!Ro(e.children))))?e:null}function Uo(e,t){const n={};for(const r in e)n[Zt(r)]=e[r];return n}const Lo=e=>e?hs(e)?_s(e):Lo(e.parent):null,zo=_t(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Lo(e.parent),$root:e=>Lo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>e.type,$forceUpdate:e=>e.f||(e.f=()=>{bi(e.update)}),$nextTick:e=>e.n||(e.n=yi.bind(e.proxy)),$watch:e=>gt}),Vo=(e,t)=>e!==ht&&!e.__isScriptSetup&&xt(e,t),Mo={get({_:e},t){if('__v_skip'===t)return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let c;if('$'!==t[0]){const s=a[t];if(void 0!==s)switch(s){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(Vo(r,t))return a[t]=1,r[t];if(i!==ht&&xt(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&xt(c,t))return a[t]=3,o[t];if(n!==ht&&xt(n,t))return a[t]=4,n[t];a[t]=0}}const u=zo[t];let d,p;return u?('$attrs'===t&&qn(e.attrs,0,''),u(e)):(d=s.__cssModules)&&(d=d[t])?d:n!==ht&&xt(n,t)?(a[t]=4,n[t]):(p=l.config.globalProperties,xt(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return Vo(i,t)?(i[t]=n,!0):r!==ht&&xt(r,t)?(r[t]=n,!0):!xt(e.props,t)&&(('$'!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o,type:a}},s){let l,c;return!!(n[s]||e!==ht&&'$'!==s[0]&&xt(e,s)||Vo(t,s)||(l=o[0])&&xt(l,s)||xt(r,s)||xt(zo,s)||xt(i.config.globalProperties,s)||(c=a.__cssModules)&&c[s])},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:xt(n,'value')&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Bo(e){const t=cs();return t.setupContext||(t.setupContext=bs(t))}function Fo(e){return St(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}function Zo(e,t){return e&&t?St(e)&&St(t)?e.concat(t):_t({},Fo(e),Fo(t)):e||t}function Ho(){return{app:null,config:{isNativeTag:vt,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qo=0;function Ko(e,t){return function(t,n=null){It(t)||(t=_t({},t)),null==n||Ct(n)||(n=null);const r=Ho(),i=new WeakSet,o=[];let a=!1;const s=r.app={_uid:qo++,_component:t,_props:n,_container:null,_context:r,_instance:null,version:Ss,get config(){return r.config},set config(e){},use:(e,...t)=>(i.has(e)||(e&&It(e.install)?(i.add(e),e.install(s,...t)):It(e)&&(i.add(e),e(s,...t))),s),mixin:e=>s,component:(e,t)=>t?(r.components[e]=t,s):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,s):r.directives[e],mount(i,o,l){if(!a){const o=s._ceVNode||Wa(t,n);return o.appContext=r,!0===l?l='svg':!1===l&&(l=void 0),e(o,i,l),a=!0,s._container=i,i.__vue_app__=s,s._instance=o.component,function(e,t){Ii('app:init',e,t,{Fragment:Na,Text:Pa,Comment:ja,Static:Da})}(s,Ss),_s(o.component)}},onUnmount(e){o.push(e)},unmount(){a&&(ci(o,s._instance,16),e(null,s._container),s._instance=null,function(e){Ii('app:unmount',e)}(s),delete s._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,s),runWithContext(e){const t=Go;Go=s;try{return e()}finally{Go=t}}};return s}}let Go=null;function Wo(e,t){if(ls){let n=ls.provides;const r=ls.parent&&ls.parent.provides;r===n&&(n=ls.provides=Object.create(r)),n[e]=t}else;}function Jo(e,t,n=!1){const r=cs();if(r||Go){let i=Go?Go._context.provides:r?null==r.parent||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&It(t)?t.call(r&&r.proxy):t}}function Yo(){return!(!cs()&&!Go)}const Xo={},Qo=()=>Object.create(Xo),ea=e=>Object.getPrototypeOf(e)===Xo;function ta(e,t,n,r){const[i,o]=e.propsOptions;let a,s=!1;if(t)for(let l in t){if(Ut(l))continue;const c=t[l];let u;i&&xt(i,u=Vt(l))?o&&o.includes(u)?(a||(a={}))[u]=c:n[u]=c:$a(e.emitsOptions,l)||l in r&&c===r[l]||(r[l]=c,s=!0)}if(o){const t=Rr(n),r=a||ht;for(let a=0;a<o.length;a++){const s=o[a];n[s]=na(i,t,s,r[s],e,!xt(r,s))}}return s}function na(e,t,n,r,i,o){const a=e[n];if(null!=a){const e=xt(a,'default');if(e&&void 0===r){const e=a.default;if(a.type!==Function&&!a.skipFactory&&It(e)){const{propsDefaults:o}=i;if(n in o)r=o[n];else{const a=ps(i);r=o[n]=e.call(null,t),a()}}else r=e;i.ce&&i.ce._setProp(n,r)}a[0]&&(o&&!e?r=!1:!a[1]||''!==r&&r!==Bt(n)||(r=!0))}return r}function ra(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,a={},s=[];if(!o)return Ct(e)&&r.set(e,mt),mt;if(St(o))for(let c=0;c<o.length;c++){const e=Vt(o[c]);ia(e)&&(a[e]=ht)}else if(o)for(const c in o){const e=Vt(c);if(ia(e)){const t=o[c],n=a[e]=St(t)||It(t)?{type:t}:_t({},t),r=n.type;let i=!1,l=!0;if(St(r))for(let e=0;e<r.length;++e){const t=r[e],n=It(t)&&t.name;if('Boolean'===n){i=!0;break}'String'===n&&(l=!1)}else i=It(r)&&'Boolean'===r.name;n[0]=i,n[1]=l,(i||xt(n,'default'))&&s.push(e)}}const l=[a,s];return Ct(e)&&r.set(e,l),l}function ia(e){return'$'!==e[0]&&!Ut(e)}const oa=e=>'_'===e||'_ctx'===e||'$stable'===e,aa=e=>St(e)?e.map(ts):[ts(e)],sa=(e,t,n)=>{if(t._n)return t;const r=Ui(((...e)=>aa(t(...e))),n);return r._c=!1,r},la=(e,t,n)=>{const r=e._ctx;for(const i in e){if(oa(i))continue;const n=e[i];if(It(n))t[i]=sa(0,n,r);else if(null!=n){const e=aa(n);t[i]=()=>e}}},ca=(e,t)=>{const n=aa(t);e.slots.default=()=>n},ua=(e,t,n)=>{for(const r in t)!n&&oa(r)||(e[r]=t[r])},da=function(e,t){t&&t.pendingBranch?St(e)?t.effects.push(...e):t.effects.push(e):(St(n=e)?fi.push(...n):hi&&-1===n.id?hi.splice(mi+1,0,n):1&n.flags||(fi.push(n),n.flags|=1),_i());var n};function pa(e){return function(e){const t=Jt();t.__VUE__=!0,Ti(t.__VUE_DEVTOOLS_GLOBAL_HOOK__,t);const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:s,setText:l,setElementText:c,parentNode:u,nextSibling:d,setScopeId:p=gt,insertStaticContent:f}=e,h=(e,t,n,r=null,i=null,o=null,a=void 0,s=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Ha(e,t)&&(r=H(e),V(e,i,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case Pa:m(e,t,n,r);break;case ja:g(e,t,n,r);break;case Da:null==e&&v(t,n,r,a);break;case Na:T(e,t,n,r,i,o,a,s,l);break;default:1&d?w(e,t,n,r,i,o,a,s,l):6&d?A(e,t,n,r,i,o,a,s,l):(64&d||128&d)&&c.process(e,t,n,r,i,o,a,s,l,G)}null!=u&&i?go(u,e&&e.ref,o,t||e,!t):null==u&&e&&null!=e.ref&&go(e.ref,null,o,e,!0)},m=(e,t,r,i)=>{if(null==e)n(t.el=a(t.children),r,i);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},g=(e,t,r,i)=>{null==e?n(t.el=s(t.children||''),r,i):t.el=e.el},v=(e,t,n,r)=>{[e.el,e.anchor]=f(e.children,t,n,r,e.el,e.anchor)},y=({el:e,anchor:t},r,i)=>{let o;for(;e&&e!==t;)o=d(e),n(e,r,i),e=o;n(t,r,i)},b=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=d(e),r(e),e=n;r(t)},w=(e,t,n,r,i,o,a,s,l)=>{'svg'===t.type?a='svg':'math'===t.type&&(a='mathml'),null==e?k(t,n,r,i,o,a,s,l):E(e,t,i,o,a,s,l)},k=(e,t,r,a,s,l,u,d)=>{let p,f;const{props:h,shapeFlag:m,transition:g,dirs:v}=e;if(p=e.el=o(e.type,l,h&&h.is,h),8&m?c(p,e.children):16&m&&S(e.children,p,null,a,s,fa(e,l),u,d),v&&zi(e,null,a,'created'),x(p,e,e.scopeId,u,a),h){for(const e in h)'value'===e||Ut(e)||i(p,e,null,h[e],l,a);'value'in h&&i(p,'value',null,h.value,l),(f=h.onVnodeBeforeMount)&&os(f,a,e)}Kt(p,'__vnode',e,!0),Kt(p,'__vueParentComponent',a,!0),v&&zi(e,null,a,'beforeMount');const y=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(s,g);y&&g.beforeEnter(p),n(p,t,r),((f=h&&h.onVnodeMounted)||y||v)&&da((()=>{f&&os(f,a,e),y&&g.enter(p),v&&zi(e,null,a,'mounted')}),s)},x=(e,t,n,r,i)=>{if(n&&p(e,n),r)for(let o=0;o<r.length;o++)p(e,r[o]);if(i){let n=i.subTree;if(t===n||Ca(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=i.vnode;x(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},S=(e,t,n,r,i,o,a,s,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=s?ns(e[c]):ts(e[c]);h(null,l,t,n,r,i,o,a,s)}},E=(e,t,n,r,o,a,s)=>{const l=t.el=e.el;l.__vnode=t;let{patchFlag:u,dynamicChildren:d,dirs:p}=t;u|=16&e.patchFlag;const f=e.props||ht,h=t.props||ht;let m;if(n&&ha(n,!1),(m=h.onVnodeBeforeUpdate)&&os(m,n,t,e),p&&zi(t,e,n,'beforeUpdate'),n&&ha(n,!0),(f.innerHTML&&null==h.innerHTML||f.textContent&&null==h.textContent)&&c(l,''),d?O(e.dynamicChildren,d,l,n,r,fa(t,o),a):s||D(e,t,l,null,n,r,fa(t,o),a,!1),u>0){if(16&u)I(l,f,h,n,o);else if(2&u&&f.class!==h.class&&i(l,'class',null,h.class,o),4&u&&i(l,'style',f.style,h.style,o),8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const r=e[t],a=f[r],s=h[r];s===a&&'value'!==r||i(l,r,a,s,o,n)}}1&u&&e.children!==t.children&&c(l,t.children)}else s||null!=d||I(l,f,h,n,o);((m=h.onVnodeUpdated)||p)&&da((()=>{m&&os(m,n,t,e),p&&zi(t,e,n,'updated')}),r)},O=(e,t,n,r,i,o,a)=>{for(let s=0;s<t.length;s++){const l=e[s],c=t[s],d=l.el&&(l.type===Na||!Ha(l,c)||198&l.shapeFlag)?u(l.el):n;h(l,c,d,null,r,i,o,a,!0)}},I=(e,t,n,r,o)=>{if(t!==n){if(t!==ht)for(const a in t)Ut(a)||a in n||i(e,a,t[a],null,o,r);for(const a in n){if(Ut(a))continue;const s=n[a],l=t[a];s!==l&&'value'!==a&&i(e,a,l,s,o,r)}'value'in n&&i(e,'value',t.value,n.value,o)}},T=(e,t,r,i,o,s,l,c,u)=>{const d=t.el=e?e.el:a(''),p=t.anchor=e?e.anchor:a('');let{patchFlag:f,dynamicChildren:h,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(n(d,r,i),n(p,r,i),S(t.children||[],r,p,o,s,l,c,u)):f>0&&64&f&&h&&e.dynamicChildren?(O(e.dynamicChildren,h,r,o,s,l,c),(null!=t.key||o&&t===o.subTree)&&ma(e,t,!0)):D(e,t,r,p,o,s,l,c,u)},A=(e,t,n,r,i,o,a,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,l):C(t,n,r,i,o,a,l):N(e,t,l)},C=(e,t,n,r,i,o,a)=>{const s=e.component=function(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||as,o={uid:ss++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new mn(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:['',0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ra(r,i),emitsOptions:Ea(r,i),emit:null,emitted:null,propsDefaults:ht,inheritAttrs:r.inheritAttrs,ctx:ht,data:ht,props:ht,attrs:ht,slots:ht,refs:ht,setupState:ht,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=t?t.root:o,o.emit=Sa.bind(null,o),e.ce&&e.ce(o);return o}(e,r,i);if(bo(e)&&(s.ctx.renderer=G),function(e,t=!1,n=!1){t&&ds(t);const{props:r,children:i}=e.vnode,o=hs(e);(function(e,t,n,r=!1){const i={},o=Qo();e.propsDefaults=Object.create(null),ta(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:Ir(i):e.type.props?e.props=i:e.props=o,e.attrs=o})(e,r,o,t),((e,t,n)=>{const r=e.slots=Qo();if(32&e.vnode.shapeFlag){const e=t._;e?(ua(r,t,n),n&&Kt(r,'_',e,!0)):la(t,r)}else t&&ca(e,t)})(e,i,n||t);const a=o?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Mo);const{setup:r}=n;if(r){Dn();const n=e.setupContext=r.length>1?bs(e):null,i=ps(e),o=li(r,e,0,[e.props,n]),a=Nt(o);if(Rn(),i(),!a&&!e.sp||yo(e)||function(e){e.ids=[e.ids[0]+e.ids[2]+++'-',0,0]}(e),a){if(o.then(fs,fs),t)return o.then((t=>{gs(e,t)})).catch((t=>{ui(t,e,0)}));e.asyncDep=o}else gs(e,o)}else vs(e)}(e,t):void 0;t&&ds(!1)}(s,!1,a),s.asyncDep){if(i&&i.registerDep(s,P,a),!e.el){const r=s.subTree=Wa(ja);g(null,r,t,n),e.placeholder=r.el}}else P(s,e,t,n,i,o,a)},N=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||Aa(r,a,c):!!a);if(1024&l)return!0;if(16&l)return r?Aa(r,a,c):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!$a(c,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void j(r,t,n);r.next=t,r.update()}else t.el=e.el,r.vnode=t},P=(e,t,n,r,i,o,a)=>{const s=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:l,vnode:c}=e;{const n=ga(e);if(n)return t&&(t.el=c.el,j(e,t,a)),void n.asyncDep.then((()=>{e.isUnmounted||s()}))}let d,p=t;ha(e,!1),t?(t.el=c.el,j(e,t,a)):t=c,n&&qt(n),(d=t.props&&t.props.onVnodeBeforeUpdate)&&os(d,l,t,c),ha(e,!0);const f=Oa(e),m=e.subTree;e.subTree=f,h(m,f,u(m.el),H(m),e,i,o),t.el=f.el,null===p&&function({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}(e,f.el),r&&da(r,i),(d=t.props&&t.props.onVnodeUpdated)&&da((()=>os(d,l,t,c)),i),Ci(e)}else{let a;const{el:s,props:l}=t,{bm:c,m:u,parent:d,root:p,type:f}=e,m=yo(t);ha(e,!1),c&&qt(c),!m&&(a=l&&l.onVnodeBeforeMount)&&os(a,d,t),ha(e,!0);{p.ce&&!1!==p.ce._def.shadowRoot&&p.ce._injectChildStyle(f);const a=e.subTree=Oa(e);h(null,a,n,r,e,i,o),t.el=a.el}if(u&&da(u,i),!m&&(a=l&&l.onVnodeMounted)){const e=t;da((()=>os(a,d,e)),i)}(256&t.shapeFlag||d&&yo(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&da(e.a,i),e.isMounted=!0,Ai(e),t=n=r=null}};e.scope.on();const l=e.effect=new _n(s);e.scope.off();const c=e.update=l.run.bind(l),d=e.job=l.runIfDirty.bind(l);d.i=e,d.id=e.uid,l.scheduler=()=>bi(d),ha(e,!0),c()},j=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=Rr(i),[l]=e.propsOptions;let c=!1;if(!(r||a>0)||16&a){let r;ta(e,t,i,o)&&(c=!0);for(const o in s)t&&(xt(t,o)||(r=Bt(o))!==o&&xt(t,r))||(l?!n||void 0===n[o]&&void 0===n[r]||(i[o]=na(l,s,o,void 0,e,!0)):delete i[o]);if(o!==s)for(const e in o)t&&xt(t,e)||(delete o[e],c=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];if($a(e.emitsOptions,a))continue;const u=t[a];if(l)if(xt(o,a))u!==o[a]&&(o[a]=u,c=!0);else{const t=Vt(a);i[t]=na(l,s,t,u,e,!1)}else u!==o[a]&&(o[a]=u,c=!0)}}c&&Kn(e.attrs,'set','')}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,a=ht;if(32&r.shapeFlag){const e=t._;e?n&&1===e?o=!1:ua(i,t,n):(o=!t.$stable,la(t,i)),a=t}else t&&(ca(e,t),a={default:1});if(o)for(const s in i)oa(s)||null!=a[s]||delete i[s]})(e,t.children,n),Dn(),wi(e),Rn()},D=(e,t,n,r,i,o,a,s,l=!1)=>{const u=e&&e.children,d=e?e.shapeFlag:0,p=t.children,{patchFlag:f,shapeFlag:h}=t;if(f>0){if(128&f)return void U(u,p,n,r,i,o,a,s,l);if(256&f)return void R(u,p,n,r,i,o,a,s,l)}8&h?(16&d&&Z(u,i,o),p!==u&&c(n,p)):16&d?16&h?U(u,p,n,r,i,o,a,s,l):Z(u,i,o,!0):(8&d&&c(n,''),16&h&&S(p,n,r,i,o,a,s,l))},R=(e,t,n,r,i,o,a,s,l)=>{t=t||mt;const c=(e=e||mt).length,u=t.length,d=Math.min(c,u);let p;for(p=0;p<d;p++){const r=t[p]=l?ns(t[p]):ts(t[p]);h(e[p],r,n,null,i,o,a,s,l)}c>u?Z(e,i,o,!0,!1,d):S(t,n,r,i,o,a,s,l,d)},U=(e,t,n,r,i,o,a,s,l)=>{let c=0;const u=t.length;let d=e.length-1,p=u-1;for(;c<=d&&c<=p;){const r=e[c],u=t[c]=l?ns(t[c]):ts(t[c]);if(!Ha(r,u))break;h(r,u,n,null,i,o,a,s,l),c++}for(;c<=d&&c<=p;){const r=e[d],c=t[p]=l?ns(t[p]):ts(t[p]);if(!Ha(r,c))break;h(r,c,n,null,i,o,a,s,l),d--,p--}if(c>d){if(c<=p){const e=p+1,d=e<u?t[e].el:r;for(;c<=p;)h(null,t[c]=l?ns(t[c]):ts(t[c]),n,d,i,o,a,s,l),c++}}else if(c>p)for(;c<=d;)V(e[c],i,o,!0),c++;else{const f=c,m=c,g=new Map;for(c=m;c<=p;c++){const e=t[c]=l?ns(t[c]):ts(t[c]);null!=e.key&&g.set(e.key,c)}let v,y=0;const b=p-m+1;let w=!1,k=0;const x=new Array(b);for(c=0;c<b;c++)x[c]=0;for(c=f;c<=d;c++){const r=e[c];if(y>=b){V(r,i,o,!0);continue}let u;if(null!=r.key)u=g.get(r.key);else for(v=m;v<=p;v++)if(0===x[v-m]&&Ha(r,t[v])){u=v;break}void 0===u?V(r,i,o,!0):(x[u-m]=c+1,u>=k?k=u:w=!0,h(r,t[u],n,null,i,o,a,s,l),y++)}const S=w?function(e){const t=e.slice(),n=[0];let r,i,o,a,s;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,e[n[s]]<l?o=s+1:a=s;l<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];for(;o-- >0;)n[o]=a,a=t[a];return n}(x):mt;for(v=S.length-1,c=b-1;c>=0;c--){const e=m+c,d=t[e],p=t[e+1],f=e+1<u?p.el||p.placeholder:r;0===x[c]?h(null,d,n,f,i,o,a,s,l):w&&(v<0||c!==S[v]?L(d,n,f,2):v--)}}},L=(e,t,i,o,a=null)=>{const{el:s,type:l,transition:c,children:u,shapeFlag:d}=e;if(6&d)return void L(e.component.subTree,t,i,o);if(128&d)return void e.suspense.move(t,i,o);if(64&d)return void l.move(e,t,i,G);if(l===Na){n(s,t,i);for(let e=0;e<u.length;e++)L(u[e],t,i,o);return void n(e.anchor,t,i)}if(l===Da)return void y(e,t,i);if(2!==o&&1&d&&c)if(0===o)c.beforeEnter(s),n(s,t,i),da((()=>c.enter(s)),a);else{const{leave:o,delayLeave:a,afterLeave:l}=c,u=()=>{e.ctx.isUnmounted?r(s):n(s,t,i)},d=()=>{s._isLeaving&&s[Xi](!0),o(s,(()=>{u(),l&&l()}))};a?a(s,u,d):d()}else n(s,t,i)},V=(e,t,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:p,cacheIndex:f}=e;if(-2===d&&(i=!1),null!=s&&(Dn(),go(s,null,n,e,!0),Rn()),null!=f&&(t.renderCache[f]=void 0),256&u)return void t.ctx.deactivate(e);const h=1&u&&p,m=!yo(e);let g;if(m&&(g=a&&a.onVnodeBeforeUnmount)&&os(g,t,e),6&u)F(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);h&&zi(e,null,t,'beforeUnmount'),64&u?e.type.remove(e,t,n,G,r):c&&!c.hasOnce&&(o!==Na||d>0&&64&d)?Z(c,t,n,!1,!0):(o===Na&&384&d||!i&&16&u)&&Z(l,t,n),r&&M(e)}(m&&(g=a&&a.onVnodeUnmounted)||h)&&da((()=>{g&&os(g,t,e),h&&zi(e,null,t,'unmounted')}),n)},M=e=>{const{type:t,el:n,anchor:i,transition:o}=e;if(t===Na)return void B(n,i);if(t===Da)return void b(e);const a=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:r}=o,i=()=>t(n,a);r?r(e.el,a,i):i()}else a()},B=(e,t)=>{let n;for(;e!==t;)n=d(e),r(e),e=n;r(t)},F=(e,t,n)=>{const{bum:r,scope:i,job:o,subTree:a,um:s,m:l,a:c}=e;var u;va(l),va(c),r&&qt(r),i.stop(),o&&(o.flags|=8,V(a,e,t,n)),s&&da(s,t),da((()=>{e.isUnmounted=!0}),t),u=e,Ei&&'function'==typeof Ei.cleanupBuffer&&!Ei.cleanupBuffer(u)&&Ni(u)},Z=(e,t,n,r=!1,i=!1,o=0)=>{for(let a=o;a<e.length;a++)V(e[a],t,n,r,i)},H=e=>{if(6&e.shapeFlag)return H(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=d(e.anchor||e.el),n=t&&t[Vi];return n?d(n):t};let q=!1;const K=(e,t,n)=>{null==e?t._vnode&&V(t._vnode,null,null,!0):h(t._vnode||null,e,t,null,null,null,n),t._vnode=e,q||(q=!0,wi(),ki(),q=!1)},G={p:h,um:V,m:L,r:M,mt:C,mc:S,pc:D,pbc:O,n:H,o:e};let W;return{render:K,hydrate:W,createApp:Ko(K)}}(e)}function fa({type:e,props:t},n){return'svg'===n&&'foreignObject'===e||'mathml'===n&&'annotation-xml'===e&&t&&t.encoding&&t.encoding.includes('html')?void 0:n}function ha({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ma(e,t,n=!1){const r=e.children,i=t.children;if(St(r)&&St(i))for(let o=0;o<r.length;o++){const e=r[o];let t=i[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[o]=ns(i[o]),t.el=e.el),n||-2===t.patchFlag||ma(e,t)),t.type===Pa&&-1!==t.patchFlag&&(t.el=e.el),t.type!==ja||t.el||(t.el=e.el)}}function ga(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ga(t)}function va(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ya=Symbol.for('v-scx');function ba(e,t){return wa(e,null,t)}function _a(e,t,n){return wa(e,t,n)}function wa(e,t,n=ht){const{immediate:r,deep:i,flush:o,once:a}=n,s=_t({},n),l=t&&r||!t&&'post'!==o;let c;if(ms)if('sync'===o){const e=Jo(ya);c=e.__watcherHandles||(e.__watcherHandles=[])}else if(!l){const e=()=>{};return e.stop=gt,e.resume=gt,e.pause=gt,e}const u=ls;s.call=(e,t,n)=>ci(e,u,t,n);let d=!1;'post'===o?s.scheduler=e=>{da(e,u&&u.suspense)}:'sync'!==o&&(d=!0,s.scheduler=(e,t)=>{t?e():bi(e)}),s.augmentJob=e=>{t&&(e.flags|=4),d&&(e.flags|=2,u&&(e.id=u.uid,e.i=u))};const p=ai(e,t,s);return ms&&(c?c.push(p):l&&p()),p}function ka(e,t,n=ht){const r=cs(),i=Vt(t),o=Bt(t),a=xa(e,i),s=Jr(((a,s)=>{let l,c,u=ht;return wa((()=>{const t=e[i];Ht(l,t)&&(l=t,s())}),null,{flush:'sync'}),{get:()=>(a(),n.get?n.get(l):l),set(e){const a=n.set?n.set(e):e;if(!(Ht(a,l)||u!==ht&&Ht(e,u)))return;const d=r.vnode.props;d&&(t in d||i in d||o in d)&&(`onUpdate:${t}`in d||`onUpdate:${i}`in d||`onUpdate:${o}`in d)||(l=e,s()),r.emit(`update:${t}`,a),Ht(e,a)&&Ht(e,u)&&!Ht(a,c)&&s(),u=e,c=a}}}));return s[Symbol.iterator]=()=>{let e=0;return{next:()=>e<2?{value:e++?a||ht:s,done:!1}:{done:!0}}},s}const xa=(e,t)=>'modelValue'===t||'model-value'===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${Vt(t)}Modifiers`]||e[`${Bt(t)}Modifiers`];function Sa(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ht;let i=n;const o=t.startsWith('update:'),a=o&&xa(r,t.slice(7));let s;a&&(a.trim&&(i=n.map((e=>Tt(e)?e.trim():e))),a.number&&(i=n.map(Gt))),function(e,t,n){Ii('component:emit',e.appContext.app,e,t,n)}(e,t,i);let l=r[s=Zt(t)]||r[s=Zt(Vt(t))];!l&&o&&(l=r[s=Zt(Bt(t))]),l&&ci(l,e,6,i);const c=r[s+'Once'];if(c){if(e.emitted){if(e.emitted[s])return}else e.emitted={};e.emitted[s]=!0,ci(c,e,6,i)}}function Ea(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const o=e.emits;let a={};return o?(St(o)?o.forEach((e=>a[e]=null)):_t(a,o),Ct(e)&&r.set(e,a),a):(Ct(e)&&r.set(e,null),null)}function $a(e,t){return!(!e||!yt(t))&&(t=t.slice(2).replace(/Once$/,''),xt(e,t[0].toLowerCase()+t.slice(1))||xt(e,Bt(t))||xt(e,t))}function Oa(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:a,attrs:s,emit:l,render:c,renderCache:u,props:d,data:p,setupState:f,ctx:h,inheritAttrs:m}=e,g=Ri(e);let v,y;try{if(4&n.shapeFlag){const e=i||r,t=e;v=ts(c.call(t,e,u,d,f,p,h)),y=s}else{const e=t;0,v=ts(e.length>1?e(d,{attrs:s,slots:a,emit:l}):e(d,null)),y=t.props?s:Ia(s)}}catch(w){Ra.length=0,ui(w,e,1),v=Wa(ja)}let b=v;if(y&&!1!==m){const e=Object.keys(y),{shapeFlag:t}=b;e.length&&7&t&&(o&&e.some(bt)&&(y=Ta(y,o)),b=Ya(b,y,!1,!0))}return n.dirs&&(b=Ya(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&uo(b,n.transition),v=b,Ri(g),v}const Ia=e=>{let t;for(const n in e)('class'===n||'style'===n||yt(n))&&((t||(t={}))[n]=e[n]);return t},Ta=(e,t)=>{const n={};for(const r in e)bt(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Aa(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!$a(n,o))return!0}return!1}const Ca=e=>e.__isSuspense;const Na=Symbol.for('v-fgt'),Pa=Symbol.for('v-txt'),ja=Symbol.for('v-cmt'),Da=Symbol.for('v-stc'),Ra=[];let Ua=null;function La(e=!1){Ra.push(Ua=e?null:[])}let za=1;function Va(e,t=!1){za+=e,e<0&&Ua&&t&&(Ua.hasOnce=!0)}function Ma(e){return e.dynamicChildren=za>0?Ua||mt:null,Ra.pop(),Ua=Ra[Ra.length-1]||null,za>0&&Ua&&Ua.push(e),e}function Ba(e,t,n,r,i,o){return Ma(Ga(e,t,n,r,i,o,!0))}function Fa(e,t,n,r,i){return Ma(Wa(e,t,n,r,i,!0))}function Za(e){return!!e&&!0===e.__v_isVNode}function Ha(e,t){return e.type===t.type&&e.key===t.key}const qa=({key:e})=>null!=e?e:null,Ka=({ref:e,ref_key:t,ref_for:n})=>('number'==typeof e&&(e=''+e),null!=e?Tt(e)||Vr(e)||It(e)?{i:ji,r:e,k:t,f:!!n}:e:null);function Ga(e,t=null,n=null,r=0,i=null,o=(e===Na?0:1),a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qa(t),ref:t&&Ka(t),scopeId:Di,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ji};return s?(rs(l,n),128&o&&e.normalize(l)):n&&(l.shapeFlag|=Tt(n)?8:16),za>0&&!a&&Ua&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&Ua.push(l),l}const Wa=function(e,t=null,n=null,r=0,i=null,o=!1){e&&e!==Ao||(e=ja);if(Za(e)){const r=Ya(e,t,!0);return n&&rs(r,n),za>0&&!o&&Ua&&(6&r.shapeFlag?Ua[Ua.indexOf(e)]=r:Ua.push(r)),r.patchFlag=-2,r}(function(e){return It(e)&&'__vccOpts'in e})(e)&&(e=e.__vccOpts);if(t){t=Ja(t);let{class:e,style:n}=t;e&&!Tt(e)&&(t.class=nn(e)),Ct(n)&&(Dr(n)&&!St(n)&&(n=_t({},n)),t.style=Yt(n))}const a=Tt(e)?1:Ca(e)?128:Mi(e)?64:Ct(e)?4:It(e)?2:0;return Ga(e,t,n,r,i,a,o,!0)};function Ja(e){return e?Dr(e)||ea(e)?_t({},e):e:null}function Ya(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:a,children:s,transition:l}=e,c=t?is(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&qa(c),ref:t&&t.ref?n&&o?St(o)?o.concat(Ka(t)):[o,Ka(t)]:Ka(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Na?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ya(e.ssContent),ssFallback:e.ssFallback&&Ya(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&uo(u,l.clone(u)),u}function Xa(e=' ',t=0){return Wa(Pa,null,e,t)}function Qa(e,t){const n=Wa(Da,null,e);return n.staticCount=t,n}function es(e='',t=!1){return t?(La(),Fa(ja,null,e)):Wa(ja,null,e)}function ts(e){return null==e||'boolean'==typeof e?Wa(ja):St(e)?Wa(Na,null,e.slice()):Za(e)?ns(e):Wa(Pa,null,String(e))}function ns(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Ya(e)}function rs(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(St(t))n=16;else if('object'==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),rs(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||ea(t)?3===r&&ji&&(1===ji.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=ji}}else It(t)?(t={default:t,_ctx:ji},n=32):(t=String(t),64&r?(n=16,t=[Xa(t)]):n=8);e.children=t,e.shapeFlag|=n}function is(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if('class'===e)t.class!==r.class&&(t.class=nn([t.class,r.class]));else if('style'===e)t.style=Yt([t.style,r.style]);else if(yt(e)){const n=t[e],i=r[e];!i||n===i||St(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else''!==e&&(t[e]=r[e])}return t}function os(e,t,n,r=null){ci(e,t,7,[n,r])}const as=Ho();let ss=0;let ls=null;const cs=()=>ls||ji;let us,ds;{const e=Jt(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach((t=>t(e))):r[0](e)}};us=t('__VUE_INSTANCE_SETTERS__',(e=>ls=e)),ds=t('__VUE_SSR_SETTERS__',(e=>ms=e))}const ps=e=>{const t=ls;return us(e),e.scope.on(),()=>{e.scope.off(),us(t)}},fs=()=>{ls&&ls.scope.off(),us(null)};function hs(e){return 4&e.vnode.shapeFlag}let ms=!1;function gs(e,t,n){It(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ct(t)&&(e.devtoolsRawSetupState=t,e.setupState=Gr(t)),vs(e)}function vs(e,t,n){const r=e.type;e.render||(e.render=r.render||gt)}const ys={get:(e,t)=>(qn(e,0,''),e[t])};function bs(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,ys),slots:e.slots,emit:e.emit,expose:t}}function _s(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Gr(Ur(e.exposed)),{get:(t,n)=>n in t?t[n]:n in zo?zo[n](e):void 0,has:(e,t)=>t in e||t in zo})):e.proxy}function ws(e,t=!0){return It(e)?e.displayName||e.name:e.name||t&&e.__name}const ks=(e,t)=>{const n=function(e,t,n=!1){let r,i;return It(e)?r=e:(r=e.get,i=e.set),new ni(r,i,n)}(e,0,ms);return n};function xs(e,t,n){try{Va(-1);const r=arguments.length;return 2===r?Ct(t)&&!St(t)?Za(t)?Wa(e,null,[t]):Wa(e,t):Wa(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Za(n)&&(n=[n]),Wa(e,t,n))}finally{Va(1)}}const Ss='3.5.22';
/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Es;const $s='undefined'!=typeof window&&window.trustedTypes;if($s)try{Es=$s.createPolicy('vue',{createHTML:e=>e})}catch(UJ){}const Os=Es?e=>Es.createHTML(e):e=>e,Is='undefined'!=typeof document?document:null,Ts=Is&&Is.createElement('template'),As={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i='svg'===t?Is.createElementNS('http://www.w3.org/2000/svg',e):'mathml'===t?Is.createElementNS('http://www.w3.org/1998/Math/MathML',e):n?Is.createElement(e,{is:n}):Is.createElement(e);return'select'===e&&r&&null!=r.multiple&&i.setAttribute('multiple',r.multiple),i},createText:e=>Is.createTextNode(e),createComment:e=>Is.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Is.querySelector(e),setScopeId(e,t){e.setAttribute(t,'')},insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==o&&(i=i.nextSibling););else{Ts.innerHTML=Os('svg'===r?`<svg>${e}</svg>`:'mathml'===r?`<math>${e}</math>`:e);const i=Ts.content;if('svg'===r||'mathml'===r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Cs='transition',Ns='animation',Ps=Symbol('_vtc'),js={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ds=_t({},to,js),Rs=e=>(e.displayName='Transition',e.props=Ds,e),Us=Rs(((e,{slots:t})=>xs(oo,function(e){const t={};for(const A in e)A in js||(t[A]=e[A]);if(!1===e.css)return t;const{name:n='v',type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:c=a,appearToClass:u=s,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,h=function(e){if(null==e)return null;if(Ct(e))return[Vs(e.enter),Vs(e.leave)];{const t=Vs(e);return[t,t]}}(i),m=h&&h[0],g=h&&h[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:b,onLeave:w,onLeaveCancelled:k,onBeforeAppear:x=v,onAppear:S=y,onAppearCancelled:E=b}=t,O=(e,t,n,r)=>{e._enterCancelled=r,Bs(e,t?u:s),Bs(e,t?c:a),n&&n()},I=(e,t)=>{e._isLeaving=!1,Bs(e,d),Bs(e,f),Bs(e,p),t&&t()},T=e=>(t,n)=>{const i=e?S:y,a=()=>O(t,e,n);Ls(i,[t,a]),Fs((()=>{Bs(t,e?l:o),Ms(t,e?u:s),zs(i)||Hs(t,r,m,a)}))};return _t(t,{onBeforeEnter(e){Ls(v,[e]),Ms(e,o),Ms(e,a)},onBeforeAppear(e){Ls(x,[e]),Ms(e,l),Ms(e,c)},onEnter:T(!1),onAppear:T(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>I(e,t);Ms(e,d),e._enterCancelled?(Ms(e,p),Gs(e)):(Gs(e),Ms(e,p)),Fs((()=>{e._isLeaving&&(Bs(e,d),Ms(e,f),zs(w)||Hs(e,r,g,n))})),Ls(w,[e,n])},onEnterCancelled(e){O(e,!1,void 0,!0),Ls(b,[e])},onAppearCancelled(e){O(e,!0,void 0,!0),Ls(E,[e])},onLeaveCancelled(e){I(e),Ls(k,[e])}})}(e),t))),Ls=(e,t=[])=>{St(e)?e.forEach((e=>e(...t))):e&&e(...t)},zs=e=>!!e&&(St(e)?e.some((e=>e.length>1)):e.length>1);function Vs(e){const t=(e=>{const t=Tt(e)?Number(e):NaN;return isNaN(t)?e:t})(e);return t}function Ms(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e[Ps]||(e[Ps]=new Set)).add(t)}function Bs(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const n=e[Ps];n&&(n.delete(t),n.size||(e[Ps]=void 0))}function Fs(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Zs=0;function Hs(e,t,n,r){const i=e._endId=++Zs,o=()=>{i===e._endId&&r()};if(null!=n)return setTimeout(o,n);const{type:a,timeout:s,propCount:l}=function(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||'').split(', '),i=r(`${Cs}Delay`),o=r(`${Cs}Duration`),a=qs(i,o),s=r(`${Ns}Delay`),l=r(`${Ns}Duration`),c=qs(s,l);let u=null,d=0,p=0;t===Cs?a>0&&(u=Cs,d=a,p=o.length):t===Ns?c>0&&(u=Ns,d=c,p=l.length):(d=Math.max(a,c),u=d>0?a>c?Cs:Ns:null,p=u?u===Cs?o.length:l.length:0);const f=u===Cs&&/\b(?:transform|all)(?:,|$)/.test(r(`${Cs}Property`).toString());return{type:u,timeout:d,propCount:p,hasTransform:f}}(e,t);if(!a)return r();const c=a+'end';let u=0;const d=()=>{e.removeEventListener(c,p),o()},p=t=>{t.target===e&&++u>=l&&d()};setTimeout((()=>{u<l&&d()}),s+1),e.addEventListener(c,p)}function qs(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Ks(t)+Ks(e[n]))))}function Ks(e){return'auto'===e?0:1e3*Number(e.slice(0,-1).replace(',','.'))}function Gs(e){return(e?e.ownerDocument:document).body.offsetHeight}const Ws=Symbol('_vod'),Js=Symbol('_vsh'),Ys={name:'show',beforeMount(e,{value:t},{transition:n}){e[Ws]='none'===e.style.display?'':e.style.display,n&&t?n.beforeEnter(e):Xs(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Xs(e,!0),r.enter(e)):r.leave(e,(()=>{Xs(e,!1)})):Xs(e,t))},beforeUnmount(e,{value:t}){Xs(e,t)}};function Xs(e,t){e.style.display=t?e[Ws]:'none',e[Js]=!t}const Qs=Symbol(''),el=/(?:^|;)\s*display\s*:/;const tl=/\s*!important$/;function nl(e,t,n){if(St(n))n.forEach((n=>nl(e,t,n)));else if(null==n&&(n=''),t.startsWith('--'))e.setProperty(t,n);else{const r=function(e,t){const n=il[t];if(n)return n;let r=Vt(t);if('filter'!==r&&r in e)return il[t]=r;r=Ft(r);for(let i=0;i<rl.length;i++){const n=rl[i]+r;if(n in e)return il[t]=n}return t}(e,t);tl.test(n)?e.setProperty(Bt(r),n.replace(tl,''),'important'):e[r]=n}}const rl=['Webkit','Moz','ms'],il={};const ol='http://www.w3.org/1999/xlink';function al(e,t,n,r,i,o=on(t)){r&&t.startsWith('xlink:')?null==n?e.removeAttributeNS(ol,t.slice(6,t.length)):e.setAttributeNS(ol,t,n):null==n||o&&!an(n)?e.removeAttribute(t):e.setAttribute(t,o?'':At(n)?String(n):n)}function sl(e,t,n,r,i){if('innerHTML'===t||'textContent'===t)return void(null!=n&&(e[t]='innerHTML'===t?Os(n):n));const o=e.tagName;if('value'===t&&'PROGRESS'!==o&&!o.includes('-')){const r='OPTION'===o?e.getAttribute('value')||'':e.value,i=null==n?'checkbox'===e.type?'on':'':String(n);return r===i&&'_value'in e||(e.value=i),null==n&&e.removeAttribute(t),void(e._value=n)}let a=!1;if(''===n||null==n){const r=typeof e[t];'boolean'===r?n=an(n):null==n&&'string'===r?(n='',a=!0):'number'===r&&(n=0,a=!0)}try{e[t]=n}catch(UJ){}a&&e.removeAttribute(i||t)}function ll(e,t,n,r){e.addEventListener(t,n,r)}const cl=Symbol('_vei');function ul(e,t,n,r,i=null){const o=e[cl]||(e[cl]={}),a=o[t];if(r&&a)a.value=r;else{const[n,s]=function(e){let t;if(dl.test(e)){let n;for(t={};n=e.match(dl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=':'===e[2]?e.slice(3):Bt(e.slice(2));return[n,t]}(t);if(r){const a=o[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();ci(function(e,t){if(St(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=hl(),n}(r,i);ll(e,n,a,s)}else a&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,a,s),o[t]=void 0)}}const dl=/(?:Once|Passive|Capture)$/;let pl=0;const fl=Promise.resolve(),hl=()=>pl||(fl.then((()=>pl=0)),pl=Date.now());const ml=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const gl=e=>{const t=e.props['onUpdate:modelValue']||!1;return St(t)?e=>qt(t,e):t};function vl(e){e.target.composing=!0}function yl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event('input')))}const bl=Symbol('_assign'),_l={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[bl]=gl(i);const o=r||i.props&&'number'===i.props.type;ll(e,t?'change':'input',(t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),o&&(r=Gt(r)),e[bl](r)})),n&&ll(e,'change',(()=>{e.value=e.value.trim()})),t||(ll(e,'compositionstart',vl),ll(e,'compositionend',yl),ll(e,'change',yl))},mounted(e,{value:t}){e.value=null==t?'':t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},a){if(e[bl]=gl(a),e.composing)return;const s=null==t?'':t;if((!o&&'number'!==e.type||/^0\d/.test(e.value)?e.value:Gt(e.value))!==s){if(document.activeElement===e&&'range'!==e.type){if(r&&t===n)return;if(i&&e.value.trim()===s)return}e.value=s}}},wl={deep:!0,created(e,_,t){e[bl]=gl(t),ll(e,'change',(()=>{const t=e._modelValue,n=$l(e),r=e.checked,i=e[bl];if(St(t)){const e=ln(t,n),o=-1!==e;if(r&&!o)i(t.concat(n));else if(!r&&o){const n=[...t];n.splice(e,1),i(n)}}else if($t(t)){const e=new Set(t);r?e.add(n):e.delete(n),i(e)}else i(Ol(e,r))}))},mounted:kl,beforeUpdate(e,t,n){e[bl]=gl(n),kl(e,t,n)}};function kl(e,{value:t,oldValue:n},r){let i;if(e._modelValue=t,St(t))i=ln(t,r.props.value)>-1;else if($t(t))i=t.has(r.props.value);else{if(t===n)return;i=sn(t,Ol(e,!0))}e.checked!==i&&(e.checked=i)}const xl={created(e,{value:t},n){e.checked=sn(t,n.props.value),e[bl]=gl(n),ll(e,'change',(()=>{e[bl]($l(e))}))},beforeUpdate(e,{value:t,oldValue:n},r){e[bl]=gl(r),t!==n&&(e.checked=sn(t,r.props.value))}},Sl={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=$t(t);ll(e,'change',(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?Gt($l(e)):$l(e)));e[bl](e.multiple?i?new Set(t):t:t[0]),e._assigning=!0,yi((()=>{e._assigning=!1}))})),e[bl]=gl(r)},mounted(e,{value:t}){El(e,t)},beforeUpdate(e,t,n){e[bl]=gl(n)},updated(e,{value:t}){e._assigning||El(e,t)}};function El(e,t){const n=e.multiple,r=St(t);if(!n||r||$t(t)){for(let i=0,o=e.options.length;i<o;i++){const o=e.options[i],a=$l(o);if(n)if(r){const e=typeof a;o.selected='string'===e||'number'===e?t.some((e=>String(e)===String(a))):ln(t,a)>-1}else o.selected=t.has(a);else if(sn($l(o),t))return void(e.selectedIndex!==i&&(e.selectedIndex=i))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function $l(e){return'_value'in e?e._value:e.value}function Ol(e,t){const n=t?'_trueValue':'_falseValue';return n in e?e[n]:t}const Il=['ctrl','shift','alt','meta'],Tl={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>'button'in e&&0!==e.button,middle:e=>'button'in e&&1!==e.button,right:e=>'button'in e&&2!==e.button,exact:(e,t)=>Il.some((n=>e[`${n}Key`]&&!t.includes(n)))},Al=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join('.');return n[r]||(n[r]=(n,...r)=>{for(let e=0;e<t.length;e++){const r=Tl[t[e]];if(r&&r(n,t))return}return e(n,...r)})},Cl={esc:'escape',space:' ',up:'arrow-up',left:'arrow-left',right:'arrow-right',down:'arrow-down',delete:'backspace'},Nl=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join('.');return n[r]||(n[r]=n=>{if(!('key'in n))return;const r=Bt(n.key);return t.some((e=>e===r||Cl[e]===r))?e(n):void 0})},Pl=_t({patchProp:(e,t,n,r,i,o)=>{const a='svg'===i;'class'===t?function(e,t,n){const r=e[Ps];r&&(t=(t?[t,...r]:[...r]).join(' ')),null==t?e.removeAttribute('class'):n?e.setAttribute('class',t):e.className=t}(e,r,a):'style'===t?function(e,t,n){const r=e.style,i=Tt(n);let o=!1;if(n&&!i){if(t)if(Tt(t))for(const e of t.split(';')){const t=e.slice(0,e.indexOf(':')).trim();null==n[t]&&nl(r,t,'')}else for(const e in t)null==n[e]&&nl(r,e,'');for(const e in n)'display'===e&&(o=!0),nl(r,e,n[e])}else if(i){if(t!==n){const e=r[Qs];e&&(n+=';'+e),r.cssText=n,o=el.test(n)}}else t&&e.removeAttribute('style');Ws in e&&(e[Ws]=o?r.display:'',e[Js]&&(r.display='none'))}(e,n,r):yt(t)?bt(t)||ul(e,t,0,r,o):('.'===t[0]?(t=t.slice(1),1):'^'===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return'innerHTML'===t||'textContent'===t||!!(t in e&&ml(t)&&It(n));if('spellcheck'===t||'draggable'===t||'translate'===t||'autocorrect'===t)return!1;if('form'===t)return!1;if('list'===t&&'INPUT'===e.tagName)return!1;if('type'===t&&'TEXTAREA'===e.tagName)return!1;if('width'===t||'height'===t){const t=e.tagName;if('IMG'===t||'VIDEO'===t||'CANVAS'===t||'SOURCE'===t)return!1}if(ml(t)&&Tt(n))return!1;return t in e}(e,t,r,a))?(sl(e,t,r),e.tagName.includes('-')||'value'!==t&&'checked'!==t&&'selected'!==t||al(e,t,r,a,0,'value'!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&Tt(r)?('true-value'===t?e._trueValue=r:'false-value'===t&&(e._falseValue=r),al(e,t,r,a)):sl(e,Vt(t),r,0,t)}},As);let jl;const Dl=(...e)=>{const t=(jl||(jl=pa(Pl))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){if(Tt(e)){return document.querySelector(e)}return e}(e);if(!r)return;const i=t._component;It(i)||i.render||i.template||(i.template=r.innerHTML),1===r.nodeType&&(r.textContent='');const o=n(r,!1,function(e){if(e instanceof SVGElement)return'svg';if('function'==typeof MathMLElement&&e instanceof MathMLElement)return'mathml'}(r));return r instanceof Element&&(r.removeAttribute('v-cloak'),r.setAttribute('data-v-app','')),o},t};function Rl(e,t=!1){const n=Number($('#world_editor_select').val()),r=X.indexOf(e);-1===r||!t&&n!==r||$('#world_editor_select').val(r).trigger('change')}const Ul=_.debounce(Rl,1e3),Ll={max_context_unlocked:{selector:'#oai_max_context_unlocked',oai_setting:'max_context_unlocked',type:'checkbox'},openai_max_context:{selector:'#openai_max_context',oai_setting:'openai_max_context',type:'input'},openai_max_tokens:{selector:'#openai_max_tokens',oai_setting:'openai_max_tokens',type:'input'},n:{selector:'#n_openai',oai_setting:'n',type:'input'},stream_openai:{selector:'#stream_toggle',oai_setting:'stream_openai',type:'checkbox'},temperature:{selector:'#temp_openai',oai_setting:'temp_openai',type:'input'},frequency_penalty:{selector:'#freq_pen_openai',oai_setting:'freq_pen_openai',type:'input'},presence_penalty:{selector:'#pres_pen_openai',oai_setting:'pres_pen_openai',type:'input'},top_p:{selector:'#top_p_openai',oai_setting:'top_p_openai',type:'input'},repetition_penalty:{selector:'#repetition_penalty_openai',oai_setting:'repetition_penalty_openai',type:'input'},min_p:{selector:'#min_p_openai',oai_setting:'min_p_openai',type:'input'},top_k:{selector:'#top_k_openai',oai_setting:'top_k_openai',type:'input'},top_a:{selector:'#top_a_openai',oai_setting:'top_a_openai',type:'input'},seed:{selector:'#seed_openai',oai_setting:'seed',type:'input'},squash_system_messages:{selector:'#squash_system_messages',oai_setting:'squash_system_messages',type:'checkbox'},reasoning_effort:{selector:'#openai_reasoning_effort',oai_setting:'reasoning_effort',type:'input'},show_thoughts:{selector:'#openai_show_thoughts',oai_setting:'show_thoughts',type:'checkbox'},request_images:{selector:'#openai_request_images',oai_setting:'request_images',type:'checkbox'},function_calling:{selector:'#openai_function_calling',oai_setting:'function_calling',type:'checkbox'},enable_web_search:{selector:'#openai_enable_web_search',oai_setting:'enable_web_search',type:'checkbox'},image_inlining:{selector:'#openai_image_inlining',oai_setting:'image_inlining',type:'checkbox'},inline_image_quality:{selector:'#openai_inline_image_quality',oai_setting:'inline_image_quality',type:'input'},video_inlining:{selector:'#openai_video_inlining',oai_setting:'video_inlining',type:'checkbox'},names_behavior:{selector:'#names_behavior',oai_setting:'names_behavior',type:'input'},wrap_in_quotes:{selector:'#wrap_in_quotes',oai_setting:'wrap_in_quotes',type:'checkbox'},prompts:{selector:'#prompts',oai_setting:'prompts',type:'none'},prompt_order:{selector:'#prompt_order',oai_setting:'prompt_order',type:'none'},extensions:{selector:'#extensions',oai_setting:'extensions',type:'none'}},zl={addOneMessage:n,saveSettings:t,promptManager:pe,reloadEditor:Rl,reloadEditorDebounced:Ul,renderPromptManager:pe.render,renderPromptManagerDebounced:pe.renderDebounced};function Vl(e){return e-r.length}function Ml(e){return r.length+e}function Bl(e){return e<0?Ml(e):e}function Fl(e){return _.inRange(e,-r.length,r.length)}const Zl=await fetch('/version').then((e=>e.json())).then((e=>e.pkgVersion)).catch((()=>'1.0.0')),Hl=xe('openai');function ql(e){const t=$(e);t.hasClass('hljs')||t.text().includes('<body')||(hljs.highlightElement(e),t.append($('<i class="fa-solid fa-copy code-copy interactable" title="Copy code"></i>').on('click',(function(e){e.stopPropagation()})).on('pointerup',(async function(){navigator.clipboard.writeText($(e).text()),toastr.info(Se`!`,'',{timeOut:2e3})}))))}const Kl=_.debounce(i,1e3);async function Gl(){await async function(){o.at(a)&&(await i(),await s(),await l())}(),$('div .mes').each(((e,t)=>{c.emit($(t).attr('is_user')?u.USER_MESSAGE_RENDERED:u.CHARACTER_MESSAGE_RENDERED,$(t).attr('mesid'))}))}function Wl(e,{role:t='all',hide_state:n='all',include_swipes:i=!1}={}){const o=function(e,t,n){let r,i;if(e.match(/^(-?\d+)$/)){const t=Number(e);r=i=t<0?n+t+1:t}else{const t=e.match(/^(-?\d+)-(-?\d+)$/);if(!t)return null;[r,i]=_.sortBy([t[1],t[2]].map((e=>Number(e))).map((e=>e<0?n+e+1:e)))}return isNaN(r)||isNaN(i)||r>i||r<t||i>n?null:{start:r,end:i}}(p(e.toString()),0,r.length-1);if(!o)throw Error(` range : ${e}`);if(!['all','system','assistant','user'].includes(t))throw Error(` role ,  'all', 'system', 'assistant'  'user', : ${t}`);if(!['all','hidden','unhidden'].includes(n))throw Error(` hide_state ,  'all', 'hidden'  'unhidden', : ${n}`);const{start:a,end:s}=o,l=e=>{const o=r[e];if(!o)return null;const a=(s=o,s.extra?.type===m.NARRATOR?s.is_user?'unknown':'system':s.is_user?'user':'assistant');var s;if('all'!==t&&a!==t)return null;if('all'!==n&&'hidden'===n!==o.is_system)return null;const l=o?.swipe_id??0;let c=o?.swipes??[o.mes],u=o?.variables??[{}],d=o?.swipes_info??[o?.extra??{}];const p=_.max([c.length,u.length,d.length])??1;c=_.range(0,p).map((e=>c[e]??'')),u=_.range(0,p).map((e=>u[e]??{})),d=_.range(0,p).map((e=>d[e]??{}));const f=d[l],h=u[l];return i?{message_id:e,name:o.name,role:a,is_hidden:o.is_system,swipe_id:l,swipes:c,swipes_data:u,swipes_info:d}:{message_id:e,name:o.name,role:a,is_hidden:o.is_system,message:o.mes,data:h,extra:f,swipe_id:l,swipes:c,swipes_data:u}},c=_.range(a,s+1).map((e=>l(e))).filter((e=>null!==e));return structuredClone(c)}async function Jl(e,{refresh:t='affected'}={}){e=_(e).map((e=>({...e,message_id:Bl(e.message_id)}))).sortBy('message_id').groupBy('message_id').map((e=>e.reduce(((e,t)=>({...e,...t})),{}))).value(),await Promise.all(e.map((async e=>{const t=r[e.message_id];if(void 0!==t)if(_.isPlainObject(t?.variables)&&_.set(t,'variables',_.range(0,t.swipes?.length??1).map((e=>t.variables[e]??{}))),void 0!==e?.name&&_.set(t,'name',e.name),void 0!==e?.role&&(_.set(t,'is_user','user'===e.role),'system'===e.role?_.set(t,'extra.type',m.NARRATOR):_.unset(t,'extra.type')),void 0!==e?.is_hidden&&_.set(t,'is_system',e.is_hidden),(e=>_.has(e,'message')||_.has(e,'data'))(e))void 0!==e?.message&&(_.set(t,'mes',e.message),void 0!==t?.swipes&&_.set(t,['swipes',t.swipe_id],e.message)),void 0!==e?.data&&(void 0===t?.variables&&_.set(t,'variables',_.times(t.swipes?.length??1,_.constant({}))),_.set(t,['variables',t.swipe_id??0],e.data)),void 0!==e?.extra&&(void 0===t?.swipes_info&&_.set(t,'swipes_info',_.times(t.swipes?.length??1,_.constant({}))),_.set(t,'extra',e?.extra),_.set(t,['swipes_info',t.swipe_id??0],e?.extra));else if(void 0!==e?.swipe_id||void 0!==e?.swipes||void 0!==e?.swipes_data||void 0!==e?.swipes_info){_.set(e,'swipe_id',e.swipe_id??t.swipe_id??0),_.set(e,'swipes',e.swipes??t.swipes??[t.mes]),_.set(e,'swipes_data',e.swipes_data??t.variables??[{}]),_.set(e,'swipes_info',e.swipes_info??t.swipes_info??[{}]);const n=_.max([e.swipes?.length,e.swipes_data?.length,e.swipes_info?.length])??1;e.swipes=_.range(0,n).map((t=>e.swipes?.[t]??'')),e.swipes_data=_.range(0,n).map((t=>e.swipes_data?.[t]??{})),e.swipes_info=_.range(0,n).map((t=>e.swipes_info?.[t]??{})),_.set(t,'swipes',e.swipes),_.set(t,'variables',e.swipes_data),_.set(t,'swipes_info',e.swipes_info),_.set(t,'swipe_id',e.swipe_id),_.set(t,'mes',t.swipes[t.swipe_id]),_.set(t,'extra',t.swipes_info[t.swipe_id])}}))),'all'===t?(await i(),await d()):(Kl(),'affected'===t&&await Promise.all(e.map((e=>(async e=>{const t=$(`div.mes[mesid = "${e}"]`);if(!t)return;const n=r[e];n.swipes&&t.find('.swipes-counter').text(`${n.swipe_id+1}/${n.swipes.length}`),t.find('.mes_text').empty().append(g(n.mes,n.name,n.is_system,n.is_user,e)),t.find('pre code').each(((e,t)=>{ql(t)})),await c.emit(n.is_user?u.USER_MESSAGE_RENDERED:u.CHARACTER_MESSAGE_RENDERED,e)})(e.message_id)))))}async function Yl(e,{insert_at:t='end',refresh:o='affected'}={}){if('end'!==t&&Fl(t))throw Error(` insert_at  [${-r.length}, ${r.length}), : '${t}'`);const a=await Promise.all(e.map((async e=>{let t=_({});return t=void 0!==e?.name?t.set('name',e.name):'system'===e.role?t.set('name','system'):'user'===e.role?t.set('name',f):t.set('name',h),t=t.set('is_user','user'===e.role),'system'===e.role&&(t=t.set('extra.type',m.NARRATOR)),t=t.set('is_system',e.is_hidden??!1),t=t.set('mes',e.message),e.data&&(t=t.set(['variables',0],e.data)),e.extra&&(t=t.set('extra',e.extra)),t.value()})));'end'===t?r.push(...a):r.splice(t,0,...a),'affected'===o&&'end'===t?(Kl(),a.forEach((e=>n(e))),a.forEach((async(e,t)=>{await c.emit(e.is_user?u.USER_MESSAGE_RENDERED:u.CHARACTER_MESSAGE_RENDERED,r.length-a.length+t)}))):'none'!==o?(await i(),await d()):Kl()}async function Xl(e,{refresh:t='all'}={}){e=e.filter(Fl).map((e=>Bl(e))),_.pullAt(r,e),'all'===t?(await i(),await d()):Kl()}async function Ql(e,t,n,{refresh:o='all'}={}){const a=r.splice(t,n-t);r.splice(e,0,...a),'all'===o?(await i(),await d()):Kl()}async function ec(e,t,{swipe_id:n='current',refresh:o='display_and_render_current'}={}){if(e='string'==typeof e?{message:e}:e,'number'!=typeof n&&'current'!==n)throw Error(` swipe_id ,  'current' , : ${n} `);if(!['none','display_current','display_and_render_current','all'].includes(o))throw Error(` refresh ,  'none', 'display_current', 'display_and_render_current'  'all', : ${o} `);const a=r.at(t);if(!a)return;const s=a.swipe_id??0,l='current'==n?s:n,f='none'!=o?l:s,h=e.message??(a.swipes?a.swipes[l]:void 0)??a.mes,m=(()=>{if('current'===n)return!1;if(0==n||a.swipes&&n<a.swipes.length)return!0;a.swipes||(a.swipe_id=0,a.swipes=[a.mes],a.variables=[{}]);for(let e=a.swipes.length;e<=n;++e)a.swipes.push(''),a.variables.push({});return!0})();(()=>{const t=p(h);e.data&&(a.variables||(a.variables=[]),a.variables[l]=e.data),a.swipes&&(a.swipes[l]=t,a.swipe_id=f),f===l&&(a.mes=t)})(),await i(),'all'==o?await d():await(async e=>{const n=$(`div.mes[mesid = "${t}"]`);n&&(e&&a.swipes&&n.find('.swipes-counter').text(`${f+1}/${a.swipes.length}`),'none'!=o&&(n.find('.mes_text').empty().append(g(h,a.name,a.is_system,a.is_user,t)),'display_and_render_current'===o&&await c.emit(a.is_user?u.USER_MESSAGE_RENDERED:u.CHARACTER_MESSAGE_RENDERED,t)))})(m)}function tc(e,{message_id:t='last'}={}){if('number'!=typeof t&&!['last','last_user','last_char'].includes(t))throw Error(` message_id ,  'last', 'last_user', 'last_char' , : ${t}`);const n=$e();if(null===n)throw Error(`, : ${t}`);switch(t){case'last':t=n;break;case'last_user':{const e=$e({filter:e=>e.is_user&&!e.is_system});if(null===e)throw Error(` user , : ${t}`);t=e;break}case'last_char':{const e=$e({filter:e=>!e.is_user&&!e.is_system});if(null===e)throw Error(` char , : ${t}`);t=e;break}}if(t<0||t>n)throw Error(` message_id  [0, ${n}] , : ${t} `);const i=r[t];return g(e,i.name,i.is_system,i.is_user,t)}function nc(e){return $(`div.mes[mesid = "${e}"]`,window.parent.document).find('div.mes_text')}function rc(e){return p(e)}function ic(){return Number(rc('{{lastMessageId}}'))}function oc(e){const t=e=>{throw toastr.error(`${e.stack?e.stack:e.name+': '+e.message}`),e};return(...n)=>{try{const r=e(...n);return r instanceof Promise?r.catch((e=>{t(e)})):r}catch(Jh){return t(Jh)}}}function ac(){return this.frameElement.id}function sc(){const e=ac.call(this);if(!e.startsWith('TH-script-'))throw new Error(' iframe  getScriptId!');return e.replace('TH-script-','')}function lc(){return cc(ac.call(this))}function cc(e){const t=e.match(/^TH-message-(\d+)-\d+$/);if(!t)throw Error(` ${e}  id :  iframe  getMessageId!`);return parseInt(t[1].toString())}const uc=(e,t,n,r=1)=>{const i=((e,t,n)=>{const r=2.2,i=e/255,o=t/255,a=n/255,s=Math.pow(i,r)+Math.pow(1.5*o,r)+Math.pow(.6*a,r);return.547373141*Math.pow(s,1/r)})(e,t,n);return i>.62||r<.4?'black':'white'},dc=()=>getComputedStyle(document.documentElement).getPropertyValue('--SmartThemeQuoteColor').trim();let pc=null;const fc=()=>{if(null!==pc)return pc;const e=dc(),t=(e=>{const t=e.trim().match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+)\s*)?\)$/i);return t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),t[4]?parseFloat(t[4]):1]:null})(e);if(!t)return console.warn(`[color]  smart_theme_quote_color : "${e}"`),null;const n=uc(...t);return pc=n,n},hc=Object.freeze({status:'aborted'});function mc(e,t,n){function r(n,r){var i;Object.defineProperty(n,'_zod',{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in _.prototype)e in n||Object.defineProperty(n,e,{value:_.prototype[e].bind(n)});n._zod.constr=_,n._zod.def=r}const i=n?.Parent??Object;class o extends i{}function _(e){var t;const i=n?.Parent?new o:this;r(i,e),(t=i._zod).deferred??(t.deferred=[]);for(const n of i._zod.deferred)n();return i}return Object.defineProperty(o,'name',{value:e}),Object.defineProperty(_,'init',{value:r}),Object.defineProperty(_,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(_,'name',{value:e}),_}const gc=Symbol('zod_brand');class vc extends Error{constructor(){super('Encountered Promise during synchronous parse. Use .parseAsync() instead.')}}class yc extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name='ZodEncodeError'}}const bc={};function _c(e){return e&&Object.assign(bc,e),bc}function wc(e){const t=Object.values(e).filter((e=>'number'==typeof e)),n=Object.entries(e).filter((([e,_])=>-1===t.indexOf(+e))).map((([_,e])=>e));return n}function kc(e,t='|'){return e.map((e=>Fc(e))).join(t)}function xc(_,e){return'bigint'==typeof e?e.toString():e}function Sc(e){return{get value(){{const t=e();return Object.defineProperty(this,'value',{value:t}),t}}}}function Ec(e){return null==e}function $c(e){const t=e.startsWith('^')?1:0,n=e.endsWith('$')?e.length-1:e.length;return e.slice(t,n)}function Oc(e,t){const n=(e.toString().split('.')[1]||'').length,r=t.toString();let i=(r.split('.')[1]||'').length;if(0===i&&/\d?e-\d?/.test(r)){const e=r.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}const o=n>i?n:i;return Number.parseInt(e.toFixed(o).replace('.',''))%Number.parseInt(t.toFixed(o).replace('.',''))/10**o}const Ic=Symbol('evaluating');function Tc(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Ic)return void 0===r&&(r=Ic,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function Ac(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Cc(...e){const t={};for(const n of e){const e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function Nc(e){return JSON.stringify(e)}const Pc='captureStackTrace'in Error?Error.captureStackTrace:(...e)=>{};function jc(e){return'object'==typeof e&&null!==e&&!Array.isArray(e)}const Dc=Sc((()=>{if('undefined'!=typeof navigator&&navigator?.userAgent?.includes('Cloudflare'))return!1;try{return new Function(''),!0}catch(_){return!1}}));function Rc(e){if(!1===jc(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==jc(n)&&!1!==Object.prototype.hasOwnProperty.call(n,'isPrototypeOf')}function Uc(e){return Rc(e)?{...e}:Array.isArray(e)?[...e]:e}const Lc=new Set(['string','number','symbol']),zc=new Set(['string','number','bigint','boolean','symbol','undefined']);function Vc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')}function Mc(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function Bc(e){const t=e;if(!t)return{};if('string'==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error('Cannot specify both `message` and `error` params');t.error=t.message}return delete t.message,'string'==typeof t.error?{...t,error:()=>t.error}:t}function Fc(e){return'bigint'==typeof e?e.toString()+'n':'string'==typeof e?`"${e}"`:`${e}`}function Zc(e){return Object.keys(e).filter((t=>'optional'===e[t]._zod.optin&&'optional'===e[t]._zod.optout))}const Hc={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},qc={int64:[BigInt('-9223372036854775808'),BigInt('9223372036854775807')],uint64:[BigInt(0),BigInt('18446744073709551615')]};function Kc(e,t){const n=e._zod.def;return Mc(e,Cc(e._zod.def,{get shape(){const e={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=n.shape[r])}return Ac(this,'shape',e),e},checks:[]}))}function Gc(e,t){const n=e._zod.def,r=Cc(e._zod.def,{get shape(){const r={...e._zod.def.shape};for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return Ac(this,'shape',r),r},checks:[]});return Mc(e,r)}function Wc(e,t){if(!Rc(t))throw new Error('Invalid input to extend: expected a plain object');const n=e._zod.def.checks;if(n&&n.length>0)throw new Error('Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.');const r=Cc(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return Ac(this,'shape',n),n},checks:[]});return Mc(e,r)}function Jc(e,t){if(!Rc(t))throw new Error('Invalid input to safeExtend: expected a plain object');const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return Ac(this,'shape',n),n},checks:e._zod.def.checks};return Mc(e,n)}function Yc(e,t){const n=Cc(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Ac(this,'shape',n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Mc(e,n)}function Xc(e,t,n){const r=Cc(t._zod.def,{get shape(){const r=t._zod.def.shape,i={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=e?new e({type:'optional',innerType:r[t]}):r[t])}else for(const t in r)i[t]=e?new e({type:'optional',innerType:r[t]}):r[t];return Ac(this,'shape',i),i},checks:[]});return Mc(t,r)}function Qc(e,t,n){const r=Cc(t._zod.def,{get shape(){const r=t._zod.def.shape,i={...r};if(n)for(const t in n){if(!(t in i))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=new e({type:'nonoptional',innerType:r[t]}))}else for(const t in r)i[t]=new e({type:'nonoptional',innerType:r[t]});return Ac(this,'shape',i),i},checks:[]});return Mc(t,r)}function eu(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function tu(e,t){return t.map((t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t}))}function nu(e){return'string'==typeof e?e:e?.message}function ru(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const i=nu(e.inst?._zod.def?.error?.(e))??nu(t?.error?.(e))??nu(n.customError?.(e))??nu(n.localeError?.(e))??'Invalid input';r.message=i}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function iu(e){return e instanceof Set?'set':e instanceof Map?'map':e instanceof File?'file':'unknown'}function ou(e){return Array.isArray(e)?'array':'string'==typeof e?'string':'unknown'}function au(...e){const[t,n,r]=e;return'string'==typeof t?{message:t,code:'custom',input:n,inst:r}:{...t}}function su(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}function lu(e){let t='';for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}const cu=Object.freeze(Object.defineProperty({__proto__:null,BIGINT_FORMAT_RANGES:qc,Class:class{constructor(...e){}},NUMBER_FORMAT_RANGES:Hc,aborted:eu,allowsEval:Dc,assert:function(_){},assertEqual:function(e){return e},assertIs:function(e){},assertNever:function(e){throw new Error},assertNotEqual:function(e){return e},assignProp:Ac,base64ToUint8Array:su,base64urlToUint8Array:function(e){const t=e.replace(/-/g,'+').replace(/_/g,'/');return su(t+'='.repeat((4-t.length%4)%4))},cached:Sc,captureStackTrace:Pc,cleanEnum:function(e){return Object.entries(e).filter((([e,_])=>Number.isNaN(Number.parseInt(e,10)))).map((e=>e[1]))},cleanRegex:$c,clone:Mc,cloneDef:function(e){return Cc(e._zod.def)},createTransparentProxy:function(e){let t;return new Proxy({},{get:(_,n,r)=>(t??(t=e()),Reflect.get(t,n,r)),set:(_,n,r,i)=>(t??(t=e()),Reflect.set(t,n,r,i)),has:(_,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(_,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:_=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(_,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(_,n,r)=>(t??(t=e()),Reflect.defineProperty(t,n,r))})},defineLazy:Tc,esc:Nc,escapeRegex:Vc,extend:Wc,finalizeIssue:ru,floatSafeRemainder:Oc,getElementAtPath:function(e,t){return t?t.reduce(((e,t)=>e?.[t]),e):e},getEnumValues:wc,getLengthableOrigin:ou,getParsedType:e=>{const t=typeof e;switch(t){case'undefined':return'undefined';case'string':return'string';case'number':return Number.isNaN(e)?'nan':'number';case'boolean':return'boolean';case'function':return'function';case'bigint':return'bigint';case'symbol':return'symbol';case'object':return Array.isArray(e)?'array':null===e?'null':e.then&&'function'==typeof e.then&&e.catch&&'function'==typeof e.catch?'promise':'undefined'!=typeof Map&&e instanceof Map?'map':'undefined'!=typeof Set&&e instanceof Set?'set':'undefined'!=typeof Date&&e instanceof Date?'date':'undefined'!=typeof File&&e instanceof File?'file':'object';default:throw new Error(`Unknown data type: ${t}`)}},getSizableOrigin:iu,hexToUint8Array:function(e){const t=e.replace(/^0x/,'');if(t.length%2!=0)throw new Error('Invalid hex string length');const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=Number.parseInt(t.slice(r,r+2),16);return n},isObject:jc,isPlainObject:Rc,issue:au,joinValues:kc,jsonStringifyReplacer:xc,merge:Yc,mergeDefs:Cc,normalizeParams:Bc,nullish:Ec,numKeys:function(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t},objectClone:function(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))},omit:Gc,optionalKeys:Zc,partial:Xc,pick:Kc,prefixIssues:tu,primitiveTypes:zc,promiseAllObject:function(e){const t=Object.keys(e),n=t.map((t=>e[t]));return Promise.all(n).then((e=>{const n={};for(let r=0;r<t.length;r++)n[t[r]]=e[r];return n}))},propertyKeyTypes:Lc,randomString:function(e=10){const t='abcdefghijklmnopqrstuvwxyz';let n='';for(let r=0;r<e;r++)n+=t[Math.floor(26*Math.random())];return n},required:Qc,safeExtend:Jc,shallowClone:Uc,stringifyPrimitive:Fc,uint8ArrayToBase64:lu,uint8ArrayToBase64url:function(e){return lu(e).replace(/\+/g,'-').replace(/\//g,'_').replace(/=/g,'')},uint8ArrayToHex:function(e){return Array.from(e).map((e=>e.toString(16).padStart(2,'0'))).join('')},unwrapMessage:nu},Symbol.toStringTag,{value:'Module'})),uu=(e,t)=>{e.name='$ZodError',Object.defineProperty(e,'_zod',{value:e._zod,enumerable:!1}),Object.defineProperty(e,'issues',{value:t,enumerable:!1}),e.message=JSON.stringify(t,xc,2),Object.defineProperty(e,'toString',{value:()=>e.message,enumerable:!1})},du=mc('$ZodError',uu),pu=mc('$ZodError',uu,{Parent:Error});function fu(e,t=e=>e.message){const n={},r=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function hu(e,t=e=>e.message){const n={_errors:[]},r=e=>{for(const i of e.issues)if('invalid_union'===i.code&&i.errors.length)i.errors.map((e=>r({issues:e})));else if('invalid_key'===i.code)r({issues:i.issues});else if('invalid_element'===i.code)r({issues:i.issues});else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(e),n}function mu(e,t=e=>e.message){const n={errors:[]},r=(e,i=[])=>{var o,a;for(const s of e.issues)if('invalid_union'===s.code&&s.errors.length)s.errors.map((e=>r({issues:e},s.path)));else if('invalid_key'===s.code)r({issues:s.issues},s.path);else if('invalid_element'===s.code)r({issues:s.issues},s.path);else{const e=[...i,...s.path];if(0===e.length){n.errors.push(t(s));continue}let r=n,l=0;for(;l<e.length;){const n=e[l],i=l===e.length-1;'string'==typeof n?(r.properties??(r.properties={}),(o=r.properties)[n]??(o[n]={errors:[]}),r=r.properties[n]):(r.items??(r.items=[]),(a=r.items)[n]??(a[n]={errors:[]}),r=r.items[n]),i&&r.errors.push(t(s)),l++}}};return r(e),n}function gu(e){const t=[],n=e.map((e=>'object'==typeof e?e.key:e));for(const r of n)'number'==typeof r?t.push(`[${r}]`):'symbol'==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push('.'),t.push(r));return t.join('')}function vu(e){const t=[],n=[...e.issues].sort(((e,t)=>(e.path??[]).length-(t.path??[]).length));for(const r of n)t.push(` ${r.message}`),r.path?.length&&t.push(`   at ${gu(r.path)}`);return t.join('\n')}const yu=e=>(t,n,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise)throw new vc;if(a.issues.length){const t=new(i?.Err??e)(a.issues.map((e=>ru(e,o,_c()))));throw Pc(t,i?.callee),t}return a.value},bu=yu(pu),_u=e=>async(t,n,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){const t=new(i?.Err??e)(a.issues.map((e=>ru(e,o,_c()))));throw Pc(t,i?.callee),t}return a.value},wu=_u(pu),ku=e=>(t,n,r)=>{const i=r?{...r,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new vc;return o.issues.length?{success:!1,error:new(e??du)(o.issues.map((e=>ru(e,i,_c()))))}:{success:!0,data:o.value}},xu=ku(pu),Su=e=>async(t,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map((e=>ru(e,i,_c()))))}:{success:!0,data:o.value}},Eu=Su(pu),$u=e=>(t,n,r)=>{const i=r?Object.assign(r,{direction:'backward'}):{direction:'backward'};return yu(e)(t,n,i)},Ou=$u(pu),Iu=e=>(t,n,r)=>yu(e)(t,n,r),Tu=Iu(pu),Au=e=>async(t,n,r)=>{const i=r?Object.assign(r,{direction:'backward'}):{direction:'backward'};return _u(e)(t,n,i)},Cu=Au(pu),Nu=e=>async(t,n,r)=>_u(e)(t,n,r),Pu=Nu(pu),ju=e=>(t,n,r)=>{const i=r?Object.assign(r,{direction:'backward'}):{direction:'backward'};return ku(e)(t,n,i)},Du=ju(pu),Ru=e=>(t,n,r)=>ku(e)(t,n,r),Uu=Ru(pu),Lu=e=>async(t,n,r)=>{const i=r?Object.assign(r,{direction:'backward'}):{direction:'backward'};return Su(e)(t,n,i)},zu=Lu(pu),Vu=e=>async(t,n,r)=>Su(e)(t,n,r),Mu=Vu(pu),Bu=/^[cC][^\s-]{8,}$/,Fu=/^[0-9a-z]+$/,Zu=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Hu=/^[0-9a-vA-V]{20}$/,qu=/^[A-Za-z0-9]{27}$/,Ku=/^[a-zA-Z0-9_-]{21}$/,Gu=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Wu=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ju=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Yu=Ju(4),Xu=Ju(6),Qu=Ju(7),ed=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,td=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,nd=td;function rd(){return new RegExp('^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$','u')}const id=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,od=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ad=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,sd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ld=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,cd=/^[A-Za-z0-9_-]*$/,ud=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,dd=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,pd=/^\+(?:[0-9]){6,14}[0-9]$/,fd='(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))',hd=new RegExp(`^${fd}$`);function md(e){const t='(?:[01]\\d|2[0-3]):[0-5]\\d';return'number'==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function gd(e){return new RegExp(`^${md(e)}$`)}function vd(e){const t=md({precision:e.precision}),n=['Z'];e.local&&n.push(''),e.offset&&n.push('([+-](?:[01]\\d|2[0-3]):[0-5]\\d)');const r=`${t}(?:${n.join('|')})`;return new RegExp(`^${fd}T(?:${r})$`)}const yd=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??''}}`:'[\\s\\S]*'}$`),bd=/^-?\d+n?$/,_d=/^-?\d+$/,wd=/^-?\d+(?:\.\d+)?/,kd=/^(?:true|false)$/i,xd=/^null$/i,Sd=/^undefined$/i,Ed=/^[^A-Z]*$/,$d=/^[^a-z]*$/,Od=/^[0-9a-fA-F]*$/;function Id(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function Td(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}const Ad=Id(22,'=='),Cd=Td(22),Nd=Id(27,'='),Pd=Td(27),jd=Id(43,'='),Dd=Td(43),Rd=Id(64,''),Ud=Td(64),Ld=Id(86,'=='),zd=Td(86),Vd=Object.freeze(Object.defineProperty({__proto__:null,base64:ld,base64url:cd,bigint:bd,boolean:kd,browserEmail:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,cidrv4:ad,cidrv6:sd,cuid:Bu,cuid2:Fu,date:hd,datetime:vd,domain:dd,duration:Gu,e164:pd,email:ed,emoji:rd,extendedDuration:/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,guid:Wu,hex:Od,hostname:ud,html5Email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,idnEmail:nd,integer:_d,ipv4:id,ipv6:od,ksuid:qu,lowercase:Ed,md5_base64:Ad,md5_base64url:Cd,md5_hex:/^[0-9a-fA-F]{32}$/,nanoid:Ku,null:xd,number:wd,rfc5322Email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,sha1_base64:Nd,sha1_base64url:Pd,sha1_hex:/^[0-9a-fA-F]{40}$/,sha256_base64:jd,sha256_base64url:Dd,sha256_hex:/^[0-9a-fA-F]{64}$/,sha384_base64:Rd,sha384_base64url:Ud,sha384_hex:/^[0-9a-fA-F]{96}$/,sha512_base64:Ld,sha512_base64url:zd,sha512_hex:/^[0-9a-fA-F]{128}$/,string:yd,time:gd,ulid:Zu,undefined:Sd,unicodeEmail:td,uppercase:$d,uuid:Ju,uuid4:Yu,uuid6:Xu,uuid7:Qu,xid:Hu},Symbol.toStringTag,{value:'Module'})),Md=mc('$ZodCheck',((e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])})),Bd={number:'number',bigint:'bigint',object:'date'},Fd=mc('$ZodCheckLessThan',((e,t)=>{Md.init(e,t);const n=Bd[typeof t.value];e._zod.onattach.push((e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)})),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:'too_big',maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}})),Zd=mc('$ZodCheckGreaterThan',((e,t)=>{Md.init(e,t);const n=Bd[typeof t.value];e._zod.onattach.push((e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)})),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:'too_small',minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}})),Hd=mc('$ZodCheckMultipleOf',((e,t)=>{Md.init(e,t),e._zod.onattach.push((e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)})),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error('Cannot mix number and bigint in multiple_of check.');('bigint'==typeof n.value?n.value%t.value===BigInt(0):0===Oc(n.value,t.value))||n.issues.push({origin:typeof n.value,code:'not_multiple_of',divisor:t.value,input:n.value,inst:e,continue:!t.abort})}})),qd=mc('$ZodCheckNumberFormat',((e,t)=>{Md.init(e,t),t.format=t.format||'float64';const n=t.format?.includes('int'),r=n?'int':'number',[i,o]=Hc[t.format];e._zod.onattach.push((e=>{const r=e._zod.bag;r.format=t.format,r.minimum=i,r.maximum=o,n&&(r.pattern=_d)})),e._zod.check=a=>{const s=a.value;if(n){if(!Number.isInteger(s))return void a.issues.push({expected:r,format:t.format,code:'invalid_type',continue:!1,input:s,inst:e});if(!Number.isSafeInteger(s))return void(s>0?a.issues.push({input:s,code:'too_big',maximum:Number.MAX_SAFE_INTEGER,note:'Integers must be within the safe integer range.',inst:e,origin:r,continue:!t.abort}):a.issues.push({input:s,code:'too_small',minimum:Number.MIN_SAFE_INTEGER,note:'Integers must be within the safe integer range.',inst:e,origin:r,continue:!t.abort}))}s<i&&a.issues.push({origin:'number',input:s,code:'too_small',minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>o&&a.issues.push({origin:'number',input:s,code:'too_big',maximum:o,inst:e})}})),Kd=mc('$ZodCheckBigIntFormat',((e,t)=>{Md.init(e,t);const[n,r]=qc[t.format];e._zod.onattach.push((e=>{const i=e._zod.bag;i.format=t.format,i.minimum=n,i.maximum=r})),e._zod.check=i=>{const o=i.value;o<n&&i.issues.push({origin:'bigint',input:o,code:'too_small',minimum:n,inclusive:!0,inst:e,continue:!t.abort}),o>r&&i.issues.push({origin:'bigint',input:o,code:'too_big',maximum:r,inst:e})}})),Gd=mc('$ZodCheckMaxSize',((e,t)=>{var n;Md.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ec(t)&&void 0!==t.size}),e._zod.onattach.push((e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)})),e._zod.check=n=>{const r=n.value;r.size<=t.maximum||n.issues.push({origin:iu(r),code:'too_big',maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}})),Wd=mc('$ZodCheckMinSize',((e,t)=>{var n;Md.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ec(t)&&void 0!==t.size}),e._zod.onattach.push((e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)})),e._zod.check=n=>{const r=n.value;r.size>=t.minimum||n.issues.push({origin:iu(r),code:'too_small',minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}})),Jd=mc('$ZodCheckSizeEquals',((e,t)=>{var n;Md.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ec(t)&&void 0!==t.size}),e._zod.onattach.push((e=>{const n=e._zod.bag;n.minimum=t.size,n.maximum=t.size,n.size=t.size})),e._zod.check=n=>{const r=n.value,i=r.size;if(i===t.size)return;const o=i>t.size;n.issues.push({origin:iu(r),...o?{code:'too_big',maximum:t.size}:{code:'too_small',minimum:t.size},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}})),Yd=mc('$ZodCheckMaxLength',((e,t)=>{var n;Md.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ec(t)&&void 0!==t.length}),e._zod.onattach.push((e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)})),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const i=ou(r);n.issues.push({origin:i,code:'too_big',maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}})),Xd=mc('$ZodCheckMinLength',((e,t)=>{var n;Md.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ec(t)&&void 0!==t.length}),e._zod.onattach.push((e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)})),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const i=ou(r);n.issues.push({origin:i,code:'too_small',minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}})),Qd=mc('$ZodCheckLengthEquals',((e,t)=>{var n;Md.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ec(t)&&void 0!==t.length}),e._zod.onattach.push((e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length})),e._zod.check=n=>{const r=n.value,i=r.length;if(i===t.length)return;const o=ou(r),a=i>t.length;n.issues.push({origin:o,...a?{code:'too_big',maximum:t.length}:{code:'too_small',minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}})),ep=mc('$ZodCheckStringFormat',((e,t)=>{var n,r;Md.init(e,t),e._zod.onattach.push((e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))})),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:'string',code:'invalid_format',format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})})),tp=mc('$ZodCheckRegex',((e,t)=>{ep.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:'string',code:'invalid_format',format:'regex',input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}})),np=mc('$ZodCheckLowerCase',((e,t)=>{t.pattern??(t.pattern=Ed),ep.init(e,t)})),rp=mc('$ZodCheckUpperCase',((e,t)=>{t.pattern??(t.pattern=$d),ep.init(e,t)})),ip=mc('$ZodCheckIncludes',((e,t)=>{Md.init(e,t);const n=Vc(t.includes),r=new RegExp('number'==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push((e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)})),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:'string',code:'invalid_format',format:'includes',includes:t.includes,input:n.value,inst:e,continue:!t.abort})}})),op=mc('$ZodCheckStartsWith',((e,t)=>{Md.init(e,t);const n=new RegExp(`^${Vc(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push((e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)})),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:'string',code:'invalid_format',format:'starts_with',prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}})),ap=mc('$ZodCheckEndsWith',((e,t)=>{Md.init(e,t);const n=new RegExp(`.*${Vc(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push((e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)})),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:'string',code:'invalid_format',format:'ends_with',suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}));function sp(e,t,n){e.issues.length&&t.issues.push(...tu(n,e.issues))}const lp=mc('$ZodCheckProperty',((e,t)=>{Md.init(e,t),e._zod.check=e=>{const n=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(n instanceof Promise)return n.then((n=>sp(n,e,t.property)));sp(n,e,t.property)}})),cp=mc('$ZodCheckMimeType',((e,t)=>{Md.init(e,t);const n=new Set(t.mime);e._zod.onattach.push((e=>{e._zod.bag.mime=t.mime})),e._zod.check=r=>{n.has(r.value.type)||r.issues.push({code:'invalid_value',values:t.mime,input:r.value.type,inst:e,continue:!t.abort})}})),up=mc('$ZodCheckOverwrite',((e,t)=>{Md.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}}));class dp{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if('function'==typeof e)return e(this,{execution:'sync'}),void e(this,{execution:'async'});const t=e.split('\n').filter((e=>e)),n=Math.min(...t.map((e=>e.length-e.trimStart().length))),r=t.map((e=>e.slice(n))).map((e=>' '.repeat(2*this.indent)+e));for(const i of r)this.content.push(i)}compile(){const e=Function,t=this?.args,n=[...(this?.content??['']).map((e=>`  ${e}`))];return new e(...t,n.join('\n'))}}const pp={major:4,minor:1,patch:12},fp=mc('$ZodType',((e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=pp;const r=[...e._zod.def.checks??[]];e._zod.traits.has('$ZodCheck')&&r.unshift(e);for(const i of r)for(const t of i._zod.onattach)t(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push((()=>{e._zod.run=e._zod.parse}));else{const t=(e,t,n)=>{let r,i=eu(e);for(const o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(i)continue;const t=e.issues.length,_=o._zod.check(e);if(_ instanceof Promise&&!1===n?.async)throw new vc;if(r||_ instanceof Promise)r=(r??Promise.resolve()).then((async()=>{await _;e.issues.length!==t&&(i||(i=eu(e,t)))}));else{if(e.issues.length===t)continue;i||(i=eu(e,t))}}return r?r.then((()=>e)):e},n=(n,i,o)=>{if(eu(n))return n.aborted=!0,n;const a=t(i,r,o);if(a instanceof Promise){if(!1===o.async)throw new vc;return a.then((t=>e._zod.parse(t,o)))}return e._zod.parse(a,o)};e._zod.run=(i,o)=>{if(o.skipChecks)return e._zod.parse(i,o);if('backward'===o.direction){const t=e._zod.parse({value:i.value,issues:[]},{...o,skipChecks:!0});return t instanceof Promise?t.then((e=>n(e,i,o))):n(t,i,o)}const a=e._zod.parse(i,o);if(a instanceof Promise){if(!1===o.async)throw new vc;return a.then((e=>t(e,r,o)))}return t(a,r,o)}}e['~standard']={validate:t=>{try{const n=xu(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(_){return Eu(e,t).then((e=>e.success?{value:e.data}:{issues:e.error?.issues}))}},vendor:'zod',version:1}})),hp=mc('$ZodString',((e,t)=>{fp.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??yd(e._zod.bag),e._zod.parse=(n,_)=>{if(t.coerce)try{n.value=String(n.value)}catch(_){}return'string'==typeof n.value||n.issues.push({expected:'string',code:'invalid_type',input:n.value,inst:e}),n}})),mp=mc('$ZodStringFormat',((e,t)=>{ep.init(e,t),hp.init(e,t)})),gp=mc('$ZodGUID',((e,t)=>{t.pattern??(t.pattern=Wu),mp.init(e,t)})),vp=mc('$ZodUUID',((e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Ju(e))}else t.pattern??(t.pattern=Ju());mp.init(e,t)})),yp=mc('$ZodEmail',((e,t)=>{t.pattern??(t.pattern=ed),mp.init(e,t)})),bp=mc('$ZodURL',((e,t)=>{mp.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:'invalid_format',format:'url',note:'Invalid hostname',pattern:ud.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(':')?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:'invalid_format',format:'url',note:'Invalid protocol',pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(t.normalize?n.value=i.href:n.value=r)}catch(_){n.issues.push({code:'invalid_format',format:'url',input:n.value,inst:e,continue:!t.abort})}}})),_p=mc('$ZodEmoji',((e,t)=>{t.pattern??(t.pattern=rd()),mp.init(e,t)})),wp=mc('$ZodNanoID',((e,t)=>{t.pattern??(t.pattern=Ku),mp.init(e,t)})),kp=mc('$ZodCUID',((e,t)=>{t.pattern??(t.pattern=Bu),mp.init(e,t)})),xp=mc('$ZodCUID2',((e,t)=>{t.pattern??(t.pattern=Fu),mp.init(e,t)})),Sp=mc('$ZodULID',((e,t)=>{t.pattern??(t.pattern=Zu),mp.init(e,t)})),Ep=mc('$ZodXID',((e,t)=>{t.pattern??(t.pattern=Hu),mp.init(e,t)})),$p=mc('$ZodKSUID',((e,t)=>{t.pattern??(t.pattern=qu),mp.init(e,t)})),Op=mc('$ZodISODateTime',((e,t)=>{t.pattern??(t.pattern=vd(t)),mp.init(e,t)})),Ip=mc('$ZodISODate',((e,t)=>{t.pattern??(t.pattern=hd),mp.init(e,t)})),Tp=mc('$ZodISOTime',((e,t)=>{t.pattern??(t.pattern=gd(t)),mp.init(e,t)})),Ap=mc('$ZodISODuration',((e,t)=>{t.pattern??(t.pattern=Gu),mp.init(e,t)})),Cp=mc('$ZodIPv4',((e,t)=>{t.pattern??(t.pattern=id),mp.init(e,t),e._zod.onattach.push((e=>{e._zod.bag.format='ipv4'}))})),Np=mc('$ZodIPv6',((e,t)=>{t.pattern??(t.pattern=od),mp.init(e,t),e._zod.onattach.push((e=>{e._zod.bag.format='ipv6'})),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:'invalid_format',format:'ipv6',input:n.value,inst:e,continue:!t.abort})}}})),Pp=mc('$ZodCIDRv4',((e,t)=>{t.pattern??(t.pattern=ad),mp.init(e,t)})),jp=mc('$ZodCIDRv6',((e,t)=>{t.pattern??(t.pattern=sd),mp.init(e,t),e._zod.check=n=>{const r=n.value.split('/');try{if(2!==r.length)throw new Error;const[e,t]=r;if(!t)throw new Error;const n=Number(t);if(`${n}`!==t)throw new Error;if(n<0||n>128)throw new Error;new URL(`http://[${e}]`)}catch{n.issues.push({code:'invalid_format',format:'cidrv6',input:n.value,inst:e,continue:!t.abort})}}}));function Dp(e){if(''===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const Rp=mc('$ZodBase64',((e,t)=>{t.pattern??(t.pattern=ld),mp.init(e,t),e._zod.onattach.push((e=>{e._zod.bag.contentEncoding='base64'})),e._zod.check=n=>{Dp(n.value)||n.issues.push({code:'invalid_format',format:'base64',input:n.value,inst:e,continue:!t.abort})}}));function Up(e){if(!cd.test(e))return!1;const t=e.replace(/[-_]/g,(e=>'-'===e?'+':'/'));return Dp(t.padEnd(4*Math.ceil(t.length/4),'='))}const Lp=mc('$ZodBase64URL',((e,t)=>{t.pattern??(t.pattern=cd),mp.init(e,t),e._zod.onattach.push((e=>{e._zod.bag.contentEncoding='base64url'})),e._zod.check=n=>{Up(n.value)||n.issues.push({code:'invalid_format',format:'base64url',input:n.value,inst:e,continue:!t.abort})}})),zp=mc('$ZodE164',((e,t)=>{t.pattern??(t.pattern=pd),mp.init(e,t)}));function Vp(e,t=null){try{const n=e.split('.');if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return(!('typ'in i)||'JWT'===i?.typ)&&(!!i.alg&&(!t||'alg'in i&&i.alg===t))}catch{return!1}}const Mp=mc('$ZodJWT',((e,t)=>{mp.init(e,t),e._zod.check=n=>{Vp(n.value,t.alg)||n.issues.push({code:'invalid_format',format:'jwt',input:n.value,inst:e,continue:!t.abort})}})),Bp=mc('$ZodCustomStringFormat',((e,t)=>{mp.init(e,t),e._zod.check=n=>{t.fn(n.value)||n.issues.push({code:'invalid_format',format:t.format,input:n.value,inst:e,continue:!t.abort})}})),Fp=mc('$ZodNumber',((e,t)=>{fp.init(e,t),e._zod.pattern=e._zod.bag.pattern??wd,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(_){}const i=n.value;if('number'==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return n;const o='number'==typeof i?Number.isNaN(i)?'NaN':Number.isFinite(i)?void 0:'Infinity':void 0;return n.issues.push({expected:'number',code:'invalid_type',input:i,inst:e,...o?{received:o}:{}}),n}})),Zp=mc('$ZodNumber',((e,t)=>{qd.init(e,t),Fp.init(e,t)})),Hp=mc('$ZodBoolean',((e,t)=>{fp.init(e,t),e._zod.pattern=kd,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(_){}const i=n.value;return'boolean'==typeof i||n.issues.push({expected:'boolean',code:'invalid_type',input:i,inst:e}),n}})),qp=mc('$ZodBigInt',((e,t)=>{fp.init(e,t),e._zod.pattern=bd,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=BigInt(n.value)}catch(_){}return'bigint'==typeof n.value||n.issues.push({expected:'bigint',code:'invalid_type',input:n.value,inst:e}),n}})),Kp=mc('$ZodBigInt',((e,t)=>{Kd.init(e,t),qp.init(e,t)})),Gp=mc('$ZodSymbol',((e,t)=>{fp.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return'symbol'==typeof r||t.issues.push({expected:'symbol',code:'invalid_type',input:r,inst:e}),t}})),Wp=mc('$ZodUndefined',((e,t)=>{fp.init(e,t),e._zod.pattern=Sd,e._zod.values=new Set([void 0]),e._zod.optin='optional',e._zod.optout='optional',e._zod.parse=(t,n)=>{const r=t.value;return void 0===r||t.issues.push({expected:'undefined',code:'invalid_type',input:r,inst:e}),t}})),Jp=mc('$ZodNull',((e,t)=>{fp.init(e,t),e._zod.pattern=xd,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{const r=t.value;return null===r||t.issues.push({expected:'null',code:'invalid_type',input:r,inst:e}),t}})),Yp=mc('$ZodAny',((e,t)=>{fp.init(e,t),e._zod.parse=e=>e})),Xp=mc('$ZodUnknown',((e,t)=>{fp.init(e,t),e._zod.parse=e=>e})),Qp=mc('$ZodNever',((e,t)=>{fp.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:'never',code:'invalid_type',input:t.value,inst:e}),t)})),ef=mc('$ZodVoid',((e,t)=>{fp.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return void 0===r||t.issues.push({expected:'void',code:'invalid_type',input:r,inst:e}),t}})),tf=mc('$ZodDate',((e,t)=>{fp.init(e,t),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=new Date(n.value)}catch(a){}const i=n.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||n.issues.push({expected:'date',code:'invalid_type',input:i,...o?{received:'Invalid Date'}:{},inst:e}),n}}));function nf(e,t,n){e.issues.length&&t.issues.push(...tu(n,e.issues)),t.value[n]=e.value}const rf=mc('$ZodArray',((e,t)=>{fp.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:'array',code:'invalid_type',input:i,inst:e}),n;n.value=Array(i.length);const o=[];for(let e=0;e<i.length;e++){const a=i[e],s=t.element._zod.run({value:a,issues:[]},r);s instanceof Promise?o.push(s.then((t=>nf(t,n,e)))):nf(s,n,e)}return o.length?Promise.all(o).then((()=>n)):n}}));function of(e,t,n,r){e.issues.length&&t.issues.push(...tu(n,e.issues)),void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function af(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape?.[r]?._zod?.traits?.has('$ZodType'))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=Zc(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function sf(e,t,n,r,i,o){const a=[],s=i.keySet,l=i.catchall._zod,c=l.def.type;for(const u of Object.keys(t)){if(s.has(u))continue;if('never'===c){a.push(u);continue}const i=l.run({value:t[u],issues:[]},r);i instanceof Promise?e.push(i.then((e=>of(e,n,u,t)))):of(i,n,u,t)}return a.length&&n.issues.push({code:'unrecognized_keys',keys:a,input:t,inst:o}),e.length?Promise.all(e).then((()=>n)):n}const lf=mc('$ZodObject',((e,t)=>{fp.init(e,t);const n=Object.getOwnPropertyDescriptor(t,'shape');if(!n?.get){const e=t.shape;Object.defineProperty(t,'shape',{get:()=>{const n={...e};return Object.defineProperty(t,'shape',{value:n}),n}})}const r=Sc((()=>af(t)));Tc(e._zod,'propValues',(()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n}));const i=jc,o=t.catchall;let a;e._zod.parse=(t,n)=>{a??(a=r.value);const s=t.value;if(!i(s))return t.issues.push({expected:'object',code:'invalid_type',input:s,inst:e}),t;t.value={};const l=[],c=a.shape;for(const e of a.keys){const r=c[e]._zod.run({value:s[e],issues:[]},n);r instanceof Promise?l.push(r.then((n=>of(n,t,e,s)))):of(r,t,e,s)}return o?sf(l,s,t,n,r.value,e):l.length?Promise.all(l).then((()=>t)):t}})),cf=mc('$ZodObjectJIT',((e,t)=>{lf.init(e,t);const n=e._zod.parse,r=Sc((()=>af(t)));let i;const o=jc,a=!bc.jitless,s=a&&Dc.value,l=t.catchall;let c;e._zod.parse=(u,d)=>{c??(c=r.value);const p=u.value;return o(p)?a&&s&&!1===d?.async&&!0!==d.jitless?(i||(i=(e=>{const t=new dp(['shape','payload','ctx']),n=r.value,i=e=>{const t=Nc(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write('const input = payload.value;');const o=Object.create(null);let a=0;for(const r of n.keys)o[r]='key_'+a++;t.write('const newResult = {};');for(const r of n.keys){const e=o[r],n=Nc(r);t.write(`const ${e} = ${i(r)};`),t.write(`\n        if (${e}.issues.length) {\n          payload.issues = payload.issues.concat(${e}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${n}, ...iss.path] : [${n}]\n          })));\n        }\n        \n        \n        if (${e}.value === undefined) {\n          if (${n} in input) {\n            newResult[${n}] = undefined;\n          }\n        } else {\n          newResult[${n}] = ${e}.value;\n        }\n        \n      `)}t.write('payload.value = newResult;'),t.write('return payload;');const s=t.compile();return(t,n)=>s(e,t,n)})(t.shape)),u=i(u,d),l?sf([],p,u,d,c,e):u):n(u,d):(u.issues.push({expected:'object',code:'invalid_type',input:p,inst:e}),u)}}));function uf(e,t,n,r){for(const o of e)if(0===o.issues.length)return t.value=o.value,t;const i=e.filter((e=>!eu(e)));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:'invalid_union',input:t.value,inst:n,errors:e.map((e=>e.issues.map((e=>ru(e,r,_c())))))}),t)}const df=mc('$ZodUnion',((e,t)=>{fp.init(e,t),Tc(e._zod,'optin',(()=>t.options.some((e=>'optional'===e._zod.optin))?'optional':void 0)),Tc(e._zod,'optout',(()=>t.options.some((e=>'optional'===e._zod.optout))?'optional':void 0)),Tc(e._zod,'values',(()=>{if(t.options.every((e=>e._zod.values)))return new Set(t.options.flatMap((e=>Array.from(e._zod.values))))})),Tc(e._zod,'pattern',(()=>{if(t.options.every((e=>e._zod.pattern))){const e=t.options.map((e=>e._zod.pattern));return new RegExp(`^(${e.map((e=>$c(e.source))).join('|')})$`)}}));const n=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(i,o)=>{if(n)return r(i,o);let a=!1;const s=[];for(const e of t.options){const t=e._zod.run({value:i.value,issues:[]},o);if(t instanceof Promise)s.push(t),a=!0;else{if(0===t.issues.length)return t;s.push(t)}}return a?Promise.all(s).then((t=>uf(t,i,e,o))):uf(s,i,e,o)}})),pf=mc('$ZodDiscriminatedUnion',((e,t)=>{df.init(e,t);const n=e._zod.parse;Tc(e._zod,'propValues',(()=>{const e={};for(const n of t.options){const r=n._zod.propValues;if(!r||0===Object.keys(r).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(const r of n)e[t].add(r)}}return e}));const r=Sc((()=>{const e=t.options,n=new Map;for(const r of e){const e=r._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(const t of e){if(n.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n}));e._zod.parse=(i,o)=>{const a=i.value;if(!jc(a))return i.issues.push({code:'invalid_type',expected:'object',input:a,inst:e}),i;const s=r.value.get(a?.[t.discriminator]);return s?s._zod.run(i,o):t.unionFallback?n(i,o):(i.issues.push({code:'invalid_union',errors:[],note:'No matching discriminator',discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),i)}})),ff=mc('$ZodIntersection',((e,t)=>{fp.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,i=t.left._zod.run({value:r,issues:[]},n),o=t.right._zod.run({value:r,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then((([t,n])=>mf(e,t,n))):mf(e,i,o)}}));function hf(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Rc(e)&&Rc(t)){const n=Object.keys(t),r=Object.keys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const o of r){const n=hf(e[o],t[o]);if(!n.valid)return{valid:!1,mergeErrorPath:[o,...n.mergeErrorPath]};i[o]=n.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const i=hf(e[r],t[r]);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function mf(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),eu(e))return e;const r=hf(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const gf=mc('$ZodTuple',((e,t)=>{fp.init(e,t);const n=t.items,r=n.length-[...n].reverse().findIndex((e=>'optional'!==e._zod.optin));e._zod.parse=(i,o)=>{const a=i.value;if(!Array.isArray(a))return i.issues.push({input:a,inst:e,expected:'tuple',code:'invalid_type'}),i;i.value=[];const s=[];if(!t.rest){const t=a.length>n.length,o=a.length<r-1;if(t||o)return i.issues.push({...t?{code:'too_big',maximum:n.length}:{code:'too_small',minimum:n.length},input:a,inst:e,origin:'array'}),i}let l=-1;for(const e of n){if(l++,l>=a.length&&l>=r)continue;const t=e._zod.run({value:a[l],issues:[]},o);t instanceof Promise?s.push(t.then((e=>vf(e,i,l)))):vf(t,i,l)}if(t.rest){const e=a.slice(n.length);for(const n of e){l++;const e=t.rest._zod.run({value:n,issues:[]},o);e instanceof Promise?s.push(e.then((e=>vf(e,i,l)))):vf(e,i,l)}}return s.length?Promise.all(s).then((()=>i)):i}}));function vf(e,t,n){e.issues.length&&t.issues.push(...tu(n,e.issues)),t.value[n]=e.value}const yf=mc('$ZodRecord',((e,t)=>{fp.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!Rc(i))return n.issues.push({expected:'record',code:'invalid_type',input:i,inst:e}),n;const o=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;n.value={};for(const e of a)if('string'==typeof e||'number'==typeof e||'symbol'==typeof e){const a=t.valueType._zod.run({value:i[e],issues:[]},r);a instanceof Promise?o.push(a.then((t=>{t.issues.length&&n.issues.push(...tu(e,t.issues)),n.value[e]=t.value}))):(a.issues.length&&n.issues.push(...tu(e,a.issues)),n.value[e]=a.value)}let s;for(const e in i)a.has(e)||(s=s??[],s.push(e));s&&s.length>0&&n.issues.push({code:'unrecognized_keys',input:i,inst:e,keys:s})}else{n.value={};for(const a of Reflect.ownKeys(i)){if('__proto__'===a)continue;const s=t.keyType._zod.run({value:a,issues:[]},r);if(s instanceof Promise)throw new Error('Async schemas not supported in object keys currently');if(s.issues.length){n.issues.push({code:'invalid_key',origin:'record',issues:s.issues.map((e=>ru(e,r,_c()))),input:a,path:[a],inst:e}),n.value[s.value]=s.value;continue}const l=t.valueType._zod.run({value:i[a],issues:[]},r);l instanceof Promise?o.push(l.then((e=>{e.issues.length&&n.issues.push(...tu(a,e.issues)),n.value[s.value]=e.value}))):(l.issues.length&&n.issues.push(...tu(a,l.issues)),n.value[s.value]=l.value)}}return o.length?Promise.all(o).then((()=>n)):n}})),bf=mc('$ZodMap',((e,t)=>{fp.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!(i instanceof Map))return n.issues.push({expected:'map',code:'invalid_type',input:i,inst:e}),n;const o=[];n.value=new Map;for(const[a,s]of i){const l=t.keyType._zod.run({value:a,issues:[]},r),c=t.valueType._zod.run({value:s,issues:[]},r);l instanceof Promise||c instanceof Promise?o.push(Promise.all([l,c]).then((([t,o])=>{_f(t,o,n,a,i,e,r)}))):_f(l,c,n,a,i,e,r)}return o.length?Promise.all(o).then((()=>n)):n}}));function _f(e,t,n,r,i,o,a){e.issues.length&&(Lc.has(typeof r)?n.issues.push(...tu(r,e.issues)):n.issues.push({code:'invalid_key',origin:'map',input:i,inst:o,issues:e.issues.map((e=>ru(e,a,_c())))})),t.issues.length&&(Lc.has(typeof r)?n.issues.push(...tu(r,t.issues)):n.issues.push({origin:'map',code:'invalid_element',input:i,inst:o,key:r,issues:t.issues.map((e=>ru(e,a,_c())))})),n.value.set(e.value,t.value)}const wf=mc('$ZodSet',((e,t)=>{fp.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!(i instanceof Set))return n.issues.push({input:i,inst:e,expected:'set',code:'invalid_type'}),n;const o=[];n.value=new Set;for(const e of i){const i=t.valueType._zod.run({value:e,issues:[]},r);i instanceof Promise?o.push(i.then((e=>kf(e,n)))):kf(i,n)}return o.length?Promise.all(o).then((()=>n)):n}}));function kf(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}const xf=mc('$ZodEnum',((e,t)=>{fp.init(e,t);const n=wc(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter((e=>Lc.has(typeof e))).map((e=>'string'==typeof e?Vc(e):e.toString())).join('|')})$`),e._zod.parse=(t,i)=>{const o=t.value;return r.has(o)||t.issues.push({code:'invalid_value',values:n,input:o,inst:e}),t}})),Sf=mc('$ZodLiteral',((e,t)=>{if(fp.init(e,t),0===t.values.length)throw new Error('Cannot create literal schema with no valid values');e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map((e=>'string'==typeof e?Vc(e):e?Vc(e.toString()):String(e))).join('|')})$`),e._zod.parse=(n,r)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:'invalid_value',values:t.values,input:i,inst:e}),n}})),Ef=mc('$ZodFile',((e,t)=>{fp.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return r instanceof File||t.issues.push({expected:'file',code:'invalid_type',input:r,inst:e}),t}})),$f=mc('$ZodTransform',((e,t)=>{fp.init(e,t),e._zod.parse=(n,r)=>{if('backward'===r.direction)throw new yc(e.constructor.name);const i=t.transform(n.value,n);if(r.async){return(i instanceof Promise?i:Promise.resolve(i)).then((e=>(n.value=e,n)))}if(i instanceof Promise)throw new vc;return n.value=i,n}}));function Of(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const If=mc('$ZodOptional',((e,t)=>{fp.init(e,t),e._zod.optin='optional',e._zod.optout='optional',Tc(e._zod,'values',(()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0)),Tc(e._zod,'pattern',(()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${$c(e.source)})?$`):void 0})),e._zod.parse=(e,n)=>{if('optional'===t.innerType._zod.optin){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then((t=>Of(t,e.value))):Of(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}})),Tf=mc('$ZodNullable',((e,t)=>{fp.init(e,t),Tc(e._zod,'optin',(()=>t.innerType._zod.optin)),Tc(e._zod,'optout',(()=>t.innerType._zod.optout)),Tc(e._zod,'pattern',(()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${$c(e.source)}|null)$`):void 0})),Tc(e._zod,'values',(()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0)),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)})),Af=mc('$ZodDefault',((e,t)=>{fp.init(e,t),e._zod.optin='optional',Tc(e._zod,'values',(()=>t.innerType._zod.values)),e._zod.parse=(e,n)=>{if('backward'===n.direction)return t.innerType._zod.run(e,n);if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then((e=>Cf(e,t))):Cf(r,t)}}));function Cf(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const Nf=mc('$ZodPrefault',((e,t)=>{fp.init(e,t),e._zod.optin='optional',Tc(e._zod,'values',(()=>t.innerType._zod.values)),e._zod.parse=(e,n)=>('backward'===n.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))})),Pf=mc('$ZodNonOptional',((e,t)=>{fp.init(e,t),Tc(e._zod,'values',(()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter((e=>void 0!==e))):void 0})),e._zod.parse=(n,r)=>{const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then((t=>jf(t,e))):jf(i,e)}}));function jf(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:'invalid_type',expected:'nonoptional',input:e.value,inst:t}),e}const Df=mc('$ZodSuccess',((e,t)=>{fp.init(e,t),e._zod.parse=(e,n)=>{if('backward'===n.direction)throw new yc('ZodSuccess');const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then((t=>(e.value=0===t.issues.length,e))):(e.value=0===r.issues.length,e)}})),Rf=mc('$ZodCatch',((e,t)=>{fp.init(e,t),Tc(e._zod,'optin',(()=>t.innerType._zod.optin)),Tc(e._zod,'optout',(()=>t.innerType._zod.optout)),Tc(e._zod,'values',(()=>t.innerType._zod.values)),e._zod.parse=(e,n)=>{if('backward'===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then((r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map((e=>ru(e,n,_c())))},input:e.value}),e.issues=[]),e))):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map((e=>ru(e,n,_c())))},input:e.value}),e.issues=[]),e)}})),Uf=mc('$ZodNaN',((e,t)=>{fp.init(e,t),e._zod.parse=(t,n)=>('number'==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:'nan',code:'invalid_type'}),t)})),Lf=mc('$ZodPipe',((e,t)=>{fp.init(e,t),Tc(e._zod,'values',(()=>t.in._zod.values)),Tc(e._zod,'optin',(()=>t.in._zod.optin)),Tc(e._zod,'optout',(()=>t.out._zod.optout)),Tc(e._zod,'propValues',(()=>t.in._zod.propValues)),e._zod.parse=(e,n)=>{if('backward'===n.direction){const r=t.out._zod.run(e,n);return r instanceof Promise?r.then((e=>zf(e,t.in,n))):zf(r,t.in,n)}const r=t.in._zod.run(e,n);return r instanceof Promise?r.then((e=>zf(e,t.out,n))):zf(r,t.out,n)}}));function zf(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Vf=mc('$ZodCodec',((e,t)=>{fp.init(e,t),Tc(e._zod,'values',(()=>t.in._zod.values)),Tc(e._zod,'optin',(()=>t.in._zod.optin)),Tc(e._zod,'optout',(()=>t.out._zod.optout)),Tc(e._zod,'propValues',(()=>t.in._zod.propValues)),e._zod.parse=(e,n)=>{if('forward'===(n.direction||'forward')){const r=t.in._zod.run(e,n);return r instanceof Promise?r.then((e=>Mf(e,t,n))):Mf(r,t,n)}{const r=t.out._zod.run(e,n);return r instanceof Promise?r.then((e=>Mf(e,t,n))):Mf(r,t,n)}}}));function Mf(e,t,n){if(e.issues.length)return e.aborted=!0,e;if('forward'===(n.direction||'forward')){const r=t.transform(e.value,e);return r instanceof Promise?r.then((r=>Bf(e,r,t.out,n))):Bf(e,r,t.out,n)}{const r=t.reverseTransform(e.value,e);return r instanceof Promise?r.then((r=>Bf(e,r,t.in,n))):Bf(e,r,t.in,n)}}function Bf(e,t,n,r){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:t,issues:e.issues},r)}const Ff=mc('$ZodReadonly',((e,t)=>{fp.init(e,t),Tc(e._zod,'propValues',(()=>t.innerType._zod.propValues)),Tc(e._zod,'values',(()=>t.innerType._zod.values)),Tc(e._zod,'optin',(()=>t.innerType._zod.optin)),Tc(e._zod,'optout',(()=>t.innerType._zod.optout)),e._zod.parse=(e,n)=>{if('backward'===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Zf):Zf(r)}}));function Zf(e){return e.value=Object.freeze(e.value),e}const Hf=mc('$ZodTemplateLiteral',((e,t)=>{fp.init(e,t);const n=[];for(const r of t.parts)if('object'==typeof r&&null!==r){if(!r._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...r._zod.traits].shift()}`);const e=r._zod.pattern instanceof RegExp?r._zod.pattern.source:r._zod.pattern;if(!e)throw new Error(`Invalid template literal part: ${r._zod.traits}`);const t=e.startsWith('^')?1:0,i=e.endsWith('$')?e.length-1:e.length;n.push(e.slice(t,i))}else{if(null!==r&&!zc.has(typeof r))throw new Error(`Invalid template literal part: ${r}`);n.push(Vc(`${r}`))}e._zod.pattern=new RegExp(`^${n.join('')}$`),e._zod.parse=(n,r)=>'string'!=typeof n.value?(n.issues.push({input:n.value,inst:e,expected:'template_literal',code:'invalid_type'}),n):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:e,code:'invalid_format',format:t.format??'template_literal',pattern:e._zod.pattern.source}),n)})),qf=mc('$ZodFunction',((e,t)=>(fp.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if('function'!=typeof t)throw new Error('implement() must be called with a function');return function(...n){const r=e._def.input?bu(e._def.input,n):n,i=Reflect.apply(t,this,r);return e._def.output?bu(e._def.output,i):i}},e.implementAsync=t=>{if('function'!=typeof t)throw new Error('implementAsync() must be called with a function');return async function(...n){const r=e._def.input?await wu(e._def.input,n):n,i=await Reflect.apply(t,this,r);return e._def.output?await wu(e._def.output,i):i}},e._zod.parse=(t,n)=>{if('function'!=typeof t.value)return t.issues.push({code:'invalid_type',expected:'function',input:t.value,inst:e}),t;const r=e._def.output&&'promise'===e._def.output._zod.def.type;return t.value=r?e.implementAsync(t.value):e.implement(t.value),t},e.input=(...t)=>{const n=e.constructor;return Array.isArray(t[0])?new n({type:'function',input:new gf({type:'tuple',items:t[0],rest:t[1]}),output:e._def.output}):new n({type:'function',input:t[0],output:e._def.output})},e.output=t=>new(0,e.constructor)({type:'function',input:e._def.input,output:t}),e))),Kf=mc('$ZodPromise',((e,t)=>{fp.init(e,t),e._zod.parse=(e,n)=>Promise.resolve(e.value).then((e=>t.innerType._zod.run({value:e,issues:[]},n)))})),Gf=mc('$ZodLazy',((e,t)=>{fp.init(e,t),Tc(e._zod,'innerType',(()=>t.getter())),Tc(e._zod,'pattern',(()=>e._zod.innerType._zod.pattern)),Tc(e._zod,'propValues',(()=>e._zod.innerType._zod.propValues)),Tc(e._zod,'optin',(()=>e._zod.innerType._zod.optin??void 0)),Tc(e._zod,'optout',(()=>e._zod.innerType._zod.optout??void 0)),e._zod.parse=(t,n)=>e._zod.innerType._zod.run(t,n)})),Wf=mc('$ZodCustom',((e,t)=>{Md.init(e,t),fp.init(e,t),e._zod.parse=(e,_)=>e,e._zod.check=n=>{const r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then((t=>Jf(t,n,r,e)));Jf(i,n,r,e)}}));function Jf(e,t,n,r){if(!e){const e={code:'custom',input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(au(e))}}const Yf=()=>{const e={string:{unit:'',verb:' '},file:{unit:'',verb:' '},array:{unit:'',verb:' '},set:{unit:'',verb:' '}};function t(t){return e[t]??null}const n={regex:'',email:' ',url:'',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'   ISO',date:'  ISO',time:'  ISO',duration:'  ISO',ipv4:' IPv4',ipv6:' IPv6',cidrv4:'   IPv4',cidrv6:'   IPv6',base64:'  base64-encoded',base64url:'  base64url-encoded',json_string:'   JSON',e164:'   E.164',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return`  :   ${e.expected}    ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`  :   ${Fc(e.values[0])}`:`  :     : ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`   :    ${e.origin??''} ${n} ${e.maximum.toString()} ${r.unit??''}`:`  :    ${e.origin??''} ${n} ${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`  :   ${e.origin}   ${n} ${e.minimum.toString()} ${r.unit}`:`  :   ${e.origin}   ${n} ${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`  :     "${e.prefix}"`:'ends_with'===t.format?`  :     "${t.suffix}"`:'includes'===t.format?`  :    "${t.includes}"`:'regex'===t.format?`  :     ${t.pattern}`:`${n[t.format]??e.format}  `}case'not_multiple_of':return`  :      ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?'':''} ${e.keys.length>1?'':''}: ${kc(e.keys,' ')}`;case'invalid_key':return`    ${e.origin}`;case'invalid_union':default:return'  ';case'invalid_element':return`    ${e.origin}`}}};const Xf=()=>{const e={string:{unit:'simvol',verb:'olmaldr'},file:{unit:'bayt',verb:'olmaldr'},array:{unit:'element',verb:'olmaldr'},set:{unit:'element',verb:'olmaldr'}};function t(t){return e[t]??null}const n={regex:'input',email:'email address',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO datetime',date:'ISO date',time:'ISO time',duration:'ISO duration',ipv4:'IPv4 address',ipv6:'IPv6 address',cidrv4:'IPv4 range',cidrv6:'IPv6 range',base64:'base64-encoded string',base64url:'base64url-encoded string',json_string:'JSON string',e164:'E.164 number',jwt:'JWT',template_literal:'input'};return e=>{switch(e.code){case'invalid_type':return`Yanl dyr: gzlniln ${e.expected}, daxil olan ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Yanl dyr: gzlniln ${Fc(e.values[0])}`:`Yanl seim: aadaklardan biri olmaldr: ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`ox byk: gzlniln ${e.origin??'dyr'} ${n}${e.maximum.toString()} ${r.unit??'element'}`:`ox byk: gzlniln ${e.origin??'dyr'} ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`ox kiik: gzlniln ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:`ox kiik: gzlniln ${e.origin} ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Yanl mtn: "${t.prefix}" il balamaldr`:'ends_with'===t.format?`Yanl mtn: "${t.suffix}" il bitmlidir`:'includes'===t.format?`Yanl mtn: "${t.includes}" daxil olmaldr`:'regex'===t.format?`Yanl mtn: ${t.pattern} ablonuna uyun olmaldr`:`Yanl ${n[t.format]??e.format}`}case'not_multiple_of':return`Yanl dd: ${e.divisor} il bln biln olmaldr`;case'unrecognized_keys':return`Tannmayan aar${e.keys.length>1?'lar':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`${e.origin} daxilind yanl aar`;case'invalid_union':default:return'Yanl dyr';case'invalid_element':return`${e.origin} daxilind yanl dyr`}}};function Qf(e,t,n,r){const i=Math.abs(e),o=i%10,a=i%100;return a>=11&&a<=19?r:1===o?t:o>=2&&o<=4?n:r}const eh=()=>{const e={string:{unit:{one:'',few:'',many:''},verb:''},array:{unit:{one:'',few:'',many:''},verb:''},set:{unit:{one:'',few:'',many:''},verb:''},file:{unit:{one:'',few:'',many:''},verb:''}};function t(t){return e[t]??null}const n={regex:'',email:'email ',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO   ',date:'ISO ',time:'ISO ',duration:'ISO ',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'   base64',base64url:'   base64url',json_string:'JSON ',e164:' E.164',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?` :  ${Fc(e.values[0])}`:` :    ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);if(r){const t=Qf(Number(e.maximum),r.unit.one,r.unit.few,r.unit.many);return` : ,  ${e.origin??''}  ${r.verb} ${n}${e.maximum.toString()} ${t}`}return` : ,  ${e.origin??''}   ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);if(r){const t=Qf(Number(e.minimum),r.unit.one,r.unit.few,r.unit.many);return` : ,  ${e.origin}  ${r.verb} ${n}${e.minimum.toString()} ${t}`}return` : ,  ${e.origin}   ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?` :    "${t.prefix}"`:'ends_with'===t.format?` :    "${t.suffix}"`:'includes'===t.format?` :   "${t.includes}"`:'regex'===t.format?` :    ${t.pattern}`:` ${n[t.format]??e.format}`}case'not_multiple_of':return` :    ${e.divisor}`;case'unrecognized_keys':return` ${e.keys.length>1?'':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`   ${e.origin}`;case'invalid_union':default:return' ';case'invalid_element':return`   ${e.origin}`}}};const th=()=>{const e={string:{unit:'',verb:' '},file:{unit:'',verb:' '},array:{unit:'',verb:' '},set:{unit:'',verb:' '}};function t(t){return e[t]??null}const n={regex:'',email:' ',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO ',date:'ISO ',time:'ISO ',duration:'ISO ',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'base64- ',base64url:'base64url- ',json_string:'JSON ',e164:'E.164 ',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?` :  ${Fc(e.values[0])}`:` :    ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` :   ${e.origin??''}   ${n}${e.maximum.toString()} ${r.unit??''}`:` :   ${e.origin??''}   ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` :   ${e.origin}   ${n}${e.minimum.toString()} ${r.unit}`:` :   ${e.origin}   ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;if('starts_with'===t.format)return` :     "${t.prefix}"`;if('ends_with'===t.format)return` :     "${t.suffix}"`;if('includes'===t.format)return` :    "${t.includes}"`;if('regex'===t.format)return` :     ${t.pattern}`;let r='';return'emoji'===t.format&&(r=''),'datetime'===t.format&&(r=''),'date'===t.format&&(r=''),'time'===t.format&&(r=''),'duration'===t.format&&(r=''),`${r} ${n[t.format]??e.format}`}case'not_multiple_of':return` :      ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?'':''} ${e.keys.length>1?'':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`   ${e.origin}`;case'invalid_union':default:return' ';case'invalid_element':return`   ${e.origin}`}}};const nh=()=>{const e={string:{unit:'carcters',verb:'contenir'},file:{unit:'bytes',verb:'contenir'},array:{unit:'elements',verb:'contenir'},set:{unit:'elements',verb:'contenir'}};function t(t){return e[t]??null}const n={regex:'entrada',email:'adrea electrnica',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'data i hora ISO',date:'data ISO',time:'hora ISO',duration:'durada ISO',ipv4:'adrea IPv4',ipv6:'adrea IPv6',cidrv4:'rang IPv4',cidrv6:'rang IPv6',base64:'cadena codificada en base64',base64url:'cadena codificada en base64url',json_string:'cadena JSON',e164:'nmero E.164',jwt:'JWT',template_literal:'entrada'};return e=>{switch(e.code){case'invalid_type':return`Tipus invlid: s'esperava ${e.expected}, s'ha rebut ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Valor invlid: s'esperava ${Fc(e.values[0])}`:`Opci invlida: s'esperava una de ${kc(e.values,' o ')}`;case'too_big':{const n=e.inclusive?'com a mxim':'menys de',r=t(e.origin);return r?`Massa gran: s'esperava que ${e.origin??'el valor'} contingus ${n} ${e.maximum.toString()} ${r.unit??'elements'}`:`Massa gran: s'esperava que ${e.origin??'el valor'} fos ${n} ${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'com a mnim':'ms de',r=t(e.origin);return r?`Massa petit: s'esperava que ${e.origin} contingus ${n} ${e.minimum.toString()} ${r.unit}`:`Massa petit: s'esperava que ${e.origin} fos ${n} ${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Format invlid: ha de comenar amb "${t.prefix}"`:'ends_with'===t.format?`Format invlid: ha d'acabar amb "${t.suffix}"`:'includes'===t.format?`Format invlid: ha d'incloure "${t.includes}"`:'regex'===t.format?`Format invlid: ha de coincidir amb el patr ${t.pattern}`:`Format invlid per a ${n[t.format]??e.format}`}case'not_multiple_of':return`Nmero invlid: ha de ser mltiple de ${e.divisor}`;case'unrecognized_keys':return`Clau${e.keys.length>1?'s':''} no reconeguda${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`Clau invlida a ${e.origin}`;case'invalid_union':default:return'Entrada invlida';case'invalid_element':return`Element invlid a ${e.origin}`}}};const rh=()=>{const e={string:{unit:'znak',verb:'mt'},file:{unit:'bajt',verb:'mt'},array:{unit:'prvk',verb:'mt'},set:{unit:'prvk',verb:'mt'}};function t(t){return e[t]??null}const n={regex:'regulrn vraz',email:'e-mailov adresa',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'datum a as ve formtu ISO',date:'datum ve formtu ISO',time:'as ve formtu ISO',duration:'doba trvn ISO',ipv4:'IPv4 adresa',ipv6:'IPv6 adresa',cidrv4:'rozsah IPv4',cidrv6:'rozsah IPv6',base64:'etzec zakdovan ve formtu base64',base64url:'etzec zakdovan ve formtu base64url',json_string:'etzec ve formtu JSON',e164:'slo E.164',jwt:'JWT',template_literal:'vstup'};return e=>{switch(e.code){case'invalid_type':return`Neplatn vstup: oekvno ${e.expected}, obdreno ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'slo';case'string':return'etzec';case'boolean':return'boolean';case'bigint':return'bigint';case'function':return'funkce';case'symbol':return'symbol';case'undefined':return'undefined';case'object':if(Array.isArray(e))return'pole';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Neplatn vstup: oekvno ${Fc(e.values[0])}`:`Neplatn monost: oekvna jedna z hodnot ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Hodnota je pli velk: ${e.origin??'hodnota'} mus mt ${n}${e.maximum.toString()} ${r.unit??'prvk'}`:`Hodnota je pli velk: ${e.origin??'hodnota'} mus bt ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Hodnota je pli mal: ${e.origin??'hodnota'} mus mt ${n}${e.minimum.toString()} ${r.unit??'prvk'}`:`Hodnota je pli mal: ${e.origin??'hodnota'} mus bt ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Neplatn etzec: mus zanat na "${t.prefix}"`:'ends_with'===t.format?`Neplatn etzec: mus konit na "${t.suffix}"`:'includes'===t.format?`Neplatn etzec: mus obsahovat "${t.includes}"`:'regex'===t.format?`Neplatn etzec: mus odpovdat vzoru ${t.pattern}`:`Neplatn formt ${n[t.format]??e.format}`}case'not_multiple_of':return`Neplatn slo: mus bt nsobkem ${e.divisor}`;case'unrecognized_keys':return`Neznm kle: ${kc(e.keys,', ')}`;case'invalid_key':return`Neplatn kl v ${e.origin}`;case'invalid_union':default:return'Neplatn vstup';case'invalid_element':return`Neplatn hodnota v ${e.origin}`}}};const ih=()=>{const e={string:{unit:'tegn',verb:'havde'},file:{unit:'bytes',verb:'havde'},array:{unit:'elementer',verb:'indeholdt'},set:{unit:'elementer',verb:'indeholdt'}},t={string:'streng',number:'tal',boolean:'boolean',array:'liste',object:'objekt',set:'st',file:'fil'};function n(t){return e[t]??null}function r(e){return t[e]??e}const i={regex:'input',email:'e-mailadresse',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO dato- og klokkeslt',date:'ISO-dato',time:'ISO-klokkeslt',duration:'ISO-varighed',ipv4:'IPv4-omrde',ipv6:'IPv6-omrde',cidrv4:'IPv4-spektrum',cidrv6:'IPv6-spektrum',base64:'base64-kodet streng',base64url:'base64url-kodet streng',json_string:'JSON-streng',e164:'E.164-nummer',jwt:'JWT',template_literal:'input'};return e=>{switch(e.code){case'invalid_type':return`Ugyldigt input: forventede ${r(e.expected)}, fik ${r((e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'tal';case'object':return Array.isArray(e)?'liste':null===e?'null':Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:'objekt'}return t})(e.input))}`;case'invalid_value':return 1===e.values.length?`Ugyldig vrdi: forventede ${Fc(e.values[0])}`:`Ugyldigt valg: forventede en af flgende ${kc(e.values,'|')}`;case'too_big':{const t=e.inclusive?'<=':'<',i=n(e.origin),o=r(e.origin);return i?`For stor: forventede ${o??'value'} ${i.verb} ${t} ${e.maximum.toString()} ${i.unit??'elementer'}`:`For stor: forventede ${o??'value'} havde ${t} ${e.maximum.toString()}`}case'too_small':{const t=e.inclusive?'>=':'>',i=n(e.origin),o=r(e.origin);return i?`For lille: forventede ${o} ${i.verb} ${t} ${e.minimum.toString()} ${i.unit}`:`For lille: forventede ${o} havde ${t} ${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Ugyldig streng: skal starte med "${t.prefix}"`:'ends_with'===t.format?`Ugyldig streng: skal ende med "${t.suffix}"`:'includes'===t.format?`Ugyldig streng: skal indeholde "${t.includes}"`:'regex'===t.format?`Ugyldig streng: skal matche mnsteret ${t.pattern}`:`Ugyldig ${i[t.format]??e.format}`}case'not_multiple_of':return`Ugyldigt tal: skal vre deleligt med ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?'Ukendte ngler':'Ukendt ngle'}: ${kc(e.keys,', ')}`;case'invalid_key':return`Ugyldig ngle i ${e.origin}`;case'invalid_union':return'Ugyldigt input: matcher ingen af de tilladte typer';case'invalid_element':return`Ugyldig vrdi i ${e.origin}`;default:return'Ugyldigt input'}}};const oh=()=>{const e={string:{unit:'Zeichen',verb:'zu haben'},file:{unit:'Bytes',verb:'zu haben'},array:{unit:'Elemente',verb:'zu haben'},set:{unit:'Elemente',verb:'zu haben'}};function t(t){return e[t]??null}const n={regex:'Eingabe',email:'E-Mail-Adresse',url:'URL',emoji:'Emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO-Datum und -Uhrzeit',date:'ISO-Datum',time:'ISO-Uhrzeit',duration:'ISO-Dauer',ipv4:'IPv4-Adresse',ipv6:'IPv6-Adresse',cidrv4:'IPv4-Bereich',cidrv6:'IPv6-Bereich',base64:'Base64-codierter String',base64url:'Base64-URL-codierter String',json_string:'JSON-String',e164:'E.164-Nummer',jwt:'JWT',template_literal:'Eingabe'};return e=>{switch(e.code){case'invalid_type':return`Ungltige Eingabe: erwartet ${e.expected}, erhalten ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'Zahl';case'object':if(Array.isArray(e))return'Array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Ungltige Eingabe: erwartet ${Fc(e.values[0])}`:`Ungltige Option: erwartet eine von ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Zu gro: erwartet, dass ${e.origin??'Wert'} ${n}${e.maximum.toString()} ${r.unit??'Elemente'} hat`:`Zu gro: erwartet, dass ${e.origin??'Wert'} ${n}${e.maximum.toString()} ist`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Zu klein: erwartet, dass ${e.origin} ${n}${e.minimum.toString()} ${r.unit} hat`:`Zu klein: erwartet, dass ${e.origin} ${n}${e.minimum.toString()} ist`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Ungltiger String: muss mit "${t.prefix}" beginnen`:'ends_with'===t.format?`Ungltiger String: muss mit "${t.suffix}" enden`:'includes'===t.format?`Ungltiger String: muss "${t.includes}" enthalten`:'regex'===t.format?`Ungltiger String: muss dem Muster ${t.pattern} entsprechen`:`Ungltig: ${n[t.format]??e.format}`}case'not_multiple_of':return`Ungltige Zahl: muss ein Vielfaches von ${e.divisor} sein`;case'unrecognized_keys':return`${e.keys.length>1?'Unbekannte Schlssel':'Unbekannter Schlssel'}: ${kc(e.keys,', ')}`;case'invalid_key':return`Ungltiger Schlssel in ${e.origin}`;case'invalid_union':default:return'Ungltige Eingabe';case'invalid_element':return`Ungltiger Wert in ${e.origin}`}}};const ah=()=>{const e={string:{unit:'characters',verb:'to have'},file:{unit:'bytes',verb:'to have'},array:{unit:'items',verb:'to have'},set:{unit:'items',verb:'to have'}};function t(t){return e[t]??null}const n={regex:'input',email:'email address',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO datetime',date:'ISO date',time:'ISO time',duration:'ISO duration',ipv4:'IPv4 address',ipv6:'IPv6 address',cidrv4:'IPv4 range',cidrv6:'IPv6 range',base64:'base64-encoded string',base64url:'base64url-encoded string',json_string:'JSON string',e164:'E.164 number',jwt:'JWT',template_literal:'input'};return e=>{switch(e.code){case'invalid_type':return`Invalid input: expected ${e.expected}, received ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Invalid input: expected ${Fc(e.values[0])}`:`Invalid option: expected one of ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Too big: expected ${e.origin??'value'} to have ${n}${e.maximum.toString()} ${r.unit??'elements'}`:`Too big: expected ${e.origin??'value'} to be ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Too small: expected ${e.origin} to have ${n}${e.minimum.toString()} ${r.unit}`:`Too small: expected ${e.origin} to be ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Invalid string: must start with "${t.prefix}"`:'ends_with'===t.format?`Invalid string: must end with "${t.suffix}"`:'includes'===t.format?`Invalid string: must include "${t.includes}"`:'regex'===t.format?`Invalid string: must match pattern ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case'not_multiple_of':return`Invalid number: must be a multiple of ${e.divisor}`;case'unrecognized_keys':return`Unrecognized key${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`Invalid key in ${e.origin}`;case'invalid_union':default:return'Invalid input';case'invalid_element':return`Invalid value in ${e.origin}`}}};function sh(){return{localeError:ah()}}const lh=()=>{const e={string:{unit:'karaktrojn',verb:'havi'},file:{unit:'bajtojn',verb:'havi'},array:{unit:'elementojn',verb:'havi'},set:{unit:'elementojn',verb:'havi'}};function t(t){return e[t]??null}const n={regex:'enigo',email:'retadreso',url:'URL',emoji:'emoio',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO-datotempo',date:'ISO-dato',time:'ISO-tempo',duration:'ISO-daro',ipv4:'IPv4-adreso',ipv6:'IPv6-adreso',cidrv4:'IPv4-rango',cidrv6:'IPv6-rango',base64:'64-ume kodita karaktraro',base64url:'URL-64-ume kodita karaktraro',json_string:'JSON-karaktraro',e164:'E.164-nombro',jwt:'JWT',template_literal:'enigo'};return e=>{switch(e.code){case'invalid_type':return`Nevalida enigo: atendiis ${e.expected}, riceviis ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'nombro';case'object':if(Array.isArray(e))return'tabelo';if(null===e)return'senvalora';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Nevalida enigo: atendiis ${Fc(e.values[0])}`:`Nevalida opcio: atendiis unu el ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Tro granda: atendiis ke ${e.origin??'valoro'} havu ${n}${e.maximum.toString()} ${r.unit??'elementojn'}`:`Tro granda: atendiis ke ${e.origin??'valoro'} havu ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Tro malgranda: atendiis ke ${e.origin} havu ${n}${e.minimum.toString()} ${r.unit}`:`Tro malgranda: atendiis ke ${e.origin} estu ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Nevalida karaktraro: devas komencii per "${t.prefix}"`:'ends_with'===t.format?`Nevalida karaktraro: devas finii per "${t.suffix}"`:'includes'===t.format?`Nevalida karaktraro: devas inkluzivi "${t.includes}"`:'regex'===t.format?`Nevalida karaktraro: devas kongrui kun la modelo ${t.pattern}`:`Nevalida ${n[t.format]??e.format}`}case'not_multiple_of':return`Nevalida nombro: devas esti oblo de ${e.divisor}`;case'unrecognized_keys':return`Nekonata${e.keys.length>1?'j':''} losilo${e.keys.length>1?'j':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`Nevalida losilo en ${e.origin}`;case'invalid_union':default:return'Nevalida enigo';case'invalid_element':return`Nevalida valoro en ${e.origin}`}}};const ch=()=>{const e={string:{unit:'caracteres',verb:'tener'},file:{unit:'bytes',verb:'tener'},array:{unit:'elementos',verb:'tener'},set:{unit:'elementos',verb:'tener'}},t={string:'texto',number:'nmero',boolean:'booleano',array:'arreglo',object:'objeto',set:'conjunto',file:'archivo',date:'fecha',bigint:'nmero grande',symbol:'smbolo',undefined:'indefinido',null:'nulo',function:'funcin',map:'mapa',record:'registro',tuple:'tupla',enum:'enumeracin',union:'unin',literal:'literal',promise:'promesa',void:'vaco',never:'nunca',unknown:'desconocido',any:'cualquiera'};function n(t){return e[t]??null}function r(e){return t[e]??e}const i={regex:'entrada',email:'direccin de correo electrnico',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'fecha y hora ISO',date:'fecha ISO',time:'hora ISO',duration:'duracin ISO',ipv4:'direccin IPv4',ipv6:'direccin IPv6',cidrv4:'rango IPv4',cidrv6:'rango IPv6',base64:'cadena codificada en base64',base64url:'URL codificada en base64',json_string:'cadena JSON',e164:'nmero E.164',jwt:'JWT',template_literal:'entrada'};return e=>{switch(e.code){case'invalid_type':return`Entrada invlida: se esperaba ${r(e.expected)}, recibido ${r((e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':return Array.isArray(e)?'array':null===e?'null':Object.getPrototypeOf(e)!==Object.prototype?e.constructor.name:'object'}return t})(e.input))}`;case'invalid_value':return 1===e.values.length?`Entrada invlida: se esperaba ${Fc(e.values[0])}`:`Opcin invlida: se esperaba una de ${kc(e.values,'|')}`;case'too_big':{const t=e.inclusive?'<=':'<',i=n(e.origin),o=r(e.origin);return i?`Demasiado grande: se esperaba que ${o??'valor'} tuviera ${t}${e.maximum.toString()} ${i.unit??'elementos'}`:`Demasiado grande: se esperaba que ${o??'valor'} fuera ${t}${e.maximum.toString()}`}case'too_small':{const t=e.inclusive?'>=':'>',i=n(e.origin),o=r(e.origin);return i?`Demasiado pequeo: se esperaba que ${o} tuviera ${t}${e.minimum.toString()} ${i.unit}`:`Demasiado pequeo: se esperaba que ${o} fuera ${t}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Cadena invlida: debe comenzar con "${t.prefix}"`:'ends_with'===t.format?`Cadena invlida: debe terminar en "${t.suffix}"`:'includes'===t.format?`Cadena invlida: debe incluir "${t.includes}"`:'regex'===t.format?`Cadena invlida: debe coincidir con el patrn ${t.pattern}`:`Invlido ${i[t.format]??e.format}`}case'not_multiple_of':return`Nmero invlido: debe ser mltiplo de ${e.divisor}`;case'unrecognized_keys':return`Llave${e.keys.length>1?'s':''} desconocida${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`Llave invlida en ${r(e.origin)}`;case'invalid_union':default:return'Entrada invlida';case'invalid_element':return`Valor invlido en ${r(e.origin)}`}}};const uh=()=>{const e={string:{unit:'',verb:' '},file:{unit:'',verb:' '},array:{unit:'',verb:' '},set:{unit:'',verb:' '}};function t(t){return e[t]??null}const n={regex:'',email:' ',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'   ',date:' ',time:' ',duration:'  ',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'base64-encoded ',base64url:'base64url-encoded ',json_string:'JSON ',e164:'E.164 ',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` :  ${e.expected}  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case'invalid_value':return 1===e.values.length?` :  ${Fc(e.values[0])} `:` :    ${kc(e.values,'|')} `;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` : ${e.origin??''}  ${n}${e.maximum.toString()} ${r.unit??''} `:` : ${e.origin??''}  ${n}${e.maximum.toString()} `}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` : ${e.origin}  ${n}${e.minimum.toString()} ${r.unit} `:` : ${e.origin}  ${n}${e.minimum.toString()} `}case'invalid_format':{const t=e;return'starts_with'===t.format?` :   "${t.prefix}"  `:'ends_with'===t.format?` :   "${t.suffix}"  `:'includes'===t.format?` :   "${t.includes}" `:'regex'===t.format?` :    ${t.pattern}   `:`${n[t.format]??e.format} `}case'not_multiple_of':return` :   ${e.divisor} `;case'unrecognized_keys':return`${e.keys.length>1?'':''} : ${kc(e.keys,', ')}`;case'invalid_key':return`   ${e.origin}`;case'invalid_union':default:return' ';case'invalid_element':return`   ${e.origin}`}}};const dh=()=>{const e={string:{unit:'merkki',subject:'merkkijonon'},file:{unit:'tavua',subject:'tiedoston'},array:{unit:'alkiota',subject:'listan'},set:{unit:'alkiota',subject:'joukon'},number:{unit:'',subject:'luvun'},bigint:{unit:'',subject:'suuren kokonaisluvun'},int:{unit:'',subject:'kokonaisluvun'},date:{unit:'',subject:'pivmrn'}};function t(t){return e[t]??null}const n={regex:'snnllinen lauseke',email:'shkpostiosoite',url:'URL-osoite',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO-aikaleima',date:'ISO-pivmr',time:'ISO-aika',duration:'ISO-kesto',ipv4:'IPv4-osoite',ipv6:'IPv6-osoite',cidrv4:'IPv4-alue',cidrv6:'IPv6-alue',base64:'base64-koodattu merkkijono',base64url:'base64url-koodattu merkkijono',json_string:'JSON-merkkijono',e164:'E.164-luku',jwt:'JWT',template_literal:'templaattimerkkijono'};return e=>{switch(e.code){case'invalid_type':return`Virheellinen tyyppi: odotettiin ${e.expected}, oli ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Virheellinen syte: tytyy olla ${Fc(e.values[0])}`:`Virheellinen valinta: tytyy olla yksi seuraavista: ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Liian suuri: ${r.subject} tytyy olla ${n}${e.maximum.toString()} ${r.unit}`.trim():`Liian suuri: arvon tytyy olla ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Liian pieni: ${r.subject} tytyy olla ${n}${e.minimum.toString()} ${r.unit}`.trim():`Liian pieni: arvon tytyy olla ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Virheellinen syte: tytyy alkaa "${t.prefix}"`:'ends_with'===t.format?`Virheellinen syte: tytyy loppua "${t.suffix}"`:'includes'===t.format?`Virheellinen syte: tytyy sislt "${t.includes}"`:'regex'===t.format?`Virheellinen syte: tytyy vastata snnllist lauseketta ${t.pattern}`:`Virheellinen ${n[t.format]??e.format}`}case'not_multiple_of':return`Virheellinen luku: tytyy olla luvun ${e.divisor} monikerta`;case'unrecognized_keys':return`${e.keys.length>1?'Tuntemattomat avaimet':'Tuntematon avain'}: ${kc(e.keys,', ')}`;case'invalid_key':return'Virheellinen avain tietueessa';case'invalid_union':return'Virheellinen unioni';case'invalid_element':return'Virheellinen arvo joukossa';default:return'Virheellinen syte'}}};const ph=()=>{const e={string:{unit:'caractres',verb:'avoir'},file:{unit:'octets',verb:'avoir'},array:{unit:'lments',verb:'avoir'},set:{unit:'lments',verb:'avoir'}};function t(t){return e[t]??null}const n={regex:'entre',email:'adresse e-mail',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'date et heure ISO',date:'date ISO',time:'heure ISO',duration:'dure ISO',ipv4:'adresse IPv4',ipv6:'adresse IPv6',cidrv4:'plage IPv4',cidrv6:'plage IPv6',base64:'chane encode en base64',base64url:'chane encode en base64url',json_string:'chane JSON',e164:'numro E.164',jwt:'JWT',template_literal:'entre'};return e=>{switch(e.code){case'invalid_type':return`Entre invalide : ${e.expected} attendu, ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'nombre';case'object':if(Array.isArray(e))return'tableau';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} reu`;case'invalid_value':return 1===e.values.length?`Entre invalide : ${Fc(e.values[0])} attendu`:`Option invalide : une valeur parmi ${kc(e.values,'|')} attendue`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Trop grand : ${e.origin??'valeur'} doit ${r.verb} ${n}${e.maximum.toString()} ${r.unit??'lment(s)'}`:`Trop grand : ${e.origin??'valeur'} doit tre ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Trop petit : ${e.origin} doit ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Trop petit : ${e.origin} doit tre ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Chane invalide : doit commencer par "${t.prefix}"`:'ends_with'===t.format?`Chane invalide : doit se terminer par "${t.suffix}"`:'includes'===t.format?`Chane invalide : doit inclure "${t.includes}"`:'regex'===t.format?`Chane invalide : doit correspondre au modle ${t.pattern}`:`${n[t.format]??e.format} invalide`}case'not_multiple_of':return`Nombre invalide : doit tre un multiple de ${e.divisor}`;case'unrecognized_keys':return`Cl${e.keys.length>1?'s':''} non reconnue${e.keys.length>1?'s':''} : ${kc(e.keys,', ')}`;case'invalid_key':return`Cl invalide dans ${e.origin}`;case'invalid_union':default:return'Entre invalide';case'invalid_element':return`Valeur invalide dans ${e.origin}`}}};const fh=()=>{const e={string:{unit:'caractres',verb:'avoir'},file:{unit:'octets',verb:'avoir'},array:{unit:'lments',verb:'avoir'},set:{unit:'lments',verb:'avoir'}};function t(t){return e[t]??null}const n={regex:'entre',email:'adresse courriel',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'date-heure ISO',date:'date ISO',time:'heure ISO',duration:'dure ISO',ipv4:'adresse IPv4',ipv6:'adresse IPv6',cidrv4:'plage IPv4',cidrv6:'plage IPv6',base64:'chane encode en base64',base64url:'chane encode en base64url',json_string:'chane JSON',e164:'numro E.164',jwt:'JWT',template_literal:'entre'};return e=>{switch(e.code){case'invalid_type':return`Entre invalide : attendu ${e.expected}, reu ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Entre invalide : attendu ${Fc(e.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'':'<',r=t(e.origin);return r?`Trop grand : attendu que ${e.origin??'la valeur'} ait ${n}${e.maximum.toString()} ${r.unit}`:`Trop grand : attendu que ${e.origin??'la valeur'} soit ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'':'>',r=t(e.origin);return r?`Trop petit : attendu que ${e.origin} ait ${n}${e.minimum.toString()} ${r.unit}`:`Trop petit : attendu que ${e.origin} soit ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Chane invalide : doit commencer par "${t.prefix}"`:'ends_with'===t.format?`Chane invalide : doit se terminer par "${t.suffix}"`:'includes'===t.format?`Chane invalide : doit inclure "${t.includes}"`:'regex'===t.format?`Chane invalide : doit correspondre au motif ${t.pattern}`:`${n[t.format]??e.format} invalide`}case'not_multiple_of':return`Nombre invalide : doit tre un multiple de ${e.divisor}`;case'unrecognized_keys':return`Cl${e.keys.length>1?'s':''} non reconnue${e.keys.length>1?'s':''} : ${kc(e.keys,', ')}`;case'invalid_key':return`Cl invalide dans ${e.origin}`;case'invalid_union':default:return'Entre invalide';case'invalid_element':return`Valeur invalide dans ${e.origin}`}}};const hh=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:'',email:' ',url:' ',emoji:'\'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'  ISO',date:' ISO',time:' ISO',duration:'  ISO',ipv4:' IPv4',ipv6:' IPv6',cidrv4:' IPv4',cidrv6:' IPv6',base64:'  64',base64url:'  64  ',json_string:' JSON',e164:' E.164',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return`  :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`  :  ${Fc(e.values[0])}`:`  :     ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` : ${e.origin??'value'}   ${n}${e.maximum.toString()} ${r.unit??'elements'}`:` : ${e.origin??'value'}   ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` : ${e.origin}   ${n}${e.minimum.toString()} ${r.unit}`:` : ${e.origin}   ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`  :   "${t.prefix}"`:'ends_with'===t.format?`  :    "${t.suffix}"`:'includes'===t.format?`  :   "${t.includes}"`:'regex'===t.format?`  :    ${t.pattern}`:`${n[t.format]??e.format}  `}case'not_multiple_of':return`  :     ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?'':''}  ${e.keys.length>1?'':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`   ${e.origin}`;case'invalid_union':default:return'  ';case'invalid_element':return`   ${e.origin}`}}};const mh=()=>{const e={string:{unit:'karakter',verb:'legyen'},file:{unit:'byte',verb:'legyen'},array:{unit:'elem',verb:'legyen'},set:{unit:'elem',verb:'legyen'}};function t(t){return e[t]??null}const n={regex:'bemenet',email:'email cm',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO idblyeg',date:'ISO dtum',time:'ISO id',duration:'ISO idintervallum',ipv4:'IPv4 cm',ipv6:'IPv6 cm',cidrv4:'IPv4 tartomny',cidrv6:'IPv6 tartomny',base64:'base64-kdolt string',base64url:'base64url-kdolt string',json_string:'JSON string',e164:'E.164 szm',jwt:'JWT',template_literal:'bemenet'};return e=>{switch(e.code){case'invalid_type':return`rvnytelen bemenet: a vrt rtk ${e.expected}, a kapott rtk ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'szm';case'object':if(Array.isArray(e))return'tmb';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`rvnytelen bemenet: a vrt rtk ${Fc(e.values[0])}`:`rvnytelen opci: valamelyik rtk vrt ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Tl nagy: ${e.origin??'rtk'} mrete tl nagy ${n}${e.maximum.toString()} ${r.unit??'elem'}`:`Tl nagy: a bemeneti rtk ${e.origin??'rtk'} tl nagy: ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Tl kicsi: a bemeneti rtk ${e.origin} mrete tl kicsi ${n}${e.minimum.toString()} ${r.unit}`:`Tl kicsi: a bemeneti rtk ${e.origin} tl kicsi ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`rvnytelen string: "${t.prefix}" rtkkel kell kezddnie`:'ends_with'===t.format?`rvnytelen string: "${t.suffix}" rtkkel kell vgzdnie`:'includes'===t.format?`rvnytelen string: "${t.includes}" rtket kell tartalmaznia`:'regex'===t.format?`rvnytelen string: ${t.pattern} mintnak kell megfelelnie`:`rvnytelen ${n[t.format]??e.format}`}case'not_multiple_of':return`rvnytelen szm: ${e.divisor} tbbszrsnek kell lennie`;case'unrecognized_keys':return`Ismeretlen kulcs${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`rvnytelen kulcs ${e.origin}`;case'invalid_union':default:return'rvnytelen bemenet';case'invalid_element':return`rvnytelen rtk: ${e.origin}`}}};const gh=()=>{const e={string:{unit:'karakter',verb:'memiliki'},file:{unit:'byte',verb:'memiliki'},array:{unit:'item',verb:'memiliki'},set:{unit:'item',verb:'memiliki'}};function t(t){return e[t]??null}const n={regex:'input',email:'alamat email',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'tanggal dan waktu format ISO',date:'tanggal format ISO',time:'jam format ISO',duration:'durasi format ISO',ipv4:'alamat IPv4',ipv6:'alamat IPv6',cidrv4:'rentang alamat IPv4',cidrv6:'rentang alamat IPv6',base64:'string dengan enkode base64',base64url:'string dengan enkode base64url',json_string:'string JSON',e164:'angka E.164',jwt:'JWT',template_literal:'input'};return e=>{switch(e.code){case'invalid_type':return`Input tidak valid: diharapkan ${e.expected}, diterima ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Input tidak valid: diharapkan ${Fc(e.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Terlalu besar: diharapkan ${e.origin??'value'} memiliki ${n}${e.maximum.toString()} ${r.unit??'elemen'}`:`Terlalu besar: diharapkan ${e.origin??'value'} menjadi ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Terlalu kecil: diharapkan ${e.origin} memiliki ${n}${e.minimum.toString()} ${r.unit}`:`Terlalu kecil: diharapkan ${e.origin} menjadi ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`String tidak valid: harus dimulai dengan "${t.prefix}"`:'ends_with'===t.format?`String tidak valid: harus berakhir dengan "${t.suffix}"`:'includes'===t.format?`String tidak valid: harus menyertakan "${t.includes}"`:'regex'===t.format?`String tidak valid: harus sesuai pola ${t.pattern}`:`${n[t.format]??e.format} tidak valid`}case'not_multiple_of':return`Angka tidak valid: harus kelipatan dari ${e.divisor}`;case'unrecognized_keys':return`Kunci tidak dikenali ${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`Kunci tidak valid di ${e.origin}`;case'invalid_union':default:return'Input tidak valid';case'invalid_element':return`Nilai tidak valid di ${e.origin}`}}};const vh=()=>{const e={string:{unit:'stafi',verb:'a hafa'},file:{unit:'bti',verb:'a hafa'},array:{unit:'hluti',verb:'a hafa'},set:{unit:'hluti',verb:'a hafa'}};function t(t){return e[t]??null}const n={regex:'gildi',email:'netfang',url:'vefsl',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO dagsetning og tmi',date:'ISO dagsetning',time:'ISO tmi',duration:'ISO tmalengd',ipv4:'IPv4 address',ipv6:'IPv6 address',cidrv4:'IPv4 range',cidrv6:'IPv6 range',base64:'base64-encoded strengur',base64url:'base64url-encoded strengur',json_string:'JSON strengur',e164:'E.164 tlugildi',jwt:'JWT',template_literal:'gildi'};return e=>{switch(e.code){case'invalid_type':return`Rangt gildi:  slst inn ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'nmer';case'object':if(Array.isArray(e))return'fylki';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} ar sem  a vera ${e.expected}`;case'invalid_value':return 1===e.values.length?`Rangt gildi: gert r fyrir ${Fc(e.values[0])}`:`gilt val: m vera eitt af eftirfarandi ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Of strt: gert er r fyrir a ${e.origin??'gildi'} hafi ${n}${e.maximum.toString()} ${r.unit??'hluti'}`:`Of strt: gert er r fyrir a ${e.origin??'gildi'} s ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Of lti: gert er r fyrir a ${e.origin} hafi ${n}${e.minimum.toString()} ${r.unit}`:`Of lti: gert er r fyrir a ${e.origin} s ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`gildur strengur: verur a byrja  "${t.prefix}"`:'ends_with'===t.format?`gildur strengur: verur a enda  "${t.suffix}"`:'includes'===t.format?`gildur strengur: verur a innihalda "${t.includes}"`:'regex'===t.format?`gildur strengur: verur a fylgja mynstri ${t.pattern}`:`Rangt ${n[t.format]??e.format}`}case'not_multiple_of':return`Rng tala: verur a vera margfeldi af ${e.divisor}`;case'unrecognized_keys':return`ekkt ${e.keys.length>1?'ir lyklar':'ur lykill'}: ${kc(e.keys,', ')}`;case'invalid_key':return`Rangur lykill  ${e.origin}`;case'invalid_union':default:return'Rangt gildi';case'invalid_element':return`Rangt gildi  ${e.origin}`}}};const yh=()=>{const e={string:{unit:'caratteri',verb:'avere'},file:{unit:'byte',verb:'avere'},array:{unit:'elementi',verb:'avere'},set:{unit:'elementi',verb:'avere'}};function t(t){return e[t]??null}const n={regex:'input',email:'indirizzo email',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'data e ora ISO',date:'data ISO',time:'ora ISO',duration:'durata ISO',ipv4:'indirizzo IPv4',ipv6:'indirizzo IPv6',cidrv4:'intervallo IPv4',cidrv6:'intervallo IPv6',base64:'stringa codificata in base64',base64url:'URL codificata in base64',json_string:'stringa JSON',e164:'numero E.164',jwt:'JWT',template_literal:'input'};return e=>{switch(e.code){case'invalid_type':return`Input non valido: atteso ${e.expected}, ricevuto ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'numero';case'object':if(Array.isArray(e))return'vettore';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Input non valido: atteso ${Fc(e.values[0])}`:`Opzione non valida: atteso uno tra ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Troppo grande: ${e.origin??'valore'} deve avere ${n}${e.maximum.toString()} ${r.unit??'elementi'}`:`Troppo grande: ${e.origin??'valore'} deve essere ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Troppo piccolo: ${e.origin} deve avere ${n}${e.minimum.toString()} ${r.unit}`:`Troppo piccolo: ${e.origin} deve essere ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Stringa non valida: deve iniziare con "${t.prefix}"`:'ends_with'===t.format?`Stringa non valida: deve terminare con "${t.suffix}"`:'includes'===t.format?`Stringa non valida: deve includere "${t.includes}"`:'regex'===t.format?`Stringa non valida: deve corrispondere al pattern ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case'not_multiple_of':return`Numero non valido: deve essere un multiplo di ${e.divisor}`;case'unrecognized_keys':return`Chiav${e.keys.length>1?'i':'e'} non riconosciut${e.keys.length>1?'e':'a'}: ${kc(e.keys,', ')}`;case'invalid_key':return`Chiave non valida in ${e.origin}`;case'invalid_union':default:return'Input non valido';case'invalid_element':return`Valore non valido in ${e.origin}`}}};const bh=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:'',email:'',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO',date:'ISO',time:'ISO',duration:'ISO',ipv4:'IPv4',ipv6:'IPv6',cidrv4:'IPv4',cidrv6:'IPv6',base64:'base64',base64url:'base64url',json_string:'JSON',e164:'E.164',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return`: ${e.expected}${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`: ${Fc(e.values[0])}`:`: ${kc(e.values,'')}`;case'too_big':{const n=e.inclusive?'':'',r=t(e.origin);return r?`: ${e.origin??''}${e.maximum.toString()}${r.unit??''}${n}`:`: ${e.origin??''}${e.maximum.toString()}${n}`}case'too_small':{const n=e.inclusive?'':'',r=t(e.origin);return r?`: ${e.origin}${e.minimum.toString()}${r.unit}${n}`:`: ${e.origin}${e.minimum.toString()}${n}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`: "${t.prefix}"`:'ends_with'===t.format?`: "${t.suffix}"`:'includes'===t.format?`: "${t.includes}"`:'regex'===t.format?`: ${t.pattern}`:`${n[t.format]??e.format}`}case'not_multiple_of':return`: ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?'':''}: ${kc(e.keys,'')}`;case'invalid_key':return`${e.origin}`;case'invalid_union':default:return'';case'invalid_element':return`${e.origin}`}}};const _h=()=>{const e={string:{unit:'',verb:' '},file:{unit:'',verb:' '},array:{unit:'',verb:' '},set:{unit:'',verb:' '}};function t(t){return e[t]??null}const n={regex:'',email:'- ',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'-',date:'',time:'',duration:'',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'base64- ',base64url:'base64url- ',json_string:'JSON ',e164:'E.164 ',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return{string:'',boolean:'',undefined:'undefined',bigint:'bigint',symbol:'symbol',function:''}[t]??t})(e.input)}`;case'invalid_value':return 1===e.values.length?` :  ${Fc(e.values[0])}`:` :  - ${kc(e.values,'|')}-`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` :  ${e.origin??''} ${r.verb} ${n}${e.maximum.toString()} ${r.unit}`:` :  ${e.origin??''}  ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` :  ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:` :  ${e.origin}  ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?` :   "${t.prefix}"-`:'ends_with'===t.format?` :   "${t.suffix}"-`:'includes'===t.format?` :   "${t.includes}"-`:'regex'===t.format?` :    ${t.pattern}`:` ${n[t.format]??e.format}`}case'not_multiple_of':return` :   ${e.divisor}- `;case'unrecognized_keys':return` ${e.keys.length>1?'':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`  ${e.origin}-`;case'invalid_union':default:return' ';case'invalid_element':return`  ${e.origin}-`}}};const wh=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:'',email:'',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'  ISO',date:' ISO',time:' ISO',duration:' ISO',ipv4:' IPv4',ipv6:' IPv6',cidrv4:' IPv4',cidrv6:' IPv6',base64:' base64',base64url:' base64url',json_string:' JSON',e164:' E.164',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return`  ${e.expected}  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?' (NaN)':'';case'object':if(Array.isArray(e))return' (Array)';if(null===e)return' (null)';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`  ${Fc(e.values[0])}`:`  ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`  ${e.origin??''} ${n} ${e.maximum.toString()} ${r.unit??''}`:`  ${e.origin??''} ${n} ${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`  ${e.origin} ${n} ${e.minimum.toString()} ${r.unit}`:`  ${e.origin} ${n} ${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`  "${t.prefix}"`:'ends_with'===t.format?`  "${t.suffix}"`:'includes'===t.format?`  "${t.includes}"`:'regex'===t.format?`  ${t.pattern}`:` ${n[t.format]??e.format}`}case'not_multiple_of':return`  ${e.divisor}`;case'unrecognized_keys':return` ${kc(e.keys,', ')}`;case'invalid_key':return` ${e.origin}`;case'invalid_union':default:return'';case'invalid_element':return` ${e.origin}`}}};function kh(){return{localeError:wh()}}const xh=()=>{const e={string:{unit:'',verb:'to have'},file:{unit:'',verb:'to have'},array:{unit:'',verb:'to have'},set:{unit:'',verb:'to have'}};function t(t){return e[t]??null}const n={regex:'',email:' ',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO ',date:'ISO ',time:'ISO ',duration:'ISO ',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'base64  ',base64url:'base64url  ',json_string:'JSON ',e164:'E.164 ',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` :   ${e.expected},   ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?` :  ${Fc(e.values[0])}  `:` : ${kc(e.values,' ')}   `;case'too_big':{const n=e.inclusive?'':'',r=''===n?' ':' ',i=t(e.origin),o=i?.unit??'';return i?`${e.origin??''}  : ${e.maximum.toString()}${o} ${n}${r}`:`${e.origin??''}  : ${e.maximum.toString()} ${n}${r}`}case'too_small':{const n=e.inclusive?'':'',r=''===n?' ':' ',i=t(e.origin),o=i?.unit??'';return i?`${e.origin??''}  : ${e.minimum.toString()}${o} ${n}${r}`:`${e.origin??''}  : ${e.minimum.toString()} ${n}${r}`}case'invalid_format':{const t=e;return'starts_with'===t.format?` : "${t.prefix}"()  `:'ends_with'===t.format?` : "${t.suffix}"()  `:'includes'===t.format?` : "${t.includes}"()  `:'regex'===t.format?` :  ${t.pattern}   `:` ${n[t.format]??e.format}`}case'not_multiple_of':return` : ${e.divisor}  `;case'unrecognized_keys':return`   : ${kc(e.keys,', ')}`;case'invalid_key':return` : ${e.origin}`;case'invalid_union':default:return' ';case'invalid_element':return` : ${e.origin}`}}};const Sh=(e,t=void 0)=>{switch(e){case'number':return Number.isNaN(t)?'NaN':'skaiius';case'bigint':return'sveikasis skaiius';case'string':return'eilut';case'boolean':return'login reikm';case'undefined':case'void':return'neapibrta reikm';case'function':return'funkcija';case'symbol':return'simbolis';case'object':return void 0===t?'neinomas objektas':null===t?'nulin reikm':Array.isArray(t)?'masyvas':Object.getPrototypeOf(t)!==Object.prototype&&t.constructor?t.constructor.name:'objektas';case'null':return'nulin reikm'}return e},Eh=e=>e.charAt(0).toUpperCase()+e.slice(1);function $h(e){const t=Math.abs(e),n=t%10,r=t%100;return r>=11&&r<=19||0===n?'many':1===n?'one':'few'}const Oh=()=>{const e={string:{unit:{one:'simbolis',few:'simboliai',many:'simboli'},verb:{smaller:{inclusive:'turi bti ne ilgesn kaip',notInclusive:'turi bti trumpesn kaip'},bigger:{inclusive:'turi bti ne trumpesn kaip',notInclusive:'turi bti ilgesn kaip'}}},file:{unit:{one:'baitas',few:'baitai',many:'bait'},verb:{smaller:{inclusive:'turi bti ne didesnis kaip',notInclusive:'turi bti maesnis kaip'},bigger:{inclusive:'turi bti ne maesnis kaip',notInclusive:'turi bti didesnis kaip'}}},array:{unit:{one:'element',few:'elementus',many:'element'},verb:{smaller:{inclusive:'turi turti ne daugiau kaip',notInclusive:'turi turti maiau kaip'},bigger:{inclusive:'turi turti ne maiau kaip',notInclusive:'turi turti daugiau kaip'}}},set:{unit:{one:'element',few:'elementus',many:'element'},verb:{smaller:{inclusive:'turi turti ne daugiau kaip',notInclusive:'turi turti maiau kaip'},bigger:{inclusive:'turi turti ne maiau kaip',notInclusive:'turi turti daugiau kaip'}}}};function t(t,n,r,i){const o=e[t]??null;return null===o?o:{unit:o.unit[n],verb:o.verb[i][r?'inclusive':'notInclusive']}}const n={regex:'vestis',email:'el. pato adresas',url:'URL',emoji:'jaustukas',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO data ir laikas',date:'ISO data',time:'ISO laikas',duration:'ISO trukm',ipv4:'IPv4 adresas',ipv6:'IPv6 adresas',cidrv4:'IPv4 tinklo prefiksas (CIDR)',cidrv6:'IPv6 tinklo prefiksas (CIDR)',base64:'base64 ukoduota eilut',base64url:'base64url ukoduota eilut',json_string:'JSON eilut',e164:'E.164 numeris',jwt:'JWT',template_literal:'vestis'};return e=>{switch(e.code){case'invalid_type':return`Gautas tipas ${r=e.input,Sh(typeof r,r)}, o tiktasi - ${Sh(e.expected)}`;case'invalid_value':return 1===e.values.length?`Privalo bti ${Fc(e.values[0])}`:`Privalo bti vienas i ${kc(e.values,'|')} pasirinkim`;case'too_big':{const n=Sh(e.origin),r=t(e.origin,$h(Number(e.maximum)),e.inclusive??!1,'smaller');if(r?.verb)return`${Eh(n??e.origin??'reikm')} ${r.verb} ${e.maximum.toString()} ${r.unit??'element'}`;const i=e.inclusive?'ne didesnis kaip':'maesnis kaip';return`${Eh(n??e.origin??'reikm')} turi bti ${i} ${e.maximum.toString()} ${r?.unit}`}case'too_small':{const n=Sh(e.origin),r=t(e.origin,$h(Number(e.minimum)),e.inclusive??!1,'bigger');if(r?.verb)return`${Eh(n??e.origin??'reikm')} ${r.verb} ${e.minimum.toString()} ${r.unit??'element'}`;const i=e.inclusive?'ne maesnis kaip':'didesnis kaip';return`${Eh(n??e.origin??'reikm')} turi bti ${i} ${e.minimum.toString()} ${r?.unit}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Eilut privalo prasidti "${t.prefix}"`:'ends_with'===t.format?`Eilut privalo pasibaigti "${t.suffix}"`:'includes'===t.format?`Eilut privalo traukti "${t.includes}"`:'regex'===t.format?`Eilut privalo atitikti ${t.pattern}`:`Neteisingas ${n[t.format]??e.format}`}case'not_multiple_of':return`Skaiius privalo bti ${e.divisor} kartotinis.`;case'unrecognized_keys':return`Neatpaint${e.keys.length>1?'i':'as'} rakt${e.keys.length>1?'ai':'as'}: ${kc(e.keys,', ')}`;case'invalid_key':return'Rastas klaidingas raktas';case'invalid_union':default:return'Klaidinga vestis';case'invalid_element':{const t=Sh(e.origin);return`${Eh(t??e.origin??'reikm')} turi klaiding vest`}}var r}};const Ih=()=>{const e={string:{unit:'',verb:' '},file:{unit:'',verb:' '},array:{unit:'',verb:' '},set:{unit:'',verb:' '}};function t(t){return e[t]??null}const n={regex:'',email:'  -',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO   ',date:'ISO ',time:'ISO ',duration:'ISO ',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'base64- ',base64url:'base64url- ',json_string:'JSON ',e164:'E.164 ',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` :   ${e.expected},  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Invalid input: expected ${Fc(e.values[0])}`:` :    ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` :   ${e.origin??''}   ${n}${e.maximum.toString()} ${r.unit??''}`:` :   ${e.origin??''}   ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` :   ${e.origin}   ${n}${e.minimum.toString()} ${r.unit}`:` :   ${e.origin}   ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?` :     "${t.prefix}"`:'ends_with'===t.format?` :     "${t.suffix}"`:'includes'===t.format?` :    "${t.includes}"`:'regex'===t.format?` :      ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case'not_multiple_of':return` :      ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?' ':' '}: ${kc(e.keys,', ')}`;case'invalid_key':return`   ${e.origin}`;case'invalid_union':default:return' ';case'invalid_element':return`   ${e.origin}`}}};const Th=()=>{const e={string:{unit:'aksara',verb:'mempunyai'},file:{unit:'bait',verb:'mempunyai'},array:{unit:'elemen',verb:'mempunyai'},set:{unit:'elemen',verb:'mempunyai'}};function t(t){return e[t]??null}const n={regex:'input',email:'alamat e-mel',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'tarikh masa ISO',date:'tarikh ISO',time:'masa ISO',duration:'tempoh ISO',ipv4:'alamat IPv4',ipv6:'alamat IPv6',cidrv4:'julat IPv4',cidrv6:'julat IPv6',base64:'string dikodkan base64',base64url:'string dikodkan base64url',json_string:'string JSON',e164:'nombor E.164',jwt:'JWT',template_literal:'input'};return e=>{switch(e.code){case'invalid_type':return`Input tidak sah: dijangka ${e.expected}, diterima ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'nombor';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Input tidak sah: dijangka ${Fc(e.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Terlalu besar: dijangka ${e.origin??'nilai'} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??'elemen'}`:`Terlalu besar: dijangka ${e.origin??'nilai'} adalah ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Terlalu kecil: dijangka ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Terlalu kecil: dijangka ${e.origin} adalah ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`String tidak sah: mesti bermula dengan "${t.prefix}"`:'ends_with'===t.format?`String tidak sah: mesti berakhir dengan "${t.suffix}"`:'includes'===t.format?`String tidak sah: mesti mengandungi "${t.includes}"`:'regex'===t.format?`String tidak sah: mesti sepadan dengan corak ${t.pattern}`:`${n[t.format]??e.format} tidak sah`}case'not_multiple_of':return`Nombor tidak sah: perlu gandaan ${e.divisor}`;case'unrecognized_keys':return`Kunci tidak dikenali: ${kc(e.keys,', ')}`;case'invalid_key':return`Kunci tidak sah dalam ${e.origin}`;case'invalid_union':default:return'Input tidak sah';case'invalid_element':return`Nilai tidak sah dalam ${e.origin}`}}};const Ah=()=>{const e={string:{unit:'tekens'},file:{unit:'bytes'},array:{unit:'elementen'},set:{unit:'elementen'}};function t(t){return e[t]??null}const n={regex:'invoer',email:'emailadres',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO datum en tijd',date:'ISO datum',time:'ISO tijd',duration:'ISO duur',ipv4:'IPv4-adres',ipv6:'IPv6-adres',cidrv4:'IPv4-bereik',cidrv6:'IPv6-bereik',base64:'base64-gecodeerde tekst',base64url:'base64 URL-gecodeerde tekst',json_string:'JSON string',e164:'E.164-nummer',jwt:'JWT',template_literal:'invoer'};return e=>{switch(e.code){case'invalid_type':return`Ongeldige invoer: verwacht ${e.expected}, ontving ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'getal';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Ongeldige invoer: verwacht ${Fc(e.values[0])}`:`Ongeldige optie: verwacht n van ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Te lang: verwacht dat ${e.origin??'waarde'} ${n}${e.maximum.toString()} ${r.unit??'elementen'} bevat`:`Te lang: verwacht dat ${e.origin??'waarde'} ${n}${e.maximum.toString()} is`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Te kort: verwacht dat ${e.origin} ${n}${e.minimum.toString()} ${r.unit} bevat`:`Te kort: verwacht dat ${e.origin} ${n}${e.minimum.toString()} is`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Ongeldige tekst: moet met "${t.prefix}" beginnen`:'ends_with'===t.format?`Ongeldige tekst: moet op "${t.suffix}" eindigen`:'includes'===t.format?`Ongeldige tekst: moet "${t.includes}" bevatten`:'regex'===t.format?`Ongeldige tekst: moet overeenkomen met patroon ${t.pattern}`:`Ongeldig: ${n[t.format]??e.format}`}case'not_multiple_of':return`Ongeldig getal: moet een veelvoud van ${e.divisor} zijn`;case'unrecognized_keys':return`Onbekende key${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`Ongeldige key in ${e.origin}`;case'invalid_union':default:return'Ongeldige invoer';case'invalid_element':return`Ongeldige waarde in ${e.origin}`}}};const Ch=()=>{const e={string:{unit:'tegn',verb:' ha'},file:{unit:'bytes',verb:' ha'},array:{unit:'elementer',verb:' inneholde'},set:{unit:'elementer',verb:' inneholde'}};function t(t){return e[t]??null}const n={regex:'input',email:'e-postadresse',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO dato- og klokkeslett',date:'ISO-dato',time:'ISO-klokkeslett',duration:'ISO-varighet',ipv4:'IPv4-omrde',ipv6:'IPv6-omrde',cidrv4:'IPv4-spekter',cidrv6:'IPv6-spekter',base64:'base64-enkodet streng',base64url:'base64url-enkodet streng',json_string:'JSON-streng',e164:'E.164-nummer',jwt:'JWT',template_literal:'input'};return e=>{switch(e.code){case'invalid_type':return`Ugyldig input: forventet ${e.expected}, fikk ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'tall';case'object':if(Array.isArray(e))return'liste';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Ugyldig verdi: forventet ${Fc(e.values[0])}`:`Ugyldig valg: forventet en av ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`For stor(t): forventet ${e.origin??'value'} til  ha ${n}${e.maximum.toString()} ${r.unit??'elementer'}`:`For stor(t): forventet ${e.origin??'value'} til  ha ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`For lite(n): forventet ${e.origin} til  ha ${n}${e.minimum.toString()} ${r.unit}`:`For lite(n): forventet ${e.origin} til  ha ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Ugyldig streng: m starte med "${t.prefix}"`:'ends_with'===t.format?`Ugyldig streng: m ende med "${t.suffix}"`:'includes'===t.format?`Ugyldig streng: m inneholde "${t.includes}"`:'regex'===t.format?`Ugyldig streng: m matche mnsteret ${t.pattern}`:`Ugyldig ${n[t.format]??e.format}`}case'not_multiple_of':return`Ugyldig tall: m vre et multiplum av ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?'Ukjente nkler':'Ukjent nkkel'}: ${kc(e.keys,', ')}`;case'invalid_key':return`Ugyldig nkkel i ${e.origin}`;case'invalid_union':default:return'Ugyldig input';case'invalid_element':return`Ugyldig verdi i ${e.origin}`}}};const Nh=()=>{const e={string:{unit:'harf',verb:'olmaldr'},file:{unit:'bayt',verb:'olmaldr'},array:{unit:'unsur',verb:'olmaldr'},set:{unit:'unsur',verb:'olmaldr'}};function t(t){return e[t]??null}const n={regex:'giren',email:'epostagh',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO hengm',date:'ISO tarihi',time:'ISO zaman',duration:'ISO mddeti',ipv4:'IPv4 nin',ipv6:'IPv6 nin',cidrv4:'IPv4 menzili',cidrv6:'IPv6 menzili',base64:'base64-ifreli metin',base64url:'base64url-ifreli metin',json_string:'JSON metin',e164:'E.164 says',jwt:'JWT',template_literal:'giren'};return e=>{switch(e.code){case'invalid_type':return`Fsit giren: umulan ${e.expected}, alnan ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'numara';case'object':if(Array.isArray(e))return'saf';if(null===e)return'gayb';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Fsit giren: umulan ${Fc(e.values[0])}`:`Fsit tercih: mteberler ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Fazla byk: ${e.origin??'value'}, ${n}${e.maximum.toString()} ${r.unit??'elements'} sahip olmalyd.`:`Fazla byk: ${e.origin??'value'}, ${n}${e.maximum.toString()} olmalyd.`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Fazla kk: ${e.origin}, ${n}${e.minimum.toString()} ${r.unit} sahip olmalyd.`:`Fazla kk: ${e.origin}, ${n}${e.minimum.toString()} olmalyd.`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Fsit metin: "${t.prefix}" ile balamal.`:'ends_with'===t.format?`Fsit metin: "${t.suffix}" ile bitmeli.`:'includes'===t.format?`Fsit metin: "${t.includes}" ihtiv etmeli.`:'regex'===t.format?`Fsit metin: ${t.pattern} nakna uymal.`:`Fsit ${n[t.format]??e.format}`}case'not_multiple_of':return`Fsit say: ${e.divisor} kat olmalyd.`;case'unrecognized_keys':return`Tannmayan anahtar ${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`${e.origin} iin tannmayan anahtar var.`;case'invalid_union':return'Giren tannamad.';case'invalid_element':return`${e.origin} iin tannmayan kymet var.`;default:return'Kymet tannamad.'}}};const Ph=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:'',email:'',url:'  ',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'  ',date:'',time:'',duration:'',ipv4:' IPv4 ',ipv6:' IPv6 ',cidrv4:' IPv4 ',cidrv6:' IPv6 ',base64:'base64-encoded ',base64url:'base64url-encoded ',json_string:'JSON ',e164:' E.164 ',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` :  ${e.expected} ,  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case'invalid_value':return 1===e.values.length?` :  ${Fc(e.values[0])} `:` :    ${kc(e.values,'|')}  `;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` : ${e.origin??''}  ${n}${e.maximum.toString()} ${r.unit??''} `:` : ${e.origin??''}  ${n}${e.maximum.toString()} `}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` : ${e.origin}  ${n}${e.minimum.toString()} ${r.unit} `:` : ${e.origin}  ${n}${e.minimum.toString()} `}case'invalid_format':{const t=e;return'starts_with'===t.format?` :   "${t.prefix}"   `:'ends_with'===t.format?` :   "${t.suffix}"    `:'includes'===t.format?` :  "${t.includes}" `:'regex'===t.format?` :   ${t.pattern}   `:`${n[t.format]??e.format}  `}case'not_multiple_of':return` :   ${e.divisor}  `;case'unrecognized_keys':return` ${e.keys.length>1?'':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`   ${e.origin} `;case'invalid_union':default:return' ';case'invalid_element':return`   ${e.origin} `}}};const jh=()=>{const e={string:{unit:'znakw',verb:'mie'},file:{unit:'bajtw',verb:'mie'},array:{unit:'elementw',verb:'mie'},set:{unit:'elementw',verb:'mie'}};function t(t){return e[t]??null}const n={regex:'wyraenie',email:'adres email',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'data i godzina w formacie ISO',date:'data w formacie ISO',time:'godzina w formacie ISO',duration:'czas trwania ISO',ipv4:'adres IPv4',ipv6:'adres IPv6',cidrv4:'zakres IPv4',cidrv6:'zakres IPv6',base64:'cig znakw zakodowany w formacie base64',base64url:'cig znakw zakodowany w formacie base64url',json_string:'cig znakw w formacie JSON',e164:'liczba E.164',jwt:'JWT',template_literal:'wejcie'};return e=>{switch(e.code){case'invalid_type':return`Nieprawidowe dane wejciowe: oczekiwano ${e.expected}, otrzymano ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'liczba';case'object':if(Array.isArray(e))return'tablica';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Nieprawidowe dane wejciowe: oczekiwano ${Fc(e.values[0])}`:`Nieprawidowa opcja: oczekiwano jednej z wartoci ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Za dua warto: oczekiwano, e ${e.origin??'warto'} bdzie mie ${n}${e.maximum.toString()} ${r.unit??'elementw'}`:`Zbyt du(y/a/e): oczekiwano, e ${e.origin??'warto'} bdzie wynosi ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Za maa warto: oczekiwano, e ${e.origin??'warto'} bdzie mie ${n}${e.minimum.toString()} ${r.unit??'elementw'}`:`Zbyt ma(y/a/e): oczekiwano, e ${e.origin??'warto'} bdzie wynosi ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Nieprawidowy cig znakw: musi zaczyna si od "${t.prefix}"`:'ends_with'===t.format?`Nieprawidowy cig znakw: musi koczy si na "${t.suffix}"`:'includes'===t.format?`Nieprawidowy cig znakw: musi zawiera "${t.includes}"`:'regex'===t.format?`Nieprawidowy cig znakw: musi odpowiada wzorcowi ${t.pattern}`:`Nieprawidow(y/a/e) ${n[t.format]??e.format}`}case'not_multiple_of':return`Nieprawidowa liczba: musi by wielokrotnoci ${e.divisor}`;case'unrecognized_keys':return`Nierozpoznane klucze${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`Nieprawidowy klucz w ${e.origin}`;case'invalid_union':default:return'Nieprawidowe dane wejciowe';case'invalid_element':return`Nieprawidowa warto w ${e.origin}`}}};const Dh=()=>{const e={string:{unit:'caracteres',verb:'ter'},file:{unit:'bytes',verb:'ter'},array:{unit:'itens',verb:'ter'},set:{unit:'itens',verb:'ter'}};function t(t){return e[t]??null}const n={regex:'padro',email:'endereo de e-mail',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'data e hora ISO',date:'data ISO',time:'hora ISO',duration:'durao ISO',ipv4:'endereo IPv4',ipv6:'endereo IPv6',cidrv4:'faixa de IPv4',cidrv6:'faixa de IPv6',base64:'texto codificado em base64',base64url:'URL codificada em base64',json_string:'texto JSON',e164:'nmero E.164',jwt:'JWT',template_literal:'entrada'};return e=>{switch(e.code){case'invalid_type':return`Tipo invlido: esperado ${e.expected}, recebido ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'nmero';case'object':if(Array.isArray(e))return'array';if(null===e)return'nulo';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Entrada invlida: esperado ${Fc(e.values[0])}`:`Opo invlida: esperada uma das ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Muito grande: esperado que ${e.origin??'valor'} tivesse ${n}${e.maximum.toString()} ${r.unit??'elementos'}`:`Muito grande: esperado que ${e.origin??'valor'} fosse ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Muito pequeno: esperado que ${e.origin} tivesse ${n}${e.minimum.toString()} ${r.unit}`:`Muito pequeno: esperado que ${e.origin} fosse ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Texto invlido: deve comear com "${t.prefix}"`:'ends_with'===t.format?`Texto invlido: deve terminar com "${t.suffix}"`:'includes'===t.format?`Texto invlido: deve incluir "${t.includes}"`:'regex'===t.format?`Texto invlido: deve corresponder ao padro ${t.pattern}`:`${n[t.format]??e.format} invlido`}case'not_multiple_of':return`Nmero invlido: deve ser mltiplo de ${e.divisor}`;case'unrecognized_keys':return`Chave${e.keys.length>1?'s':''} desconhecida${e.keys.length>1?'s':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`Chave invlida em ${e.origin}`;case'invalid_union':return'Entrada invlida';case'invalid_element':return`Valor invlido em ${e.origin}`;default:return'Campo invlido'}}};function Rh(e,t,n,r){const i=Math.abs(e),o=i%10,a=i%100;return a>=11&&a<=19?r:1===o?t:o>=2&&o<=4?n:r}const Uh=()=>{const e={string:{unit:{one:'',few:'',many:''},verb:''},file:{unit:{one:'',few:'',many:''},verb:''},array:{unit:{one:'',few:'',many:''},verb:''},set:{unit:{one:'',few:'',many:''},verb:''}};function t(t){return e[t]??null}const n={regex:'',email:'email ',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO   ',date:'ISO ',time:'ISO ',duration:'ISO ',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'   base64',base64url:'   base64url',json_string:'JSON ',e164:' E.164',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?` :  ${Fc(e.values[0])}`:` :    ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);if(r){const t=Rh(Number(e.maximum),r.unit.one,r.unit.few,r.unit.many);return`  : ,  ${e.origin??''}   ${n}${e.maximum.toString()} ${t}`}return`  : ,  ${e.origin??''}  ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);if(r){const t=Rh(Number(e.minimum),r.unit.one,r.unit.few,r.unit.many);return`  : ,  ${e.origin}   ${n}${e.minimum.toString()} ${t}`}return`  : ,  ${e.origin}  ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?` :    "${t.prefix}"`:'ends_with'===t.format?` :    "${t.suffix}"`:'includes'===t.format?` :   "${t.includes}"`:'regex'===t.format?` :    ${t.pattern}`:` ${n[t.format]??e.format}`}case'not_multiple_of':return` :    ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?'':''} ${e.keys.length>1?'':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`   ${e.origin}`;case'invalid_union':default:return'  ';case'invalid_element':return`   ${e.origin}`}}};const Lh=()=>{const e={string:{unit:'znakov',verb:'imeti'},file:{unit:'bajtov',verb:'imeti'},array:{unit:'elementov',verb:'imeti'},set:{unit:'elementov',verb:'imeti'}};function t(t){return e[t]??null}const n={regex:'vnos',email:'e-potni naslov',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO datum in as',date:'ISO datum',time:'ISO as',duration:'ISO trajanje',ipv4:'IPv4 naslov',ipv6:'IPv6 naslov',cidrv4:'obseg IPv4',cidrv6:'obseg IPv6',base64:'base64 kodiran niz',base64url:'base64url kodiran niz',json_string:'JSON niz',e164:'E.164 tevilka',jwt:'JWT',template_literal:'vnos'};return e=>{switch(e.code){case'invalid_type':return`Neveljaven vnos: priakovano ${e.expected}, prejeto ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'tevilo';case'object':if(Array.isArray(e))return'tabela';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Neveljaven vnos: priakovano ${Fc(e.values[0])}`:`Neveljavna monost: priakovano eno izmed ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Preveliko: priakovano, da bo ${e.origin??'vrednost'} imelo ${n}${e.maximum.toString()} ${r.unit??'elementov'}`:`Preveliko: priakovano, da bo ${e.origin??'vrednost'} ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Premajhno: priakovano, da bo ${e.origin} imelo ${n}${e.minimum.toString()} ${r.unit}`:`Premajhno: priakovano, da bo ${e.origin} ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Neveljaven niz: mora se zaeti z "${t.prefix}"`:'ends_with'===t.format?`Neveljaven niz: mora se konati z "${t.suffix}"`:'includes'===t.format?`Neveljaven niz: mora vsebovati "${t.includes}"`:'regex'===t.format?`Neveljaven niz: mora ustrezati vzorcu ${t.pattern}`:`Neveljaven ${n[t.format]??e.format}`}case'not_multiple_of':return`Neveljavno tevilo: mora biti vekratnik ${e.divisor}`;case'unrecognized_keys':return`Neprepoznan${e.keys.length>1?'i kljui':' klju'}: ${kc(e.keys,', ')}`;case'invalid_key':return`Neveljaven klju v ${e.origin}`;case'invalid_union':default:return'Neveljaven vnos';case'invalid_element':return`Neveljavna vrednost v ${e.origin}`}}};const zh=()=>{const e={string:{unit:'tecken',verb:'att ha'},file:{unit:'bytes',verb:'att ha'},array:{unit:'objekt',verb:'att innehlla'},set:{unit:'objekt',verb:'att innehlla'}};function t(t){return e[t]??null}const n={regex:'reguljrt uttryck',email:'e-postadress',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO-datum och tid',date:'ISO-datum',time:'ISO-tid',duration:'ISO-varaktighet',ipv4:'IPv4-intervall',ipv6:'IPv6-intervall',cidrv4:'IPv4-spektrum',cidrv6:'IPv6-spektrum',base64:'base64-kodad strng',base64url:'base64url-kodad strng',json_string:'JSON-strng',e164:'E.164-nummer',jwt:'JWT',template_literal:'mall-literal'};return e=>{switch(e.code){case'invalid_type':return`Ogiltig inmatning: frvntat ${e.expected}, fick ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'antal';case'object':if(Array.isArray(e))return'lista';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Ogiltig inmatning: frvntat ${Fc(e.values[0])}`:`Ogiltigt val: frvntade en av ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Fr stor(t): frvntade ${e.origin??'vrdet'} att ha ${n}${e.maximum.toString()} ${r.unit??'element'}`:`Fr stor(t): frvntat ${e.origin??'vrdet'} att ha ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Fr lite(t): frvntade ${e.origin??'vrdet'} att ha ${n}${e.minimum.toString()} ${r.unit}`:`Fr lite(t): frvntade ${e.origin??'vrdet'} att ha ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Ogiltig strng: mste brja med "${t.prefix}"`:'ends_with'===t.format?`Ogiltig strng: mste sluta med "${t.suffix}"`:'includes'===t.format?`Ogiltig strng: mste innehlla "${t.includes}"`:'regex'===t.format?`Ogiltig strng: mste matcha mnstret "${t.pattern}"`:`Ogiltig(t) ${n[t.format]??e.format}`}case'not_multiple_of':return`Ogiltigt tal: mste vara en multipel av ${e.divisor}`;case'unrecognized_keys':return`${e.keys.length>1?'Oknda nycklar':'Oknd nyckel'}: ${kc(e.keys,', ')}`;case'invalid_key':return`Ogiltig nyckel i ${e.origin??'vrdet'}`;case'invalid_union':default:return'Ogiltig input';case'invalid_element':return`Ogiltigt vrde i ${e.origin??'vrdet'}`}}};const Vh=()=>{const e={string:{unit:'',verb:' '},file:{unit:'',verb:' '},array:{unit:'',verb:' '},set:{unit:'',verb:' '}};function t(t){return e[t]??null}const n={regex:'',email:' ',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO  ',date:'ISO ',time:'ISO ',duration:'ISO  ',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'base64-encoded ',base64url:'base64url-encoded ',json_string:'JSON ',e164:'E.164 ',jwt:'JWT',template_literal:'input'};return e=>{switch(e.code){case'invalid_type':return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?' ':'';case'object':if(Array.isArray(e))return'';if(null===e)return'';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?` :  ${Fc(e.values[0])}`:` :  ${kc(e.values,'|')}  `;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` :  ${e.origin??''} ${n}${e.maximum.toString()} ${r.unit??''}   `:` :  ${e.origin??''} ${n}${e.maximum.toString()}   `}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` :  ${e.origin} ${n}${e.minimum.toString()} ${r.unit}   `:` :  ${e.origin} ${n}${e.minimum.toString()}   `}case'invalid_format':{const t=e;return'starts_with'===t.format?` : "${t.prefix}"   `:'ends_with'===t.format?` : "${t.suffix}"   `:'includes'===t.format?` : "${t.includes}"   `:'regex'===t.format?` : ${t.pattern}   `:` ${n[t.format]??e.format}`}case'not_multiple_of':return` : ${e.divisor}    `;case'unrecognized_keys':return`  ${e.keys.length>1?'':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`${e.origin}   `;case'invalid_union':default:return' ';case'invalid_element':return`${e.origin}   `}}};const Mh=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:'',email:'',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:' ISO',date:' ISO',time:' ISO',duration:' ISO',ipv4:' IPv4',ipv6:' IPv6',cidrv4:' IP  IPv4',cidrv6:' IP  IPv6',base64:' Base64',base64url:' Base64  URL',json_string:' JSON',e164:' (E.164)',jwt:' JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return`:  ${e.expected}  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?' (NaN)':'';case'object':if(Array.isArray(e))return' (Array)';if(null===e)return' (null)';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`:  ${Fc(e.values[0])}`:`:  ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'':'',r=t(e.origin);return r?`: ${e.origin??''} ${n} ${e.maximum.toString()} ${r.unit??''}`:`: ${e.origin??''} ${n} ${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'':'',r=t(e.origin);return r?`: ${e.origin} ${n} ${e.minimum.toString()} ${r.unit}`:`: ${e.origin} ${n} ${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`:  "${t.prefix}"`:'ends_with'===t.format?`:  "${t.suffix}"`:'includes'===t.format?`:  "${t.includes}" `:'regex'===t.format?`:  ${t.pattern}`:`: ${n[t.format]??e.format}`}case'not_multiple_of':return`:  ${e.divisor} `;case'unrecognized_keys':return`: ${kc(e.keys,', ')}`;case'invalid_key':return` ${e.origin}`;case'invalid_union':return': ';case'invalid_element':return` ${e.origin}`;default:return''}}};const Bh=()=>{const e={string:{unit:'karakter',verb:'olmal'},file:{unit:'bayt',verb:'olmal'},array:{unit:'e',verb:'olmal'},set:{unit:'e',verb:'olmal'}};function t(t){return e[t]??null}const n={regex:'girdi',email:'e-posta adresi',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO tarih ve saat',date:'ISO tarih',time:'ISO saat',duration:'ISO sre',ipv4:'IPv4 adresi',ipv6:'IPv6 adresi',cidrv4:'IPv4 aral',cidrv6:'IPv6 aral',base64:'base64 ile ifrelenmi metin',base64url:'base64url ile ifrelenmi metin',json_string:'JSON dizesi',e164:'E.164 says',jwt:'JWT',template_literal:'ablon dizesi'};return e=>{switch(e.code){case'invalid_type':return`Geersiz deer: beklenen ${e.expected}, alnan ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`Geersiz deer: beklenen ${Fc(e.values[0])}`:`Geersiz seenek: aadakilerden biri olmal: ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`ok byk: beklenen ${e.origin??'deer'} ${n}${e.maximum.toString()} ${r.unit??'e'}`:`ok byk: beklenen ${e.origin??'deer'} ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`ok kk: beklenen ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:`ok kk: beklenen ${e.origin} ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Geersiz metin: "${t.prefix}" ile balamal`:'ends_with'===t.format?`Geersiz metin: "${t.suffix}" ile bitmeli`:'includes'===t.format?`Geersiz metin: "${t.includes}" iermeli`:'regex'===t.format?`Geersiz metin: ${t.pattern} desenine uymal`:`Geersiz ${n[t.format]??e.format}`}case'not_multiple_of':return`Geersiz say: ${e.divisor} ile tam blnebilmeli`;case'unrecognized_keys':return`Tannmayan anahtar${e.keys.length>1?'lar':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`${e.origin} iinde geersiz anahtar`;case'invalid_union':default:return'Geersiz deer';case'invalid_element':return`${e.origin} iinde geersiz deer`}}};const Fh=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:' ',email:'  ',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'   ISO',date:' ISO',time:' ISO',duration:' ISO',ipv4:' IPv4',ipv6:' IPv6',cidrv4:' IPv4',cidrv6:' IPv6',base64:'   base64',base64url:'   base64url',json_string:' JSON',e164:' E.164',jwt:'JWT',template_literal:' '};return e=>{switch(e.code){case'invalid_type':return`  :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`  :  ${Fc(e.values[0])}`:` :    ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` : ,  ${e.origin??''} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??''}`:` : ,  ${e.origin??''}  ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` : ,  ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:` : ,  ${e.origin}  ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?` :    "${t.prefix}"`:'ends_with'===t.format?` :    "${t.suffix}"`:'includes'===t.format?` :   "${t.includes}"`:'regex'===t.format?` :    ${t.pattern}`:` ${n[t.format]??e.format}`}case'not_multiple_of':return` :    ${e.divisor}`;case'unrecognized_keys':return` ${e.keys.length>1?'':''}: ${kc(e.keys,', ')}`;case'invalid_key':return`   ${e.origin}`;case'invalid_union':default:return'  ';case'invalid_element':return`   ${e.origin}`}}};function Zh(){return{localeError:Fh()}}const Hh=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:' ',email:'  ',url:'  ',emoji:'',uuid:'   ',uuidv4:'     4',uuidv6:'     6',nanoid:'  ',guid:'   ',cuid:'   ',cuid2:'    2',ulid:'   ',xid:'  ',ksuid:'    ',datetime:'    ',date:'   ',time:'   ',duration:'   ',ipv4:'   4 ',ipv6:'   6 ',cidrv4:'   4 ',cidrv6:'   6 ',base64:' 64   ',base64url:' 64      ',json_string:'    ',e164:' 164 ',jwt:'  ',template_literal:' '};return e=>{switch(e.code){case'invalid_type':return`  : ${e.expected}   ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'';case'object':if(Array.isArray(e))return'';if(null===e)return'';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case'invalid_value':return 1===e.values.length?`  : ${Fc(e.values[0])}  `:` : ${kc(e.values,'|')}     `;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` : ${e.origin??''}  ${n}${e.maximum.toString()} ${r.unit??''}   `:` : ${e.origin??''}  ${n}${e.maximum.toString()}   `}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` : ${e.origin}  ${n}${e.minimum.toString()} ${r.unit}   `:` : ${e.origin}  ${n}${e.minimum.toString()}   `}case'invalid_format':{const t=e;return'starts_with'===t.format?` : "${t.prefix}"    `:'ends_with'===t.format?` : "${t.suffix}"    `:'includes'===t.format?` : "${t.includes}"   `:'regex'===t.format?` :  ${t.pattern}    `:` ${n[t.format]??e.format}`}case'not_multiple_of':return` : ${e.divisor}    `;case'unrecognized_keys':return`   ${e.keys.length>1?'':''}: ${kc(e.keys,' ')}`;case'invalid_key':return`${e.origin}   `;case'invalid_union':default:return'  ';case'invalid_element':return`${e.origin}   `}}};const qh=()=>{const e={string:{unit:'k t',verb:'c'},file:{unit:'byte',verb:'c'},array:{unit:'phn t',verb:'c'},set:{unit:'phn t',verb:'c'}};function t(t){return e[t]??null}const n={regex:'u vo',email:'a ch email',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ngy gi ISO',date:'ngy ISO',time:'gi ISO',duration:'khong thi gian ISO',ipv4:'a ch IPv4',ipv6:'a ch IPv6',cidrv4:'di IPv4',cidrv6:'di IPv6',base64:'chui m ha base64',base64url:'chui m ha base64url',json_string:'chui JSON',e164:'s E.164',jwt:'JWT',template_literal:'u vo'};return e=>{switch(e.code){case'invalid_type':return`u vo khng hp l: mong i ${e.expected}, nhn c ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'s';case'object':if(Array.isArray(e))return'mng';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`u vo khng hp l: mong i ${Fc(e.values[0])}`:`Ty chn khng hp l: mong i mt trong cc gi tr ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`Qu ln: mong i ${e.origin??'gi tr'} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??'phn t'}`:`Qu ln: mong i ${e.origin??'gi tr'} ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Qu nh: mong i ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Qu nh: mong i ${e.origin} ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`Chui khng hp l: phi bt u bng "${t.prefix}"`:'ends_with'===t.format?`Chui khng hp l: phi kt thc bng "${t.suffix}"`:'includes'===t.format?`Chui khng hp l: phi bao gm "${t.includes}"`:'regex'===t.format?`Chui khng hp l: phi khp vi mu ${t.pattern}`:`${n[t.format]??e.format} khng hp l`}case'not_multiple_of':return`S khng hp l: phi l bi s ca ${e.divisor}`;case'unrecognized_keys':return`Kha khng c nhn dng: ${kc(e.keys,', ')}`;case'invalid_key':return`Kha khng hp l trong ${e.origin}`;case'invalid_union':default:return'u vo khng hp l';case'invalid_element':return`Gi tr khng hp l trong ${e.origin}`}}};const Kh=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:'',email:'',url:'URL',emoji:'',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO',date:'ISO',time:'ISO',duration:'ISO',ipv4:'IPv4',ipv6:'IPv6',cidrv4:'IPv4',cidrv6:'IPv6',base64:'base64',base64url:'base64url',json_string:'JSON',e164:'E.164',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` ${e.expected} ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'(NaN)':'';case'object':if(Array.isArray(e))return'';if(null===e)return'(null)';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?` ${Fc(e.values[0])}`:` ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` ${e.origin??''} ${n}${e.maximum.toString()} ${r.unit??''}`:` ${e.origin??''} ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:` ${e.origin} ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?` "${t.prefix}" `:'ends_with'===t.format?` "${t.suffix}" `:'includes'===t.format?` "${t.includes}"`:'regex'===t.format?` ${t.pattern}`:`${n[t.format]??e.format}`}case'not_multiple_of':return` ${e.divisor} `;case'unrecognized_keys':return`(key): ${kc(e.keys,', ')}`;case'invalid_key':return`${e.origin} (key)`;case'invalid_union':default:return'';case'invalid_element':return`${e.origin} (value)`}}};function Gh(){return{localeError:Kh()}}const Wh=()=>{const e={string:{unit:'',verb:''},file:{unit:'',verb:''},array:{unit:'',verb:''},set:{unit:'',verb:''}};function t(t){return e[t]??null}const n={regex:'',email:'',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'ISO ',date:'ISO ',time:'ISO ',duration:'ISO ',ipv4:'IPv4 ',ipv6:'IPv6 ',cidrv4:'IPv4 ',cidrv6:'IPv6 ',base64:'base64 ',base64url:'base64url ',json_string:'JSON ',e164:'E.164 ',jwt:'JWT',template_literal:''};return e=>{switch(e.code){case'invalid_type':return` ${e.expected} ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'number';case'object':if(Array.isArray(e))return'array';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?` ${Fc(e.values[0])}`:` ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?` ${e.origin??''}  ${n}${e.maximum.toString()} ${r.unit??''}`:` ${e.origin??''}  ${n}${e.maximum.toString()}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?` ${e.origin}  ${n}${e.minimum.toString()} ${r.unit}`:` ${e.origin}  ${n}${e.minimum.toString()}`}case'invalid_format':{const t=e;return'starts_with'===t.format?` "${t.prefix}" `:'ends_with'===t.format?` "${t.suffix}" `:'includes'===t.format?` "${t.includes}"`:'regex'===t.format?` ${t.pattern}`:` ${n[t.format]??e.format}`}case'not_multiple_of':return` ${e.divisor} `;case'unrecognized_keys':return`${e.keys.length>1?'':''}${kc(e.keys,'')}`;case'invalid_key':return`${e.origin} `;case'invalid_union':default:return'';case'invalid_element':return`${e.origin} `}}};const Jh=()=>{const e={string:{unit:'mi',verb:'n'},file:{unit:'bytes',verb:'n'},array:{unit:'nkan',verb:'n'},set:{unit:'nkan',verb:'n'}};function t(t){return e[t]??null}const n={regex:'r bwl',email:'drs ml',url:'URL',emoji:'emoji',uuid:'UUID',uuidv4:'UUIDv4',uuidv6:'UUIDv6',nanoid:'nanoid',guid:'GUID',cuid:'cuid',cuid2:'cuid2',ulid:'ULID',xid:'XID',ksuid:'KSUID',datetime:'kk ISO',date:'j ISO',time:'kk ISO',duration:'kk t p ISO',ipv4:'drs IPv4',ipv6:'drs IPv6',cidrv4:'gbgb IPv4',cidrv6:'gbgb IPv6',base64:'r t a k n base64',base64url:'r base64url',json_string:'r JSON',e164:'nmb E.164',jwt:'JWT',template_literal:'r bwl'};return e=>{switch(e.code){case'invalid_type':return`bwl ae: a n lti fi ${e.expected}, m a r ${(e=>{const t=typeof e;switch(t){case'number':return Number.isNaN(e)?'NaN':'nmb';case'object':if(Array.isArray(e))return'akop';if(null===e)return'null';if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case'invalid_value':return 1===e.values.length?`bwl ae: a n lti fi ${Fc(e.values[0])}`:`yn ae: yan kan lra ${kc(e.values,'|')}`;case'too_big':{const n=e.inclusive?'<=':'<',r=t(e.origin);return r?`T p j: a n lti j p ${e.origin??'iye'} ${r.verb} ${n}${e.maximum} ${r.unit}`:`T p j: a n lti j ${n}${e.maximum}`}case'too_small':{const n=e.inclusive?'>=':'>',r=t(e.origin);return r?`Kr ju: a n lti j p ${e.origin} ${r.verb} ${n}${e.minimum} ${r.unit}`:`Kr ju: a n lti j ${n}${e.minimum}`}case'invalid_format':{const t=e;return'starts_with'===t.format?`r ae: gbd br pl "${t.prefix}"`:'ends_with'===t.format?`r ae: gbd par pl "${t.suffix}"`:'includes'===t.format?`r ae: gbd n "${t.includes}"`:'regex'===t.format?`r ae: gbd b pr mu ${t.pattern}`:`Ae: ${n[t.format]??e.format}`}case'not_multiple_of':return`Nmb ae: gbd j y ppn ti ${e.divisor}`;case'unrecognized_keys':return`Btn m: ${kc(e.keys,', ')}`;case'invalid_key':return`Btn ae nn ${e.origin}`;case'invalid_union':default:return'bwl ae';case'invalid_element':return`Iye ae nn ${e.origin}`}}};const Yh=Object.freeze(Object.defineProperty({__proto__:null,ar:function(){return{localeError:Yf()}},az:function(){return{localeError:Xf()}},be:function(){return{localeError:eh()}},bg:function(){return{localeError:th()}},ca:function(){return{localeError:nh()}},cs:function(){return{localeError:rh()}},da:function(){return{localeError:ih()}},de:function(){return{localeError:oh()}},en:sh,eo:function(){return{localeError:lh()}},es:function(){return{localeError:ch()}},fa:function(){return{localeError:uh()}},fi:function(){return{localeError:dh()}},fr:function(){return{localeError:ph()}},frCA:function(){return{localeError:fh()}},he:function(){return{localeError:hh()}},hu:function(){return{localeError:mh()}},id:function(){return{localeError:gh()}},is:function(){return{localeError:vh()}},it:function(){return{localeError:yh()}},ja:function(){return{localeError:bh()}},ka:function(){return{localeError:_h()}},kh:function(){return kh()},km:kh,ko:function(){return{localeError:xh()}},lt:function(){return{localeError:Oh()}},mk:function(){return{localeError:Ih()}},ms:function(){return{localeError:Th()}},nl:function(){return{localeError:Ah()}},no:function(){return{localeError:Ch()}},ota:function(){return{localeError:Nh()}},pl:function(){return{localeError:jh()}},ps:function(){return{localeError:Ph()}},pt:function(){return{localeError:Dh()}},ru:function(){return{localeError:Uh()}},sl:function(){return{localeError:Lh()}},sv:function(){return{localeError:zh()}},ta:function(){return{localeError:Vh()}},th:function(){return{localeError:Mh()}},tr:function(){return{localeError:Bh()}},ua:function(){return Zh()},uk:Zh,ur:function(){return{localeError:Hh()}},vi:function(){return{localeError:qh()}},yo:function(){return{localeError:Jh()}},zhCN:Gh,zhTW:function(){return{localeError:Wh()}}},Symbol.toStringTag,{value:'Module'})),Xh=Symbol('ZodOutput'),Qh=Symbol('ZodInput');class em{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&'object'==typeof n&&'id'in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&'object'==typeof t&&'id'in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};delete n.id;const r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function tm(){return new em}const nm=tm();function rm(e,t){return new e({type:'string',...Bc(t)})}function im(e,t){return new e({type:'string',coerce:!0,...Bc(t)})}function om(e,t){return new e({type:'string',format:'email',check:'string_format',abort:!1,...Bc(t)})}function am(e,t){return new e({type:'string',format:'guid',check:'string_format',abort:!1,...Bc(t)})}function sm(e,t){return new e({type:'string',format:'uuid',check:'string_format',abort:!1,...Bc(t)})}function lm(e,t){return new e({type:'string',format:'uuid',check:'string_format',abort:!1,version:'v4',...Bc(t)})}function cm(e,t){return new e({type:'string',format:'uuid',check:'string_format',abort:!1,version:'v6',...Bc(t)})}function um(e,t){return new e({type:'string',format:'uuid',check:'string_format',abort:!1,version:'v7',...Bc(t)})}function dm(e,t){return new e({type:'string',format:'url',check:'string_format',abort:!1,...Bc(t)})}function pm(e,t){return new e({type:'string',format:'emoji',check:'string_format',abort:!1,...Bc(t)})}function fm(e,t){return new e({type:'string',format:'nanoid',check:'string_format',abort:!1,...Bc(t)})}function hm(e,t){return new e({type:'string',format:'cuid',check:'string_format',abort:!1,...Bc(t)})}function mm(e,t){return new e({type:'string',format:'cuid2',check:'string_format',abort:!1,...Bc(t)})}function gm(e,t){return new e({type:'string',format:'ulid',check:'string_format',abort:!1,...Bc(t)})}function vm(e,t){return new e({type:'string',format:'xid',check:'string_format',abort:!1,...Bc(t)})}function ym(e,t){return new e({type:'string',format:'ksuid',check:'string_format',abort:!1,...Bc(t)})}function bm(e,t){return new e({type:'string',format:'ipv4',check:'string_format',abort:!1,...Bc(t)})}function _m(e,t){return new e({type:'string',format:'ipv6',check:'string_format',abort:!1,...Bc(t)})}function wm(e,t){return new e({type:'string',format:'cidrv4',check:'string_format',abort:!1,...Bc(t)})}function km(e,t){return new e({type:'string',format:'cidrv6',check:'string_format',abort:!1,...Bc(t)})}function xm(e,t){return new e({type:'string',format:'base64',check:'string_format',abort:!1,...Bc(t)})}function Sm(e,t){return new e({type:'string',format:'base64url',check:'string_format',abort:!1,...Bc(t)})}function Em(e,t){return new e({type:'string',format:'e164',check:'string_format',abort:!1,...Bc(t)})}function $m(e,t){return new e({type:'string',format:'jwt',check:'string_format',abort:!1,...Bc(t)})}const Om={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function Im(e,t){return new e({type:'string',format:'datetime',check:'string_format',offset:!1,local:!1,precision:null,...Bc(t)})}function Tm(e,t){return new e({type:'string',format:'date',check:'string_format',...Bc(t)})}function Am(e,t){return new e({type:'string',format:'time',check:'string_format',precision:null,...Bc(t)})}function Cm(e,t){return new e({type:'string',format:'duration',check:'string_format',...Bc(t)})}function Nm(e,t){return new e({type:'number',checks:[],...Bc(t)})}function Pm(e,t){return new e({type:'number',coerce:!0,checks:[],...Bc(t)})}function jm(e,t){return new e({type:'number',check:'number_format',abort:!1,format:'safeint',...Bc(t)})}function Dm(e,t){return new e({type:'number',check:'number_format',abort:!1,format:'float32',...Bc(t)})}function Rm(e,t){return new e({type:'number',check:'number_format',abort:!1,format:'float64',...Bc(t)})}function Um(e,t){return new e({type:'number',check:'number_format',abort:!1,format:'int32',...Bc(t)})}function Lm(e,t){return new e({type:'number',check:'number_format',abort:!1,format:'uint32',...Bc(t)})}function zm(e,t){return new e({type:'boolean',...Bc(t)})}function Vm(e,t){return new e({type:'boolean',coerce:!0,...Bc(t)})}function Mm(e,t){return new e({type:'bigint',...Bc(t)})}function Bm(e,t){return new e({type:'bigint',coerce:!0,...Bc(t)})}function Fm(e,t){return new e({type:'bigint',check:'bigint_format',abort:!1,format:'int64',...Bc(t)})}function Zm(e,t){return new e({type:'bigint',check:'bigint_format',abort:!1,format:'uint64',...Bc(t)})}function Hm(e,t){return new e({type:'symbol',...Bc(t)})}function qm(e,t){return new e({type:'undefined',...Bc(t)})}function Km(e,t){return new e({type:'null',...Bc(t)})}function Gm(e){return new e({type:'any'})}function Wm(e){return new e({type:'unknown'})}function Jm(e,t){return new e({type:'never',...Bc(t)})}function Ym(e,t){return new e({type:'void',...Bc(t)})}function Xm(e,t){return new e({type:'date',...Bc(t)})}function Qm(e,t){return new e({type:'date',coerce:!0,...Bc(t)})}function eg(e,t){return new e({type:'nan',...Bc(t)})}function tg(e,t){return new Fd({check:'less_than',...Bc(t),value:e,inclusive:!1})}function ng(e,t){return new Fd({check:'less_than',...Bc(t),value:e,inclusive:!0})}function rg(e,t){return new Zd({check:'greater_than',...Bc(t),value:e,inclusive:!1})}function ig(e,t){return new Zd({check:'greater_than',...Bc(t),value:e,inclusive:!0})}function og(e){return rg(0,e)}function ag(e){return tg(0,e)}function sg(e){return ng(0,e)}function lg(e){return ig(0,e)}function cg(e,t){return new Hd({check:'multiple_of',...Bc(t),value:e})}function ug(e,t){return new Gd({check:'max_size',...Bc(t),maximum:e})}function dg(e,t){return new Wd({check:'min_size',...Bc(t),minimum:e})}function pg(e,t){return new Jd({check:'size_equals',...Bc(t),size:e})}function fg(e,t){return new Yd({check:'max_length',...Bc(t),maximum:e})}function hg(e,t){return new Xd({check:'min_length',...Bc(t),minimum:e})}function mg(e,t){return new Qd({check:'length_equals',...Bc(t),length:e})}function gg(e,t){return new tp({check:'string_format',format:'regex',...Bc(t),pattern:e})}function vg(e){return new np({check:'string_format',format:'lowercase',...Bc(e)})}function yg(e){return new rp({check:'string_format',format:'uppercase',...Bc(e)})}function bg(e,t){return new ip({check:'string_format',format:'includes',...Bc(t),includes:e})}function _g(e,t){return new op({check:'string_format',format:'starts_with',...Bc(t),prefix:e})}function wg(e,t){return new ap({check:'string_format',format:'ends_with',...Bc(t),suffix:e})}function kg(e,t,n){return new lp({check:'property',property:e,schema:t,...Bc(n)})}function xg(e,t){return new cp({check:'mime_type',mime:e,...Bc(t)})}function Sg(e){return new up({check:'overwrite',tx:e})}function Eg(e){return Sg((t=>t.normalize(e)))}function $g(){return Sg((e=>e.trim()))}function Og(){return Sg((e=>e.toLowerCase()))}function Ig(){return Sg((e=>e.toUpperCase()))}function Tg(e,t,n){return new e({type:'array',element:t,...Bc(n)})}function Ag(e,t){return new e({type:'file',...Bc(t)})}function Cg(e,t,n){const r=Bc(n);r.abort??(r.abort=!0);return new e({type:'custom',check:'custom',fn:t,...r})}function Ng(e,t,n){return new e({type:'custom',check:'custom',fn:t,...Bc(n)})}function Pg(e){const t=jg((n=>(n.addIssue=e=>{if('string'==typeof e)n.issues.push(au(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code='custom'),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(au(r))}},e(n.value,n))));return t}function jg(e,t){const n=new Md({check:'custom',...Bc(t)});return n._zod.check=e,n}function Dg(e,t){const n=Bc(t);let r=n.truthy??['true','1','yes','on','y','enabled'],i=n.falsy??['false','0','no','off','n','disabled'];'sensitive'!==n.case&&(r=r.map((e=>'string'==typeof e?e.toLowerCase():e)),i=i.map((e=>'string'==typeof e?e.toLowerCase():e)));const o=new Set(r),a=new Set(i),s=e.Codec??Vf,l=e.Boolean??Hp,c=new s({type:'pipe',in:new(e.String??hp)({type:'string',error:n.error}),out:new l({type:'boolean',error:n.error}),transform:(e,t)=>{let r=e;return'sensitive'!==n.case&&(r=r.toLowerCase()),!!o.has(r)||!a.has(r)&&(t.issues.push({code:'invalid_value',expected:'stringbool',values:[...o,...a],input:t.value,inst:c,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?r[0]||'true':i[0]||'false',error:n.error});return c}function Rg(e,t,n,r={}){const i=Bc(r),o={...Bc(r),check:'string_format',type:'string',format:t,fn:'function'==typeof n?n:e=>n.test(e),...i};n instanceof RegExp&&(o.pattern=n);return new e(o)}class Ug{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??nm,this.target=e?.target??'draft-2020-12',this.unrepresentable=e?.unrepresentable??'throw',this.override=e?.override??(()=>{}),this.io=e?.io??'output',this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var n;const r=e._zod.def,i={guid:'uuid',url:'uri',datetime:'date-time',json_string:'json-string',regex:''},o=this.seen.get(e);if(o){o.count++;return t.schemaPath.includes(e)&&(o.cycle=t.path),o.schema}const a={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,a);const s=e._zod.toJSONSchema?.();if(s)a.schema=s;else{const n={...t,schemaPath:[...t.schemaPath,e],path:t.path},o=e._zod.parent;if(o)a.ref=o,this.process(o,n),this.seen.get(o).isParent=!0;else{const t=a.schema;switch(r.type){case'string':{const n=t;n.type='string';const{minimum:r,maximum:o,format:s,patterns:l,contentEncoding:c}=e._zod.bag;if('number'==typeof r&&(n.minLength=r),'number'==typeof o&&(n.maxLength=o),s&&(n.format=i[s]??s,''===n.format&&delete n.format),c&&(n.contentEncoding=c),l&&l.size>0){const e=[...l];1===e.length?n.pattern=e[0].source:e.length>1&&(a.schema.allOf=[...e.map((e=>({...'draft-7'===this.target||'draft-4'===this.target||'openapi-3.0'===this.target?{type:'string'}:{},pattern:e.source})))])}break}case'number':{const n=t,{minimum:r,maximum:i,format:o,multipleOf:a,exclusiveMaximum:s,exclusiveMinimum:l}=e._zod.bag;'string'==typeof o&&o.includes('int')?n.type='integer':n.type='number','number'==typeof l&&('draft-4'===this.target||'openapi-3.0'===this.target?(n.minimum=l,n.exclusiveMinimum=!0):n.exclusiveMinimum=l),'number'==typeof r&&(n.minimum=r,'number'==typeof l&&'draft-4'!==this.target&&(l>=r?delete n.minimum:delete n.exclusiveMinimum)),'number'==typeof s&&('draft-4'===this.target||'openapi-3.0'===this.target?(n.maximum=s,n.exclusiveMaximum=!0):n.exclusiveMaximum=s),'number'==typeof i&&(n.maximum=i,'number'==typeof s&&'draft-4'!==this.target&&(s<=i?delete n.maximum:delete n.exclusiveMaximum)),'number'==typeof a&&(n.multipleOf=a);break}case'boolean':t.type='boolean';break;case'bigint':if('throw'===this.unrepresentable)throw new Error('BigInt cannot be represented in JSON Schema');break;case'symbol':if('throw'===this.unrepresentable)throw new Error('Symbols cannot be represented in JSON Schema');break;case'null':'openapi-3.0'===this.target?(t.type='string',t.nullable=!0,t.enum=[null]):t.type='null';break;case'any':case'unknown':break;case'undefined':if('throw'===this.unrepresentable)throw new Error('Undefined cannot be represented in JSON Schema');break;case'void':if('throw'===this.unrepresentable)throw new Error('Void cannot be represented in JSON Schema');break;case'never':t.not={};break;case'date':if('throw'===this.unrepresentable)throw new Error('Date cannot be represented in JSON Schema');break;case'array':{const i=t,{minimum:o,maximum:a}=e._zod.bag;'number'==typeof o&&(i.minItems=o),'number'==typeof a&&(i.maxItems=a),i.type='array',i.items=this.process(r.element,{...n,path:[...n.path,'items']});break}case'object':{const e=t;e.type='object',e.properties={};const i=r.shape;for(const t in i)e.properties[t]=this.process(i[t],{...n,path:[...n.path,'properties',t]});const o=new Set(Object.keys(i)),a=new Set([...o].filter((e=>{const t=r.shape[e]._zod;return'input'===this.io?void 0===t.optin:void 0===t.optout})));a.size>0&&(e.required=Array.from(a)),'never'===r.catchall?._zod.def.type?e.additionalProperties=!1:r.catchall?r.catchall&&(e.additionalProperties=this.process(r.catchall,{...n,path:[...n.path,'additionalProperties']})):'output'===this.io&&(e.additionalProperties=!1);break}case'union':{const e=t,i=r.options.map(((e,t)=>this.process(e,{...n,path:[...n.path,'anyOf',t]})));e.anyOf=i;break}case'intersection':{const e=t,i=this.process(r.left,{...n,path:[...n.path,'allOf',0]}),o=this.process(r.right,{...n,path:[...n.path,'allOf',1]}),a=e=>'allOf'in e&&1===Object.keys(e).length,s=[...a(i)?i.allOf:[i],...a(o)?o.allOf:[o]];e.allOf=s;break}case'tuple':{const i=t;i.type='array';const o='draft-2020-12'===this.target?'prefixItems':'items',a='draft-2020-12'===this.target||'openapi-3.0'===this.target?'items':'additionalItems',s=r.items.map(((e,t)=>this.process(e,{...n,path:[...n.path,o,t]}))),l=r.rest?this.process(r.rest,{...n,path:[...n.path,a,...'openapi-3.0'===this.target?[r.items.length]:[]]}):null;'draft-2020-12'===this.target?(i.prefixItems=s,l&&(i.items=l)):'openapi-3.0'===this.target?(i.items={anyOf:s},l&&i.items.anyOf.push(l),i.minItems=s.length,l||(i.maxItems=s.length)):(i.items=s,l&&(i.additionalItems=l));const{minimum:c,maximum:u}=e._zod.bag;'number'==typeof c&&(i.minItems=c),'number'==typeof u&&(i.maxItems=u);break}case'record':{const e=t;e.type='object','draft-7'!==this.target&&'draft-2020-12'!==this.target||(e.propertyNames=this.process(r.keyType,{...n,path:[...n.path,'propertyNames']})),e.additionalProperties=this.process(r.valueType,{...n,path:[...n.path,'additionalProperties']});break}case'map':if('throw'===this.unrepresentable)throw new Error('Map cannot be represented in JSON Schema');break;case'set':if('throw'===this.unrepresentable)throw new Error('Set cannot be represented in JSON Schema');break;case'enum':{const e=t,n=wc(r.entries);n.every((e=>'number'==typeof e))&&(e.type='number'),n.every((e=>'string'==typeof e))&&(e.type='string'),e.enum=n;break}case'literal':{const e=t,n=[];for(const t of r.values)if(void 0===t){if('throw'===this.unrepresentable)throw new Error('Literal `undefined` cannot be represented in JSON Schema')}else if('bigint'==typeof t){if('throw'===this.unrepresentable)throw new Error('BigInt literals cannot be represented in JSON Schema');n.push(Number(t))}else n.push(t);if(0===n.length);else if(1===n.length){const t=n[0];e.type=null===t?'null':typeof t,'draft-4'===this.target||'openapi-3.0'===this.target?e.enum=[t]:e.const=t}else n.every((e=>'number'==typeof e))&&(e.type='number'),n.every((e=>'string'==typeof e))&&(e.type='string'),n.every((e=>'boolean'==typeof e))&&(e.type='string'),n.every((e=>null===e))&&(e.type='null'),e.enum=n;break}case'file':{const n=t,r={type:'string',format:'binary',contentEncoding:'binary'},{minimum:i,maximum:o,mime:a}=e._zod.bag;void 0!==i&&(r.minLength=i),void 0!==o&&(r.maxLength=o),a?1===a.length?(r.contentMediaType=a[0],Object.assign(n,r)):n.anyOf=a.map((e=>({...r,contentMediaType:e}))):Object.assign(n,r);break}case'transform':if('throw'===this.unrepresentable)throw new Error('Transforms cannot be represented in JSON Schema');break;case'nullable':{const e=this.process(r.innerType,n);'openapi-3.0'===this.target?(a.ref=r.innerType,t.nullable=!0):t.anyOf=[e,{type:'null'}];break}case'nonoptional':case'promise':case'optional':this.process(r.innerType,n),a.ref=r.innerType;break;case'success':t.type='boolean';break;case'default':this.process(r.innerType,n),a.ref=r.innerType,t.default=JSON.parse(JSON.stringify(r.defaultValue));break;case'prefault':this.process(r.innerType,n),a.ref=r.innerType,'input'===this.io&&(t._prefault=JSON.parse(JSON.stringify(r.defaultValue)));break;case'catch':{let e;this.process(r.innerType,n),a.ref=r.innerType;try{e=r.catchValue(void 0)}catch{throw new Error('Dynamic catch values are not supported in JSON Schema')}t.default=e;break}case'nan':if('throw'===this.unrepresentable)throw new Error('NaN cannot be represented in JSON Schema');break;case'template_literal':{const n=t,r=e._zod.pattern;if(!r)throw new Error('Pattern not found in template literal');n.type='string',n.pattern=r.source;break}case'pipe':{const e='input'===this.io?'transform'===r.in._zod.def.type?r.out:r.in:r.out;this.process(e,n),a.ref=e;break}case'readonly':this.process(r.innerType,n),a.ref=r.innerType,t.readOnly=!0;break;case'lazy':{const t=e._zod.innerType;this.process(t,n),a.ref=t;break}case'custom':if('throw'===this.unrepresentable)throw new Error('Custom types cannot be represented in JSON Schema');break;case'function':if('throw'===this.unrepresentable)throw new Error('Function types cannot be represented in JSON Schema')}}}const l=this.metadataRegistry.get(e);l&&Object.assign(a.schema,l),'input'===this.io&&zg(e)&&(delete a.schema.examples,delete a.schema.default),'input'===this.io&&a.schema._prefault&&((n=a.schema).default??(n.default=a.schema._prefault)),delete a.schema._prefault;return this.seen.get(e).schema}emit(e,t){const n={cycles:t?.cycles??'ref',reused:t?.reused??'inline',external:t?.external??void 0},r=this.seen.get(e);if(!r)throw new Error('Unprocessed schema. This is a bug in Zod.');const i=e=>{const t='draft-2020-12'===this.target?'$defs':'definitions';if(n.external){const r=n.external.registry.get(e[0])?.id,i=n.external.uri??(e=>e);if(r)return{ref:i(r)};const o=e[1].defId??e[1].schema.id??'schema'+this.counter++;return e[1].defId=o,{defId:o,ref:`${i('__shared')}#/${t}/${o}`}}if(e[1]===r)return{ref:'#'};const i=`#/${t}/`,o=e[1].schema.id??'__schema'+this.counter++;return{defId:o,ref:i+o}},o=e=>{if(e[1].schema.$ref)return;const t=e[1],{ref:n,defId:r}=i(e);t.def={...t.schema},r&&(t.defId=r);const o=t.schema;for(const i in o)delete o[i];o.$ref=n};if('throw'===n.cycles)for(const u of this.seen.entries()){const e=u[1];if(e.cycle)throw new Error(`Cycle detected: #/${e.cycle?.join('/')}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of this.seen.entries()){const t=u[1];if(e===u[0]){o(u);continue}if(n.external){const t=n.external.registry.get(u[0])?.id;if(e!==u[0]&&t){o(u);continue}}const r=this.metadataRegistry.get(u[0])?.id;r?o(u):(t.cycle||t.count>1&&'ref'===n.reused)&&o(u)}const a=(e,t)=>{const n=this.seen.get(e),r=n.def??n.schema,i={...r};if(null===n.ref)return;const o=n.ref;if(n.ref=null,o){a(o,t);const e=this.seen.get(o).schema;!e.$ref||'draft-7'!==t.target&&'draft-4'!==t.target&&'openapi-3.0'!==t.target?(Object.assign(r,e),Object.assign(r,i)):(r.allOf=r.allOf??[],r.allOf.push(e))}n.isParent||this.override({zodSchema:e,jsonSchema:r,path:n.path??[]})};for(const u of[...this.seen.entries()].reverse())a(u[0],{target:this.target});const s={};if('draft-2020-12'===this.target?s.$schema='https://json-schema.org/draft/2020-12/schema':'draft-7'===this.target?s.$schema='http://json-schema.org/draft-07/schema#':'draft-4'===this.target?s.$schema='http://json-schema.org/draft-04/schema#':'openapi-3.0'===this.target||console.warn(`Invalid target: ${this.target}`),n.external?.uri){const t=n.external.registry.get(e)?.id;if(!t)throw new Error('Schema is missing an `id` property');s.$id=n.external.uri(t)}Object.assign(s,r.def);const l=n.external?.defs??{};for(const u of this.seen.entries()){const e=u[1];e.def&&e.defId&&(l[e.defId]=e.def)}n.external||Object.keys(l).length>0&&('draft-2020-12'===this.target?s.$defs=l:s.definitions=l);try{return JSON.parse(JSON.stringify(s))}catch(c){throw new Error('Error converting schema to JSON.')}}}function Lg(e,t){if(e instanceof em){const n=new Ug(t),r={};for(const t of e._idmap.entries()){const[_,e]=t;n.process(e)}const i={},o={registry:e,uri:t?.uri,defs:r};for(const a of e._idmap.entries()){const[e,r]=a;i[e]=n.emit(r,{...t,external:o})}if(Object.keys(r).length>0){const e='draft-2020-12'===n.target?'$defs':'definitions';i.__shared={[e]:r}}return{schemas:i}}const n=new Ug(t);return n.process(e),n.emit(e,t)}function zg(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;switch(r.type){case'string':case'number':case'bigint':case'boolean':case'date':case'symbol':case'undefined':case'null':case'any':case'unknown':case'never':case'void':case'literal':case'enum':case'nan':case'file':case'template_literal':case'custom':case'success':case'catch':case'function':return!1;case'array':return zg(r.element,n);case'object':for(const e in r.shape)if(zg(r.shape[e],n))return!0;return!1;case'union':for(const e of r.options)if(zg(e,n))return!0;return!1;case'intersection':return zg(r.left,n)||zg(r.right,n);case'tuple':for(const e of r.items)if(zg(e,n))return!0;return!(!r.rest||!zg(r.rest,n));case'record':case'map':return zg(r.keyType,n)||zg(r.valueType,n);case'set':return zg(r.valueType,n);case'promise':case'optional':case'nonoptional':case'nullable':case'readonly':case'default':case'prefault':return zg(r.innerType,n);case'lazy':return zg(r.getter(),n);case'transform':return!0;case'pipe':return zg(r.in,n)||zg(r.out,n)}throw new Error(`Unknown schema type: ${r.type}`)}const Vg=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:'Module'})),Mg=Object.freeze(Object.defineProperty({__proto__:null,$ZodAny:Yp,$ZodArray:rf,$ZodAsyncError:vc,$ZodBase64:Rp,$ZodBase64URL:Lp,$ZodBigInt:qp,$ZodBigIntFormat:Kp,$ZodBoolean:Hp,$ZodCIDRv4:Pp,$ZodCIDRv6:jp,$ZodCUID:kp,$ZodCUID2:xp,$ZodCatch:Rf,$ZodCheck:Md,$ZodCheckBigIntFormat:Kd,$ZodCheckEndsWith:ap,$ZodCheckGreaterThan:Zd,$ZodCheckIncludes:ip,$ZodCheckLengthEquals:Qd,$ZodCheckLessThan:Fd,$ZodCheckLowerCase:np,$ZodCheckMaxLength:Yd,$ZodCheckMaxSize:Gd,$ZodCheckMimeType:cp,$ZodCheckMinLength:Xd,$ZodCheckMinSize:Wd,$ZodCheckMultipleOf:Hd,$ZodCheckNumberFormat:qd,$ZodCheckOverwrite:up,$ZodCheckProperty:lp,$ZodCheckRegex:tp,$ZodCheckSizeEquals:Jd,$ZodCheckStartsWith:op,$ZodCheckStringFormat:ep,$ZodCheckUpperCase:rp,$ZodCodec:Vf,$ZodCustom:Wf,$ZodCustomStringFormat:Bp,$ZodDate:tf,$ZodDefault:Af,$ZodDiscriminatedUnion:pf,$ZodE164:zp,$ZodEmail:yp,$ZodEmoji:_p,$ZodEncodeError:yc,$ZodEnum:xf,$ZodError:du,$ZodFile:Ef,$ZodFunction:qf,$ZodGUID:gp,$ZodIPv4:Cp,$ZodIPv6:Np,$ZodISODate:Ip,$ZodISODateTime:Op,$ZodISODuration:Ap,$ZodISOTime:Tp,$ZodIntersection:ff,$ZodJWT:Mp,$ZodKSUID:$p,$ZodLazy:Gf,$ZodLiteral:Sf,$ZodMap:bf,$ZodNaN:Uf,$ZodNanoID:wp,$ZodNever:Qp,$ZodNonOptional:Pf,$ZodNull:Jp,$ZodNullable:Tf,$ZodNumber:Fp,$ZodNumberFormat:Zp,$ZodObject:lf,$ZodObjectJIT:cf,$ZodOptional:If,$ZodPipe:Lf,$ZodPrefault:Nf,$ZodPromise:Kf,$ZodReadonly:Ff,$ZodRealError:pu,$ZodRecord:yf,$ZodRegistry:em,$ZodSet:wf,$ZodString:hp,$ZodStringFormat:mp,$ZodSuccess:Df,$ZodSymbol:Gp,$ZodTemplateLiteral:Hf,$ZodTransform:$f,$ZodTuple:gf,$ZodType:fp,$ZodULID:Sp,$ZodURL:bp,$ZodUUID:vp,$ZodUndefined:Wp,$ZodUnion:df,$ZodUnknown:Xp,$ZodVoid:ef,$ZodXID:Ep,$brand:gc,$constructor:mc,$input:Qh,$output:Xh,Doc:dp,JSONSchema:Vg,JSONSchemaGenerator:Ug,NEVER:hc,TimePrecision:Om,_any:Gm,_array:Tg,_base64:xm,_base64url:Sm,_bigint:Mm,_boolean:zm,_catch:function(e,t,n){return new e({type:'catch',innerType:t,catchValue:'function'==typeof n?n:()=>n})},_check:jg,_cidrv4:wm,_cidrv6:km,_coercedBigint:Bm,_coercedBoolean:Vm,_coercedDate:Qm,_coercedNumber:Pm,_coercedString:im,_cuid:hm,_cuid2:mm,_custom:Cg,_date:Xm,_decode:Iu,_decodeAsync:Nu,_default:function(e,t,n){return new e({type:'default',innerType:t,get defaultValue(){return'function'==typeof n?n():Uc(n)}})},_discriminatedUnion:function(e,t,n,r){return new e({type:'union',options:n,discriminator:t,...Bc(r)})},_e164:Em,_email:om,_emoji:pm,_encode:$u,_encodeAsync:Au,_endsWith:wg,_enum:function(e,t,n){const r=Array.isArray(t)?Object.fromEntries(t.map((e=>[e,e]))):t;return new e({type:'enum',entries:r,...Bc(n)})},_file:Ag,_float32:Dm,_float64:Rm,_gt:rg,_gte:ig,_guid:am,_includes:bg,_int:jm,_int32:Um,_int64:Fm,_intersection:function(e,t,n){return new e({type:'intersection',left:t,right:n})},_ipv4:bm,_ipv6:_m,_isoDate:Tm,_isoDateTime:Im,_isoDuration:Cm,_isoTime:Am,_jwt:$m,_ksuid:ym,_lazy:function(e,t){return new e({type:'lazy',getter:t})},_length:mg,_literal:function(e,t,n){return new e({type:'literal',values:Array.isArray(t)?t:[t],...Bc(n)})},_lowercase:vg,_lt:tg,_lte:ng,_map:function(e,t,n,r){return new e({type:'map',keyType:t,valueType:n,...Bc(r)})},_max:ng,_maxLength:fg,_maxSize:ug,_mime:xg,_min:ig,_minLength:hg,_minSize:dg,_multipleOf:cg,_nan:eg,_nanoid:fm,_nativeEnum:function(e,t,n){return new e({type:'enum',entries:t,...Bc(n)})},_negative:ag,_never:Jm,_nonnegative:lg,_nonoptional:function(e,t,n){return new e({type:'nonoptional',innerType:t,...Bc(n)})},_nonpositive:sg,_normalize:Eg,_null:Km,_nullable:function(e,t){return new e({type:'nullable',innerType:t})},_number:Nm,_optional:function(e,t){return new e({type:'optional',innerType:t})},_overwrite:Sg,_parse:yu,_parseAsync:_u,_pipe:function(e,t,n){return new e({type:'pipe',in:t,out:n})},_positive:og,_promise:function(e,t){return new e({type:'promise',innerType:t})},_property:kg,_readonly:function(e,t){return new e({type:'readonly',innerType:t})},_record:function(e,t,n,r){return new e({type:'record',keyType:t,valueType:n,...Bc(r)})},_refine:Ng,_regex:gg,_safeDecode:Ru,_safeDecodeAsync:Vu,_safeEncode:ju,_safeEncodeAsync:Lu,_safeParse:ku,_safeParseAsync:Su,_set:function(e,t,n){return new e({type:'set',valueType:t,...Bc(n)})},_size:pg,_startsWith:_g,_string:rm,_stringFormat:Rg,_stringbool:Dg,_success:function(e,t){return new e({type:'success',innerType:t})},_superRefine:Pg,_symbol:Hm,_templateLiteral:function(e,t,n){return new e({type:'template_literal',parts:t,...Bc(n)})},_toLowerCase:Og,_toUpperCase:Ig,_transform:function(e,t){return new e({type:'transform',transform:t})},_trim:$g,_tuple:function(e,t,n,r){const i=n instanceof fp;return new e({type:'tuple',items:t,rest:i?n:null,...Bc(i?r:n)})},_uint32:Lm,_uint64:Zm,_ulid:gm,_undefined:qm,_union:function(e,t,n){return new e({type:'union',options:t,...Bc(n)})},_unknown:Wm,_uppercase:yg,_url:dm,_uuid:sm,_uuidv4:lm,_uuidv6:cm,_uuidv7:um,_void:Ym,_xid:vm,clone:Mc,config:_c,decode:Tu,decodeAsync:Pu,encode:Ou,encodeAsync:Cu,flattenError:fu,formatError:hu,globalConfig:bc,globalRegistry:nm,isValidBase64:Dp,isValidBase64URL:Up,isValidJWT:Vp,locales:Yh,parse:bu,parseAsync:wu,prettifyError:vu,regexes:Vd,registry:tm,safeDecode:Uu,safeDecodeAsync:Mu,safeEncode:Du,safeEncodeAsync:zu,safeParse:xu,safeParseAsync:Eu,toDotPath:gu,toJSONSchema:Lg,treeifyError:mu,util:cu,version:pp},Symbol.toStringTag,{value:'Module'})),Bg=mc('ZodISODateTime',((e,t)=>{Op.init(e,t),gv.init(e,t)}));function Fg(e){return Im(Bg,e)}const Zg=mc('ZodISODate',((e,t)=>{Ip.init(e,t),gv.init(e,t)}));function Hg(e){return Tm(Zg,e)}const qg=mc('ZodISOTime',((e,t)=>{Tp.init(e,t),gv.init(e,t)}));function Kg(e){return Am(qg,e)}const Gg=mc('ZodISODuration',((e,t)=>{Ap.init(e,t),gv.init(e,t)}));function Wg(e){return Cm(Gg,e)}const Jg=Object.freeze(Object.defineProperty({__proto__:null,ZodISODate:Zg,ZodISODateTime:Bg,ZodISODuration:Gg,ZodISOTime:qg,date:Hg,datetime:Fg,duration:Wg,time:Kg},Symbol.toStringTag,{value:'Module'})),Yg=(e,t)=>{du.init(e,t),e.name='ZodError',Object.defineProperties(e,{format:{value:t=>hu(e,t)},flatten:{value:t=>fu(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,xc,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,xc,2)}},isEmpty:{get:()=>0===e.issues.length}})},Xg=mc('ZodError',Yg),Qg=mc('ZodError',Yg,{Parent:Error}),ev=yu(Qg),tv=_u(Qg),nv=ku(Qg),rv=Su(Qg),iv=$u(Qg),ov=Iu(Qg),av=Au(Qg),sv=Nu(Qg),lv=ju(Qg),cv=Ru(Qg),uv=Lu(Qg),dv=Vu(Qg),pv=mc('ZodType',((e,t)=>(fp.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,'_def',{value:t}),e.check=(...n)=>e.clone(Cc(t,{checks:[...t.checks??[],...n.map((e=>'function'==typeof e?{_zod:{check:e,def:{check:'custom'},onattach:[]}}:e))]})),e.clone=(t,n)=>Mc(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>ev(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>nv(e,t,n),e.parseAsync=async(t,n)=>tv(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>rv(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>iv(e,t,n),e.decode=(t,n)=>ov(e,t,n),e.encodeAsync=async(t,n)=>av(e,t,n),e.decodeAsync=async(t,n)=>sv(e,t,n),e.safeEncode=(t,n)=>lv(e,t,n),e.safeDecode=(t,n)=>cv(e,t,n),e.safeEncodeAsync=async(t,n)=>uv(e,t,n),e.safeDecodeAsync=async(t,n)=>dv(e,t,n),e.refine=(t,n)=>e.check(Xb(t,n)),e.superRefine=t=>e.check(Qb(t)),e.overwrite=t=>e.check(Sg(t)),e.optional=()=>bb(e),e.nullable=()=>wb(e),e.nullish=()=>bb(wb(e)),e.nonoptional=t=>Ib(e,t),e.array=()=>By(e),e.or=t=>Wy([e,t]),e.and=t=>Qy(e,t),e.transform=t=>Rb(e,vb(t)),e.default=t=>Sb(e,t),e.prefault=t=>$b(e,t),e.catch=t=>Nb(e,t),e.pipe=t=>Rb(e,t),e.readonly=()=>Vb(e),e.describe=t=>{const n=e.clone();return nm.add(n,{description:t}),n},Object.defineProperty(e,'description',{get:()=>nm.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return nm.get(e);const n=e.clone();return nm.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e))),fv=mc('_ZodString',((e,t)=>{hp.init(e,t),pv.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(gg(...t)),e.includes=(...t)=>e.check(bg(...t)),e.startsWith=(...t)=>e.check(_g(...t)),e.endsWith=(...t)=>e.check(wg(...t)),e.min=(...t)=>e.check(hg(...t)),e.max=(...t)=>e.check(fg(...t)),e.length=(...t)=>e.check(mg(...t)),e.nonempty=(...t)=>e.check(hg(1,...t)),e.lowercase=t=>e.check(vg(t)),e.uppercase=t=>e.check(yg(t)),e.trim=()=>e.check($g()),e.normalize=(...t)=>e.check(Eg(...t)),e.toLowerCase=()=>e.check(Og()),e.toUpperCase=()=>e.check(Ig())})),hv=mc('ZodString',((e,t)=>{hp.init(e,t),fv.init(e,t),e.email=t=>e.check(om(vv,t)),e.url=t=>e.check(dm($v,t)),e.jwt=t=>e.check($m(ry,t)),e.emoji=t=>e.check(pm(Tv,t)),e.guid=t=>e.check(am(bv,t)),e.uuid=t=>e.check(sm(wv,t)),e.uuidv4=t=>e.check(lm(wv,t)),e.uuidv6=t=>e.check(cm(wv,t)),e.uuidv7=t=>e.check(um(wv,t)),e.nanoid=t=>e.check(fm(Cv,t)),e.guid=t=>e.check(am(bv,t)),e.cuid=t=>e.check(hm(Pv,t)),e.cuid2=t=>e.check(mm(Dv,t)),e.ulid=t=>e.check(gm(Uv,t)),e.base64=t=>e.check(xm(Yv,t)),e.base64url=t=>e.check(Sm(Qv,t)),e.xid=t=>e.check(vm(zv,t)),e.ksuid=t=>e.check(ym(Mv,t)),e.ipv4=t=>e.check(bm(Fv,t)),e.ipv6=t=>e.check(_m(Hv,t)),e.cidrv4=t=>e.check(wm(Kv,t)),e.cidrv6=t=>e.check(km(Wv,t)),e.e164=t=>e.check(Em(ty,t)),e.datetime=t=>e.check(Fg(t)),e.date=t=>e.check(Hg(t)),e.time=t=>e.check(Kg(t)),e.duration=t=>e.check(Wg(t))}));function mv(e){return rm(hv,e)}const gv=mc('ZodStringFormat',((e,t)=>{mp.init(e,t),fv.init(e,t)})),vv=mc('ZodEmail',((e,t)=>{yp.init(e,t),gv.init(e,t)}));function yv(e){return om(vv,e)}const bv=mc('ZodGUID',((e,t)=>{gp.init(e,t),gv.init(e,t)}));function _v(e){return am(bv,e)}const wv=mc('ZodUUID',((e,t)=>{vp.init(e,t),gv.init(e,t)}));function kv(e){return sm(wv,e)}function xv(e){return lm(wv,e)}function Sv(e){return cm(wv,e)}function Ev(e){return um(wv,e)}const $v=mc('ZodURL',((e,t)=>{bp.init(e,t),gv.init(e,t)}));function Ov(e){return dm($v,e)}function Iv(e){return dm($v,{protocol:/^https?$/,hostname:dd,...Bc(e)})}const Tv=mc('ZodEmoji',((e,t)=>{_p.init(e,t),gv.init(e,t)}));function Av(e){return pm(Tv,e)}const Cv=mc('ZodNanoID',((e,t)=>{wp.init(e,t),gv.init(e,t)}));function Nv(e){return fm(Cv,e)}const Pv=mc('ZodCUID',((e,t)=>{kp.init(e,t),gv.init(e,t)}));function jv(e){return hm(Pv,e)}const Dv=mc('ZodCUID2',((e,t)=>{xp.init(e,t),gv.init(e,t)}));function Rv(e){return mm(Dv,e)}const Uv=mc('ZodULID',((e,t)=>{Sp.init(e,t),gv.init(e,t)}));function Lv(e){return gm(Uv,e)}const zv=mc('ZodXID',((e,t)=>{Ep.init(e,t),gv.init(e,t)}));function Vv(e){return vm(zv,e)}const Mv=mc('ZodKSUID',((e,t)=>{$p.init(e,t),gv.init(e,t)}));function Bv(e){return ym(Mv,e)}const Fv=mc('ZodIPv4',((e,t)=>{Cp.init(e,t),gv.init(e,t)}));function Zv(e){return bm(Fv,e)}const Hv=mc('ZodIPv6',((e,t)=>{Np.init(e,t),gv.init(e,t)}));function qv(e){return _m(Hv,e)}const Kv=mc('ZodCIDRv4',((e,t)=>{Pp.init(e,t),gv.init(e,t)}));function Gv(e){return wm(Kv,e)}const Wv=mc('ZodCIDRv6',((e,t)=>{jp.init(e,t),gv.init(e,t)}));function Jv(e){return km(Wv,e)}const Yv=mc('ZodBase64',((e,t)=>{Rp.init(e,t),gv.init(e,t)}));function Xv(e){return xm(Yv,e)}const Qv=mc('ZodBase64URL',((e,t)=>{Lp.init(e,t),gv.init(e,t)}));function ey(e){return Sm(Qv,e)}const ty=mc('ZodE164',((e,t)=>{zp.init(e,t),gv.init(e,t)}));function ny(e){return Em(ty,e)}const ry=mc('ZodJWT',((e,t)=>{Mp.init(e,t),gv.init(e,t)}));function iy(e){return $m(ry,e)}const oy=mc('ZodCustomStringFormat',((e,t)=>{Bp.init(e,t),gv.init(e,t)}));function ay(e,t,n={}){return Rg(oy,e,t,n)}function sy(e){return Rg(oy,'hostname',ud,e)}function ly(e){return Rg(oy,'hex',Od,e)}function cy(e,t){const n=`${e}_${t?.enc??'hex'}`,r=Vd[n];if(!r)throw new Error(`Unrecognized hash format: ${n}`);return Rg(oy,n,r,t)}const uy=mc('ZodNumber',((e,t)=>{Fp.init(e,t),pv.init(e,t),e.gt=(t,n)=>e.check(rg(t,n)),e.gte=(t,n)=>e.check(ig(t,n)),e.min=(t,n)=>e.check(ig(t,n)),e.lt=(t,n)=>e.check(tg(t,n)),e.lte=(t,n)=>e.check(ng(t,n)),e.max=(t,n)=>e.check(ng(t,n)),e.int=t=>e.check(fy(t)),e.safe=t=>e.check(fy(t)),e.positive=t=>e.check(rg(0,t)),e.nonnegative=t=>e.check(ig(0,t)),e.negative=t=>e.check(tg(0,t)),e.nonpositive=t=>e.check(ng(0,t)),e.multipleOf=(t,n)=>e.check(cg(t,n)),e.step=(t,n)=>e.check(cg(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??'').includes('int')||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null}));function dy(e){return Nm(uy,e)}const py=mc('ZodNumberFormat',((e,t)=>{Zp.init(e,t),uy.init(e,t)}));function fy(e){return jm(py,e)}function hy(e){return Dm(py,e)}function my(e){return Rm(py,e)}function gy(e){return Um(py,e)}function vy(e){return Lm(py,e)}const yy=mc('ZodBoolean',((e,t)=>{Hp.init(e,t),pv.init(e,t)}));function by(e){return zm(yy,e)}const _y=mc('ZodBigInt',((e,t)=>{qp.init(e,t),pv.init(e,t),e.gte=(t,n)=>e.check(ig(t,n)),e.min=(t,n)=>e.check(ig(t,n)),e.gt=(t,n)=>e.check(rg(t,n)),e.gte=(t,n)=>e.check(ig(t,n)),e.min=(t,n)=>e.check(ig(t,n)),e.lt=(t,n)=>e.check(tg(t,n)),e.lte=(t,n)=>e.check(ng(t,n)),e.max=(t,n)=>e.check(ng(t,n)),e.positive=t=>e.check(rg(BigInt(0),t)),e.negative=t=>e.check(tg(BigInt(0),t)),e.nonpositive=t=>e.check(ng(BigInt(0),t)),e.nonnegative=t=>e.check(ig(BigInt(0),t)),e.multipleOf=(t,n)=>e.check(cg(t,n));const n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null}));function wy(e){return Mm(_y,e)}const ky=mc('ZodBigIntFormat',((e,t)=>{Kp.init(e,t),_y.init(e,t)}));function xy(e){return Fm(ky,e)}function Sy(e){return Zm(ky,e)}const Ey=mc('ZodSymbol',((e,t)=>{Gp.init(e,t),pv.init(e,t)}));function $y(e){return Hm(Ey,e)}const Oy=mc('ZodUndefined',((e,t)=>{Wp.init(e,t),pv.init(e,t)}));function Iy(e){return qm(Oy,e)}const Ty=mc('ZodNull',((e,t)=>{Jp.init(e,t),pv.init(e,t)}));function Ay(e){return Km(Ty,e)}const Cy=mc('ZodAny',((e,t)=>{Yp.init(e,t),pv.init(e,t)}));function Ny(){return Gm(Cy)}const Py=mc('ZodUnknown',((e,t)=>{Xp.init(e,t),pv.init(e,t)}));function jy(){return Wm(Py)}const Dy=mc('ZodNever',((e,t)=>{Qp.init(e,t),pv.init(e,t)}));function Ry(e){return Jm(Dy,e)}const Uy=mc('ZodVoid',((e,t)=>{ef.init(e,t),pv.init(e,t)}));function Ly(e){return Ym(Uy,e)}const zy=mc('ZodDate',((e,t)=>{tf.init(e,t),pv.init(e,t),e.min=(t,n)=>e.check(ig(t,n)),e.max=(t,n)=>e.check(ng(t,n));const n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null}));function Vy(e){return Xm(zy,e)}const My=mc('ZodArray',((e,t)=>{rf.init(e,t),pv.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(hg(t,n)),e.nonempty=t=>e.check(hg(1,t)),e.max=(t,n)=>e.check(fg(t,n)),e.length=(t,n)=>e.check(mg(t,n)),e.unwrap=()=>e.element}));function By(e,t){return Tg(My,e,t)}function Fy(e){const t=e._zod.def.shape;return ub(Object.keys(t))}const Zy=mc('ZodObject',((e,t)=>{cf.init(e,t),pv.init(e,t),Tc(e,'shape',(()=>t.shape)),e.keyof=()=>ub(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:jy()}),e.loose=()=>e.clone({...e._zod.def,catchall:jy()}),e.strict=()=>e.clone({...e._zod.def,catchall:Ry()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>Wc(e,t),e.safeExtend=t=>Jc(e,t),e.merge=t=>Yc(e,t),e.pick=t=>Kc(e,t),e.omit=t=>Gc(e,t),e.partial=(...t)=>Xc(yb,e,t[0]),e.required=(...t)=>Qc(Ob,e,t[0])}));function Hy(e,t){const n={type:'object',shape:e??{},...Bc(t)};return new Zy(n)}function qy(e,t){return new Zy({type:'object',shape:e,catchall:Ry(),...Bc(t)})}function Ky(e,t){return new Zy({type:'object',shape:e,catchall:jy(),...Bc(t)})}const Gy=mc('ZodUnion',((e,t)=>{df.init(e,t),pv.init(e,t),e.options=t.options}));function Wy(e,t){return new Gy({type:'union',options:e,...Bc(t)})}const Jy=mc('ZodDiscriminatedUnion',((e,t)=>{Gy.init(e,t),pf.init(e,t)}));function Yy(e,t,n){return new Jy({type:'union',options:t,discriminator:e,...Bc(n)})}const Xy=mc('ZodIntersection',((e,t)=>{ff.init(e,t),pv.init(e,t)}));function Qy(e,t){return new Xy({type:'intersection',left:e,right:t})}const eb=mc('ZodTuple',((e,t)=>{gf.init(e,t),pv.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})}));function tb(e,t,n){const r=t instanceof fp;return new eb({type:'tuple',items:e,rest:r?t:null,...Bc(r?n:t)})}const nb=mc('ZodRecord',((e,t)=>{yf.init(e,t),pv.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType}));function rb(e,t,n){return new nb({type:'record',keyType:e,valueType:t,...Bc(n)})}function ib(e,t,n){const r=Mc(e);return r._zod.values=void 0,new nb({type:'record',keyType:r,valueType:t,...Bc(n)})}const ob=mc('ZodMap',((e,t)=>{bf.init(e,t),pv.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType}));function ab(e,t,n){return new ob({type:'map',keyType:e,valueType:t,...Bc(n)})}const sb=mc('ZodSet',((e,t)=>{wf.init(e,t),pv.init(e,t),e.min=(...t)=>e.check(dg(...t)),e.nonempty=t=>e.check(dg(1,t)),e.max=(...t)=>e.check(ug(...t)),e.size=(...t)=>e.check(pg(...t))}));function lb(e,t){return new sb({type:'set',valueType:e,...Bc(t)})}const cb=mc('ZodEnum',((e,t)=>{xf.init(e,t),pv.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const i={};for(const o of e){if(!n.has(o))throw new Error(`Key ${o} not found in enum`);i[o]=t.entries[o]}return new cb({...t,checks:[],...Bc(r),entries:i})},e.exclude=(e,r)=>{const i={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete i[t]}return new cb({...t,checks:[],...Bc(r),entries:i})}}));function ub(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map((e=>[e,e]))):e;return new cb({type:'enum',entries:n,...Bc(t)})}function db(e,t){return new cb({type:'enum',entries:e,...Bc(t)})}const pb=mc('ZodLiteral',((e,t)=>{Sf.init(e,t),pv.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,'value',{get(){if(t.values.length>1)throw new Error('This schema contains multiple valid literal values. Use `.values` instead.');return t.values[0]}})}));function fb(e,t){return new pb({type:'literal',values:Array.isArray(e)?e:[e],...Bc(t)})}const hb=mc('ZodFile',((e,t)=>{Ef.init(e,t),pv.init(e,t),e.min=(t,n)=>e.check(dg(t,n)),e.max=(t,n)=>e.check(ug(t,n)),e.mime=(t,n)=>e.check(xg(Array.isArray(t)?t:[t],n))}));function mb(e){return Ag(hb,e)}const gb=mc('ZodTransform',((e,t)=>{$f.init(e,t),pv.init(e,t),e._zod.parse=(n,r)=>{if('backward'===r.direction)throw new yc(e.constructor.name);n.addIssue=r=>{if('string'==typeof r)n.issues.push(au(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code='custom'),t.input??(t.input=n.value),t.inst??(t.inst=e),n.issues.push(au(t))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then((e=>(n.value=e,n))):(n.value=i,n)}}));function vb(e){return new gb({type:'transform',transform:e})}const yb=mc('ZodOptional',((e,t)=>{If.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function bb(e){return new yb({type:'optional',innerType:e})}const _b=mc('ZodNullable',((e,t)=>{Tf.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function wb(e){return new _b({type:'nullable',innerType:e})}function kb(e){return bb(wb(e))}const xb=mc('ZodDefault',((e,t)=>{Af.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}));function Sb(e,t){return new xb({type:'default',innerType:e,get defaultValue(){return'function'==typeof t?t():Uc(t)}})}const Eb=mc('ZodPrefault',((e,t)=>{Nf.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function $b(e,t){return new Eb({type:'prefault',innerType:e,get defaultValue(){return'function'==typeof t?t():Uc(t)}})}const Ob=mc('ZodNonOptional',((e,t)=>{Pf.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function Ib(e,t){return new Ob({type:'nonoptional',innerType:e,...Bc(t)})}const Tb=mc('ZodSuccess',((e,t)=>{Df.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function Ab(e){return new Tb({type:'success',innerType:e})}const Cb=mc('ZodCatch',((e,t)=>{Rf.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}));function Nb(e,t){return new Cb({type:'catch',innerType:e,catchValue:'function'==typeof t?t:()=>t})}const Pb=mc('ZodNaN',((e,t)=>{Uf.init(e,t),pv.init(e,t)}));function jb(e){return eg(Pb,e)}const Db=mc('ZodPipe',((e,t)=>{Lf.init(e,t),pv.init(e,t),e.in=t.in,e.out=t.out}));function Rb(e,t){return new Db({type:'pipe',in:e,out:t})}const Ub=mc('ZodCodec',((e,t)=>{Db.init(e,t),Vf.init(e,t)}));function Lb(e,t,n){return new Ub({type:'pipe',in:e,out:t,transform:n.decode,reverseTransform:n.encode})}const zb=mc('ZodReadonly',((e,t)=>{Ff.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function Vb(e){return new zb({type:'readonly',innerType:e})}const Mb=mc('ZodTemplateLiteral',((e,t)=>{Hf.init(e,t),pv.init(e,t)}));function Bb(e,t){return new Mb({type:'template_literal',parts:e,...Bc(t)})}const Fb=mc('ZodLazy',((e,t)=>{Gf.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.getter()}));function Zb(e){return new Fb({type:'lazy',getter:e})}const Hb=mc('ZodPromise',((e,t)=>{Kf.init(e,t),pv.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function qb(e){return new Hb({type:'promise',innerType:e})}const Kb=mc('ZodFunction',((e,t)=>{qf.init(e,t),pv.init(e,t)}));function Gb(e){return new Kb({type:'function',input:Array.isArray(e?.input)?tb(e?.input):e?.input??By(jy()),output:e?.output??jy()})}const Wb=mc('ZodCustom',((e,t)=>{Wf.init(e,t),pv.init(e,t)}));function Jb(e){const t=new Md({check:'custom'});return t._zod.check=e,t}function Yb(e,t){return Cg(Wb,e??(()=>!0),t)}function Xb(e,t={}){return Ng(Wb,e,t)}function Qb(e){return Pg(e)}function e_(e,t={error:`Input not instance of ${e.name}`}){const n=new Wb({type:'custom',check:'custom',fn:t=>t instanceof e,abort:!0,...Bc(t)});return n._zod.bag.Class=e,n}const t_=(...e)=>Dg({Codec:Ub,Boolean:yy,String:hv},...e);function n_(e){const t=Zb((()=>Wy([mv(e),dy(),by(),Ay(),By(t),rb(mv(),t)])));return t}function r_(e,t){return Rb(vb(e),t)}const i_={invalid_type:'invalid_type',too_big:'too_big',too_small:'too_small',invalid_format:'invalid_format',not_multiple_of:'not_multiple_of',unrecognized_keys:'unrecognized_keys',invalid_union:'invalid_union',invalid_key:'invalid_key',invalid_element:'invalid_element',invalid_value:'invalid_value',custom:'custom'};function o_(e){_c({customError:e})}function a_(){return _c().customError}var s_;s_||(s_={});const l_=Object.freeze(Object.defineProperty({__proto__:null,bigint:function(e){return Bm(_y,e)},boolean:function(e){return Vm(yy,e)},date:function(e){return Qm(zy,e)},number:function(e){return Pm(uy,e)},string:function(e){return im(hv,e)}},Symbol.toStringTag,{value:'Module'}));_c(sh());const c_=Object.freeze(Object.defineProperty({__proto__:null,$brand:gc,$input:Qh,$output:Xh,NEVER:hc,TimePrecision:Om,ZodAny:Cy,ZodArray:My,ZodBase64:Yv,ZodBase64URL:Qv,ZodBigInt:_y,ZodBigIntFormat:ky,ZodBoolean:yy,ZodCIDRv4:Kv,ZodCIDRv6:Wv,ZodCUID:Pv,ZodCUID2:Dv,ZodCatch:Cb,ZodCodec:Ub,ZodCustom:Wb,ZodCustomStringFormat:oy,ZodDate:zy,ZodDefault:xb,ZodDiscriminatedUnion:Jy,ZodE164:ty,ZodEmail:vv,ZodEmoji:Tv,ZodEnum:cb,ZodError:Xg,ZodFile:hb,get ZodFirstPartyTypeKind(){return s_},ZodFunction:Kb,ZodGUID:bv,ZodIPv4:Fv,ZodIPv6:Hv,ZodISODate:Zg,ZodISODateTime:Bg,ZodISODuration:Gg,ZodISOTime:qg,ZodIntersection:Xy,ZodIssueCode:i_,ZodJWT:ry,ZodKSUID:Mv,ZodLazy:Fb,ZodLiteral:pb,ZodMap:ob,ZodNaN:Pb,ZodNanoID:Cv,ZodNever:Dy,ZodNonOptional:Ob,ZodNull:Ty,ZodNullable:_b,ZodNumber:uy,ZodNumberFormat:py,ZodObject:Zy,ZodOptional:yb,ZodPipe:Db,ZodPrefault:Eb,ZodPromise:Hb,ZodReadonly:zb,ZodRealError:Qg,ZodRecord:nb,ZodSet:sb,ZodString:hv,ZodStringFormat:gv,ZodSuccess:Tb,ZodSymbol:Ey,ZodTemplateLiteral:Mb,ZodTransform:gb,ZodTuple:eb,ZodType:pv,ZodULID:Uv,ZodURL:$v,ZodUUID:wv,ZodUndefined:Oy,ZodUnion:Gy,ZodUnknown:Py,ZodVoid:Uy,ZodXID:zv,_ZodString:fv,_default:Sb,_function:Gb,any:Ny,array:By,base64:Xv,base64url:ey,bigint:wy,boolean:by,catch:Nb,check:Jb,cidrv4:Gv,cidrv6:Jv,clone:Mc,codec:Lb,coerce:l_,config:_c,core:Mg,cuid:jv,cuid2:Rv,custom:Yb,date:Vy,decode:ov,decodeAsync:sv,discriminatedUnion:Yy,e164:ny,email:yv,emoji:Av,encode:iv,encodeAsync:av,endsWith:wg,enum:ub,file:mb,flattenError:fu,float32:hy,float64:my,formatError:hu,function:Gb,getErrorMap:a_,globalRegistry:nm,gt:rg,gte:ig,guid:_v,hash:cy,hex:ly,hostname:sy,httpUrl:Iv,includes:bg,instanceof:e_,int:fy,int32:gy,int64:xy,intersection:Qy,ipv4:Zv,ipv6:qv,iso:Jg,json:n_,jwt:iy,keyof:Fy,ksuid:Bv,lazy:Zb,length:mg,literal:fb,locales:Yh,looseObject:Ky,lowercase:vg,lt:tg,lte:ng,map:ab,maxLength:fg,maxSize:ug,mime:xg,minLength:hg,minSize:dg,multipleOf:cg,nan:jb,nanoid:Nv,nativeEnum:db,negative:ag,never:Ry,nonnegative:lg,nonoptional:Ib,nonpositive:sg,normalize:Eg,null:Ay,nullable:wb,nullish:kb,number:dy,object:Hy,optional:bb,overwrite:Sg,parse:ev,parseAsync:tv,partialRecord:ib,pipe:Rb,positive:og,prefault:$b,preprocess:r_,prettifyError:vu,promise:qb,property:kg,readonly:Vb,record:rb,refine:Xb,regex:gg,regexes:Vd,registry:tm,safeDecode:cv,safeDecodeAsync:dv,safeEncode:lv,safeEncodeAsync:uv,safeParse:nv,safeParseAsync:rv,set:lb,setErrorMap:o_,size:pg,startsWith:_g,strictObject:qy,string:mv,stringFormat:ay,stringbool:t_,success:Ab,superRefine:Qb,symbol:$y,templateLiteral:Bb,toJSONSchema:Lg,toLowerCase:Og,toUpperCase:Ig,transform:vb,treeifyError:mu,trim:$g,tuple:tb,uint32:vy,uint64:Sy,ulid:Lv,undefined:Iy,union:Wy,unknown:jy,uppercase:yg,url:Ov,util:cu,uuid:kv,uuidv4:xv,uuidv6:Sv,uuidv7:Ev,void:Ly,xid:Vv},Symbol.toStringTag,{value:'Module'})),u_=Object.freeze(Object.defineProperty({__proto__:null,$brand:gc,$input:Qh,$output:Xh,NEVER:hc,TimePrecision:Om,ZodAny:Cy,ZodArray:My,ZodBase64:Yv,ZodBase64URL:Qv,ZodBigInt:_y,ZodBigIntFormat:ky,ZodBoolean:yy,ZodCIDRv4:Kv,ZodCIDRv6:Wv,ZodCUID:Pv,ZodCUID2:Dv,ZodCatch:Cb,ZodCodec:Ub,ZodCustom:Wb,ZodCustomStringFormat:oy,ZodDate:zy,ZodDefault:xb,ZodDiscriminatedUnion:Jy,ZodE164:ty,ZodEmail:vv,ZodEmoji:Tv,ZodEnum:cb,ZodError:Xg,ZodFile:hb,get ZodFirstPartyTypeKind(){return s_},ZodFunction:Kb,ZodGUID:bv,ZodIPv4:Fv,ZodIPv6:Hv,ZodISODate:Zg,ZodISODateTime:Bg,ZodISODuration:Gg,ZodISOTime:qg,ZodIntersection:Xy,ZodIssueCode:i_,ZodJWT:ry,ZodKSUID:Mv,ZodLazy:Fb,ZodLiteral:pb,ZodMap:ob,ZodNaN:Pb,ZodNanoID:Cv,ZodNever:Dy,ZodNonOptional:Ob,ZodNull:Ty,ZodNullable:_b,ZodNumber:uy,ZodNumberFormat:py,ZodObject:Zy,ZodOptional:yb,ZodPipe:Db,ZodPrefault:Eb,ZodPromise:Hb,ZodReadonly:zb,ZodRealError:Qg,ZodRecord:nb,ZodSet:sb,ZodString:hv,ZodStringFormat:gv,ZodSuccess:Tb,ZodSymbol:Ey,ZodTemplateLiteral:Mb,ZodTransform:gb,ZodTuple:eb,ZodType:pv,ZodULID:Uv,ZodURL:$v,ZodUUID:wv,ZodUndefined:Oy,ZodUnion:Gy,ZodUnknown:Py,ZodVoid:Uy,ZodXID:zv,_ZodString:fv,_default:Sb,_function:Gb,any:Ny,array:By,base64:Xv,base64url:ey,bigint:wy,boolean:by,catch:Nb,check:Jb,cidrv4:Gv,cidrv6:Jv,clone:Mc,codec:Lb,coerce:l_,config:_c,core:Mg,cuid:jv,cuid2:Rv,custom:Yb,date:Vy,decode:ov,decodeAsync:sv,default:c_,discriminatedUnion:Yy,e164:ny,email:yv,emoji:Av,encode:iv,encodeAsync:av,endsWith:wg,enum:ub,file:mb,flattenError:fu,float32:hy,float64:my,formatError:hu,function:Gb,getErrorMap:a_,globalRegistry:nm,gt:rg,gte:ig,guid:_v,hash:cy,hex:ly,hostname:sy,httpUrl:Iv,includes:bg,instanceof:e_,int:fy,int32:gy,int64:xy,intersection:Qy,ipv4:Zv,ipv6:qv,iso:Jg,json:n_,jwt:iy,keyof:Fy,ksuid:Bv,lazy:Zb,length:mg,literal:fb,locales:Yh,looseObject:Ky,lowercase:vg,lt:tg,lte:ng,map:ab,maxLength:fg,maxSize:ug,mime:xg,minLength:hg,minSize:dg,multipleOf:cg,nan:jb,nanoid:Nv,nativeEnum:db,negative:ag,never:Ry,nonnegative:lg,nonoptional:Ib,nonpositive:sg,normalize:Eg,null:Ay,nullable:wb,nullish:kb,number:dy,object:Hy,optional:bb,overwrite:Sg,parse:ev,parseAsync:tv,partialRecord:ib,pipe:Rb,positive:og,prefault:$b,preprocess:r_,prettifyError:vu,promise:qb,property:kg,readonly:Vb,record:rb,refine:Xb,regex:gg,regexes:Vd,registry:tm,safeDecode:cv,safeDecodeAsync:dv,safeEncode:lv,safeEncodeAsync:uv,safeParse:nv,safeParseAsync:rv,set:lb,setErrorMap:o_,size:pg,startsWith:_g,strictObject:qy,string:mv,stringFormat:ay,stringbool:t_,success:Ab,superRefine:Qb,symbol:$y,templateLiteral:Bb,toJSONSchema:Lg,toLowerCase:Og,toUpperCase:Ig,transform:vb,treeifyError:mu,trim:$g,tuple:tb,uint32:vy,uint64:Sy,ulid:Lv,undefined:Iy,union:Wy,unknown:jy,uppercase:yg,url:Ov,util:cu,uuid:kv,uuidv4:xv,uuidv6:Sv,uuidv7:Ev,void:Ly,xid:Vv,z:c_},Symbol.toStringTag,{value:'Module'})),d_=Hy({name:mv(),visible:by()}),p_=Hy({type:fb('script').default('script'),enabled:by().default(!1),name:mv().default(''),id:mv().default((()=>Ie())),content:mv().default(''),info:mv().default(''),button:Hy({enabled:by().default(!0),buttons:By(d_).default([])}).prefault({}),data:rb(mv(),Ny()).default({})}),f_=Hy({type:fb('folder').default('folder'),enabled:by().default(!1),name:mv().default(''),id:mv().default((()=>Ie())),icon:mv().default('fa-solid fa-folder'),color:mv().default(dc),scripts:By(p_).default([])}),h_=Yy('type',[p_,f_]);function m_(e){return'script'===e.type}const g_='tavern_helper',v_=['repeat_one','repeat_all','shuffle','play_one_and_stop'],y_=ub(v_),b_=Hy({audio:Hy({enabled:by().default(!0),bgm:Hy({enabled:by().default(!0),mode:y_.default('repeat_all').catch('repeat_all'),muted:by().default(!1),volume:dy().default(100)}).prefault({}),ambient:Hy({enabled:by().default(!0),mode:y_.default('play_one_and_stop').catch('play_one_and_stop'),muted:by().default(!1),volume:dy().default(100)}).prefault({})}).prefault({}),listener:Hy({enabled:by().default(!1),enable_echo:by().default(!0),url:mv().default('http://localhost:6621'),duration:dy().default(1e3)}).prefault({}),macro:Hy({enabled:by().default(!0)}).prefault({}),render:Hy({enabled:by().default(!0),collapse_code_block:by().default(!1),with_loading:by().default(!0),use_blob_url:by().default(!1),depth:dy().default(0)}).prefault({}),script:Hy({enabled:Hy({global:by().default(!0),characters:By(mv()).default([]),presets:By(mv()).default([])}).prefault({}),scripts:By(h_).default([])}).prefault({})}).prefault({}),__=Hy({bgm:By(Hy({url:mv(),title:mv()})).default([]),ambient:By(Hy({url:mv(),title:mv()})).default([])}).prefault({}),w_=Hy({scripts:By(h_).default([]),variables:rb(mv(),Ny()).default({})}).prefault({}),k_=Hy({scripts:By(h_).default([]),variables:rb(mv(),Ny()).default({})}).prefault({});function x_(e,t){const n=function(e,t){const n=e.safeParse(t);if(!n.success)throw Error(vu(n.error));return n.data}(e,t);return _.assign(t,n)}var S_,E_,$_,O_,I_=Object.create,T_=Object.defineProperty,A_=Object.getOwnPropertyDescriptor,C_=Object.getOwnPropertyNames,N_=Object.getPrototypeOf,P_=Object.prototype.hasOwnProperty,j_=(S_={'../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js'(){}},function(){return S_&&(E_=(0,S_[C_(S_)[0]])(S_=0)),E_}),D_=($_={'../../node_modules/.pnpm/rfdc@1.4.1/node_modules/rfdc/index.js'(e,t){function n(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}j_(),t.exports=function(e){if((e=e||{}).circles)return function(e){const t=[],r=[],i=new Map;if(i.set(Date,(e=>new Date(e))),i.set(Map,((e,t)=>new Map(a(Array.from(e),t)))),i.set(Set,((e,t)=>new Set(a(Array.from(e),t)))),e.constructorHandlers)for(const n of e.constructorHandlers)i.set(n[0],n[1]);let o=null;return e.proto?l:s;function a(e,a){const s=Object.keys(e),l=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c],d=e[u];if('object'!=typeof d||null===d)l[u]=d;else if(d.constructor!==Object&&(o=i.get(d.constructor)))l[u]=o(d,a);else if(ArrayBuffer.isView(d))l[u]=n(d);else{const e=t.indexOf(d);l[u]=-1!==e?r[e]:a(d)}}return l}function s(e){if('object'!=typeof e||null===e)return e;if(Array.isArray(e))return a(e,s);if(e.constructor!==Object&&(o=i.get(e.constructor)))return o(e,s);const l={};t.push(e),r.push(l);for(const a in e){if(!1===Object.hasOwnProperty.call(e,a))continue;const c=e[a];if('object'!=typeof c||null===c)l[a]=c;else if(c.constructor!==Object&&(o=i.get(c.constructor)))l[a]=o(c,s);else if(ArrayBuffer.isView(c))l[a]=n(c);else{const e=t.indexOf(c);l[a]=-1!==e?r[e]:s(c)}}return t.pop(),r.pop(),l}function l(e){if('object'!=typeof e||null===e)return e;if(Array.isArray(e))return a(e,l);if(e.constructor!==Object&&(o=i.get(e.constructor)))return o(e,l);const s={};t.push(e),r.push(s);for(const a in e){const c=e[a];if('object'!=typeof c||null===c)s[a]=c;else if(c.constructor!==Object&&(o=i.get(c.constructor)))s[a]=o(c,l);else if(ArrayBuffer.isView(c))s[a]=n(c);else{const e=t.indexOf(c);s[a]=-1!==e?r[e]:l(c)}}return t.pop(),r.pop(),s}}(e);const t=new Map;if(t.set(Date,(e=>new Date(e))),t.set(Map,((e,t)=>new Map(i(Array.from(e),t)))),t.set(Set,((e,t)=>new Set(i(Array.from(e),t)))),e.constructorHandlers)for(const n of e.constructorHandlers)t.set(n[0],n[1]);let r=null;return e.proto?function e(o){if('object'!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,e);if(o.constructor!==Object&&(r=t.get(o.constructor)))return r(o,e);const a={};for(const i in o){const s=o[i];'object'!=typeof s||null===s?a[i]=s:s.constructor!==Object&&(r=t.get(s.constructor))?a[i]=r(s,e):ArrayBuffer.isView(s)?a[i]=n(s):a[i]=e(s)}return a}:function e(o){if('object'!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,e);if(o.constructor!==Object&&(r=t.get(o.constructor)))return r(o,e);const a={};for(const i in o){if(!1===Object.hasOwnProperty.call(o,i))continue;const s=o[i];'object'!=typeof s||null===s?a[i]=s:s.constructor!==Object&&(r=t.get(s.constructor))?a[i]=r(s,e):ArrayBuffer.isView(s)?a[i]=n(s):a[i]=e(s)}return a};function i(e,i){const o=Object.keys(e),a=new Array(o.length);for(let s=0;s<o.length;s++){const l=o[s],c=e[l];'object'!=typeof c||null===c?a[l]=c:c.constructor!==Object&&(r=t.get(c.constructor))?a[l]=r(c,i):ArrayBuffer.isView(c)?a[l]=n(c):a[l]=i(c)}return a}}}},function(){return O_||(0,$_[C_($_)[0]])((O_={exports:{}}).exports,O_),O_.exports});j_(),j_(),j_();var R_,U_='undefined'!=typeof navigator,L_='undefined'!=typeof window?window:'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:{};void 0!==L_.chrome&&L_.chrome.devtools,U_&&(L_.self,L_.top),'undefined'!=typeof navigator&&(null==(R_=navigator.userAgent)||R_.toLowerCase().includes('electron')),j_();var z_=((e,t,n)=>(n=null!=e?I_(N_(e)):{},((e,t,n,r)=>{if(t&&'object'==typeof t||'function'==typeof t)for(let i of C_(t))P_.call(e,i)||i===n||T_(e,i,{get:()=>t[i],enumerable:!(r=A_(t,i))||r.enumerable});return e})(T_(n,'default',{value:e,enumerable:!0}),e)))(D_()),V_=/(?:^|[-_/])(\w)/g;function M_(_,e){return e?e.toUpperCase():''}var B_=(0,z_.default)({circles:!0});const F_={trailing:!0};function Z_(e,t=25,n={}){if(n={...F_,...n},!Number.isFinite(t))throw new TypeError('Expected `wait` to be a finite number');let r,i,o,a,s=[];const l=(t,r)=>(o=async function(e,t,n){return await e.apply(t,n)}(e,t,r),o.finally((()=>{if(o=null,n.trailing&&a&&!i){const e=l(t,a);return a=null,e}})),o);return function(...e){return o?(n.trailing&&(a=e),o):new Promise((o=>{const a=!i&&n.leading;clearTimeout(i),i=setTimeout((()=>{i=null;const t=n.leading?r:l(this,e);for(const e of s)e(t);s=[]}),t),a?(r=l(this,e),o(r)):s.push(o)}))}}function H_(e,t={},n){for(const r in e){const i=e[r],o=n?`${n}:${r}`:r;'object'==typeof i&&null!==i?H_(i,t,o):'function'==typeof i&&(t[o]=i)}return t}const q_={run:e=>e()},K_=void 0!==console.createTask?console.createTask:()=>q_;function G_(e,t){const n=t.shift(),r=K_(n);return e.reduce(((e,n)=>e.then((()=>r.run((()=>n(...t)))))),Promise.resolve())}function W_(e,t){const n=t.shift(),r=K_(n);return Promise.all(e.map((e=>r.run((()=>e(...t))))))}function J_(e,t){for(const n of[...e])n(t)}class Y_{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,n={}){if(!e||'function'!=typeof t)return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!n.allowDeprecated){let e=i.message;e||(e=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:'')),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||(console.warn(e),this._deprecatedMessages.add(e))}if(!t.name)try{Object.defineProperty(t,'name',{get:()=>'_'+e.replace(/\W+/g,'_')+'_hook_cb',configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let n,r=(...e)=>('function'==typeof n&&n(),n=void 0,r=void 0,t(...e));return n=this.hook(e,r),n}removeHook(e,t){if(this._hooks[e]){const n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]='string'==typeof t?{to:t}:t;const n=this._hooks[e]||[];delete this._hooks[e];for(const r of n)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=H_(e),n=Object.keys(t).map((e=>this.hook(e,t[e])));return()=>{for(const e of n.splice(0,n.length))e()}}removeHooks(e){const t=H_(e);for(const n in t)this.removeHook(n,t[n])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(G_,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(W_,e,...t)}callHookWith(e,t,...n){const r=this._before||this._after?{name:t,args:n,context:{}}:void 0;this._before&&J_(this._before,r);const i=e(t in this._hooks?[...this._hooks[t]]:[],n);return i instanceof Promise?i.finally((()=>{this._after&&r&&J_(this._after,r)})):(this._after&&r&&J_(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}function X_(){return new Y_}var Q_,ew=Object.create,tw=Object.defineProperty,nw=Object.getOwnPropertyDescriptor,rw=Object.getOwnPropertyNames,iw=Object.getPrototypeOf,ow=Object.prototype.hasOwnProperty,aw=(e,t)=>function(){return t||(0,e[rw(e)[0]])((t={exports:{}}).exports,t),t.exports},sw=((e,t)=>function(){return e&&(t=(0,e[rw(e)[0]])(e=0)),t})({'../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js'(){}}),lw=aw({'../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/lib/speakingurl.js'(e,t){sw(),function(e){var n={'':'A','':'A','':'A','':'A','':'Ae','':'A','':'AE','':'C','':'E','':'E','':'E','':'E','':'I','':'I','':'I','':'I','':'D','':'N','':'O','':'O','':'O','':'O','':'Oe','':'O','':'O','':'U','':'U','':'U','':'Ue','':'U','':'Y','':'TH','':'ss','':'a','':'a','':'a','':'a','':'ae','':'a','':'ae','':'c','':'e','':'e','':'e','':'e','':'i','':'i','':'i','':'i','':'d','':'n','':'o','':'o','':'o','':'o','':'oe','':'o','':'o','':'u','':'u','':'u','':'ue','':'u','':'y','':'th','':'y','':'SS','':'a','':'a','':'i','':'aa','':'u','':'e','':'a','':'b','':'t','':'th','':'j','':'h','':'kh','':'d','':'th','':'r','':'z','':'s','':'sh','':'s','':'dh','':'t','':'z','':'a','':'gh','':'f','':'q','':'k','':'l','':'m','':'n','':'h','':'w','':'y','':'a','':'h','':'la','':'laa','':'lai','':'laa','':'g','':'ch','':'p','':'zh','':'k','':'y','':'a','':'an','':'e','':'en','':'u','':'on','':'','':'0','':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0','':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'k','':'kh','':'g','':'ga','':'ng','':'s','':'sa','':'z','':'za','':'ny','':'t','':'ta','':'d','':'da','':'na','':'t','':'ta','':'d','':'da','':'n','':'p','':'pa','':'b','':'ba','':'m','':'y','':'ya','':'l','':'w','':'th','':'h','':'la','':'a','':'y','':'ya','':'w','':'yw','':'ywa','':'h','':'e','':'-e','':'i','':'-i','':'u','':'-u','':'aw','':'aw','':'aw','':'0','':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'','':'','':'','':'c','':'d','':'e','':'n','':'r','':'s','':'t','':'u','':'z','':'C','':'D','':'E','':'N','':'R','':'S','':'T','':'U','':'Z','':'h','':'sh','':'n','':'r','':'b','':'lh','':'k','':'a','':'v','':'m','':'f','':'dh','':'th','':'l','':'g','':'gn','':'s','':'d','':'z','':'t','':'y','':'p','':'j','':'ch','':'tt','':'hh','':'kh','':'th','':'z','':'sh','':'s','':'d','':'t','':'z','':'a','':'gh','':'q','':'w','':'a','':'aa','':'i','':'ee','':'u','':'oo','':'e','':'ey','':'o','':'oa','':'','':'a','':'b','':'g','':'d','':'e','':'v','':'z','':'t','':'i','':'k','':'l','':'m','':'n','':'o','':'p','':'zh','':'r','':'s','':'t','':'u','':'p','':'k','':'gh','':'q','':'sh','':'ch','':'ts','':'dz','':'ts','':'ch','':'kh','':'j','':'h','':'a','':'v','':'g','':'d','':'e','':'z','':'i','':'th','':'i','':'k','':'l','':'m','':'n','':'ks','':'o','':'p','':'r','':'s','':'t','':'y','':'f','':'x','':'ps','':'o','':'a','':'e','':'i','':'o','':'y','':'i','':'o','':'s','':'i','':'y','':'y','':'i','':'A','':'B','':'G','':'D','':'E','':'Z','':'I','':'TH','':'I','':'K','':'L','':'M','':'N','':'KS','':'O','':'P','':'R','':'S','':'T','':'Y','':'F','':'X','':'PS','':'O','':'A','':'E','':'I','':'O','':'Y','':'I','':'O','':'I','':'Y','':'a','':'e','':'g','':'i','':'k','':'l','':'n','':'u','':'A','':'E','':'G','':'I','':'k','':'L','':'N','':'U','':'Kj','':'kj','':'Lj','':'lj','':'Nj','':'nj','':'Ts','':'ts','':'a','':'c','':'e','':'l','':'n','':'s','':'z','':'z','':'A','':'C','':'E','':'L','':'N','':'S','':'Z','':'Z','':'Ye','':'I','':'Yi','':'G','':'ye','':'i','':'yi','':'g','':'a','':'A','':'s','':'S','':'t','':'T','':'t','':'T','':'a','':'b','':'v','':'g','':'d','':'e','':'yo','':'zh','':'z','':'i','':'i','':'k','':'l','':'m','':'n','':'o','':'p','':'r','':'s','':'t','':'u','':'f','':'kh','':'c','':'ch','':'sh','':'sh','':'','':'y','':'','':'e','':'yu','':'ya','':'A','':'B','':'V','':'G','':'D','':'E','':'Yo','':'Zh','':'Z','':'I','':'I','':'K','':'L','':'M','':'N','':'O','':'P','':'R','':'S','':'T','':'U','':'F','':'Kh','':'C','':'Ch','':'Sh','':'Sh','':'','':'Y','':'','':'E','':'Yu','':'Ya','':'dj','':'j','':'c','':'dz','':'Dj','':'j','':'C','':'Dz','':'l','':'l','':'r','':'L','':'L','':'R','':'s','':'S','':'i','':'I','':'g','':'G','':'a','':'A','':'a','':'A','':'a','':'A','':'d','':'D','':'e','':'E','':'e','':'E','':'e','':'E','':'e','':'E','':'e','':'E','':'e','':'E','':'e','':'E','':'e','':'E','':'o','':'o','':'o','':'o','':'O','':'o','':'O','':'o','':'O','':'o','':'O','':'o','':'O','':'o','':'O','':'o','':'O','':'o','':'O','':'o','':'O','':'o','':'O','':'o','':'o','':'i','':'I','':'i','':'I','':'i','':'i','':'u','':'U','':'u','':'U','':'u','':'U','':'u','':'U','':'u','':'U','':'u','':'U','':'u','':'U','':'u','':'U','':'u','':'','':'y','':'y','':'y','':'Y','':'y','':'Y','':'y','':'Y','':'a','':'A','':'a','':'A','':'a','':'A','':'a','':'A','':'a','':'A','':'a','':'A','':'a','':'A','':'a','':'A','':'a','':'A','':'0','':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'10','':'11','':'12','':'13','':'14','':'15','':'16','':'17','':'18','':'18','':'18','':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'10','':'0','':'11','':'12','':'13','':'14','':'15','':'16','':'17','':'18','':'19','':'20','':'A','':'B','':'C','':'D','':'E','':'F','':'G','':'H','':'I','':'J','':'K','':'L','':'M','':'N','':'O','':'P','':'Q','':'R','':'S','':'T','':'U','':'V','':'W','':'X','':'Y','':'Z','':'a','':'b','':'c','':'d','':'e','':'f','':'g','':'h','':'i','':'j','':'k','':'l','':'m','':'n','':'o','':'p','':'q','':'r','':'s','':'t','':'u','':'v','':'w','':'x','':'y','':'z','':'"','':'"','':'\'','':'\'','':'d','':'f','':'(TM)','':'(C)','':'oe','':'OE','':'(R)','':'+','':'(SM)','':'...','':'o','':'o','':'a','':'*','':',','':'.',$:'USD','':'EUR','':'BRN','':'FRF','':'GBP','':'ITL','':'NGN','':'ESP','':'KRW','':'ILS','':'VND','':'LAK','':'MNT','':'GRD','':'ARS','':'PYG','':'ARA','':'UAH','':'GHS','':'cent','':'CNY','':'CNY','':'YEN','':'IRR','':'EWE','':'THB','':'INR','':'INR','':'PF','':'TRY','':'AFN','':'AZN','':'BGN','':'KHR','':'CRC','':'KZT','':'MKD','z':'PLN','':'RUB','':'GEL'},r=['',''],i={'':'a','':'a','':'e','':'e','':'i','':'i','':'o','':'u','':'u','':'aung','':'aw','':'aw','':'aw','':'aw','':'','':'et','':'aik','':'auk','':'in','':'aing','':'aung','':'it','':'i','':'at','':'eik','':'ok','':'ut','':'it','':'d','':'ok','':'ait','':'an','':'an','':'ein','':'on','':'un','':'at','':'eik','':'ok','':'ut','':'nub','':'an','':'ein','':'on','':'un','':'e','':'ol','':'in','':'an','':'ein','':'on','':'ah','':'ah'},o={en:{},az:{'':'c','':'e','':'g','':'i','':'o','':'s','':'u','':'C','':'E','':'G','':'I','':'O','':'S','':'U'},cs:{'':'c','':'d','':'e','':'n','':'r','':'s','':'t','':'u','':'z','':'C','':'D','':'E','':'N','':'R','':'S','':'T','':'U','':'Z'},fi:{'':'a','':'A','':'o','':'O'},hu:{'':'a','':'A','':'o','':'O','':'u','':'U','':'u','':'U'},lt:{'':'a','':'c','':'e','':'e','':'i','':'s','':'u','':'u','':'z','':'A','':'C','':'E','':'E','':'I','':'S','':'U','':'U'},lv:{'':'a','':'c','':'e','':'g','':'i','':'k','':'l','':'n','':'s','':'u','':'z','':'A','':'C','':'E','':'G','':'i','':'k','':'L','':'N','':'S','':'u','':'Z'},pl:{'':'a','':'c','':'e','':'l','':'n','':'o','':'s','':'z','':'z','':'A','':'C','':'e','':'L','':'N','':'O','':'S','':'Z','':'Z'},sv:{'':'a','':'A','':'o','':'O'},sk:{'':'a','':'A'},sr:{'':'lj','':'nj','':'Lj','':'Nj','':'dj','':'Dj'},tr:{'':'U','':'O','':'u','':'o'}},a={ar:{'':'delta','':'la-nihaya','':'hob','&':'wa','|':'aw','<':'aqal-men','>':'akbar-men','':'majmou','':'omla'},az:{},ca:{'':'delta','':'infinit','':'amor','&':'i','|':'o','<':'menys que','>':'mes que','':'suma dels','':'moneda'},cs:{'':'delta','':'nekonecno','':'laska','&':'a','|':'nebo','<':'mensi nez','>':'vetsi nez','':'soucet','':'mena'},de:{'':'delta','':'unendlich','':'Liebe','&':'und','|':'oder','<':'kleiner als','>':'groesser als','':'Summe von','':'Waehrung'},dv:{'':'delta','':'kolunulaa','':'loabi','&':'aai','|':'noonee','<':'ah vure kuda','>':'ah vure bodu','':'jumula','':'faisaa'},en:{'':'delta','':'infinity','':'love','&':'and','|':'or','<':'less than','>':'greater than','':'sum','':'currency'},es:{'':'delta','':'infinito','':'amor','&':'y','|':'u','<':'menos que','>':'mas que','':'suma de los','':'moneda'},fa:{'':'delta','':'bi-nahayat','':'eshgh','&':'va','|':'ya','<':'kamtar-az','>':'bishtar-az','':'majmooe','':'vahed'},fi:{'':'delta','':'aarettomyys','':'rakkaus','&':'ja','|':'tai','<':'pienempi kuin','>':'suurempi kuin','':'summa','':'valuutta'},fr:{'':'delta','':'infiniment','':'Amour','&':'et','|':'ou','<':'moins que','>':'superieure a','':'somme des','':'monnaie'},ge:{'':'delta','':'usasruloba','':'siqvaruli','&':'da','|':'an','<':'naklebi','>':'meti','':'jami','':'valuta'},gr:{},hu:{'':'delta','':'vegtelen','':'szerelem','&':'es','|':'vagy','<':'kisebb mint','>':'nagyobb mint','':'szumma','':'penznem'},it:{'':'delta','':'infinito','':'amore','&':'e','|':'o','<':'minore di','>':'maggiore di','':'somma','':'moneta'},lt:{'':'delta','':'begalybe','':'meile','&':'ir','|':'ar','<':'maziau nei','>':'daugiau nei','':'suma','':'valiuta'},lv:{'':'delta','':'bezgaliba','':'milestiba','&':'un','|':'vai','<':'mazak neka','>':'lielaks neka','':'summa','':'valuta'},my:{'':'kwahkhyaet','':'asaonasme','':'akhyait','&':'nhin','|':'tho','<':'ngethaw','>':'kyithaw','':'paungld','':'ngwekye'},mk:{},nl:{'':'delta','':'oneindig','':'liefde','&':'en','|':'of','<':'kleiner dan','>':'groter dan','':'som','':'valuta'},pl:{'':'delta','':'nieskonczonosc','':'milosc','&':'i','|':'lub','<':'mniejsze niz','>':'wieksze niz','':'suma','':'waluta'},pt:{'':'delta','':'infinito','':'amor','&':'e','|':'ou','<':'menor que','>':'maior que','':'soma','':'moeda'},ro:{'':'delta','':'infinit','':'dragoste','&':'si','|':'sau','<':'mai mic ca','>':'mai mare ca','':'suma','':'valuta'},ru:{'':'delta','':'beskonechno','':'lubov','&':'i','|':'ili','<':'menshe','>':'bolshe','':'summa','':'valjuta'},sk:{'':'delta','':'nekonecno','':'laska','&':'a','|':'alebo','<':'menej ako','>':'viac ako','':'sucet','':'mena'},sr:{},tr:{'':'delta','':'sonsuzluk','':'ask','&':'ve','|':'veya','<':'kucuktur','>':'buyuktur','':'toplam','':'para birimi'},uk:{'':'delta','':'bezkinechnist','':'lubov','&':'i','|':'abo','<':'menshe','>':'bilshe','':'suma','':'valjuta'},vn:{'':'delta','':'vo cuc','':'yeu','&':'va','|':'hoac','<':'nho hon','>':'lon hon','':'tong','':'tien te'}},s=[';','?',':','@','&','=','+','$',',','/'].join(''),l=[';','?',':','@','&','=','+','$',','].join(''),c=['.','!','~','*','\'','(',')'].join(''),u=function(e,t){var u,d,h,m,g,v,y,b,w,k,x,S,E,O,I='-',T='',A='',C=!0,N={},P='';if('string'!=typeof e)return'';if('string'==typeof t&&(I=t),y=a.en,b=o.en,'object'==typeof t)for(x in u=t.maintainCase||!1,N=t.custom&&'object'==typeof t.custom?t.custom:N,h=+t.truncate>1&&t.truncate||!1,m=t.uric||!1,g=t.uricNoSlash||!1,v=t.mark||!1,C=!1!==t.symbols&&!1!==t.lang,I=t.separator||I,m&&(P+=s),g&&(P+=l),v&&(P+=c),y=t.lang&&a[t.lang]&&C?a[t.lang]:C?a.en:{},b=t.lang&&o[t.lang]?o[t.lang]:!1===t.lang||!0===t.lang?{}:o.en,t.titleCase&&'number'==typeof t.titleCase.length&&Array.prototype.toString.call(t.titleCase)?(t.titleCase.forEach((function(e){N[e+'']=e+''})),d=!0):d=!!t.titleCase,t.custom&&'number'==typeof t.custom.length&&Array.prototype.toString.call(t.custom)&&t.custom.forEach((function(e){N[e+'']=e+''})),Object.keys(N).forEach((function(t){var n;n=t.length>1?new RegExp('\\b'+p(t)+'\\b','gi'):new RegExp(p(t),'gi'),e=e.replace(n,N[t])})),N)P+=x;for(P=p(P+=I),E=!1,O=!1,k=0,S=(e=e.replace(/(^\s+|\s+$)/g,'')).length;k<S;k++)x=e[k],f(x,N)?E=!1:b[x]?(x=E&&b[x].match(/[A-Za-z0-9]/)?' '+b[x]:b[x],E=!1):x in n?(k+1<S&&r.indexOf(e[k+1])>=0?(A+=x,x=''):!0===O?(x=i[A]+n[x],A=''):x=E&&n[x].match(/[A-Za-z0-9]/)?' '+n[x]:n[x],E=!1,O=!1):x in i?(A+=x,x='',k===S-1&&(x=i[A]),O=!0):!y[x]||m&&-1!==s.indexOf(x)||g&&-1!==l.indexOf(x)?(!0===O?(x=i[A]+x,A='',O=!1):E&&(/[A-Za-z0-9]/.test(x)||T.substr(-1).match(/A-Za-z0-9]/))&&(x=' '+x),E=!1):(x=E||T.substr(-1).match(/[A-Za-z0-9]/)?I+y[x]:y[x],x+=void 0!==e[k+1]&&e[k+1].match(/[A-Za-z0-9]/)?I:'',E=!0),T+=x.replace(new RegExp('[^\\w\\s'+P+'_-]','g'),I);return d&&(T=T.replace(/(\w)(\S*)/g,(function(_,e,t){var n=e.toUpperCase()+(null!==t?t:'');return Object.keys(N).indexOf(n.toLowerCase())<0?n:n.toLowerCase()}))),T=T.replace(/\s+/g,I).replace(new RegExp('\\'+I+'+','g'),I).replace(new RegExp('(^\\'+I+'+|\\'+I+'+$)','g'),''),h&&T.length>h&&(w=T.charAt(h)===I,T=T.slice(0,h),w||(T=T.slice(0,T.lastIndexOf(I)))),u||d||(T=T.toLowerCase()),T},d=function(e){return function(t){return u(t,e)}},p=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,'\\$&')},f=function(e,t){for(var n in t)if(t[n]===e)return!0};if(void 0!==t&&t.exports)t.exports=u,t.exports.createSlug=d;else if('undefined'!=typeof define&&define.amd)define([],(function(){return u}));else try{if(e.getSlug||e.createSlug)throw'speakingurl: globals exists /(getSlug|createSlug)/';e.getSlug=u,e.createSlug=d}catch(UJ){}}(e)}}),cw=aw({'../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/index.js'(e,t){sw(),t.exports=lw()}});function uw(e){const t=e.__file;if(t)return(n=function(e,t){let n=e.replace(/^[a-z]:/i,'').replace(/\\/g,'/');n.endsWith(`index${t}`)&&(n=n.replace(`/index${t}`,t));const r=n.lastIndexOf('/'),i=n.substring(r+1);{const e=i.lastIndexOf(t);return i.substring(0,e)}}(t,'.vue'))&&`${n}`.replace(V_,M_);var n}function dw(e,t){return e.type.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__=t,t}function pw(e){return e.__VUE_DEVTOOLS_NEXT_APP_RECORD__?e.__VUE_DEVTOOLS_NEXT_APP_RECORD__:e.root?e.appContext.app.__VUE_DEVTOOLS_NEXT_APP_RECORD__:void 0}function fw(e){var t,n;const r=null==(t=e.subTree)?void 0:t.type,i=pw(e);return!!i&&(null==(n=null==i?void 0:i.types)?void 0:n.Fragment)===r}function hw(e){var t,n,r;const i=function(e){var t;const n=e.name||e._componentTag||e.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__||e.__name;return'index'===n&&(null==(t=e.__file)?void 0:t.endsWith('index.vue'))?'':n}((null==e?void 0:e.type)||{});if(i)return i;if((null==e?void 0:e.root)===e)return'Root';for(const a in null==(n=null==(t=e.parent)?void 0:t.type)?void 0:n.components)if(e.parent.type.components[a]===(null==e?void 0:e.type))return dw(e,a);for(const a in null==(r=e.appContext)?void 0:r.components)if(e.appContext.components[a]===(null==e?void 0:e.type))return dw(e,a);const o=uw((null==e?void 0:e.type)||{});return o||'Anonymous Component'}function mw(e,t){t=t||`${e.id}:root`;return e.instanceMap.get(t)||e.instanceMap.get(':root')}function gw(e,t){return(!e.top||t.top<e.top)&&(e.top=t.top),(!e.bottom||t.bottom>e.bottom)&&(e.bottom=t.bottom),(!e.left||t.left<e.left)&&(e.left=t.left),(!e.right||t.right>e.right)&&(e.right=t.right),e}sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw();var vw={top:0,left:0,right:0,bottom:0,width:0,height:0};function yw(e){const t=e.subTree.el;return'undefined'==typeof window?vw:fw(e)?function(e){const t=function(){const e={top:0,bottom:0,left:0,right:0,get width(){return e.right-e.left},get height(){return e.bottom-e.top}};return e}();if(!e.children)return t;for(let r=0,i=e.children.length;r<i;r++){const i=e.children[r];let o;if(i.component)o=yw(i.component);else if(i.el){const e=i.el;1===e.nodeType||e.getBoundingClientRect?o=e.getBoundingClientRect():3===e.nodeType&&e.data.trim()&&(n=e,Q_||(Q_=document.createRange()),Q_.selectNode(n),o=Q_.getBoundingClientRect())}o&&gw(t,o)}var n;return t}(e.subTree):1===(null==t?void 0:t.nodeType)?null==t?void 0:t.getBoundingClientRect():e.subTree.component?yw(e.subTree.component):vw}function bw(e){return fw(e)?function(e){if(!e.children)return[];const t=[];return e.children.forEach((e=>{e.component?t.push(...bw(e.component)):(null==e?void 0:e.el)&&t.push(e.el)})),t}(e.subTree):e.subTree?[e.subTree.el]:[]}sw();var _w='__vue-devtools-component-inspector__',ww='__vue-devtools-component-inspector__card__',kw='__vue-devtools-component-inspector__name__',xw='__vue-devtools-component-inspector__indicator__',Sw={display:'block',zIndex:2147483640,position:'fixed',backgroundColor:'#42b88325',border:'1px solid #42b88350',borderRadius:'5px',transition:'all 0.1s ease-in',pointerEvents:'none'},Ew={fontFamily:'Arial, Helvetica, sans-serif',padding:'5px 8px',borderRadius:'4px',textAlign:'left',position:'absolute',left:0,color:'#e9e9e9',fontSize:'14px',fontWeight:600,lineHeight:'24px',backgroundColor:'#42b883',boxShadow:'0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)'},$w={display:'inline-block',fontWeight:400,fontStyle:'normal',fontSize:'12px',opacity:.7};function Ow(){return document.getElementById(_w)}function Iw(e){return{left:Math.round(100*e.left)/100+'px',top:Math.round(100*e.top)/100+'px',width:Math.round(100*e.width)/100+'px',height:Math.round(100*e.height)/100+'px'}}function Tw(e){var t;const n=document.createElement('div');n.id=null!=(t=e.elementId)?t:_w,Object.assign(n.style,{...Sw,...Iw(e.bounds),...e.style});const r=document.createElement('span');r.id=ww,Object.assign(r.style,{...Ew,top:e.bounds.top<35?0:'-35px'});const i=document.createElement('span');i.id=kw,i.innerHTML=`&lt;${e.name}&gt;&nbsp;&nbsp;`;const o=document.createElement('i');return o.id=xw,o.innerHTML=`${Math.round(100*e.bounds.width)/100} x ${Math.round(100*e.bounds.height)/100}`,Object.assign(o.style,$w),r.appendChild(i),r.appendChild(o),n.appendChild(r),document.body.appendChild(n),n}function Aw(e){const t=Ow(),n=document.getElementById(ww),r=document.getElementById(kw),i=document.getElementById(xw);t&&(Object.assign(t.style,{...Sw,...Iw(e.bounds)}),Object.assign(n.style,{top:e.bounds.top<35?0:'-35px'}),r.innerHTML=`&lt;${e.name}&gt;&nbsp;&nbsp;`,i.innerHTML=`${Math.round(100*e.bounds.width)/100} x ${Math.round(100*e.bounds.height)/100}`)}function Cw(){const e=Ow();e&&(e.style.display='none')}var Nw=null;function Pw(e){const t=e.target;if(t){const e=t.__vueParentComponent;if(e){Nw=e;if(e.vnode.el){const t=yw(e),n=hw(e);Ow()?Aw({bounds:t,name:n}):Tw({bounds:t,name:n})}}}}var jw,Dw=null;function Rw(){return window.addEventListener('mouseover',Pw),new Promise((e=>{function t(n){n.preventDefault(),n.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),Nw&&t(`${null!=(o=null==(i=null==(r=null==(n=Nw)?void 0:n.appContext)?void 0:r.app)?void 0:i.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__)?o:0}:${n===(null==n?void 0:n.root)?'root':n.uid}`);var n,r,i,o}(n,(n=>{window.removeEventListener('click',t,!0),Dw=null,window.removeEventListener('mouseover',Pw);const r=Ow();r&&(r.style.display='none'),e(JSON.stringify({id:n}))}))}Dw=t,window.addEventListener('click',t,!0)}))}function Uw(){return new Promise((e=>{function t(){!function(){const e=L_.__VUE_INSPECTOR__,t=e.openInEditor;e.openInEditor=async(...n)=>{e.disable(),t(...n)}}(),e(L_.__VUE_INSPECTOR__)}L_.__VUE_INSPECTOR__?t():function(e){let t=0;const n=setInterval((()=>{L_.__VUE_INSPECTOR__&&(clearInterval(n),t+=30,e()),t>=5e3&&clearInterval(n)}),30)}((()=>{t()}))}))}function Lw(e){return function(e){return!(!e||!e.__v_isReadonly)}(e)?Lw(e.__v_raw):!(!e||!e.__v_isReactive)}function zw(e){return!(!e||!0!==e.__v_isRef)}function Vw(e){const t=e&&e.__v_raw;return t?Vw(t):e}sw(),null!=(jw=L_).__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__||(jw.__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__=!0),sw(),sw();var Mw=class{constructor(){this.refEditor=new Bw}set(e,t,n,r){const i=Array.isArray(t)?t:t.split('.');for(;i.length>1;){const t=i.shift();e=e instanceof Map?e.get(t):e instanceof Set?Array.from(e.values())[t]:e[t],this.refEditor.isRef(e)&&(e=this.refEditor.get(e))}const o=i[0],a=this.refEditor.get(e)[o];r?r(e,o,n):this.refEditor.isRef(a)?this.refEditor.set(a,n):e[o]=n}get(e,t){const n=Array.isArray(t)?t:t.split('.');for(let r=0;r<n.length;r++)if(e=e instanceof Map?e.get(n[r]):e[n[r]],this.refEditor.isRef(e)&&(e=this.refEditor.get(e)),!e)return;return e}has(e,t,n=!1){if(void 0===e)return!1;const r=Array.isArray(t)?t.slice():t.split('.'),i=n?2:1;for(;e&&r.length>i;){e=e[r.shift()],this.refEditor.isRef(e)&&(e=this.refEditor.get(e))}return null!=e&&Object.prototype.hasOwnProperty.call(e,r[0])}createDefaultSetCallback(e){return(t,n,r)=>{if((e.remove||e.newKey)&&(Array.isArray(t)?t.splice(n,1):Vw(t)instanceof Map?t.delete(n):Vw(t)instanceof Set?t.delete(Array.from(t.values())[n]):Reflect.deleteProperty(t,n)),!e.remove){const i=t[e.newKey||n];this.refEditor.isRef(i)?this.refEditor.set(i,r):Vw(t)instanceof Map?t.set(e.newKey||n,r):Vw(t)instanceof Set?t.add(r):t[e.newKey||n]=r}}}},Bw=class{set(e,t){if(zw(e))e.value=t;else{if(e instanceof Set&&Array.isArray(t))return e.clear(),void t.forEach((t=>e.add(t)));const n=Object.keys(t);if(e instanceof Map){const r=new Set(e.keys());return n.forEach((n=>{e.set(n,Reflect.get(t,n)),r.delete(n)})),void r.forEach((t=>e.delete(t)))}const r=new Set(Object.keys(e));n.forEach((n=>{Reflect.set(e,n,Reflect.get(t,n)),r.delete(n)})),r.forEach((t=>Reflect.deleteProperty(e,t)))}}get(e){return zw(e)?e.value:e}isRef(e){return zw(e)||Lw(e)}};sw(),sw(),sw();var Fw;function Zw(){if(!U_||'undefined'==typeof localStorage||null===localStorage)return{recordingState:!1,mouseEventEnabled:!1,keyboardEventEnabled:!1,componentEventEnabled:!1,performanceEventEnabled:!1,selected:''};const e=localStorage.getItem('__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS_STATE__');return e?JSON.parse(e):{recordingState:!1,mouseEventEnabled:!1,keyboardEventEnabled:!1,componentEventEnabled:!1,performanceEventEnabled:!1,selected:''}}sw(),sw(),sw(),null!=(Fw=L_).__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS||(Fw.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS=[]);var Hw,qw=new Proxy(L_.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS,{get:(e,t,n)=>Reflect.get(e,t,n)});null!=(Hw=L_).__VUE_DEVTOOLS_KIT_INSPECTOR__||(Hw.__VUE_DEVTOOLS_KIT_INSPECTOR__=[]);var Kw,Gw,Ww,Jw,Yw,Xw=new Proxy(L_.__VUE_DEVTOOLS_KIT_INSPECTOR__,{get:(e,t,n)=>Reflect.get(e,t,n)}),Qw=Z_((()=>{Bk.hooks.callHook('sendInspectorToClient',ek())}));function ek(){return Xw.filter((e=>e.descriptor.app===ak.value.app)).filter((e=>'components'!==e.descriptor.id)).map((e=>{var t;const n=e.descriptor,r=e.options;return{id:r.id,label:r.label,logo:n.logo,icon:`custom-ic-baseline-${null==(t=null==r?void 0:r.icon)?void 0:t.replace(/_/g,'-')}`,packageName:n.packageName,homepage:n.homepage,pluginId:n.id}}))}function tk(e,t){return Xw.find((n=>n.options.id===e&&(!t||n.descriptor.app===t)))}null!=(Kw=L_).__VUE_DEVTOOLS_KIT_APP_RECORDS__||(Kw.__VUE_DEVTOOLS_KIT_APP_RECORDS__=[]),null!=(Gw=L_).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__||(Gw.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__={}),null!=(Ww=L_).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__||(Ww.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__=''),null!=(Jw=L_).__VUE_DEVTOOLS_KIT_CUSTOM_TABS__||(Jw.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__=[]),null!=(Yw=L_).__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__||(Yw.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__=[]);var nk,rk='__VUE_DEVTOOLS_KIT_GLOBAL_STATE__';null!=(nk=L_)[rk]||(nk[rk]={connected:!1,clientConnected:!1,vitePluginDetected:!0,appRecords:[],activeAppRecordId:'',tabs:[],commands:[],highPerfModeEnabled:!0,devtoolsClientDetected:{},perfUniqueGroupId:0,timelineLayersState:Zw()});var ik=Z_((e=>{Bk.hooks.callHook('devtoolsStateUpdated',{state:e})}));Z_(((e,t)=>{Bk.hooks.callHook('devtoolsConnectedUpdated',{state:e,oldState:t})}));var ok=new Proxy(L_.__VUE_DEVTOOLS_KIT_APP_RECORDS__,{get:(e,t,n)=>'value'===t?L_.__VUE_DEVTOOLS_KIT_APP_RECORDS__:L_.__VUE_DEVTOOLS_KIT_APP_RECORDS__[t]}),ak=new Proxy(L_.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__,{get:(e,t,n)=>'value'===t?L_.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__:'id'===t?L_.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__:L_.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__[t]});function sk(){ik({...L_[rk],appRecords:ok.value,activeAppRecordId:ak.id,tabs:L_.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__,commands:L_.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__})}var lk,ck=new Proxy(L_[rk],{get:(e,t)=>'appRecords'===t?ok:'activeAppRecordId'===t?ak.id:'tabs'===t?L_.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__:'commands'===t?L_.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__:L_[rk][t],deleteProperty:(e,t)=>(delete e[t],!0),set:(e,t,n)=>(L_[rk],e[t]=n,L_[rk][t]=n,!0)});function uk(e={}){var t,n,r;const{file:i,host:o,baseUrl:a=window.location.origin,line:s=0,column:l=0}=e;if(i)if('chrome-extension'===o){const e=i.replace(/\\/g,'\\\\'),r=null!=(n=null==(t=window.VUE_DEVTOOLS_CONFIG)?void 0:t.openInEditorHost)?n:'/';fetch(`${r}__open-in-editor?file=${encodeURI(i)}`).then((t=>{if(!t.ok){const t=`Opening component ${e} failed`;console.log(`%c${t}`,'color:red')}}))}else if(ck.vitePluginDetected){const e=null!=(r=L_.__VUE_DEVTOOLS_OPEN_IN_EDITOR_BASE_URL__)?r:a;L_.__VUE_INSPECTOR__.openInEditor(e,i,s,l)}}sw(),sw(),sw(),sw(),sw(),null!=(lk=L_).__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__||(lk.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__=[]);var dk,pk,fk=new Proxy(L_.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__,{get:(e,t,n)=>Reflect.get(e,t,n)});function hk(e){const t={};return Object.keys(e).forEach((n=>{t[n]=e[n].defaultValue})),t}function mk(e){return`__VUE_DEVTOOLS_NEXT_PLUGIN_SETTINGS__${e}__`}function gk(e){var t,n,r;const i=null!=(n=null==(t=fk.find((t=>{var n;return t[0].id===e&&!!(null==(n=t[0])?void 0:n.settings)})))?void 0:t[0])?n:null;return null!=(r=null==i?void 0:i.settings)?r:null}function vk(e,t){var n,r,i;const o=mk(e);if(o){const e=localStorage.getItem(o);if(e)return JSON.parse(e)}if(e){const t=null!=(r=null==(n=fk.find((t=>t[0].id===e)))?void 0:n[0])?r:null;return hk(null!=(i=null==t?void 0:t.settings)?i:{})}return hk(t)}sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw();var yk=null!=(pk=(dk=L_).__VUE_DEVTOOLS_HOOK)?pk:dk.__VUE_DEVTOOLS_HOOK=X_(),bk={vueAppInit(e){yk.hook('app:init',e)},vueAppUnmount(e){yk.hook('app:unmount',e)},vueAppConnected(e){yk.hook('app:connected',e)},componentAdded:e=>yk.hook('component:added',e),componentEmit:e=>yk.hook('component:emit',e),componentUpdated:e=>yk.hook('component:updated',e),componentRemoved:e=>yk.hook('component:removed',e),setupDevtoolsPlugin(e){yk.hook('devtools-plugin:setup',e)},perfStart:e=>yk.hook('perf:start',e),perfEnd:e=>yk.hook('perf:end',e)},_k={on:bk,setupDevToolsPlugin:(e,t)=>yk.callHook('devtools-plugin:setup',e,t)},wk=class{constructor({plugin:e,ctx:t}){this.hooks=t.hooks,this.plugin=e}get on(){return{visitComponentTree:e=>{this.hooks.hook('visitComponentTree',e)},inspectComponent:e=>{this.hooks.hook('inspectComponent',e)},editComponentState:e=>{this.hooks.hook('editComponentState',e)},getInspectorTree:e=>{this.hooks.hook('getInspectorTree',e)},getInspectorState:e=>{this.hooks.hook('getInspectorState',e)},editInspectorState:e=>{this.hooks.hook('editInspectorState',e)},inspectTimelineEvent:e=>{this.hooks.hook('inspectTimelineEvent',e)},timelineCleared:e=>{this.hooks.hook('timelineCleared',e)},setPluginSettings:e=>{this.hooks.hook('setPluginSettings',e)}}}notifyComponentUpdate(e){var t;if(ck.highPerfModeEnabled)return;const n=ek().find((e=>e.packageName===this.plugin.descriptor.packageName));if(null==n?void 0:n.id){if(e){const n=[e.appContext.app,e.uid,null==(t=e.parent)?void 0:t.uid,e];yk.callHook('component:updated',...n)}else yk.callHook('component:updated');this.hooks.callHook('sendInspectorState',{inspectorId:n.id,plugin:this.plugin})}}addInspector(e){this.hooks.callHook('addInspector',{inspector:e,plugin:this.plugin}),this.plugin.descriptor.settings&&function(e,t){const n=mk(e);localStorage.getItem(n)||localStorage.setItem(n,JSON.stringify(hk(t)))}(e.id,this.plugin.descriptor.settings)}sendInspectorTree(e){ck.highPerfModeEnabled||this.hooks.callHook('sendInspectorTree',{inspectorId:e,plugin:this.plugin})}sendInspectorState(e){ck.highPerfModeEnabled||this.hooks.callHook('sendInspectorState',{inspectorId:e,plugin:this.plugin})}selectInspectorNode(e,t){this.hooks.callHook('customInspectorSelectNode',{inspectorId:e,nodeId:t,plugin:this.plugin})}visitComponentTree(e){return this.hooks.callHook('visitComponentTree',e)}now(){return ck.highPerfModeEnabled?0:Date.now()}addTimelineLayer(e){this.hooks.callHook('timelineLayerAdded',{options:e,plugin:this.plugin})}addTimelineEvent(e){ck.highPerfModeEnabled||this.hooks.callHook('timelineEventAdded',{options:e,plugin:this.plugin})}getSettings(e){return vk(null!=e?e:this.plugin.descriptor.id,this.plugin.descriptor.settings)}getComponentInstances(e){return this.hooks.callHook('getComponentInstances',{app:e})}getComponentBounds(e){return this.hooks.callHook('getComponentBounds',{instance:e})}getComponentName(e){return this.hooks.callHook('getComponentName',{instance:e})}highlightElement(e){const t=e.__VUE_DEVTOOLS_NEXT_UID__;return this.hooks.callHook('componentHighlight',{uid:t})}unhighlightElement(){return this.hooks.callHook('componentUnhighlight')}};sw(),sw(),sw(),sw();var kk='__vue_devtool_undefined__',xk='__vue_devtool_infinity__',Sk='__vue_devtool_negative_infinity__',Ek='__vue_devtool_nan__';sw(),sw();var $k,Ok={[kk]:'undefined',[Ek]:'NaN',[xk]:'Infinity',[Sk]:'-Infinity'};function Ik(e,t){return _k.setupDevToolsPlugin(e,t)}function Tk(e,t){L_.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.has(e)||ck.highPerfModeEnabled&&!(null==t?void 0:t.inspectingComponent)||(L_.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.add(e),fk.forEach((t=>{!function(e,t){const[n,r]=e;if(n.app!==t)return;const i=new wk({plugin:{setupFn:r,descriptor:n},ctx:Bk});'vuex'===n.packageName&&i.on.editInspectorState((e=>{i.sendInspectorState(e.inspectorId)})),r(i)}(t,e)})))}Object.entries(Ok).reduce(((e,[t,n])=>(e[n]=t,e)),{}),sw(),sw(),sw(),sw(),sw(),null!=($k=L_).__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__||($k.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__=new Set),sw(),sw();var Ak,Ck,Nk,Pk='__VUE_DEVTOOLS_ROUTER__',jk='__VUE_DEVTOOLS_ROUTER_INFO__';function Dk(e){return e.map((e=>{let{path:t,name:n,children:r,meta:i}=e;return(null==r?void 0:r.length)&&(r=Dk(r)),{path:t,name:n,children:r,meta:i}}))}function Rk(e,t){function n(){var t;const n=null==(t=e.app)?void 0:t.config.globalProperties.$router,r=function(e){if(e){const{fullPath:t,hash:n,href:r,path:i,name:o,matched:a,params:s,query:l}=e;return{fullPath:t,hash:n,href:r,path:i,name:o,params:s,query:l,matched:Dk(a)}}return e}(null==n?void 0:n.currentRoute.value),i=Dk(function(e){const t=new Map;return((null==e?void 0:e.getRoutes())||[]).filter((e=>!t.has(e.path)&&t.set(e.path,1)))}(n)),o=console.warn;console.warn=()=>{},L_[jk]={currentRoute:r?B_(r):{},routes:B_(i)},L_[Pk]=n,console.warn=o}n(),_k.on.componentUpdated(Z_((()=>{var r;(null==(r=t.value)?void 0:r.app)===e.app&&(n(),ck.highPerfModeEnabled||Bk.hooks.callHook('routerInfoUpdated',{state:L_[jk]}))}),200))}null!=(Ak=L_)[jk]||(Ak[jk]={currentRoute:null,routes:[]}),null!=(Ck=L_)[Pk]||(Ck[Pk]={}),new Proxy(L_[jk],{get:(e,t)=>L_[jk][t]}),new Proxy(L_[Pk],{get(e,t){if('value'===t)return L_[Pk]}}),sw(),null!=(Nk=L_).__VUE_DEVTOOLS_ENV__||(Nk.__VUE_DEVTOOLS_ENV__={vitePluginDetected:!1});var Uk,Lk,zk=function(){const e=X_();e.hook('addInspector',(({inspector:e,plugin:t})=>{!function(e,t){var n,r;Xw.push({options:e,descriptor:t,treeFilterPlaceholder:null!=(n=e.treeFilterPlaceholder)?n:'Search tree...',stateFilterPlaceholder:null!=(r=e.stateFilterPlaceholder)?r:'Search state...',treeFilter:'',selectedNodeId:'',appRecord:pw(t.app)}),Qw()}(e,t.descriptor)}));const t=Z_((async({inspectorId:t,plugin:n})=>{var r;if(!t||!(null==(r=null==n?void 0:n.descriptor)?void 0:r.app)||ck.highPerfModeEnabled)return;const i=tk(t,n.descriptor.app),o={app:n.descriptor.app,inspectorId:t,filter:(null==i?void 0:i.treeFilter)||'',rootNodes:[]};await new Promise((t=>{e.callHookWith((async e=>{await Promise.all(e.map((e=>e(o)))),t()}),'getInspectorTree')})),e.callHookWith((async e=>{await Promise.all(e.map((e=>e({inspectorId:t,rootNodes:o.rootNodes}))))}),'sendInspectorTreeToClient')}),120);e.hook('sendInspectorTree',t);const n=Z_((async({inspectorId:t,plugin:n})=>{var r;if(!t||!(null==(r=null==n?void 0:n.descriptor)?void 0:r.app)||ck.highPerfModeEnabled)return;const i=tk(t,n.descriptor.app),o={app:n.descriptor.app,inspectorId:t,nodeId:(null==i?void 0:i.selectedNodeId)||'',state:null},a={currentTab:`custom-inspector:${t}`};o.nodeId&&await new Promise((t=>{e.callHookWith((async e=>{await Promise.all(e.map((e=>e(o,a)))),t()}),'getInspectorState')})),e.callHookWith((async e=>{await Promise.all(e.map((e=>e({inspectorId:t,nodeId:o.nodeId,state:o.state}))))}),'sendInspectorStateToClient')}),120);return e.hook('sendInspectorState',n),e.hook('customInspectorSelectNode',(({inspectorId:e,nodeId:t,plugin:n})=>{const r=tk(e,n.descriptor.app);r&&(r.selectedNodeId=t)})),e.hook('timelineLayerAdded',(({options:e,plugin:t})=>{!function(e,t){ck.timelineLayersState[t.id]=!1,qw.push({...e,descriptorId:t.id,appRecord:pw(t.app)})}(e,t.descriptor)})),e.hook('timelineEventAdded',(({options:t,plugin:n})=>{var r;ck.highPerfModeEnabled||!(null==(r=ck.timelineLayersState)?void 0:r[n.descriptor.id])&&!['performance','component-event','keyboard','mouse'].includes(t.layerId)||e.callHookWith((async e=>{await Promise.all(e.map((e=>e(t))))}),'sendTimelineEventToClient')})),e.hook('getComponentInstances',(async({app:e})=>{const t=e.__VUE_DEVTOOLS_NEXT_APP_RECORD__;if(!t)return null;const n=t.id.toString();return[...t.instanceMap].filter((([e])=>e.split(':')[0]===n)).map((([,e])=>e))})),e.hook('getComponentBounds',(async({instance:e})=>yw(e))),e.hook('getComponentName',(({instance:e})=>hw(e))),e.hook('componentHighlight',(({uid:e})=>{const t=ak.value.instanceMap.get(e);t&&function(e){const t=yw(e);if(!t.width&&!t.height)return;const n=hw(e);Ow()?Aw({bounds:t,name:n}):Tw({bounds:t,name:n})}(t)})),e.hook('componentUnhighlight',(()=>{Cw()})),e}();null!=(Uk=L_).__VUE_DEVTOOLS_KIT_CONTEXT__||(Uk.__VUE_DEVTOOLS_KIT_CONTEXT__={hooks:zk,get state(){return{...ck,activeAppRecordId:ak.id,activeAppRecord:ak.value,appRecords:ok.value}},api:(Lk=zk,{async getInspectorTree(e){const t={...e,app:ak.value.app,rootNodes:[]};return await new Promise((e=>{Lk.callHookWith((async n=>{await Promise.all(n.map((e=>e(t)))),e()}),'getInspectorTree')})),t.rootNodes},async getInspectorState(e){const t={...e,app:ak.value.app,state:null},n={currentTab:`custom-inspector:${e.inspectorId}`};return await new Promise((e=>{Lk.callHookWith((async r=>{await Promise.all(r.map((e=>e(t,n)))),e()}),'getInspectorState')})),t.state},editInspectorState(e){const t=new Mw,n={...e,app:ak.value.app,set:(n,r=e.path,i=e.state.value,o)=>{t.set(n,r,i,o||t.createDefaultSetCallback(e.state))}};Lk.callHookWith((e=>{e.forEach((e=>e(n)))}),'editInspectorState')},sendInspectorState(e){const t=tk(e);Lk.callHook('sendInspectorState',{inspectorId:e,plugin:{descriptor:t.descriptor,setupFn:()=>({})}})},inspectComponentInspector:()=>Rw(),cancelInspectComponentInspector:()=>(Cw(),window.removeEventListener('mouseover',Pw),window.removeEventListener('click',Dw,!0),void(Dw=null)),getComponentRenderCode(e){const t=mw(ak.value,e);if(t)return'function'!=typeof(null==t?void 0:t.type)?t.render.toString():t.type.toString()},scrollToComponent:e=>function(e){const t=mw(ak.value,e.id);if(t){const[n]=bw(t);if('function'==typeof n.scrollIntoView)n.scrollIntoView({behavior:'smooth'});else{const e=yw(t),n=document.createElement('div'),r={...Iw(e),position:'absolute'};Object.assign(n.style,r),document.body.appendChild(n),n.scrollIntoView({behavior:'smooth'}),setTimeout((()=>{document.body.removeChild(n)}),2e3)}setTimeout((()=>{const n=yw(t);if(n.width||n.height){const r=hw(t),i=Ow();i?Aw({...e,name:r,bounds:n}):Tw({...e,name:r,bounds:n}),setTimeout((()=>{i&&(i.style.display='none')}),1500)}}),1200)}}({id:e}),openInEditor:uk,getVueInspector:Uw,toggleApp(e,t){const n=ok.value.find((t=>t.id===e));n&&(function(e){L_.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__=e,sk()}(e),function(e){L_.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__=e,sk()}(n),Rk(n,ak),Qw(),Tk(n.app,t))},inspectDOM(e){const t=mw(ak.value,e);if(t){const[e]=bw(t);e&&(L_.__VUE_DEVTOOLS_INSPECT_DOM_TARGET__=e)}},updatePluginSettings(e,t,n){!function(e,t,n){const r=mk(e),i=localStorage.getItem(r),o=JSON.parse(i||'{}'),a={...o,[t]:n};localStorage.setItem(r,JSON.stringify(a)),Bk.hooks.callHookWith((r=>{r.forEach((r=>r({pluginId:e,key:t,oldValue:o[t],newValue:n,settings:a})))}),'setPluginSettings')}(e,t,n)},getPluginSettings:e=>({options:gk(e),values:vk(e)})})});var Vk,Mk,Bk=L_.__VUE_DEVTOOLS_KIT_CONTEXT__;sw(),((e,t,n)=>{n=null!=e?ew(iw(e)):{},((e,t,n,r)=>{if(t&&'object'==typeof t||'function'==typeof t)for(let i of rw(t))ow.call(e,i)||i===n||tw(e,i,{get:()=>t[i],enumerable:!(r=nw(t,i))||r.enumerable})})(tw(n,'default',{value:e,enumerable:!0}),e)})(cw()),null!=(Vk=L_).__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__||(Vk.__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__={id:0,appIds:new Set}),sw(),sw(),sw(),sw(),sw(),null!=(Mk=L_).__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__||(Mk.__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__=function(e){ck.devtoolsClientDetected={...ck.devtoolsClientDetected,...e};const t=Object.values(ck.devtoolsClientDetected).some(Boolean);var n;n=!t,ck.highPerfModeEnabled=null!=n?n:!ck.highPerfModeEnabled,!n&&ak.value&&Tk(ak.value.app)}),sw(),sw(),sw(),sw(),sw(),sw(),sw();var Fk=class{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}},Zk=class{constructor(e){this.generateIdentifier=e,this.kv=new Fk}register(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}},Hk=class extends Zk{constructor(){super((e=>e.name)),this.classToAllowedProps=new Map}register(e,t){'object'==typeof t?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}};function qk(e,t){const n=function(e){if('values'in Object)return Object.values(e);const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}(e);if('find'in n)return n.find(t);const r=n;for(let i=0;i<r.length;i++){const e=r[i];if(t(e))return e}}function Kk(e,t){Object.entries(e).forEach((([e,n])=>t(n,e)))}function Gk(e,t){return-1!==e.indexOf(t)}function Wk(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(t(r))return r}}sw(),sw();var Jk=class{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return qk(this.transfomers,(t=>t.isApplicable(e)))}findByName(e){return this.transfomers[e]}};sw(),sw();var Yk=e=>void 0===e,Xk=e=>'object'==typeof e&&null!==e&&(e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype)),Qk=e=>Xk(e)&&0===Object.keys(e).length,ex=e=>Array.isArray(e),tx=e=>e instanceof Map,nx=e=>e instanceof Set,rx=e=>'Symbol'===(e=>Object.prototype.toString.call(e).slice(8,-1))(e),ix=e=>'number'==typeof e&&isNaN(e),ox=e=>(e=>'boolean'==typeof e)(e)||(e=>null===e)(e)||Yk(e)||(e=>'number'==typeof e&&!isNaN(e))(e)||(e=>'string'==typeof e)(e)||rx(e);sw();var ax=e=>e.replace(/\./g,'\\.'),sx=e=>e.map(String).map(ax).join('.'),lx=e=>{const t=[];let n='';for(let i=0;i<e.length;i++){let r=e.charAt(i);if('\\'===r&&'.'===e.charAt(i+1)){n+='.',i++;continue}'.'===r?(t.push(n),n=''):n+=r}const r=n;return t.push(r),t};function cx(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}sw();var ux=[cx(Yk,'undefined',(()=>null),(()=>{})),cx((e=>'bigint'==typeof e),'bigint',(e=>e.toString()),(e=>'undefined'!=typeof BigInt?BigInt(e):(console.error('Please add a BigInt polyfill.'),e))),cx((e=>e instanceof Date&&!isNaN(e.valueOf())),'Date',(e=>e.toISOString()),(e=>new Date(e))),cx((e=>e instanceof Error),'Error',((e,t)=>{const n={name:e.name,message:e.message};return t.allowedErrorProps.forEach((t=>{n[t]=e[t]})),n}),((e,t)=>{const n=new Error(e.message);return n.name=e.name,n.stack=e.stack,t.allowedErrorProps.forEach((t=>{n[t]=e[t]})),n})),cx((e=>e instanceof RegExp),'regexp',(e=>''+e),(e=>{const t=e.slice(1,e.lastIndexOf('/')),n=e.slice(e.lastIndexOf('/')+1);return new RegExp(t,n)})),cx(nx,'set',(e=>[...e.values()]),(e=>new Set(e))),cx(tx,'map',(e=>[...e.entries()]),(e=>new Map(e))),cx((e=>{return ix(e)||((t=e)===1/0||t===-1/0);var t}),'number',(e=>ix(e)?'NaN':e>0?'Infinity':'-Infinity'),Number),cx((e=>0===e&&1/e==-1/0),'number',(()=>'-0'),Number),cx((e=>e instanceof URL),'URL',(e=>e.toString()),(e=>new URL(e)))];function dx(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}var px=dx(((e,t)=>{if(rx(e)){return!!t.symbolRegistry.getIdentifier(e)}return!1}),((e,t)=>['symbol',t.symbolRegistry.getIdentifier(e)]),(e=>e.description),((_,e,t)=>{const n=t.symbolRegistry.getValue(e[1]);if(!n)throw new Error('Trying to deserialize unknown symbol');return n})),fx=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(((e,t)=>(e[t.name]=t,e)),{}),hx=dx((e=>ArrayBuffer.isView(e)&&!(e instanceof DataView)),(e=>['typed-array',e.constructor.name]),(e=>[...e]),((e,t)=>{const n=fx[t[1]];if(!n)throw new Error('Trying to deserialize unknown typed array');return new n(e)}));function mx(e,t){if(null==e?void 0:e.constructor){return!!t.classRegistry.getIdentifier(e.constructor)}return!1}var gx=dx(mx,((e,t)=>['class',t.classRegistry.getIdentifier(e.constructor)]),((e,t)=>{const n=t.classRegistry.getAllowedProps(e.constructor);if(!n)return{...e};const r={};return n.forEach((t=>{r[t]=e[t]})),r}),((e,t,n)=>{const r=n.classRegistry.getValue(t[1]);if(!r)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(r.prototype),e)})),vx=dx(((e,t)=>!!t.customTransformerRegistry.findApplicable(e)),((e,t)=>['custom',t.customTransformerRegistry.findApplicable(e).name]),((e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e)),((e,t,n)=>{const r=n.customTransformerRegistry.findByName(t[1]);if(!r)throw new Error('Trying to deserialize unknown custom value');return r.deserialize(e)})),yx=[gx,px,vx,hx],bx=(e,t)=>{const n=Wk(yx,(n=>n.isApplicable(e,t)));if(n)return{value:n.transform(e,t),type:n.annotation(e,t)};const r=Wk(ux,(n=>n.isApplicable(e,t)));return r?{value:r.transform(e,t),type:r.annotation}:void 0},_x={};ux.forEach((e=>{_x[e.annotation]=e}));sw();var wx=(e,t)=>{if(t>e.size)throw new Error('index out of bounds');const n=e.keys();for(;t>0;)n.next(),t--;return n.next().value};function kx(e){if(Gk(e,'__proto__'))throw new Error('__proto__ is not allowed as a property');if(Gk(e,'prototype'))throw new Error('prototype is not allowed as a property');if(Gk(e,'constructor'))throw new Error('constructor is not allowed as a property')}var xx=(e,t,n)=>{if(kx(t),0===t.length)return n(e);let r=e;for(let o=0;o<t.length-1;o++){const e=t[o];if(ex(r)){r=r[+e]}else if(Xk(r))r=r[e];else if(nx(r)){r=wx(r,+e)}else if(tx(r)){if(o===t.length-2)break;const n=+e,i=0==+t[++o]?'key':'value',a=wx(r,n);switch(i){case'key':r=a;break;case'value':r=r.get(a)}}}const i=t[t.length-1];if(ex(r)?r[+i]=n(r[+i]):Xk(r)&&(r[i]=n(r[i])),nx(r)){const e=wx(r,+i),t=n(e);e!==t&&(r.delete(e),r.add(t))}if(tx(r)){const e=+t[t.length-2],o=wx(r,e);switch(0==+i?'key':'value'){case'key':{const e=n(o);r.set(e,r.get(o)),e!==o&&r.delete(o);break}case'value':r.set(o,n(r.get(o)))}}return e};function Sx(e,t,n=[]){if(!e)return;if(!ex(e))return void Kk(e,((e,r)=>Sx(e,t,[...n,...lx(r)])));const[r,i]=e;i&&Kk(i,((e,r)=>{Sx(e,t,[...n,...lx(r)])})),t(r,n)}function Ex(e,t,n){return Sx(t,((t,r)=>{e=xx(e,r,(e=>((e,t,n)=>{if(!ex(t)){const r=_x[t];if(!r)throw new Error('Unknown transformation: '+t);return r.untransform(e,n)}switch(t[0]){case'symbol':return px.untransform(e,t,n);case'class':return gx.untransform(e,t,n);case'custom':return vx.untransform(e,t,n);case'typed-array':return hx.untransform(e,t,n);default:throw new Error('Unknown transformation: '+t)}})(e,t,n)))})),e}function $x(e,t){function n(t,n){const r=((e,t)=>{kx(t);for(let n=0;n<t.length;n++){const r=t[n];if(nx(e))e=wx(e,+r);else if(tx(e)){const i=+r,o=0==+t[++n]?'key':'value',a=wx(e,i);switch(o){case'key':e=a;break;case'value':e=e.get(a)}}else e=e[r]}return e})(e,lx(n));t.map(lx).forEach((t=>{e=xx(e,t,(()=>r))}))}if(ex(t)){const[r,i]=t;r.forEach((t=>{e=xx(e,lx(t),(()=>e))})),i&&Kk(i,n)}else Kk(t,n);return e}var Ox=(e,t,n,r,i=[],o=[],a=new Map)=>{var s;const l=ox(e);if(!l){!function(e,t,n){const r=n.get(e);r?r.push(t):n.set(e,[t])}(e,i,t);const n=a.get(e);if(n)return r?{transformedValue:null}:n}if(!((e,t)=>Xk(e)||ex(e)||tx(e)||nx(e)||mx(e,t))(e,n)){const t=bx(e,n),r=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:e};return l||a.set(e,r),r}if(Gk(o,e))return{transformedValue:null};const c=bx(e,n),u=null!=(s=null==c?void 0:c.value)?s:e,d=ex(u)?[]:{},p={};Kk(u,((s,l)=>{if('__proto__'===l||'constructor'===l||'prototype'===l)throw new Error(`Detected property ${l}. This is a prototype pollution risk, please remove it from your object.`);const c=Ox(s,t,n,r,[...i,l],[...o,e],a);d[l]=c.transformedValue,ex(c.annotations)?p[l]=c.annotations:Xk(c.annotations)&&Kk(c.annotations,((e,t)=>{p[ax(l)+'.'+t]=e}))}));const f=Qk(p)?{transformedValue:d,annotations:c?[c.type]:void 0}:{transformedValue:d,annotations:c?[c.type,p]:p};return l||a.set(e,f),f};function Ix(e){return Object.prototype.toString.call(e).slice(8,-1)}function Tx(e){return'Array'===Ix(e)}function Ax(e,t={}){if(Tx(e))return e.map((e=>Ax(e,t)));if(!function(e){if('Object'!==Ix(e))return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(e))return e;return[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)].reduce(((n,r)=>{if(Tx(t.props)&&!t.props.includes(r))return n;return function(e,t,n,r,i){const o={}.propertyIsEnumerable.call(r,t)?'enumerable':'nonenumerable';'enumerable'===o&&(e[t]=n),i&&'nonenumerable'===o&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}(n,r,Ax(e[r],t),e,t.nonenumerable),n}),{})}sw(),sw();var Cx,Nx,Px,jx,Dx,Rx,Ux=class{constructor({dedupe:e=!1}={}){this.classRegistry=new Hk,this.symbolRegistry=new Zk((e=>{var t;return null!=(t=e.description)?t:''})),this.customTransformerRegistry=new Jk,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const t=new Map,n=Ox(e,t,this,this.dedupe),r={json:n.transformedValue};n.annotations&&(r.meta={...r.meta,values:n.annotations});const i=function(e,t){const n={};let r;return e.forEach((e=>{if(e.length<=1)return;t||(e=e.map((e=>e.map(String))).sort(((e,t)=>e.length-t.length)));const[i,...o]=e;0===i.length?r=o.map(sx):n[sx(i)]=o.map(sx)})),r?Qk(n)?[r]:[r,n]:Qk(n)?void 0:n}(t,this.dedupe);return i&&(r.meta={...r.meta,referentialEqualities:i}),r}deserialize(e){const{json:t,meta:n}=e;let r=Ax(t);return(null==n?void 0:n.values)&&(r=Ex(r,n.values,this)),(null==n?void 0:n.referentialEqualities)&&(r=$x(r,n.referentialEqualities)),r}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}};
/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */
let Lx;Ux.defaultInstance=new Ux,Ux.serialize=Ux.defaultInstance.serialize.bind(Ux.defaultInstance),Ux.deserialize=Ux.defaultInstance.deserialize.bind(Ux.defaultInstance),Ux.stringify=Ux.defaultInstance.stringify.bind(Ux.defaultInstance),Ux.parse=Ux.defaultInstance.parse.bind(Ux.defaultInstance),Ux.registerClass=Ux.defaultInstance.registerClass.bind(Ux.defaultInstance),Ux.registerSymbol=Ux.defaultInstance.registerSymbol.bind(Ux.defaultInstance),Ux.registerCustom=Ux.defaultInstance.registerCustom.bind(Ux.defaultInstance),Ux.allowErrorProps=Ux.defaultInstance.allowErrorProps.bind(Ux.defaultInstance),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),sw(),null!=(Cx=L_).__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__||(Cx.__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__=[]),null!=(Nx=L_).__VUE_DEVTOOLS_KIT_RPC_CLIENT__||(Nx.__VUE_DEVTOOLS_KIT_RPC_CLIENT__=null),null!=(Px=L_).__VUE_DEVTOOLS_KIT_RPC_SERVER__||(Px.__VUE_DEVTOOLS_KIT_RPC_SERVER__=null),null!=(jx=L_).__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__||(jx.__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__=null),null!=(Dx=L_).__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__||(Dx.__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__=null),null!=(Rx=L_).__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__||(Rx.__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__=null),sw(),sw(),sw(),sw(),sw(),sw(),sw();const zx=e=>Lx=e,Vx=Symbol();function Mx(e){return e&&'object'==typeof e&&'[object Object]'===Object.prototype.toString.call(e)&&'function'!=typeof e.toJSON}var Bx,Fx;(Fx=Bx||(Bx={})).direct='direct',Fx.patchObject='patch object',Fx.patchFunction='patch function';const Zx='undefined'!=typeof window,Hx=(()=>'object'==typeof window&&window.window===window?window:'object'==typeof self&&self.self===self?self:'object'==typeof global&&global.global===global?global:'object'==typeof globalThis?globalThis:{HTMLElement:null})();function qx(e,t,n){const r=new XMLHttpRequest;r.open('GET',e),r.responseType='blob',r.onload=function(){Yx(r.response,t,n)},r.onerror=function(){console.error('could not download file')},r.send()}function Kx(e){const t=new XMLHttpRequest;t.open('HEAD',e,!1);try{t.send()}catch(UJ){}return t.status>=200&&t.status<=299}function Gx(e){try{e.dispatchEvent(new MouseEvent('click'))}catch(UJ){const n=new MouseEvent('click',{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:80,screenY:20,clientX:80,clientY:20,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(n)}}const Wx='object'==typeof navigator?navigator:{userAgent:''},Jx=(()=>/Macintosh/.test(Wx.userAgent)&&/AppleWebKit/.test(Wx.userAgent)&&!/Safari/.test(Wx.userAgent))(),Yx=Zx?'undefined'!=typeof HTMLAnchorElement&&'download'in HTMLAnchorElement.prototype&&!Jx?function(e,t='download',n){const r=document.createElement('a');r.download=t,r.rel='noopener','string'==typeof e?(r.href=e,r.origin!==location.origin?Kx(r.href)?qx(e,t,n):(r.target='_blank',Gx(r)):Gx(r)):(r.href=URL.createObjectURL(e),setTimeout((function(){URL.revokeObjectURL(r.href)}),4e4),setTimeout((function(){Gx(r)}),0))}:'msSaveOrOpenBlob'in Wx?function(e,t='download',n){if('string'==typeof e)if(Kx(e))qx(e,t,n);else{const t=document.createElement('a');t.href=e,t.target='_blank',setTimeout((function(){Gx(t)}))}else navigator.msSaveOrOpenBlob(function(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){(r=r||open('','_blank'))&&(r.document.title=r.document.body.innerText='downloading...');if('string'==typeof e)return qx(e,t,n);const i='application/octet-stream'===e.type,o=/constructor/i.test(String(Hx.HTMLElement))||'safari'in Hx,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||Jx)&&'undefined'!=typeof FileReader){const t=new FileReader;t.onloadend=function(){let e=t.result;if('string'!=typeof e)throw r=null,new Error('Wrong reader.result type');e=a?e:e.replace(/^data:[^;]*;/,'data:attachment/file;'),r?r.location.href=e:location.assign(e),r=null},t.readAsDataURL(e)}else{const t=URL.createObjectURL(e);r?r.location.assign(t):location.href=t,r=null,setTimeout((function(){URL.revokeObjectURL(t)}),4e4)}}:()=>{};function Xx(e,t){const n=' '+e;'function'==typeof __VUE_DEVTOOLS_TOAST__?__VUE_DEVTOOLS_TOAST__(n,t):'error'===t?console.error(n):'warn'===t?console.warn(n):console.log(n)}function Qx(e){return'_a'in e&&'install'in e}function eS(){if(!('clipboard'in navigator))return Xx('Your browser doesn\'t support the Clipboard API','error'),!0}function tS(e){return!!(e instanceof Error&&e.message.toLowerCase().includes('document is not focused'))&&(Xx('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.','warn'),!0)}let nS;async function rS(e){try{const t=(nS||(nS=document.createElement('input'),nS.type='file',nS.accept='.json'),function(){return new Promise(((e,t)=>{nS.onchange=async()=>{const t=nS.files;if(!t)return e(null);const n=t.item(0);return e(n?{text:await n.text(),file:n}:null)},nS.oncancel=()=>e(null),nS.onerror=t,nS.click()}))}),n=await t();if(!n)return;const{text:r,file:i}=n;iS(e,JSON.parse(r)),Xx(`Global state imported from "${i.name}".`)}catch(Jh){Xx('Failed to import the state from JSON. Check the console for more details.','error'),console.error(Jh)}}function iS(e,t){for(const n in t){const r=e.state.value[n];r?Object.assign(r,t[n]):e.state.value[n]=t[n]}}function oS(e){return{_custom:{display:e}}}const aS=' Pinia (root)',sS='_root';function lS(e){return Qx(e)?{id:sS,label:aS}:{id:e.$id,label:e.$id}}function cS(e){return e?Array.isArray(e)?e.reduce(((e,t)=>(e.keys.push(t.key),e.operations.push(t.type),e.oldValue[t.key]=t.oldValue,e.newValue[t.key]=t.newValue,e)),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:oS(e.type),key:oS(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function uS(e){switch(e){case Bx.direct:return'mutation';case Bx.patchFunction:case Bx.patchObject:return'$patch';default:return'unknown'}}let dS=!0;const pS=[],fS='pinia:mutations',hS='pinia',{assign:mS}=Object,gS=e=>' '+e;function vS(e,t){Ik({id:'dev.esm.pinia',label:'Pinia ',logo:'https://pinia.vuejs.org/logo.svg',packageName:'pinia',homepage:'https://pinia.vuejs.org',componentStateTypes:pS,app:e},(n=>{'function'!=typeof n.now&&Xx('You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.'),n.addTimelineLayer({id:fS,label:'Pinia ',color:15064968}),n.addInspector({id:hS,label:'Pinia ',icon:'storage',treeFilterPlaceholder:'Search stores',actions:[{icon:'content_copy',action:()=>{!async function(e){if(!eS())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),Xx('Global state copied to clipboard.')}catch(Jh){if(tS(Jh))return;Xx('Failed to serialize the state. Check the console for more details.','error'),console.error(Jh)}}(t)},tooltip:'Serialize and copy the state'},{icon:'content_paste',action:async()=>{await async function(e){if(!eS())try{iS(e,JSON.parse(await navigator.clipboard.readText())),Xx('Global state pasted from clipboard.')}catch(Jh){if(tS(Jh))return;Xx('Failed to deserialize the state from clipboard. Check the console for more details.','error'),console.error(Jh)}}(t),n.sendInspectorTree(hS),n.sendInspectorState(hS)},tooltip:'Replace the state with the content of your clipboard'},{icon:'save',action:()=>{!async function(e){try{Yx(new Blob([JSON.stringify(e.state.value)],{type:'text/plain;charset=utf-8'}),'pinia-state.json')}catch(Jh){Xx('Failed to export the state as JSON. Check the console for more details.','error'),console.error(Jh)}}(t)},tooltip:'Save the state as a JSON file'},{icon:'folder_open',action:async()=>{await rS(t),n.sendInspectorTree(hS),n.sendInspectorState(hS)},tooltip:'Import the state from a JSON file'}],nodeActions:[{icon:'restore',tooltip:'Reset the state (with "$reset")',action:e=>{const n=t._s.get(e);n?'function'!=typeof n.$reset?Xx(`Cannot reset "${e}" store because it doesn't have a "$reset" method implemented.`,'warn'):(n.$reset(),Xx(`Store "${e}" reset.`)):Xx(`Cannot reset "${e}" store because it wasn't found.`,'warn')}}]}),n.on.inspectComponent((e=>{const t=e.componentInstance&&e.componentInstance.proxy;if(t&&t._pStores){const t=e.componentInstance.proxy._pStores;Object.values(t).forEach((t=>{e.instanceData.state.push({type:gS(t.$id),key:'state',editable:!0,value:t._isOptionsAPI?{_custom:{value:Rr(t.$state),actions:[{icon:'restore',tooltip:'Reset the state of this store',action:()=>t.$reset()}]}}:Object.keys(t.$state).reduce(((e,n)=>(e[n]=t.$state[n],e)),{})}),t._getters&&t._getters.length&&e.instanceData.state.push({type:gS(t.$id),key:'getters',editable:!1,value:t._getters.reduce(((e,n)=>{try{e[n]=t[n]}catch(Jh){e[n]=Jh}return e}),{})})}))}})),n.on.getInspectorTree((n=>{if(n.app===e&&n.inspectorId===hS){let e=[t];e=e.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?e.filter((e=>'$id'in e?e.$id.toLowerCase().includes(n.filter.toLowerCase()):aS.toLowerCase().includes(n.filter.toLowerCase()))):e).map(lS)}})),globalThis.$pinia=t,n.on.getInspectorState((n=>{if(n.app===e&&n.inspectorId===hS){const e=n.nodeId===sS?t:t._s.get(n.nodeId);if(!e)return;e&&(n.nodeId!==sS&&(globalThis.$store=Rr(e)),n.state=function(e){if(Qx(e)){const t=Array.from(e._s.keys()),n=e._s,r={state:t.map((t=>({editable:!0,key:t,value:e.state.value[t]}))),getters:t.filter((e=>n.get(e)._getters)).map((e=>{const t=n.get(e);return{editable:!1,key:e,value:t._getters.reduce(((e,n)=>(e[n]=t[n],e)),{})}}))};return r}const t={state:Object.keys(e.$state).map((t=>({editable:!0,key:t,value:e.$state[t]})))};return e._getters&&e._getters.length&&(t.getters=e._getters.map((t=>({editable:!1,key:t,value:e[t]})))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map((t=>({editable:!0,key:t,value:e[t]})))),t}(e))}})),n.on.editInspectorState((n=>{if(n.app===e&&n.inspectorId===hS){const e=n.nodeId===sS?t:t._s.get(n.nodeId);if(!e)return Xx(`store "${n.nodeId}" not found`,'error');const{path:r}=n;Qx(e)?r.unshift('state'):1===r.length&&e._customProperties.has(r[0])&&!(r[0]in e.$state)||r.unshift('$state'),dS=!1,n.set(e,r,n.state.value),dS=!0}})),n.on.editComponentState((e=>{if(e.type.startsWith('')){const n=e.type.replace(/^\s*/,''),r=t._s.get(n);if(!r)return Xx(`store "${n}" not found`,'error');const{path:i}=e;if('state'!==i[0])return Xx(`Invalid path for store "${n}":\n${i}\nOnly state can be modified.`);i[0]='$state',dS=!1,e.set(r,i,e.state.value),dS=!0}}))}))}let yS,bS=0;function _S(e,t,n){const r=t.reduce(((t,n)=>(t[n]=Rr(e)[n],t)),{});for(const i in r)e[i]=function(){const t=bS,o=n?new Proxy(e,{get:(...e)=>(yS=t,Reflect.get(...e)),set:(...e)=>(yS=t,Reflect.set(...e))}):e;yS=t;const a=r[i].apply(o,arguments);return yS=void 0,a}}function wS({app:e,store:t,options:n}){if(!t.$id.startsWith('__hot:')){if(t._isOptionsAPI=!!n.state,!t._p._testing){_S(t,Object.keys(n.actions),t._isOptionsAPI);const e=t._hotUpdate;Rr(t)._hotUpdate=function(n){e.apply(this,arguments),_S(t,Object.keys(n._hmrPayload.actions),!!t._isOptionsAPI)}}!function(e,t){pS.includes(gS(t.$id))||pS.push(gS(t.$id)),Ik({id:'dev.esm.pinia',label:'Pinia ',logo:'https://pinia.vuejs.org/logo.svg',packageName:'pinia',homepage:'https://pinia.vuejs.org',componentStateTypes:pS,app:e,settings:{logStoreChanges:{label:'Notify about new/deleted stores',type:'boolean',defaultValue:!0}}},(e=>{const n='function'==typeof e.now?e.now.bind(e):Date.now;t.$onAction((({after:r,onError:i,name:o,args:a})=>{const s=bS++;e.addTimelineEvent({layerId:fS,event:{time:n(),title:' '+o,subtitle:'start',data:{store:oS(t.$id),action:oS(o),args:a},groupId:s}}),r((r=>{yS=void 0,e.addTimelineEvent({layerId:fS,event:{time:n(),title:' '+o,subtitle:'end',data:{store:oS(t.$id),action:oS(o),args:a,result:r},groupId:s}})})),i((r=>{yS=void 0,e.addTimelineEvent({layerId:fS,event:{time:n(),logType:'error',title:' '+o,subtitle:'end',data:{store:oS(t.$id),action:oS(o),args:a,error:r},groupId:s}})}))}),!0),t._customProperties.forEach((r=>{_a((()=>Hr(t[r])),((t,i)=>{e.notifyComponentUpdate(),e.sendInspectorState(hS),dS&&e.addTimelineEvent({layerId:fS,event:{time:n(),title:'Change',subtitle:r,data:{newValue:t,oldValue:i},groupId:yS}})}),{deep:!0})})),t.$subscribe((({events:r,type:i},o)=>{if(e.notifyComponentUpdate(),e.sendInspectorState(hS),!dS)return;const a={time:n(),title:uS(i),data:mS({store:oS(t.$id)},cS(r)),groupId:yS};i===Bx.patchFunction?a.subtitle='':i===Bx.patchObject?a.subtitle='':r&&!Array.isArray(r)&&(a.subtitle=r.type),r&&(a.data['rawEvent(s)']={_custom:{display:'DebuggerEvent',type:'object',tooltip:'raw DebuggerEvent[]',value:r}}),e.addTimelineEvent({layerId:fS,event:a})}),{detached:!0,flush:'sync'});const r=t._hotUpdate;t._hotUpdate=Ur((i=>{r(i),e.addTimelineEvent({layerId:fS,event:{time:n(),title:' '+t.$id,subtitle:'HMR update',data:{store:oS(t.$id),info:oS('HMR update')}}}),e.notifyComponentUpdate(),e.sendInspectorTree(hS),e.sendInspectorState(hS)}));const{$dispose:i}=t;t.$dispose=()=>{i(),e.notifyComponentUpdate(),e.sendInspectorTree(hS),e.sendInspectorState(hS),e.getSettings().logStoreChanges&&Xx(`Disposed "${t.$id}" store `)},e.notifyComponentUpdate(),e.sendInspectorTree(hS),e.sendInspectorState(hS),e.getSettings().logStoreChanges&&Xx(`"${t.$id}" store installed `)}))}(e,t)}}const kS=()=>{};function xS(e,t,n,r=kS){e.push(t);const i=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};return!n&&vn()&&yn(i),i}function SS(e,...t){e.slice().forEach((e=>{e(...t)}))}const ES=e=>e(),$S=Symbol(),OS=Symbol();function IS(e,t){e instanceof Map&&t instanceof Map?t.forEach(((t,n)=>e.set(n,t))):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Mx(i)&&Mx(r)&&e.hasOwnProperty(n)&&!Vr(r)&&!Nr(r)?e[n]=IS(i,r):e[n]=r}return e}const TS=Symbol();const{assign:AS}=Object;function CS(e,t,n={},r,i,o){let a;const s=AS({actions:{}},n),l={deep:!0};let c,u,d,p=[],f=[];const h=r.state.value[e];o||h||(r.state.value[e]={});const m=Mr({});let g;function v(t){let n;c=u=!1,'function'==typeof t?(t(r.state.value[e]),n={type:Bx.patchFunction,storeId:e,events:d}):(IS(r.state.value[e],t),n={type:Bx.patchObject,payload:t,storeId:e,events:d});const i=g=Symbol();yi().then((()=>{g===i&&(c=!0)})),u=!0,SS(p,n,r.state.value[e])}const y=o?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{AS(e,t)}))}:kS;const b=(t,n='')=>{if($S in t)return t[OS]=n,t;const i=function(){zx(r);const n=Array.from(arguments),o=[],a=[];let s;SS(f,{args:n,name:i[OS],store:x,after:function(e){o.push(e)},onError:function(e){a.push(e)}});try{s=t.apply(this&&this.$id===e?this:x,n)}catch(Jh){throw SS(a,Jh),Jh}return s instanceof Promise?s.then((e=>(SS(o,e),e))).catch((e=>(SS(a,e),Promise.reject(e)))):(SS(o,s),s)};return i[$S]=!0,i[OS]=n,i},w=Ur({actions:{},getters:{},state:[],hotState:m}),k={_p:r,$id:e,$onAction:xS.bind(null,f),$patch:v,$reset:y,$subscribe(t,n={}){const i=xS(p,t,n.detached,(()=>o())),o=a.run((()=>_a((()=>r.state.value[e]),(r=>{('sync'===n.flush?u:c)&&t({storeId:e,type:Bx.direct,events:d},r)}),AS({},l,n))));return i},$dispose:function(){a.stop(),p=[],f=[],r._s.delete(e)}},x=Or(Zx?AS({_hmrPayload:w,_customProperties:Ur(new Set)},k):k);r._s.set(e,x);const S=(r._a&&r._a.runWithContext||ES)((()=>r._e.run((()=>(a=gn()).run((()=>t({action:b})))))));for(const I in S){const t=S[I];if(Vr(t)&&(!Vr(O=t)||!O.effect)||Nr(t))o||(!h||Mx(E=t)&&Object.prototype.hasOwnProperty.call(E,TS)||(Vr(t)?t.value=h[I]:IS(t,h[I])),r.state.value[e][I]=t);else if('function'==typeof t){const e=b(t,I);S[I]=e,s.actions[I]=t}}var E,O;if(AS(x,S),AS(Rr(x),S),Object.defineProperty(x,'$state',{get:()=>r.state.value[e],set:e=>{v((t=>{AS(t,e)}))}}),Zx){const e={writable:!0,configurable:!0,enumerable:!1};['_p','_hmrPayload','_getters','_customProperties'].forEach((t=>{Object.defineProperty(x,t,AS({value:x[t]},e))}))}return r._p.forEach((e=>{if(Zx){const t=a.run((()=>e({store:x,app:r._a,pinia:r,options:s})));Object.keys(t||{}).forEach((e=>x._customProperties.add(e))),AS(x,t)}else AS(x,a.run((()=>e({store:x,app:r._a,pinia:r,options:s}))))})),h&&o&&n.hydrate&&n.hydrate(x.$state,h),c=!0,u=!0,x}
/*! #__NO_SIDE_EFFECTS__ */function NS(e,t,n){let r;const i='function'==typeof t;function o(n,o){const a=Yo();(n=n||(a?Jo(Vx,null):null))&&zx(n),(n=Lx)._s.has(e)||(i?CS(e,t,r,n):function(e,t,n){const{state:r,actions:i,getters:o}=t,a=n.state.value[e];let s;s=CS(e,(function(){a||(n.state.value[e]=r?r():{});const t=Yr(n.state.value[e]);return AS(t,i,Object.keys(o||{}).reduce(((t,r)=>(t[r]=Ur(ks((()=>{zx(n);const t=n._s.get(e);return o[r].call(t,t)}))),t)),{}))}),t,n,0,!0)}(e,r,n));return n._s.get(e)}return r=i?n:t,o.$id=e,o}function PS(e){return x_(w_,_.get(o.at(e),`data.extensions.${g_}`,{}))}const jS=_.debounce((async function(e,t){await Le(e,g_,t)}),1e3),DS=NS('character_setttings',(()=>{const e=Mr(a),t=Mr(PS(e.value));c.on(u.CHAT_CHANGED,(()=>{e.value!==a&&(e.value=a,t.value=PS(e.value))})),_a([e,t],(([e,t],[n])=>{e===n&&void 0!==e&&jS(e,Rr(t))}),{deep:!0});const n=ks((()=>o.at(e.value)?.name));return{id:Tr(e),settings:t,name:n}}));function RS(){return x_(__,_.get(y,g_,{}))}const US=NS('chat_settings',(()=>{const e=Mr(v()),t=Mr(RS());return c.on(u.CHAT_CHANGED,(n=>{e.value!==n&&(e.value=n,t.value=RS())})),_a([e,t],(([e,t],[n])=>{e===n&&void 0!==e&&(_.set(y,g_,Rr(t)),ze())}),{deep:!0}),{id:Tr(e),settings:t}})),LS=NS('global_settings',(()=>{const e=Mr(!1);[u.APP_READY,'chatLoaded',u.SETTINGS_UPDATED].forEach((t=>c.once(t,(()=>{e.value=!0}))));const t=Mr(x_(b_,_.get(Ve,g_)));return _a(t,(e=>{_.set(Ve,g_,Rr(e)),b()}),{deep:!0}),{app_ready:e,settings:t}}));function zS(e){return x_(k_,_.get(Hl.getPresetList().presets[Number(e)],'extensions.tavern_helper',{}))}const VS=_.debounce((async function(e,t){_.set(Hl.getPresetList().presets[Number(e)],`extensions.${g_}`,t),await Hl.savePreset(Object.keys(Hl.getPresetList().preset_names)[Number(e)],Hl.getPresetList().presets[Number(e)])}),1e3),MS=NS('preset_settings',(()=>{const e=Mr(Hl.getSelectedPreset()),t=Mr(zS(e.value));c.on(u.OAI_PRESET_CHANGED_AFTER,(()=>{const n=Hl.getSelectedPreset();e.value!==n&&(e.value=n,t.value=zS(e.value))})),_a([e,t],(([t,n],[r])=>{t===r&&(t===Hl.getSelectedPreset()&&function(e,t){_.set(Hl.getPresetList().presets[Number(e)],`extensions.${g_}`,t),b()}(e.value,Rr(n)),VS(e.value,Rr(n)))}),{deep:!0});const n=ks((()=>Object.keys(Hl.getPresetList().preset_names)[Number(e.value)]));return{id:Tr(e),settings:t,name:n}}));function BS(e){let t=$('.mes');return 0!==e&&(t=t.filter(((t,n)=>{return i=Number($(n).attr('mesid')),r.length-i<=e;var i}))),function(e){return _(e.toArray()).map((e=>[Number($(e).attr('mesid')),$(e).find('pre').filter(((e,t)=>$(t).text().includes('<body'))).toArray()])).filter((([e,t])=>t.length>0)).fromPairs().value()}(t)}const FS=NS('message_iframe_runtimes',(()=>{const e=LS(),t=Br({});_a((()=>e.settings.render.enabled),((n,r)=>{n?t.value=BS(e.settings.render.depth):!n&&r&&(t.value={})}),{immediate:!0}),['chatLoaded',u.CHARACTER_MESSAGE_RENDERED,u.USER_MESSAGE_RENDERED,u.MESSAGE_UPDATED,u.MESSAGE_SWIPED,u.MESSAGE_DELETED].forEach((n=>{c.on(n,(()=>{e.settings.render.enabled&&(t.value=BS(e.settings.render.depth))}))}));return{runtimes:t,reloadAll:()=>{Gl()}}}));function ZS(e){return NS(`${e}_scripts`,(()=>{let t,n;switch(e){case'global':{const e=LS();t=ks({get:()=>e.settings.script.enabled.global,set:t=>{e.settings.script.enabled.global=t}}),n=ks({get:()=>e.settings.script.scripts,set:t=>{e.settings.script.scripts=t}});break}case'character':{const e=LS(),r=DS();t=ks({get:()=>void 0!==r.name&&e.settings.script.enabled.characters.includes(r.name),set:t=>{void 0!==r.name&&(t?e.settings.script.enabled.characters.push(r.name):_.pull(e.settings.script.enabled.characters,r.name))}}),n=ks({get:()=>r.settings.scripts,set:e=>{r.settings.scripts=e}});break}case'preset':{const e=LS(),r=MS();t=ks({get:()=>void 0!==r.name&&e.settings.script.enabled.presets.includes(r.name),set:t=>{void 0!==r.name&&(t?e.settings.script.enabled.presets.push(r.name):_.pull(e.settings.script.enabled.presets,r.name))}}),n=ks({get:()=>r.settings.scripts,set:e=>{r.settings.scripts=e}});break}}const r=ks((()=>t.value?_(n.value).filter((e=>e.enabled)).flatMap((e=>m_(e)?e:e.scripts.filter((e=>e.enabled)))).value():[]));return{enabled:t,script_trees:n,enabled_scripts:r}}))}const HS=ZS('global'),qS=ZS('character'),KS=ZS('preset');function GS(e,t){return`${e}_${Te(t)}`}const WS=NS('script_iframe_runtimes',(()=>{const e=LS(),t=HS(),n=qS(),r=KS(),i=Mr({}),o=ks((()=>e.app_ready?_([t,n,r]).flatMap((e=>e.enabled_scripts)).value():[])),a=ks((()=>_(o.value).map((e=>({id:e.id,content:e.content,reload_memo:_.get(i.value,e.id,'')}))).sortBy((e=>e.id)).value())),s=ks((()=>_(o.value).filter((e=>e.button.enabled&&e.button.buttons.some((e=>e.visible)))).map((e=>[e.id,e.button.buttons.filter((e=>e.visible)).map((t=>({button_id:GS(e.id,t.name),button_name:t.name})))])).fromPairs().value()));return{reload_memos:Tr(i),enabled_scripts:o,runtimes:a,button_map:s,get:e=>o.value.find((t=>t.id===e)),reload:e=>{_.set(i.value,e,Ie())},reloadAll:()=>{const e=Ie();i.value=Object.fromEntries(a.value.map((t=>[t.id,e])))}}}));function JS(e){return GS(String(sc.call(this)),e)}function YS(){return _.cloneDeep(WS().get(sc.call(this)).button.buttons)}function XS(e,t){WS().get(sc.call(this)).button.buttons='string'==typeof e?t:e}function QS(e,t){const n='string'==typeof e?t:e,r=YS.call(this),i=n.filter((e=>!r.some((t=>t.name===e.name))));0!==i.length&&XS.call(this,[...r,...i])}function eE(){return WS().get(sc.call(this)).info}function tE(e){WS().get(sc.call(this)).info=e}function nE(e,t,n){const r=e.get(t);if(r)return r;const i=n();return e.set(t,i),i}const rE=new Map;function iE(e,t){const n=nE(rE,ac.call(this),(()=>new Map));nE(n,e,(()=>new Set)).add(t)}function oE(){return nE(rE,ac.call(this),(()=>new Map))}function aE(e,t){iE.call(this,e,t),c.on(e,t)}function sE(e,t){aE.call(this,JS.call(this,e),t)}function lE(e,t){iE.call(this,e,t),c.makeLast(e,t)}function cE(e,t){iE.call(this,e,t),c.makeFirst(e,t)}function uE(e,t){const n=(...r)=>(oE.call(this).get(e)?.delete(n),t(...r));iE.call(this,e,n),c.once(e,n)}async function dE(e,...t){await c.emit(e,...t)}function pE(e,...t){c.emitAndWait(e,...t)}function fE(e,t){oE.call(this).get(e)?.delete(t),c.removeListener(e,t)}function hE(e){const t=oE.call(this);t.get(e)?.forEach((t=>{c.removeListener(e,t)})),t.delete(e)}function mE(e){oE.call(this).forEach(((t,n)=>{c.removeListener(n,e),t.delete(e)}))}function gE(){oE.call(this).forEach(((e,t)=>{e.forEach((e=>{c.removeListener(t,e)}))})),rE.delete(ac.call(this))}const vE={MESSAGE_IFRAME_RENDER_STARTED:'message_iframe_render_started',MESSAGE_IFRAME_RENDER_ENDED:'message_iframe_render_ended',GENERATION_STARTED:'js_generation_started',STREAM_TOKEN_RECEIVED_FULLY:'js_stream_token_received_fully',STREAM_TOKEN_RECEIVED_INCREMENTALLY:'js_stream_token_received_incrementally',GENERATION_ENDED:'js_generation_ended'},yE={APP_READY:'app_ready',EXTRAS_CONNECTED:'extras_connected',MESSAGE_SWIPED:'message_swiped',MESSAGE_SENT:'message_sent',MESSAGE_RECEIVED:'message_received',MESSAGE_EDITED:'message_edited',MESSAGE_DELETED:'message_deleted',MESSAGE_UPDATED:'message_updated',MESSAGE_FILE_EMBEDDED:'message_file_embedded',IMPERSONATE_READY:'impersonate_ready',CHAT_CHANGED:'chat_id_changed',GENERATION_AFTER_COMMANDS:'GENERATION_AFTER_COMMANDS',GENERATION_STARTED:'generation_started',GENERATION_STOPPED:'generation_stopped',GENERATION_ENDED:'generation_ended',EXTENSIONS_FIRST_LOAD:'extensions_first_load',EXTENSION_SETTINGS_LOADED:'extension_settings_loaded',SETTINGS_LOADED:'settings_loaded',SETTINGS_UPDATED:'settings_updated',GROUP_UPDATED:'group_updated',MOVABLE_PANELS_RESET:'movable_panels_reset',SETTINGS_LOADED_BEFORE:'settings_loaded_before',SETTINGS_LOADED_AFTER:'settings_loaded_after',CHATCOMPLETION_SOURCE_CHANGED:'chatcompletion_source_changed',CHATCOMPLETION_MODEL_CHANGED:'chatcompletion_model_changed',OAI_PRESET_CHANGED_BEFORE:'oai_preset_changed_before',OAI_PRESET_CHANGED_AFTER:'oai_preset_changed_after',OAI_PRESET_EXPORT_READY:'oai_preset_export_ready',OAI_PRESET_IMPORT_READY:'oai_preset_import_ready',WORLDINFO_SETTINGS_UPDATED:'worldinfo_settings_updated',WORLDINFO_UPDATED:'worldinfo_updated',CHARACTER_EDITED:'character_edited',CHARACTER_PAGE_LOADED:'character_page_loaded',CHARACTER_GROUP_OVERLAY_STATE_CHANGE_BEFORE:'character_group_overlay_state_change_before',CHARACTER_GROUP_OVERLAY_STATE_CHANGE_AFTER:'character_group_overlay_state_change_after',USER_MESSAGE_RENDERED:'user_message_rendered',CHARACTER_MESSAGE_RENDERED:'character_message_rendered',FORCE_SET_BACKGROUND:'force_set_background',CHAT_DELETED:'chat_deleted',CHAT_CREATED:'chat_created',GROUP_CHAT_DELETED:'group_chat_deleted',GROUP_CHAT_CREATED:'group_chat_created',GENERATE_BEFORE_COMBINE_PROMPTS:'generate_before_combine_prompts',GENERATE_AFTER_COMBINE_PROMPTS:'generate_after_combine_prompts',GENERATE_AFTER_DATA:'generate_after_data',GROUP_MEMBER_DRAFTED:'group_member_drafted',WORLD_INFO_ACTIVATED:'world_info_activated',TEXT_COMPLETION_SETTINGS_READY:'text_completion_settings_ready',CHAT_COMPLETION_SETTINGS_READY:'chat_completion_settings_ready',CHAT_COMPLETION_PROMPT_READY:'chat_completion_prompt_ready',CHARACTER_FIRST_MESSAGE_SELECTED:'character_first_message_selected',CHARACTER_DELETED:'characterDeleted',CHARACTER_DUPLICATED:'character_duplicated',STREAM_TOKEN_RECEIVED:'stream_token_received',FILE_ATTACHMENT_DELETED:'file_attachment_deleted',WORLDINFO_FORCE_ACTIVATE:'worldinfo_force_activate',OPEN_CHARACTER_LIBRARY:'open_character_library',ONLINE_STATUS_CHANGED:'online_status_changed',IMAGE_SWIPED:'image_swiped',CONNECTION_PROFILE_LOADED:'connection_profile_loaded',TOOL_CALLS_PERFORMED:'tool_calls_performed',TOOL_CALLS_RENDERED:'tool_calls_rendered',CHARACTER_MANAGEMENT_DROPDOWN:'charManagementDropdown',SECRET_WRITTEN:'secret_written',SECRET_DELETED:'secret_deleted',SECRET_ROTATED:'secret_rotated',SECRET_EDITED:'secret_edited',PRESET_CHANGED:'preset_changed',PRESET_DELETED:'preset_deleted',PRESET_RENAMED:'preset_renamed',MAIN_API_CHANGED:'main_api_changed',WORLDINFO_ENTRIES_LOADED:'worldinfo_entries_loaded'},bE=Fe;function _E(e){const t=Object.keys(Me).find((t=>t.endsWith(e)));return t?Me[t]:null}async function wE(t){const n=_E(t);if(!n)return null;const r=await fetch('/api/extensions/version',{method:'POST',headers:e(),body:JSON.stringify({extensionName:t,global:'global'===n})});return _.mapKeys(await r.json(),((e,t)=>_.snakeCase(t)))}function kE(e){return null!==_E(e)}async function xE(t,n){if(!bE()&&'global'===n)return Response.json({message:''},{status:403});return await fetch('/api/extensions/install',{method:'POST',headers:e(),body:JSON.stringify({url:t,global:'global'===n})})}async function SE(t){const n=_E(t);if(!n)return Response.json({message:''},{status:404});if(!bE()&&'global'===n)return Response.json({message:''},{status:403});return await fetch('/api/extensions/delete',{method:'POST',headers:e(),body:JSON.stringify({extensionName:t,global:'global'===n})})}async function EE(e){const t=_E(e);if(!t)return Response.json({message:''},{status:404});if(!bE()&&'global'===t)return Response.json({message:''},{status:403});const n=await wE(e);if(n.is_up_to_date)return Response.json({message:''},{status:200});const r=await SE(e);return r.ok?xE(n.remote_url,t):r}async function $E(t){const n=_E(t);if(!n)return Response.json({message:''},{status:404});if(!bE()&&'global'===n)return Response.json({message:''},{status:403});return await fetch('/api/extensions/update',{method:'POST',headers:e(),body:JSON.stringify({extensionName:t,global:'global'===n})})}async function OE(e){let t;if(!('string'==typeof e&&Ae(e)))try{if('string'==typeof e){const n=await fetch(e,{method:'GET',cache:'force-cache'});if(!n.ok)throw new Error('Failed to fetch image');const r=await n.blob();t=await Ce(r)}else t=await Ce(e)}catch(n){return}return t}function IE(e){if(0===e.length||'<START>'===e)return[];e.startsWith('<START>')||(e='<START>\n'+e.trim());return e.split(/<START>/gi).slice(1).map((e=>`<START>\n${e.trim()}\n`))}function TE(e){switch(e){case O.SYSTEM:return'system';case O.USER:return'user';case O.ASSISTANT:return'assistant';default:return'system'}}function AE(e,t){if(!t.overrides)return!1;if('with_depth_entries'===e)return!1===t.overrides.with_depth_entries;if('chat_history'===e){const e=t.overrides.chat_history;return void 0!==e&&0===e.length}const n=t.overrides[e];return void 0!==n&&''===n}function CE(){w(),k(),x(0),qe()}async function NE(e){const t=Be().extensionPrompts;Object.keys(t).filter((t=>e.some((e=>t.startsWith(e))))).forEach((e=>delete t[e])),Kl()}function PE(e,{once:t=!1}={}){if(e.forEach((e=>S(e.id??Ie(),e.content??'','none'===e.position?-1:1,e.depth??0,e.should_scan??!1,{system:0,user:1,assistant:2}[e.role??'system'],e.filter??null))),t){let t=!1;const n=()=>{t||(jE(e.map((e=>e.id))),t=!0)};c.once(vE.GENERATION_ENDED,n),c.once(yE.GENERATION_ENDED,n),c.once(yE.GENERATION_STOPPED,n)}}function jE(e){e.forEach((e=>{_.unset(I,e)}))}async function DE(e,t){const n=t=>{if(!e.overrides)return;const n=e.overrides[t];return'boolean'!=typeof n?n:void 0};AE('chat_history',e)||function(){const e=o.at(a),t=T(e?.data?.extensions?.depth_prompt?.prompt?.trim(),f,h)||'',n=e?.data?.extensions?.depth_prompt?.depth??4,r=N(e?.data?.extensions?.depth_prompt?.role??'system');S('DEPTH_PROMPT',t,E.IN_CHAT,n,Ve.note.allowWIScan,r)}(),AE('chat_history',e)||AE('author_note',e)||function(e){const t=e?.overrides?.author_note,n=t??$('#extension_floating_prompt').val();S(We,n,y[Je.position],y[Je.depth],Ve.note.allowWIScan,y[Je.role])}(e),AE('chat_history',e)||AE('persona_description',e)||function(){const e=Ke.persona_description,t='PERSONA_DESCRIPTION';if(S(t,'',E.IN_PROMPT,0),!e||Ke.persona_description_position===Ge.NONE)return;if([Ge.BOTTOM_AN,Ge.TOP_AN].includes(Ke.persona_description_position)&&Ye){const t=_.get(I,We),n=Ke.persona_description_position===Ge.TOP_AN?`${e}\n${t}`:`${t}\n${e}`;S(We,n,y[Je.position],y[Je.depth],Ve.note.allowWIScan,y[Je.role])}Ke.persona_description_position===Ge.AT_DEPTH&&S(t,e,E.IN_CHAT,Ke.persona_description_depth,!0,Ke.persona_description_role)}();const i=o.at(a),s=T(i?.data?.extensions?.depth_prompt?.prompt?.trim(),f,h),l=T(i?.data?.creator_notes?.trim(),f,h),{description:c,personality:u,persona:d,scenario:p,mesExamples:m,system:g,jailbreak:v}=A(),b=AE('char_description',e)?'':n('char_description')??c,w=AE('char_personality',e)?'':n('char_personality')??u,k=AE('persona_description',e)?'':n('persona_description')??d,x=AE('scenario',e)?'':n('scenario')??p;let O=IE(AE('dialogue_examples',e)?'':n('dialogue_examples')??m),j=[];j=he(O);const{promptBias:D}=C(t,'normal');e.inject&&await async function(e){if(!e||!Array.isArray(e.inject))return;PE(e.inject.map((e=>({id:Ie(),...e}))),{once:!0})}(e);let R=[];e.overrides?.chat_history?R=[...e.overrides.chat_history].reverse():(R=me(await async function(e){const t=e.filter((e=>!e.is_system));return await Promise.all(t.map((async(e,n)=>{const r=e.mes,i=e.is_user?He.USER_INPUT:He.AI_OUTPUT,o=Ze(r,i,{isPrompt:!0,depth:t.length-n-1});return{...e,mes:o,index:n}})))}(r)),void 0!==e.max_chat_history&&(R=R.slice(0,e.max_chat_history))),S('TEMP_USER_MESSAGE',t,E.IN_PROMPT,0,!0,1);const U=await async function(e,t,n){const r=e.filter((e=>'system'!==e.role)).map((e=>{const t='user'===e.role?f:h;return ee?`${t}: ${e.content}`:e.content})).reverse(),i=P(),o={personaDescription:t.overrides?.persona_description??n.persona,characterDescription:t.overrides?.char_description??n.description,characterPersonality:t.overrides?.char_personality??n.personality,characterDepthPrompt:n.charDepthPrompt,scenario:t.overrides?.scenario??n.scenario,creatorNotes:n.creatorNotes},{worldInfoString:a,worldInfoBefore:s,worldInfoAfter:l,worldInfoExamples:c,worldInfoDepth:u}=await te(r,i,!1,o);await NE(['customDepthWI']),AE('with_depth_entries',t)||function(e){Array.isArray(e)&&e.forEach((e=>{const t=e.entries.join('\n');S(`customDepthWI-${e.depth}-${e.role}`,t,E.IN_CHAT,e.depth,!1,e.role)}))}(u);const d=AE('world_info_before',t)?null:void 0!==t.overrides?.world_info_before?t.overrides.world_info_before:s,p=AE('world_info_after',t)?null:void 0!==t.overrides?.world_info_after?t.overrides.world_info_after:l;return{worldInfoString:a,worldInfoBefore:d,worldInfoAfter:p,worldInfoExamples:c,worldInfoDepth:AE('with_depth_entries',t)?null:u}}(R,e,{description:c,personality:u,persona:d,scenario:p,charDepthPrompt:s,creatorNotes:l});return S('TEMP_USER_MESSAGE','',E.IN_PROMPT,0,!0,1),O=AE('dialogue_examples',e)?[]:await async function(e,t){for(const n of t){if(!n.content.length)continue;const t=IE(T(n.content,f,h));n.position===ne.before?e.unshift(...t):e.push(...t)}return e}(O,U.worldInfoExamples),{characterInfo:{description:b,personality:w,persona:k,scenario:x,system:g,jailbreak:v},chatContext:{oaiMessages:R,oaiMessageExamples:j,promptBias:D},worldInfo:U}}const RE=['world_info_before','persona_description','char_description','char_personality','scenario','world_info_after','dialogue_examples','chat_history','user_input'],UE=['world_info_before','persona_description','char_description','char_personality','scenario','world_info_after','dialogue_examples','chat_history','user_input'],LE=1;async function zE(e,t,n,r,i){const o=t.order||UE,a=o.findIndex((e=>'string'==typeof e&&'chat_history'===e.toLowerCase())),s=o.findIndex((e=>'string'==typeof e&&'user_input'===e.toLowerCase())),l=-1!==s,c=-1!==a,u=AE('chat_history',t);let d;if(i&&l)d=await ye.createAsync('user',i,'user_input');else if(d=await ye.createAsync('user',r,'user_input'),t.image&&l&&!Array.isArray(t.image)){const e=await OE(t.image);e&&await d.addImage(e)}if(u||!c){const e=l?s:o.length;return void n.add(new be('user_input',d),e)}const p=new be('chat_history'),f=fe.new_chat_prompt,h=await ye.createAsync('system',j(f),'newMainChat');n.reserveBudget(h),p.add(h);const m=e.chatContext.oaiMessages[e.chatContext.oaiMessages.length-1],g=await ye.createAsync('user',fe.send_if_empty,'emptyUserMessageReplacement');if(m&&'assistant'===m.role&&fe.send_if_empty&&n.canAfford(g)&&p.add(g),!l){let n;n=i?{role:'user',content:i,identifier:'user_input'}:{role:'user',content:r,identifier:'user_input',image:t.image&&!Array.isArray(t.image)?await OE(t.image):void 0},e.chatContext.oaiMessages.unshift(n)}const v=(await async function(e,t,n=[],r){const i=[...t];let o=0;const a=[],s=_.get(I,We,{});s&&s.value&&a.push({role:TE(s.role),content:s.value,identifier:'authorsNote',injection_depth:s.depth,injected:!0});Ke.persona_description&&Ke.persona_description_position===Ge.AT_DEPTH&&a.push({role:'system',content:Ke.persona_description,identifier:'persona_description',injection_depth:Ke.persona_description_depth,injected:!0});if(!AE('char_depth_prompt',r)){const t=e.worldInfo.worldInfoDepth;if(t)for(const e of t){const t=await D(`customDepthWI-${e.depth}-${e.role}`);a.push({role:TE(e.role),content:t,injection_depth:e.depth,injected:!0})}}Array.isArray(n)&&PE(n.map((e=>({id:Ie(),...e}))),{once:!0});for(let l=0;l<=R;l++){const e=a.filter((e=>e.injection_depth===l&&e.content)),t=['system','user','assistant'],n=[],r='\n';for(const i of t){const t=e.filter((e=>e.role===i)).map((e=>e.content.trim())).join(r);t&&n.push({role:i,content:t,injected:!0})}if(n.length){const e=l+o;i.splice(e,0,...n),o+=n.length}}return i}(e,e.chatContext.oaiMessages,t.inject,t)).reverse(),y=_e(),b=[...v];for(const w of b){const e=new Qe(w);e.identifier='chat_history-'+(v.length-b.indexOf(w)),e.content=j(e.content);const t=await ye.fromPromptAsync(e),r=we(fe);if(r&&r.serviceSettings.names_behavior===LE&&e.name){const n=r.isValidName(e.name)?e.name:r.sanitizeName(e.name);await t.setName(n)}if(y&&w.image&&await t.addImage(w.image),!n.canAfford(t))break;p.add(t)}n.freeBudget(h),l?(n.add(p,a),n.add(new be('user_input',d),s)):n.add(p,a)}async function VE(e,t,n){const r=new ve;r.setTokenBudget(fe.openai_max_context,fe.openai_max_tokens),r.reserveBudget(3);const i=t.order||UE,o=i.reduce(((e,t,n)=>('string'==typeof t?e[t.toLowerCase()]=n:'object'==typeof t&&(e[`custom_prompt_${n}`]=n),e)),{}),{systemPrompts:a,dialogue_examples:s}=await async function(e,t){const n=new Xe,r=new be('dialogue_examples'),i=t.order||RE,o={world_info_before:e.worldInfo.worldInfoBefore,persona_description:Ke.persona_description&&Ke.persona_description_position===Ge.IN_PROMPT?e.characterInfo.persona:null,char_description:e.characterInfo.description,char_personality:e.characterInfo.personality,scenario:e.characterInfo.scenario,world_info_after:e.worldInfo.worldInfoAfter};for(const[a,s]of i.entries())if('string'==typeof s){const e=o[s];e&&n.add(new Qe({identifier:s,role:'system',content:e,system_prompt:!0}))}else if('object'==typeof s&&s.role&&s.content){const e=`custom_prompt_${a}`;n.add(new Qe({identifier:e,role:s.role,content:s.content,system_prompt:'system'===s.role}))}if(e.chatContext.oaiMessageExamples.length>0)for(const a of[...e.chatContext.oaiMessageExamples]){const t=e.chatContext.oaiMessageExamples.indexOf(a),n=[];for(let e=0;e<a.length;e++){const r=a[e],i='system',o=r.content||'',s=`dialogue_examples ${t}-${e}`,l=await ye.createAsync(i,o,s);await l.setName(r.name),n.push(l)}for(const e of n)r.add(e)}return{systemPrompts:n,dialogue_examples:r}}(e,t),l=async(e,t)=>{if('object'==typeof e){const n=new be(`custom_prompt_${t}`),i=await ye.createAsync(e.role,e.content,`custom_prompt_${t}`);n.add(i),r.add(n,t)}else if(a.has(e)){const t=a.get(e),n=new be(e),i=await ye.fromPromptAsync(t);n.add(i),r.add(n,o[e])}};for(const[c,u]of i.entries())'string'==typeof u?AE(u,t)||await l(u,c):'object'==typeof u&&u.role&&u.content&&await l(u,c);const d=i.findIndex((e=>'string'==typeof e&&'dialogue_examples'===e.toLowerCase()));-1===d||AE('dialogue_examples',t)||r.add(s,d);const p=await ye.createAsync('user',n,'user_input');r.reserveBudget(p),await zE(e,t,r,n,t.processedImageArray),r.freeBudget(p),fe.squash_system_messages&&await r.squashSystemMessages();const f=r.getChat();return c.emit(u.CHAT_COMPLETION_PROMPT_READY,{chat:f,dryRun:!1}),{prompt:f}}function ME(e=''){const t=function(e){return''===e&&(e=fe.send_if_empty.trim()),Ze(e,He.USER_INPUT,{isPrompt:!0,depth:0})}(j(e))||'';return t}async function BE(e='',t=!0,n=void 0){let r,i,o=ME(e);return Array.isArray(n)&&n.length>0&&(t?(r=function(e,t){const n='__IMG_ARRAY_MARKER_',r=e+n;let i,o;const a=new Promise(((e,t)=>{i=e,o=t}));let s=null,l=!0;const u=async e=>{try{s=setTimeout((()=>{console.warn('[TavernHelper][Generate:] '),o(new Error(''))}),3e4);for(let r=e.chat.length-1;r>=0;r--){const a=e.chat[r],l='string'==typeof a.content?a.content:'';if('user'===a.role&&l.includes(n))try{const e=fe.inline_image_quality||'low',r=(await Promise.all(t.map((async t=>{try{const n=await OE(t);return n?{type:'image_url',image_url:{url:n,detail:e}}:(console.warn('[TavernHelper][Generate:] '),null)}catch(n){return console.warn('[TavernHelper][Generate:] :',n),null}})))).filter((e=>null!==e)),o={type:'text',text:l.replace(n,'')};return a.content=[o,...r],s&&(clearTimeout(s),s=null),void i()}catch(Jh){return s&&(clearTimeout(s),s=null),console.error('[TavernHelper][Generate:] :',Jh),void o(Jh)}}console.warn('[TavernHelper][Generate:] '),i()}catch(Jh){console.error('[TavernHelper][Generate:] imageArrayHandler :',Jh),o(Jh)}};return c.once('chat_completion_prompt_ready',u),{userInputWithMarker:r,imageProcessingPromise:a,resolveImageProcessing:i,rejectImageProcessing:o,cleanup:()=>{if(s&&(clearTimeout(s),s=null),l)try{c.removeListener('chat_completion_prompt_ready',u),l=!1}catch(Jh){console.warn('[TavernHelper][Generate:] :',Jh)}}}}(o,n),o=r.userInputWithMarker):i=await async function(e,t){const n=fe.inline_image_quality||'low';return[{type:'text',text:e},...(await Promise.all(t.map((async e=>{try{const t=await OE(e);return t?{type:'image_url',image_url:{url:t,detail:n}}:(console.warn('[TavernHelper][Generate:] '),null)}catch(t){return console.warn('[TavernHelper][Generate:] '),null}})))).filter((e=>null!==e))]}(o,n)),{processedUserInput:o,imageProcessingSetup:r,processedImageArray:i}}class FE{generator;stoppingStrings;result;isStopped;isFinished;abortController;messageBuffer;generationId;constructor(e,t){this.result='',this.messageBuffer='',this.isStopped=!1,this.isFinished=!1,this.generator=this.nullStreamingGeneration,this.abortController=t,this.generationId=e}onProgressStreaming(e){const t=e.text.slice(this.messageBuffer.length);this.messageBuffer=e.text;let n=L(t,!1,!1,!e.isFinal,this.stoppingStrings);const r=['*','"','```'];for(const i of r)if(!e.isFinal&&V(M(n,i))){const e=i.length>1?'\n':'';n=n.trimEnd()+e+i}if(c.emit('js_stream_token_received_fully',e.text,this.generationId),c.emit('js_stream_token_received_incrementally',n,this.generationId),e.isFinal){const t=L(e.text,!1,!1,!1,this.stoppingStrings);c.emit('js_generation_before_end',{message:t},this.generationId),c.emit('js_generation_ended',t,this.generationId),e.text=t}}onErrorStreaming(){this.abortController&&this.abortController.abort(),this.isStopped=!0,CE(),Kl()}async*nullStreamingGeneration(){throw Error('Generation function for streaming is not hooked up')}async generate(){try{const e=new Ne(1e3/Ke.streaming_fps);for await(const{text:t}of this.generator()){if(this.isStopped)return void(this.messageBuffer='');this.result=t,await e.tick((()=>this.onProgressStreaming({text:this.result,isFinal:!1})))}this.isStopped?this.messageBuffer='':this.onProgressStreaming({text:this.result,isFinal:!0})}catch(e){if(!this.isFinished)throw this.onErrorStreaming(),Error(`Generate method error: ${e}`);return this.messageBuffer='',this.result}return this.isFinished=!0,this.result}}async function ZE(e,t=!1,n=void 0,r=void 0,i,o){let a='',s=null;try{if(U(),o?.apiurl&&(s=e=>{if(e.chat_completion_source=o.source||'openai',e.reverse_proxy=o.apiurl,e.proxy_password=o.key,!o.model)throw Error('[TavernHelper][Generate:API] API');return e.model=o.model,e},c.once(u.CHAT_COMPLETION_SETTINGS_READY,s)),r)try{await r.imageProcessingPromise}catch(l){throw new Error(`: ${l?.message||''}`)}if(void 0!==n&&''!==n||(n=Ie()),c.emit('js_generation_started',n),t){const t=fe.stream_openai;t||(fe.stream_openai=!0,b());const r=new FE(n,i);r.generator=await ke('normal',e.prompt,i.signal),a=await r.generate(),t!==fe.stream_openai&&(fe.stream_openai=t,b())}else{const t=await ke('normal',e.prompt,i.signal);a=await async function(e,t){if(!e)throw Error('');if(e.error)throw e?.response&&toastr.error(e.response,Se`API `,{preventDuplicates:!0}),Error(e?.response);const n={message:(r=e,'string'==typeof r?r:r?.choices?.[0]?.message?.content??r?.choices?.[0]?.text??r?.text??r?.message?.content?.[0]?.text??r?.message?.tool_plan??'')};var r;return c.emit('js_generation_before_end',n,t),c.emit('js_generation_ended',n.message,t),n.message}(t,n)}}catch(Jh){throw r&&r.rejectImageProcessing(Jh),Jh}finally{s&&c.removeListener(u.CHAT_COMPLETION_SETTINGS_READY,s),await NE(['INJECTION'])}return a}const HE=new Map;function qE(e){if(HE.has(e)){const t=HE.get(e);return t?.abort(` ID '${e}' `),HE.delete(e),c.emit(u.GENERATION_STOPPED,e),!0}return!1}function KE(){try{for(const[e,t]of HE.entries())t.abort(` ID '${e}' `),c.emit(u.GENERATION_STOPPED,e);return HE.clear(),!0}catch(Jh){return console.error(`[TavernHelper][Generate:] : ${Jh}`),!1}}function GE(e){return{world_info_before:e.world_info_before,persona_description:e.persona_description,char_description:e.char_description,char_personality:e.char_personality,scenario:e.scenario,world_info_after:e.world_info_after,dialogue_examples:e.dialogue_examples,with_depth_entries:e.chat_history?.with_depth_entries,author_note:e.chat_history?.author_note,chat_history:e.chat_history?.prompts}}async function WE({generation_id:e,user_input:t='',use_preset:n=!0,image:r,overrides:i,max_chat_history:s,inject:l=[],order:d,stream:p=!1,custom_api:f}={}){const m=e||Ie(),g=new AbortController;let v;HE.set(m,g);try{const e=await BE(t,n,r),{processedUserInput:y,processedImageArray:b}=e;v=e.imageProcessingSetup,await c.emit(u.GENERATION_AFTER_COMMANDS,'normal',{},!1);const w=await DE({overrides:i,max_chat_history:s,inject:l,order:d},y),k=n?await async function(e,t,n){let r=null;const i=o.at(a);try{const o=n?.overrides?.scenario;o&&i&&(r=i.scenario||null,i.scenario=o);const a={role:'user',content:t,image:n.image};n.image&&(Array.isArray(n.image)?delete a.image:a.image=await OE(n.image)),e.chatContext.oaiMessages.unshift(a);const s={name2:h,charDescription:e.characterInfo.description,charPersonality:e.characterInfo.personality,Scenario:e.characterInfo.scenario,worldInfoBefore:e.worldInfo.worldInfoBefore,worldInfoAfter:e.worldInfo.worldInfoAfter,extensionPrompts:Be().extensionPrompts,bias:e.chatContext.promptBias,type:'normal',quietPrompt:'',quietImage:null,cyclePrompt:'',systemPromptOverride:e.characterInfo.system,jailbreakPromptOverride:e.characterInfo.jailbreak,personaDescription:e.characterInfo.persona,messages:e.chatContext.oaiMessages,messageExamples:e.chatContext.oaiMessageExamples},[l]=await ge(s,!1);return{prompt:l}}finally{null!==r&&i&&(i.scenario=r)}}(w,y,{image:r,overrides:i,max_chat_history:s,inject:l,order:d}):await VE(w,{image:r,overrides:i,max_chat_history:s,inject:l,order:d,processedImageArray:b},y);await c.emit(u.GENERATE_AFTER_DATA,k);return await ZE(k,p,m,v,g,f)}catch(Jh){throw v&&v.rejectImageProcessing(Jh),Jh}finally{!function(e){if(e)try{e.cleanup(),e.rejectImageProcessing(new Error('Generation stopped'))}catch(Jh){console.warn(`[TavernHelper][Generate:] : ${Jh}`)}}(v),HE.delete(m),0===HE.size&&CE()}}async function JE(e){const t=function(e){return{generation_id:e.generation_id,user_input:e.user_input,use_preset:!0,image:e.image,stream:e.should_stream??!1,overrides:void 0!==e.overrides?GE(e.overrides):void 0,inject:e.injects,max_chat_history:'number'==typeof e.max_chat_history?e.max_chat_history:void 0,custom_api:e.custom_api}}(e);return await WE(t)}async function YE(e){const t=function(e){return{generation_id:e.generation_id,user_input:e.user_input,use_preset:!1,image:e.image,stream:e.should_stream??!1,max_chat_history:'number'==typeof e.max_chat_history?e.max_chat_history:void 0,overrides:e.overrides?GE(e.overrides):void 0,inject:e.injects,order:e.ordered_prompts,custom_api:e.custom_api}}(e);return await WE(t)}function XE(e,t){_.set(window,e,t),dE.call(this,`global_${e}_initialized`)}async function QE(e){if(!_.has(window,e))return new Promise((t=>{uE.call(this,`global_${e}_initialized`,(()=>{_.set(this,e,_.get(window,e)),t()}))}));_.set(this,e,_.get(window,e))}function e$(e){switch(e.type){case'message':{if(e.message_id=void 0===e.message_id||'latest'===e.message_id?-1:e.message_id,!_.inRange(e.message_id,-r.length,r.length))throw Error(` '${e.message_id}'  [${-r.length}, ${r.length})`);const t=r.at(e.message_id);return t?.variables?.[t?.swipe_id??0]??{}}case'chat':return _.get(y,'variables',{});case'character':return DS().settings.variables;case'preset':return MS().settings.variables;case'global':return Ve.variables.global;case'script':if(!e.script_id)throw Error(',  script_id');return WS().get(e.script_id)?.data??{};case'extension':return _.get(Ve,e.extension_id,{})}}function t$(e={type:'chat'}){return _.cloneDeep(e$(e))}function n$(e={type:'chat'}){return'script'===e.type?t$({type:'script',script_id:sc.call(this)}):t$(e)}function r$(){const e=ac.call(this).startsWith('TH-message');let t=_({});return t=t.assign(e$({type:'global'}),e$({type:'character'})),e||(t=t.assign(e$({type:'script',script_id:sc.call(this)}))),t=t.assign(e$({type:'chat'})),e&&(t=t.assign(...r.slice(0,lc.call(this)+1).map((e=>e?.variables?.[e?.swipe_id??0])))),structuredClone(t.value())}function i$(e,t={type:'chat'}){switch(t.type){case'message':{if(t.message_id=void 0===t.message_id||'latest'===t.message_id?-1:t.message_id,!_.inRange(t.message_id,-r.length,r.length))throw Error(` '${t.message_id}'  (${-r.length}, ${r.length})`);const n=r.at(t.message_id);_.has(n,'variables')||_.set(n,'variables',_.times(n.swipes?.length??1,_.constant({}))),_.isPlainObject(_.get(n,'variables'))&&_.set(n,'variables',_.range(0,n.swipes?.length??1).map((e=>n.variables[e]??{}))),_.set(n,['variables',_.get(n,'swipe_id',0)],e),Kl();break}case'chat':_.set(y,'variables',e),ze();break;case'character':{const t=DS();if(void 0===t.id)throw new Error('');ei(t.settings,'variables').value=e;break}case'preset':ei(MS().settings,'variables').value=e;break;case'global':_.set(Ve.variables,'global',e),b();break;case'script':{if(!t.script_id)throw Error(',  script_id');const n=WS().get(t.script_id);if(!n)throw Error(`, '${t.script_id}' `);n.data=e;break}case'extension':_.set(Ve,t.extension_id,e),b()}}function o$(e,t={type:'chat'}){return'script'===t.type?i$(e,{type:'script',script_id:sc.call(this)}):i$(e,t)}function a$(e,t={type:'chat'}){let n=e(t$(t));var r;return!(r=n)||'object'!=typeof r&&'function'!=typeof r||'function'!=typeof r.then?i$(n,t):n=n.then((e=>(i$(e,t),e))),n}function s$(e,t={type:'chat'}){return'script'===t.type?a$(e,{type:'script',script_id:sc.call(this)}):a$(e,t)}function l$(e,t={type:'chat'}){return a$((t=>_.mergeWith(t,e,((e,t)=>_.isArray(t)?t:void 0))),t)}function c$(e,t={type:'chat'}){return'script'===t.type?l$(e,{type:'script',script_id:sc.call(this)}):l$(e,t)}function u$(e,t={type:'chat'}){return a$((t=>_.mergeWith({},e,t,((e,t)=>_.isArray(t)?t:void 0))),t)}function d$(e,t={type:'chat'}){return'script'===t.type?u$(e,{type:'script',script_id:sc.call(this)}):u$(e,t)}function p$(e,t={type:'chat'}){let n=!1;return{variables:a$((t=>(n=_.unset(t,e),t)),t),delete_occurred:n}}function f$(e,t={type:'chat'}){return'script'===t.type?p$(e,{type:'script',script_id:sc.call(this)}):p$(e,t)}$(document).on('click','#mes_stop',(function(){if(B()){for(const[,e]of HE.entries())e.abort('Clicked stop button');HE.clear(),CE()}}));const h$=[{regex:/\{\{get_(message|chat|character|preset|global)_variable::(.*?)\}\}/gi,replace:(e,t,n,r)=>{const i=e$('message'!==n?{type:n}:{type:n,message_id:e.message_id??'latest'}),o=_.get(i,_.unescape(r),null);return'string'==typeof o?o:JSON.stringify(o)}}];function m$(e,t){h$.push({regex:e,replace:t})}function g$(e,t,n,{depth:i,character_name:o}={}){let a=Ze(e,{user_input:He.USER_INPUT,ai_output:He.AI_OUTPUT,slash_command:He.SLASH_COMMAND,world_info:He.WORLD_INFO,reasoning:He.REASONING}[t],{characterOverride:o,isMarkdown:'display'===n,isPrompt:'prompt'===n,depth:i});return a=j(a,void 0,o,void 0,void 0),h$.forEach((e=>{a=a.replace(e.regex,((n,...o)=>e.replace({role:{user_input:'user',ai_output:'assistant',slash_command:'system',world_info:'system',reasoning:'system'}[t],message_id:void 0!==i?r.length-i-1:void 0},n,...o)))})),a}function v$(e,t){return{id:e.id,script_name:e.scriptName,enabled:!e.disabled,run_on_edit:e.runOnEdit,scope:t,find_regex:e.findRegex,replace_string:e.replaceString,source:{user_input:e.placement.includes(He.USER_INPUT),ai_output:e.placement.includes(He.AI_OUTPUT),slash_command:e.placement.includes(He.SLASH_COMMAND),world_info:e.placement.includes(He.WORLD_INFO)},destination:{display:e.markdownOnly,prompt:e.promptOnly},min_depth:'number'==typeof e.minDepth?e.minDepth:null,max_depth:'number'==typeof e.maxDepth?e.maxDepth:null}}function y$(e){return{id:e.id,scriptName:e.script_name,disabled:!e.enabled,runOnEdit:e.run_on_edit,findRegex:e.find_regex,replaceString:e.replace_string,trimStrings:[],placement:[...e.source.user_input?[He.USER_INPUT]:[],...e.source.ai_output?[He.AI_OUTPUT]:[],...e.source.slash_command?[He.SLASH_COMMAND]:[],...e.source.world_info?[He.WORLD_INFO]:[]],substituteRegex:0,minDepth:e.min_depth,maxDepth:e.max_depth,markdownOnly:e.destination.display,promptOnly:e.destination.prompt}}function b$(){return Ve?.character_allowed_regex?.includes(o.at(a)?.avatar??'')}function _$({scope:e='all',enable_state:t='all'}={}){if(!['all','enabled','disabled'].includes(t))throw Error(` enable_state ,  'all', 'enabled'  'disabled', : ${t}`);if(!['all','global','character'].includes(e))throw Error(` scope ,  'all', 'global'  'character', : ${e}`);let n=[];return'all'!==e&&'global'!==e||(n=[...n,...(Ve.regex??[]).map((e=>v$(e,'global')))]),'all'!==e&&'character'!==e||(n=[...n,...(o.at(a)?.data?.extensions?.regex_scripts??[]).map((e=>v$(e,'character')))]),'all'!==t&&(n=n.filter((e=>e.enabled===('enabled'===t)))),structuredClone(n)}const w$=_.debounce((async function(){await t(),await Gl(),await c.emit(u.CHAT_CHANGED,v())}),1e3);async function k$(e,{scope:t='all'}){if(!['all','global','character'].includes(t))throw Error(` scope ,  'all', 'global'  'character', : ${t}`);const n=e.filter((e=>''==e.script_name));if(n.length>0)throw Error(`:\n${JSON.stringify(n.map((e=>e.id)))}`);const[r,i]=_.partition(e,(e=>'global'===e.scope)).map((e=>e.map(y$))),s=o.at(a);'all'!==t&&'global'!==t||(Ve.regex=r),'all'!==t&&'character'!==t||s&&(s.data.extensions.regex_scripts=i,await Le(a,'regex_scripts',i)),w$()}async function x$(e,{scope:t='all'}={}){let n=_$({scope:t});return n=await e(n),await k$(n,{scope:t}),n}async function S$(t,n){const r=new File([n],t,{type:'image/png'}),i=new FormData;i.append('avatar',r),i.append('file_type','png'),i.append('preserved_name',r.name);const o=e();return _.unset(o,'Content-Type'),fetch('/api/characters/import',{method:'POST',headers:o,body:i,cache:'no-cache'}).then((e=>($('#character_search_bar').val('').trigger('input'),e)))}async function E$(t,n){if(void 0===a)throw Error(', ');const r=new FormData;r.append('avatar',new File([n],t+'.jsonl',{type:'application/json'})),r.append('file_type','jsonl'),r.append('avatar_url',o[a].avatar),r.append('character_name',o[a].name),r.append('user_name',f);const i=e();return _.unset(i,'Content-Type'),fetch('/api/chats/import',{method:'POST',headers:i,body:r,cache:'no-cache'})}async function $$(e,t){try{return await xe('openai').savePreset(e,JSON.parse(t)),!0}catch(Jh){return!1}}async function O$(t,n){const r=new File([n],t,{type:'application/json'}),i=new FormData;i.append('avatar',r);const o=e();return _.unset(o,'Content-Type'),fetch('/api/worldinfo/import',{method:'POST',headers:o,body:i,cache:'no-cache'}).then((t=>(async function(){const t=await fetch('/api/settings/get',{method:'POST',headers:e(),body:JSON.stringify({})});if(t.ok){const e=await t.json();X.length=0,X.push(...e.world_names?.length?e.world_names:[]),$('#world_info').find('option[value!=""]').remove(),$('#world_editor_select').find('option[value!=""]').remove(),X.forEach(((e,t)=>{$('#world_info').append(`<option value='${t}'${Q.includes(e)?' selected':''}>${e}</option>`),$('#world_editor_select').append(`<option value='${t}'>${e}</option>`)}))}}(),t)))}function I$(e,t){const n=JSON.parse(t);return!!_.has(n,'findRegex')&&(_.set(n,'id',Ie()),_.set(n,'scriptName',e),Ve.regex.push(n),w$(),!0)}class T${character_data;constructor(e){this.character_data=e}static find({name:e,allow_avatar:t=!0}){if(!e||'current'===e)return void 0===a?null:o[Number(a)];if(t){const t=o.find((t=>t.avatar===e));if(t)return t}const n=o.filter((n=>n.name===e||t&&n.avatar===e));return n.length>1&&console.warn(`, : ${e}`),n[0]||null}static findCharacterIndex(e){const t=[(e,t)=>e===t,(e,t)=>e.startsWith(t),(e,t)=>e.includes(t)],n=o.findIndex((t=>t.avatar===e));if(-1!==n)return n;for(const r of t){const t=o.findIndex((t=>r(t.name.toLowerCase(),e.toLowerCase())));if(-1!==t)return t}return-1}static async getChatsFromFiles(t,n){const r={},i=Object.values(t).sort(((e,t)=>e.file_name.localeCompare(t.file_name))).reverse(),o=i.map((async({file_name:t})=>{const i=n?'':t.split(' - ')[0];let o=null,a='';!n&&i&&(o=T$.find({name:i}),o&&(a=o.avatar));const s=n?'/api/chats/group/get':'/api/chats/get',l=n?JSON.stringify({id:t}):JSON.stringify({ch_name:i,file_name:t.replace('.jsonl',''),avatar_url:a}),c=await fetch(s,{method:'POST',headers:e(),body:l,cache:'no-cache'});if(!c.ok)return;const u=await c.json();n||u.shift(),r[t]=u}));return await Promise.all(o),r}getCardData(){return this.character_data}getAvatarId(){return this.character_data.avatar||''}getRegexScripts(){return this.character_data.data?.extensions?.regex_scripts||[]}getCharacterBook(){return this.character_data.data?.character_book||null}getWorldName(){return this.character_data.data?.extensions?.world||''}}function A$(e,t=!0){try{e=e||'current';const n=T$.find({name:e,allow_avatar:t});if(!n)return null;return new T$(n).getCardData()}catch(n){throw Error(`${e?` '${e}' `:''}: ${n.message}`)}}function C$(e,t=!0){e=e||'current';const n=T$.find({name:e,allow_avatar:t});if(!n)return null;const r=new T$(n).getAvatarId(),i=Z('avatar',r);return'/characters/'+i.substring(i.lastIndexOf('=')+1)}async function N$(e,t=!0){e=e||'current';const n=T$.find({name:e,allow_avatar:t});if(!n)return null;const r=new T$(n),i=T$.findCharacterIndex(r.getAvatarId());if(-1===i)return null;return await F(i)}async function P$(e,t=!1){return await T$.getChatsFromFiles(e,t)}function j$(){return structuredClone({selected_global_lorebooks:(e=le()).world_info.globalSelect,scan_depth:e.world_info_depth,context_percentage:e.world_info_budget,budget_cap:e.world_info_budget_cap,min_activations:e.world_info_min_activations,max_depth:e.world_info_min_activations_depth_max,max_recursion_steps:e.world_info_max_recursion_steps,insertion_strategy:{0:'evenly',1:'character_first',2:'global_first'}[e.world_info_character_strategy],include_names:e.world_info_include_names,recursive:e.world_info_recursive,case_sensitive:e.world_info_case_sensitive,match_whole_words:e.world_info_match_whole_words,use_group_scoring:e.world_info_use_group_scoring,overflow_alert:e.world_info_overflow_alert});var e}function D$(e){if(e.selected_global_lorebooks){const t=e.selected_global_lorebooks.filter((e=>!X.includes(e)));if(t.length>0)throw Error(`, : ${JSON.stringify(t)}`)}const n=j$();e=_.omitBy(e,((e,t)=>e===n[t])),function(e){let n=$(),r=$();const i={selected_global_lorebooks:e=>{$('#world_info').find('option[value!=""]').remove(),X.forEach(((t,n)=>$('#world_info').append(`<option value='${n}'${e.includes(t)?' selected':''}>${t}</option>`))),Q.length=0,Q.push(...e),t()},scan_depth:e=>{n=n.add($('#world_info_depth').val(e))},context_percentage:e=>{n=n.add($('#world_info_budget').val(e))},budget_cap:e=>{n=n.add($('#world_info_budget_cap').val(e))},min_activations:e=>{n=n.add($('#world_info_min_activations').val(e))},max_depth:e=>{n=n.add($('#world_info_min_activations_depth_max').val(e))},max_recursion_steps:e=>{n=n.add($('#world_info_max_recursion_steps').val(e))},insertion_strategy:e=>{const t={evenly:0,character_first:1,global_first:2}[e];$(`#world_info_character_strategy option[value='${t}']`).prop('selected',!0),r=r.add($('#world_info_character_strategy').val(t))},include_names:e=>{n=n.add($('#world_info_include_names').prop('checked',e))},recursive:e=>{n=n.add($('#world_info_recursive').prop('checked',e))},case_sensitive:e=>{n=n.add($('#world_info_case_sensitive').prop('checked',e))},match_whole_words:e=>{n=n.add($('#world_info_match_whole_words').prop('checked',e))},use_group_scoring:e=>{r=r.add($('#world_info_use_group_scoring').prop('checked',e))},overflow_alert:e=>{r=r.add($('#world_info_overflow_alert').prop('checked',e))}};Object.entries(e).filter((([e,t])=>void 0!==t)).forEach((([e,t])=>{i[e]?.(t)})),n.trigger('input'),r.trigger('change')}(e)}function R$(){return structuredClone(X)}async function U$(e){return oe(e)}async function L$(e){return re(e,{interactive:!1})}function z$({name:e=o[a]?.avatar??null}={}){const t=T$.find({name:e??'current'});if(!t)throw Error(`${'current'===e?'':` '${e}' `}`);const n={primary:null,additional:[]};t.data?.extensions?.world&&(n.primary=t.data?.extensions?.world);const r=t.avatar.replace(/\.[^/.]+$/,''),i=se.charLore?.find((e=>e.name===r));return i&&Array.isArray(i.extraBooks)&&(n.additional=i.extraBooks),structuredClone(n)}function V$(){return z$().primary}async function M$(t){const n=Pe(a);if(!n)throw Error('');const r=_(_.concat(t.primary?[t.primary]:[],t.additional)).reject(_.isNull).reject((e=>R$().some((t=>t===e)))).value();if(r.length>0)throw Error(` '${n}' , : ${r}`);if(void 0!==t.primary){const r=String($('#character_world').val());if($('#character_world').val(t.primary?t.primary:''),$('.character_world_info_selector').find('option:selected').val(t.primary?X.indexOf(t.primary):''),r&&!t.primary){const e=JSON.parse(String($('#character_json_data').val()));e?.data?.character_book&&(e.data.character_book=void 0),$('#character_json_data').val(JSON.stringify(e))}if(!(await async function(){$('#rm_info_avatar').html('');const t=new FormData($('#form_create').get(0)),n=t.get('avatar');if(n instanceof File){const e=await je(n);t.set('avatar',e)}const r=e();_.unset(r,'Content-Type'),t.delete('alternate_greetings');const i=$('.open_alternate_greetings').data('chid');if(i&&Array.isArray(o[i]?.data?.alternate_greetings))for(const e of o[i].data.alternate_greetings)t.append('alternate_greetings',e);return!!(await fetch('/api/characters/edit',{method:'POST',headers:r,body:t,cache:'no-cache'})).ok&&(await K(t.get('avatar_url')),$('#add_avatar_button').replaceWith($('#add_avatar_button').val('').clone(!0)),$('#create_button').attr('value','Save'),!0)}()))throw Error(` '${n}' , `);ae(void 0,!!t.primary)}if(void 0!==t.additional){const e=se.charLore??[],r=e.findIndex((e=>e.name===n));-1===r?e.push({name:n,extraBooks:t.additional}):0===t.additional.length?e.splice(r,1):e[r].extraBooks=t.additional,Object.assign(se,{charLore:e})}q(),b()}function B$(){if(!v())throw Error(', ');const e=_.get(y,ie,'');return X.includes(e)?e:(_.unset(y,ie),null)}async function F$(e){if(null===e)_.unset(y,ie),$('.chat_lorebook_button').removeClass('world_set');else{if(!X.includes(e))throw new Error(`,  '${e}' `);_.set(y,ie,e),$('.chat_lorebook_button').addClass('world_set')}await H()}async function Z$(e){const t=await B$();if(null!==t)return t;const n=(()=>{if(e){if(X.includes(e))throw new Error(`,  '${e}' `);return e}return`Chat Book ${v()}`.replace(/[^a-z0-9]/gi,'_').replace(/_{2,}/g,'_').substring(0,64)})();return await re(n),await F$(n),n}const H$={key:[],keysecondary:[],comment:'',content:'',constant:!1,vectorized:!1,selective:!0,selectiveLogic:0,addMemo:!0,order:100,position:0,disable:!1,excludeRecursion:!1,preventRecursion:!1,matchPersonaDescription:!1,matchCharacterDescription:!1,matchCharacterPersonality:!1,matchCharacterDepthPrompt:!1,matchScenario:!1,matchCreatorNotes:!1,delayUntilRecursion:0,probability:100,useProbability:!0,depth:4,group:'',groupOverride:!1,groupWeight:100,scanDepth:null,caseSensitive:null,matchWholeWords:null,useGroupScoring:null,automationId:'',role:0,sticky:null,cooldown:null,delay:null};function q$(e){return{uid:e.uid,display_index:e.displayIndex,comment:e.comment,enabled:!e.disable,type:e.constant?'constant':e.vectorized?'vectorized':'selective',position:{0:'before_character_definition',1:'after_character_definition',5:'before_example_messages',6:'after_example_messages',2:'before_author_note',3:'after_author_note'}[e.position]??(1===e.role?'at_depth_as_user':2===e.role?'at_depth_as_assistant':'at_depth_as_system'),depth:4===e.position?e.depth:null,order:e.order,probability:e.probability,key:e.key,keys:e.key,logic:{0:'and_any',1:'not_all',2:'not_any',3:'and_all'}[e.selectiveLogic],filter:e.keysecondary,filters:e.keysecondary,scan_depth:e.scanDepth??'same_as_global',case_sensitive:e.caseSensitive??'same_as_global',match_whole_words:e.matchWholeWords??'same_as_global',use_group_scoring:e.useGroupScoring??'same_as_global',automation_id:e.automationId||null,exclude_recursion:e.excludeRecursion,prevent_recursion:e.preventRecursion,delay_until_recursion:e.delayUntilRecursion,content:e.content,group:e.group,group_prioritized:e.groupOverride,group_weight:e.groupWeight,sticky:e.sticky||null,cooldown:e.cooldown||null,delay:e.delay||null}}async function K$(e,{filter:t='none'}={}){if(!X.includes(e))throw Error(` '${e}'`);const n=await ue(e);let r=_(n.entries).values().map(q$).value();return'none'!==t&&(r=r.filter((e=>Object.entries(t).every((([t,n])=>{const r=e[t];return Array.isArray(r)?n.every((e=>r.includes(e))):'string'==typeof r?r.includes(n):r===n}))))),structuredClone(r)}function G$(e){const t={uid:e=>({uid:e}),display_index:e=>({displayIndex:e}),comment:e=>({comment:e}),enabled:e=>({disable:!e}),type:e=>({constant:'constant'===e,vectorized:'vectorized'===e}),position:e=>({position:{before_character_definition:0,after_character_definition:1,before_example_messages:5,after_example_messages:6,before_author_note:2,after_author_note:3,at_depth_as_system:4,at_depth_as_user:4,at_depth_as_assistant:4}[e],role:_.get({at_depth_as_system:0,at_depth_as_user:1,at_depth_as_assistant:2},e,null)}),depth:e=>({depth:null===e?4:e}),order:e=>({order:e}),probability:e=>({probability:e}),keys:e=>({key:e}),logic:e=>({selectiveLogic:{and_any:0,not_all:1,not_any:2,and_all:3}[e]}),filters:e=>({keysecondary:e}),scan_depth:e=>({scanDepth:'same_as_global'===e?null:e}),case_sensitive:e=>({caseSensitive:'same_as_global'===e?null:e}),match_whole_words:e=>({matchWholeWords:'same_as_global'===e?null:e}),use_group_scoring:e=>({useGroupScoring:'same_as_global'===e?null:e}),automation_id:e=>({automationId:null===e?'':e}),exclude_recursion:e=>({excludeRecursion:e}),prevent_recursion:e=>({preventRecursion:e}),delay_until_recursion:e=>({delayUntilRecursion:e}),content:e=>({content:e}),group:e=>({group:e}),group_prioritized:e=>({groupOverride:e}),group_weight:e=>({groupWeight:e}),sticky:e=>({sticky:null===e?0:e}),cooldown:e=>({cooldown:null===e?0:e}),delay:e=>({delay:null===e?0:e})};return _.merge({},H$,...Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,n])=>t[e]?.(n))))}const W$=1e6;function J$(e){const t=new Set,n=e=>{void 0===e&&(e=_.random(0,999999));let n=1;for(;;){if(!t.has(e))return t.add(e),e;e=(e+n*n)%W$,++n}};let r=_.max(e.map((e=>e.display_index??-1)))??-1;return e.map((e=>({...e,uid:n(e.uid),display_index:e.display_index??++r})))}async function Y$(e,t){if(!X.includes(e))throw Error(` '${e}'`);const n={entries:_.merge({},...J$(t).map(G$).map((e=>({[e.uid]:e}))))};await ce(e,n),Ul(e)}async function X$(e,t){return await Y$(e,await t(await K$(e))),K$(e)}async function Q$(e,t){return await X$(e,(e=>{for(const n of t){const t=e.find((e=>e.uid===n.uid));t&&_.merge(t,n)}return e}))}async function eO(e,t){const n=[];return{entries:await X$(e,(e=>{const r=new Set(e.map((e=>e.uid)));return t.forEach((e=>e.uid=(()=>{for(let e=0;e<W$;++e)if(!r.has(e))return r.add(e),n.push(e),e;throw Error(' uid')})())),[...e,...t]})),new_uids:n}}async function tO(e,t){let n=!1;return{entries:await X$(e,(e=>{const r=_.remove(e,(e=>t.includes(e.uid)));return n=r.length>0,e})),delete_occurred:n}}async function nO(e,t){return(await eO(e,[t])).new_uids[0]}async function rO(e,t){return(await tO(e,[t])).delete_occurred}function iO(e){return!oO(e)&&!aO(e)}function oO(e){return['main','nsfw','jailbreak','enhanceDefinitions'].includes(e.id)}function aO(e){return['worldInfoBefore','personaDescription','charDescription','charPersonality','scenario','worldInfoAfter','dialogueExamples','chatHistory'].includes(e.id)}const sO={settings:{max_context:2e6,max_completion_tokens:300,reply_count:1,should_stream:!1,temperature:1,frequency_penalty:0,presence_penalty:0,repetition_penalty:1,top_p:1,min_p:0,top_k:0,top_a:0,seed:-1,squash_system_messages:!1,reasoning_effort:'auto',request_thoughts:!1,request_images:!1,enable_function_calling:!1,enable_web_search:!1,allow_sending_images:'disabled',allow_sending_videos:!1,character_name_prefix:'none',wrap_user_messages_in_quotes:!1},prompts:[{id:'worldInfoBefore',name:'World Info (before)',enabled:!0,position:{type:'relative'},role:'system'},{id:'personaDescription',name:'Persona Description',enabled:!0,position:{type:'relative'},role:'system'},{id:'charDescription',name:'Char Description',enabled:!0,position:{type:'relative'},role:'system'},{id:'charPersonality',name:'Char Personality',enabled:!0,position:{type:'relative'},role:'system'},{id:'scenario',name:'Scenario',enabled:!0,position:{type:'relative'},role:'system'},{id:'worldInfoAfter',name:'World Info (after)',enabled:!0,position:{type:'relative'},role:'system'},{id:'dialogueExamples',name:'Chat Examples',enabled:!0,position:{type:'relative'},role:'system'},{id:'chatHistory',name:'Chat History',enabled:!0,position:{type:'relative'},role:'system'}],prompts_unused:[],extensions:{}},lO={temp_openai:'temperature',freq_pen_openai:'frequency_penalty',pres_pen_openai:'presence_penalty',top_p_openai:'top_p',repetition_penalty_openai:'repetition_penalty',min_p_openai:'min_p',top_k_openai:'top_k',top_a_openai:'top_a'};function cO(e){const t=iO(e),n=oO(e),r=aO(e);let i=_({}).set('identifier',e.id).set('name',e.name).set('enabled',e.enabled);return!t&&!r||['dialogueExamples','chatHistory'].includes(e.id)||(i=i.set('injection_position','relative'===(e.position?.type??'relative')?0:1).set('injection_depth',e.position?.depth??4).set('injection_order',e.position?.order??100)),i=i.set('role',e.role),(t||n)&&(i=i.set('content',e.content)),i=i.set('system_prompt',n||r).set('marker',r),e.extra&&(i=i.set('extra',e.extra)),i=i.set('forbid_overrides',!1),i.value()}function uO(e,{in_use:t}){const n=e.prompt_order.find((e=>100001===e.character_id))?.order??[],r=e.prompts.map((e=>function(e,t){const n=!1===e.system_prompt&&(void 0===e.marker||!1===e.marker),r=!0===e.system_prompt&&(void 0===e.marker||!1===e.marker),i=!0===e.marker;let o=_({}).set('id',e.identifier??Ie()).set('name',e.name??'unnamed').set('enabled',t.find((t=>t.identifier===e.identifier))?.enabled??e.enabled??!0);return(n||i)&&(o=o.set('position.type',{0:'relative',1:'in_chat'}[e.injection_position??0]),1===e.injection_position&&(o=o.set('position.depth',e.injection_depth??4),o=o.set('position.order',e.injection_order??100))),o=o.set('role',e.role??'system'),(n||r)&&(o=o.set('content',e.content??'')),e.extra&&(o=o.set('extra',e.extra)),o.value()}(e,n))),i=n.map((e=>e.identifier)),[o,a]=_.partition(r,(e=>i.includes(e.id))),s=i.map((e=>o.find((t=>t.id===e))));return{settings:{max_context:Number(e.openai_max_context),max_completion_tokens:Number(e.openai_max_tokens),reply_count:Number(e.n),should_stream:Boolean(e.stream_openai),temperature:Number(t?e.temp_openai:e.temperature),frequency_penalty:Number(t?e.freq_pen_openai:e.frequency_penalty),presence_penalty:Number(t?e.pres_pen_openai:e.presence_penalty),top_p:Number(t?e.top_p_openai:e.top_p),repetition_penalty:Number(t?e.repetition_penalty_openai:e.repetition_penalty),min_p:Number(t?e.min_p_openai:e.min_p),top_k:Number(t?e.top_k_openai:e.top_k),top_a:Number(t?e.top_a_openai:e.top_a),seed:Number(e.seed),squash_system_messages:Boolean(e.squash_system_messages),reasoning_effort:String(e.reasoning_effort),request_thoughts:Boolean(e.show_thoughts),request_images:Boolean(e.request_images),enable_function_calling:Boolean(e.function_calling),enable_web_search:Boolean(e.enable_web_search),allow_sending_images:!1===Boolean(e.image_inlining)?'disabled':String(e.inline_image_quality),allow_sending_videos:Boolean(e.video_inlining),character_name_prefix:{[-1]:'none',0:'default',2:'content',1:'completion'}[Number(e.names_behavior)],wrap_user_messages_in_quotes:Boolean(e.wrap_in_quotes)},prompts:s,prompts_unused:a,extensions:e.extensions}}function dO(e){const t=new Set,n=e=>e.map((e=>{const n=((e,n)=>{if(!t.has(e))return t.add(e),e;if(!n)throw Error(`/ '${e}'`);const r=Ie();return t.add(r),r})(e.id,iO(e));return{...e,id:n}}));e.prompts=n(e.prompts),e.prompts_unused=n(e.prompts_unused);const r=e.prompts.map((e=>cO(e))),i=e.prompts_unused.map((e=>cO(e)));return{max_context_unlocked:!0,openai_max_context:e.settings.max_context,openai_max_tokens:e.settings.max_completion_tokens,n:e.settings.reply_count,stream_openai:e.settings.should_stream,temp_openai:e.settings.temperature,freq_pen_openai:e.settings.frequency_penalty,pres_pen_openai:e.settings.presence_penalty,top_p_openai:e.settings.top_p,repetition_penalty_openai:e.settings.repetition_penalty,min_p_openai:e.settings.min_p,top_k_openai:e.settings.top_k,top_a_openai:e.settings.top_a,temperature:e.settings.temperature,frequency_penalty:e.settings.frequency_penalty,presence_penalty:e.settings.presence_penalty,top_p:e.settings.top_p,repetition_penalty:e.settings.repetition_penalty,min_p:e.settings.min_p,top_k:e.settings.top_k,top_a:e.settings.top_a,seed:e.settings.seed,squash_system_messages:e.settings.squash_system_messages,reasoning_effort:e.settings.reasoning_effort,show_thoughts:e.settings.request_thoughts,request_images:e.settings.request_images,function_calling:e.settings.enable_function_calling,enable_web_search:e.settings.enable_web_search,image_inlining:'disabled'!==e.settings.allow_sending_images,inline_image_quality:'disabled'===e.settings.allow_sending_images?'auto':e.settings.allow_sending_images,video_inlining:e.settings.allow_sending_videos,names_behavior:{none:-1,default:0,content:2,completion:1}[e.settings.character_name_prefix],wrap_in_quotes:e.settings.wrap_user_messages_in_quotes,prompts:[...r,...i],prompt_order:[{character_id:100001,order:r.map((e=>({identifier:e.identifier,enabled:e.enabled??!0})))}],extensions:e.extensions}}const pO=xe('openai');function fO(){return structuredClone(['in_use',...pO.getAllPresets()])}function hO(){return pO.getSelectedPresetName()}function mO(e){const t=pO.findPreset(e);return!!t&&(pO.selectPreset(t),!0)}async function gO(e,t=sO){return!fO().includes(e)&&(await vO(e,t),!0)}async function vO(e,t=sO,{render:n='debounced'}={}){const r=dO(t),i=fO().includes(e);if(i)!function(e,t,{in_use:n,render:r}){let i=_(e);if(Object.entries(Ll).forEach((([e,{oai_setting:r}])=>{i=i.set(n?r:_.get(lO,r,r),t[e])})),i.value(),!n)return;const o=$(),a=$();Object.entries(Ll).forEach((([e,{selector:n,type:r}])=>{switch(r){case'checkbox':$(n).prop('checked',t[e]),o.add(n);break;case'input':$(n).val(t[e]),a.add(n)}})),$(o).trigger('input',{source:'preset'}),$(a).trigger('input',{source:'preset'}),b(),'debounced'===r?pe.renderDebounced():pe.render(!1)}('in_use'===e?fe:pO.getCompletionPresetByName(e),r,{in_use:'in_use'===e,render:n});else{const{presets:t,preset_names:n}=pO.getPresetList();t.push(r),n[e]=t.length-1,pO.select.append($('<option></option>',{value:t.length-1,text:e,selected:!1}))}return'in_use'!==e&&await pO.savePreset(e,pO.getCompletionPresetByName(e),{skipUpdate:!0}),!i}async function yO(e){return Boolean(await pO.deletePreset(e))}async function bO(e,t){return!!fO().includes(e)&&(await gO(t,_O(e)),await yO(e),!0)}function _O(e){const t='in_use'===e?fe:pO.getCompletionPresetByName(e);if(!t)throw Error(` '${e}' `);return structuredClone(uO(t,{in_use:'in_use'===e}))}async function wO(e,t,n={}){if(!fO().includes(e))throw Error(` '${e}' `);await vO(e,t,n)}async function kO(e,t,n={}){if(!fO().includes(e))throw Error(` '${e}' `);const r=await t(_O(e));return await wO(e,r,n),r}async function xO(e,t,n={}){return await kO(e,(e=>({settings:_.defaultsDeep(t.settings,e.settings),prompts:t.prompts??e.prompts,prompts_unused:t.prompts_unused??e.prompts_unused,extensions:_.defaultsDeep(t.extensions,e.extensions)})),n)}async function SO(e){const t=await et(e);if(t.isError)throw Error(` Slash  '${e}' : ${t.errorMessage}`);return t.pipe}const EO='3.6.1';function $O(){return EO}function OO(){return'JS-Slash-Runner'}async function IO(){return $E('JS-Slash-Runner').then((e=>e.ok))}function TO(){return Zl}function AO(){return structuredClone(X)}function CO(){return structuredClone(le().world_info.globalSelect)}async function NO(e){const t=$('#world_info');t.find('option[value!=""]').remove(),t.append(X.map(((t,n)=>{const r=e.includes(t);return new Option(t,String(n),r,r)}))),Q.length=0,Q.push(...e),b()}function PO(e){return z$('current'===e?void 0:{name:e})}async function jO(e,t){if('current'!==e)throw Error(' bindCharWorldbooks');return M$(t)}function DO(e){if('current'!==e)throw Error(' getChatWorldbookName');return B$()}async function RO(e,t){if('current'!==e)throw Error(' getChatWorldbookName');await F$(t)}async function UO(e,t){if('current'!==e)throw Error(' getChatWorldbookName');return await Z$(t)}const LO={addMemo:!0,matchPersonaDescription:!1,matchCharacterDescription:!1,matchCharacterPersonality:!1,matchCharacterDepthPrompt:!1,matchScenario:!1,matchCreatorNotes:!1,group:'',groupOverride:!1,groupWeight:100,caseSensitive:null,matchWholeWords:null,useGroupScoring:null,automationId:''};function zO(e){let t=_({}).set('uid',e.uid).set('name',e.comment).set('enabled',!e.disable).set('strategy.type',e.constant?'constant':e.vectorized?'vectorized':'selective').set('strategy.keys',e.key.map((e=>de(e)??e))).set('strategy.keys_secondary',{logic:{0:'and_any',1:'not_all',2:'not_any',3:'and_all'}[e.selectiveLogic],keys:e.keysecondary.map((e=>de(e)??e))}).set('strategy.scan_depth',e.scanDepth??'same_as_global').set('position.type',{0:'before_character_definition',1:'after_character_definition',5:'before_example_messages',6:'after_example_messages',2:'before_author_note',3:'after_author_note',4:'at_depth'}[e.position]).set('position.role',{0:'system',1:'user',2:'assistant'}[e.role??0]).set('position.depth',e.depth).set('position.order',e.order).set('content',e.content).set('probability',e.useProbability?e.probability:100).set('recursion.prevent_incoming',e.excludeRecursion).set('recursion.prevent_outgoing',e.preventRecursion).set('recursion.delay_until','number'==typeof e.delayUntilRecursion&&e.delayUntilRecursion>0?e.delayUntilRecursion:null).set('effect.sticky','number'==typeof e.sticky&&e.sticky>0?e.sticky:null).set('effect.cooldown','number'==typeof e.cooldown&&e.cooldown>0?e.cooldown:null).set('effect.delay','number'==typeof e.delay&&e.delay>0?e.delay:null);return e.extra&&(t=t.set('extra',e.extra)),t=t.merge(_.pick(e,Object.keys(LO))),t.value()}function VO(e,t){let n=_({}).set('uid',e.uid).set('displayIndex',t).set('comment',e.name??'').set('disable',!(e.enabled??1)).set('constant',!e?.strategy?.type||'constant'===e?.strategy?.type).set('selective','selective'===e?.strategy?.type).set('key',e?.strategy?.keys?.map(_.toString)??[]).set('selectiveLogic',{and_any:0,not_all:1,not_any:2,and_all:3}[e?.strategy?.keys_secondary?.logic??'and_any']).set('keysecondary',e?.strategy?.keys_secondary?.keys?.map(_.toString)??[]).set('scanDepth','same_as_global'===e?.strategy?.scan_depth?null:e?.strategy?.scan_depth??null).set('vectorized','vectorized'===e?.strategy?.type).set('position',{before_character_definition:0,after_character_definition:1,before_example_messages:5,after_example_messages:6,before_author_note:2,after_author_note:3,at_depth:4}[e?.position?.type??'at_depth']).set('role',{system:0,user:1,assistant:2}[e?.position?.role??'system']).set('depth',e?.position?.depth??4).set('order',e?.position?.order??100).set('content',e.content??'').set('useProbability',!0).set('probability',e.probability??100).set('excludeRecursion',e.recursion?.prevent_incoming??!1).set('preventRecursion',e.recursion?.prevent_outgoing??!1).set('delayUntilRecursion',e.recursion?.delay_until??!1).set('sticky',e.effect?.sticky??null).set('cooldown',e.effect?.cooldown??null).set('delay',e.effect?.delay??null);return e.extra&&(n=n.set('extra',e.extra)),n=n.merge(LO).merge(_.pick(e,Object.keys(LO))),n.value()}function MO(e){const t=1e6,n=new Set,r=e=>{void 0===e&&(e=_.random(0,999999));let r=1;for(;;){if(!n.has(e))return n.add(e),e;e=(e+r*r)%t,++r}};return e.map((e=>({...e,uid:r(e.uid)})))}async function BO(e,t=[]){return!AO().includes(e)&&await FO(e,t)}async function FO(e,t=[],{render:n='debounced'}={}){const r=AO().includes(e);if(!AO().includes(e)){if(!(await re(e,{interactive:!1})))return!1}return(r||t.length>0)&&(await ce(e,{entries:_.merge({},..._(MO(t)).map(VO).map((e=>({[e.uid]:e}))).value())}),'debounced'===n?Ul(e):Rl(e)),!r}async function ZO(e){return await oe(e)}async function HO(e){if(!AO().includes(e))throw Error(` '${e}'`);const t=await ue(e).then((e=>e??{}));return structuredClone(_(t.entries).values().sortBy('displayIndex').map(zO).value())}async function qO(e,t,n){if(!AO().includes(e))throw Error(` '${e}'`);await FO(e,t,n)}async function KO(e,t,n){return await qO(e,await t(await HO(e)),n),await HO(e)}async function GO(e,t,n){let r;const i=await KO(e,(e=>(r=e.length,[...e,...t])),n);return{worldbook:i,new_entries:i.slice(r)}}async function WO(e,t,n){let r=[];return{worldbook:await KO(e,(e=>(r=_.remove(e,t),e)),n),deleted_entries:r}}function JO(e){return NS(`${e}_audio`,(()=>{const t=LS(),n=Mr(''),r=Mr(!1),i=Mr(0),o=ks({get:()=>t.settings.audio[e],set:n=>{t.settings.audio[e]=n}}),{enabled:a,mode:s,muted:l,volume:c}=Yr(o.value),u=US(),d=Mr(u.settings[e]);return _a((()=>u.id),(()=>{n.value='',r.value=!1,i.value=0,d.value=u.settings[e]})),_a(d,(()=>{u.settings[e]=d.value})),{src:n,playing:r,progress:i,enabled:a,mode:s,muted:l,volume:c,playlist:d}}))}const YO=JO('bgm'),XO=JO('ambient');function QO(e){switch(e){case'bgm':return YO();case'ambient':return XO()}}function eI(e){return e.split('/').at(-1)?.split('.').at(0)||e}function tI(e){return''}function nI(e){if(!['bgm','ambient'].includes(e.type))return console.warn('WARN: Invalid arguments for /audioplaypause command'),'';const t=e.type.toLowerCase(),n=Boolean(e.play??'true');return QO(t).playing=n,''}function rI(e){if(!['bgm','ambient'].includes(e.type)||!['repeat','random','single','stop'].includes(e.mode))return console.warn('WARN: Invalid arguments for /audiomode command'),'';const t=e.type.toLowerCase(),n=e.mode.toLowerCase();return QO(t).mode={single:'repeat_one',repeat:'repeat_all',random:'shuffle',stop:'play_one_and_stop'}[n],''}function iI(e,t){if(!['bgm','ambient'].includes(e.type))return console.warn('WARN: Invalid arguments for /audioplaypause command'),'';const n=e.type.toLowerCase(),r=Boolean(e.play??'true'),i=QO(n),o=_(t).split(',').map((e=>e.trim())).filter((e=>''!==e)).uniq().filter((e=>!i.playlist.some((t=>t.url===e)))).map((e=>({url:e,title:eI(e)}))).value();return 0===o.length?(console.warn('WARN: Invalid or empty URLs provided for /audioimport command'),''):(i.playlist.push(...o),r&&(i.src=o[0].url,i.progress=0,i.playing=r),'')}function oI(e,t){if(!t)return console.warn('WARN: Missing URL for /audioselect command'),'';const n=QO(e.type.toLowerCase());return n.playlist.some((e=>e.url===t))||n.playlist.push({url:t,title:eI(t)}),n.src=t,n.progress=0,n.playing=!0,''}function aI(){globalThis.TavernHelper={_bind:{_eventOn:aE,_eventOnButton:sE,_eventMakeLast:lE,_eventMakeFirst:cE,_eventOnce:uE,_eventEmit:dE,_eventEmitAndWait:pE,_eventRemoveListener:fE,_eventClearEvent:hE,_eventClearListener:mE,_eventClearAll:gE,_initializeGlobal:XE,_waitGlobalInitialized:QE,_getButtonEvent:JS,_getScriptButtons:YS,_replaceScriptButtons:XS,_appendInexistentScriptButtons:QS,_getScriptInfo:eE,_replaceScriptInfo:tE,_getVariables:n$,_getAllVariables:r$,_replaceVariables:o$,_updateVariablesWith:s$,_insertOrAssignVariables:c$,_insertVariables:d$,_deleteVariable:f$,_getIframeName:ac,_getScriptId:sc,_getCurrentMessageId:lc},audioEnable:tI,audioImport:iI,audioMode:rI,audioPlay:nI,audioSelect:oI,builtin:zl,Character:T$,getChatMessages:Wl,setChatMessages:Jl,setChatMessage:ec,createChatMessages:Yl,deleteChatMessages:Xl,rotateChatMessages:Ql,formatAsDisplayedMessage:tc,retrieveDisplayedMessage:nc,tavern_events:yE,iframe_events:vE,isAdmin:bE,getExtensionType:_E,getExtensionStatus:wE,isInstalledExtension:kE,installExtension:xE,uninstallExtension:SE,reinstallExtension:EE,updateExtension:$E,importRawCharacter:S$,importRawPreset:$$,importRawChat:E$,importRawWorldbook:O$,importRawTavernRegex:I$,injectPrompts:PE,uninjectPrompts:jE,builtin_prompt_default_order:RE,generate:JE,generateRaw:YE,stopGenerationById:qE,stopAllGeneration:KE,getLorebookEntries:K$,replaceLorebookEntries:Y$,updateLorebookEntriesWith:X$,setLorebookEntries:Q$,createLorebookEntries:eO,createLorebookEntry:nO,deleteLorebookEntries:tO,deleteLorebookEntry:rO,getLorebookSettings:j$,setLorebookSettings:D$,getCharLorebooks:z$,setCurrentCharLorebooks:M$,getLorebooks:R$,deleteLorebook:U$,createLorebook:L$,getCurrentCharPrimaryLorebook:V$,getChatLorebook:B$,setChatLorebook:F$,getOrCreateChatLorebook:Z$,isPresetNormalPrompt:iO,isPresetSystemPrompt:oO,isPresetPlaceholderPrompt:aO,default_preset:sO,getPresetNames:fO,getLoadedPresetName:hO,loadPreset:mO,createPreset:gO,createOrReplacePreset:vO,deletePreset:yO,renamePreset:bO,getPreset:_O,replacePreset:wO,updatePresetWith:kO,setPreset:xO,RawCharacter:T$,getCharData:A$,getCharAvatarPath:C$,getChatHistoryBrief:N$,getChatHistoryDetail:P$,registerMacroLike:m$,triggerSlash:SO,triggerSlashWithResult:SO,formatAsTavernRegexedString:g$,isCharacterTavernRegexesEnabled:b$,getTavernRegexes:_$,replaceTavernRegexes:k$,updateTavernRegexesWith:x$,substitudeMacros:rc,getLastMessageId:ic,errorCatched:oc,getMessageId:cc,getVariables:t$,replaceVariables:i$,updateVariablesWith:a$,insertOrAssignVariables:l$,deleteVariable:p$,insertVariables:u$,getTavernHelperVersion:$O,getFrontendVersion:$O,getTavernHelperExtensionId:OO,updateTavernHelper:IO,updateFrontendVersion:IO,getTavernVersion:TO,getWorldbookNames:AO,getGlobalWorldbookNames:CO,rebindGlobalWorldbooks:NO,getCharWorldbookNames:PO,rebindCharWorldbooks:jO,getChatWorldbookName:DO,rebindChatWorldbook:RO,getOrCreateChatWorldbook:UO,createWorldbook:BO,createOrReplaceWorldbook:FO,deleteWorldbook:ZO,getWorldbook:HO,replaceWorldbook:qO,updateWorldbookWith:KO,createWorldbookEntries:GO,deleteWorldbookEntries:WO}}const sI=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};const lI=sI(fo({__name:'Divider',props:{type:{default:'plain'},marginY:{default:'my-0.5'},weight:{default:void 0}},setup(e,{expose:t}){t();const n={};return Object.defineProperty(n,'__isScriptSetup',{enumerable:!1,value:!0}),n}}),[['render',function(e,t,n,r,i,o){return La(),Ba('div',{class:nn(['flex w-full items-center',n.marginY])},[e.$slots.default?(La(),Ba('div',{key:0,class:'mr-0.75 flex text-sm whitespace-nowrap',style:Yt('plain'===n.type?'':'word-spacing: 1.5')},[Do(e.$slots,'default')],4)):es('',!0),Ga('div',{class:nn(['flex-grow bg-[var(--grey5050a)]',n.weight?n.weight:'plain'===n.type?'h-[1px]':'h-[2px]'])},null,2)],2)}],['__file','Divider.vue']]);function cI(e){return!!vn()&&(yn(e),!0)}function uI(){const e=new Set,t=t=>{e.delete(t)};return{on:n=>{e.add(n);const r=()=>t(n);return cI(r),{off:r}},off:t,trigger:(...t)=>Promise.all(Array.from(e).map((e=>e(...t)))),clear:()=>{e.clear()}}}const dI=new WeakMap;const pI='undefined'!=typeof window&&'undefined'!=typeof document;'undefined'!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const fI=e=>null!=e,hI=Object.prototype.toString,mI=e=>'[object Object]'===hI.call(e),gI=()=>{},vI=yI();function yI(){var e,t;return pI&&(null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||(null==(t=null==window?void 0:window.navigator)?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(null==window?void 0:window.navigator.userAgent))}function bI(...e){if(1!==e.length)return ei(...e);const t=e[0];return'function'==typeof t?Tr(Jr((()=>({get:t,set:gI})))):Mr(t)}function _I(e,t){return function(...n){return new Promise(((r,i)=>{Promise.resolve(e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})).then(r).catch(i)}))}}const wI=e=>e();function kI(e,t={}){let n,r,i=gI;const o=e=>{clearTimeout(e),i(),i=gI};let a;return s=>{const l=qr(e),c=qr(t.maxWait);return n&&o(n),l<=0||void 0!==c&&c<=0?(r&&(o(r),r=void 0),Promise.resolve(s())):new Promise(((e,u)=>{i=t.rejectOnCancel?u:e,a=s,c&&!r&&(r=setTimeout((()=>{n&&o(n),r=void 0,e(a())}),c)),n=setTimeout((()=>{r&&o(r),r=void 0,e(s())}),l)}))}}function xI(e=wI,t={}){const{initialState:n='active'}=t,r=bI('active'===n);return{isActive:Tr(r),pause:function(){r.value=!1},resume:function(){r.value=!0},eventFilter:(...t)=>{r.value&&e(...t)}}}function SI(e){return e.endsWith('rem')?16*Number.parseFloat(e):Number.parseFloat(e)}function EI(e){return Array.isArray(e)?e:[e]}const $I=/-(\w)/g,OI=function(e){const t=Object.create(null);return n=>t[n]||(t[n]=e(n))}((e=>e.replace($I,((_,e)=>e?e.toUpperCase():''))));function II(e){return cs()}function TI(e,t=200,n={}){return _I(kI(t,n),e)}function AI(e,t=200,n=!1,r=!0,i=!1){return _I(function(...e){let t,n,r,i,o,a,s=0,l=!0,c=gI;Vr(e[0])||'object'!=typeof e[0]?[r,i=!0,o=!0,a=!1]=e:({delay:r,trailing:i=!0,leading:o=!0,rejectOnCancel:a=!1}=e[0]);const u=()=>{t&&(clearTimeout(t),t=void 0,c(),c=gI)};return e=>{const d=qr(r),p=Date.now()-s,f=()=>n=e();return u(),d<=0?(s=Date.now(),f()):(p>d&&(o||!l)?(s=Date.now(),f()):i&&(n=new Promise(((e,n)=>{c=a?n:e,t=setTimeout((()=>{s=Date.now(),l=!0,e(f()),u()}),Math.max(0,d-p))}))),o||t||(t=setTimeout((()=>l=!0),d)),l=!1,n)}}(t,n,r,i),e)}function CI(e,t,n={}){const{eventFilter:r=wI,...i}=n;return _a(e,_I(r,t),i)}function NI(e,t,n={}){const{eventFilter:r,initialState:i='active',...o}=n,{eventFilter:a,pause:s,resume:l,isActive:c}=xI(r,{initialState:i});return{stop:CI(e,t,{...o,eventFilter:a}),pause:s,resume:l,isActive:c}}function PI(e,t,...[n]){const{flush:r='sync',deep:i=!1,immediate:o=!0,direction:a='both',transform:s={}}=n||{},l=[],c='ltr'in s&&s.ltr||(e=>e),u='rtl'in s&&s.rtl||(e=>e);'both'!==a&&'ltr'!==a||l.push(NI(e,(e=>{l.forEach((e=>e.pause())),t.value=c(e),l.forEach((e=>e.resume()))}),{flush:r,deep:i,immediate:o})),'both'!==a&&'rtl'!==a||l.push(NI(t,(t=>{l.forEach((e=>e.pause())),e.value=u(t),l.forEach((e=>e.resume()))}),{flush:r,deep:i,immediate:o}));return()=>{l.forEach((e=>e.stop()))}}function jI(e,t=!0,n){II()?Eo(e,n):t?e():yi(e)}function DI(e,t=1e3,n={}){const{immediate:r=!0,immediateCallback:i=!1}=n;let o=null;const a=Br(!1);function s(){o&&(clearInterval(o),o=null)}function l(){a.value=!1,s()}function c(){const n=qr(t);n<=0||(a.value=!0,i&&e(),s(),a.value&&(o=setInterval(e,n)))}if(r&&pI&&c(),Vr(t)||'function'==typeof t){cI(_a(t,(()=>{a.value&&pI&&c()})))}return cI(l),{isActive:Ar(a),pause:l,resume:c}}function RI(e=!1,t={}){const{truthyValue:n=!0,falsyValue:r=!1}=t,i=Vr(e),o=Br(e);function a(e){if(arguments.length)return o.value=e,o.value;{const e=qr(n);return o.value=o.value===e?qr(r):e,o.value}}return i?a:[o,a]}function UI(e,t,n={}){const{debounce:r=0,maxWait:i,...o}=n;return CI(e,t,{...o,eventFilter:kI(r,{maxWait:i})})}function LI(e,t,n={}){const{eventFilter:r=wI,...i}=n,o=_I(r,t);let a,s,l;if('sync'===i.flush){let t=!1;s=()=>{},a=e=>{t=!0,e(),t=!1},l=_a(e,((...e)=>{t||o(...e)}),i)}else{const t=[];let n=0,r=0;s=()=>{n=r},t.push(_a(e,(()=>{r++}),{...i,flush:'sync'})),a=e=>{const t=r;e(),n+=r-t},t.push(_a(e,((...e)=>{const t=n>0&&n===r;n=0,r=0,t||o(...e)}),i)),l=()=>{t.forEach((e=>e()))}}return{stop:l,ignoreUpdates:a,ignorePrevAsyncUpdates:s}}function zI(e,t,n){const r=_a(e,((e,n,r)=>{e&&t(e,n,r)}),{...n,once:!1});return r}function VI(e={}){const{inheritAttrs:t=!0}=e,n=Br(),r=fo({setup:(_,{slots:e})=>()=>{n.value=e.default}}),i=fo({inheritAttrs:t,props:e.props,setup:(r,{attrs:i,slots:o})=>()=>{var a;n.value;const s=null==(a=n.value)?void 0:a.call(n,{...null==e.props?MI(i):r,$slots:o});return t&&1===(null==s?void 0:s.length)?s[0]:s}});return function(e,t){if('undefined'!=typeof Symbol){const n={...e};return Object.defineProperty(n,Symbol.iterator,{enumerable:!1,value(){let e=0;return{next:()=>({value:t[e++],done:e>t.length})}}}),n}return Object.assign([...t],e)}({define:r,reuse:i},[r,i])}function MI(e){const t={};for(const n in e)t[OI(n)]=e[n];return t}const BI=pI?window:void 0,FI=pI?window.document:void 0;function ZI(e){var t;const n=qr(e);return null!=(t=null==n?void 0:n.$el)?t:n}function HI(...e){const t=[],n=()=>{t.forEach((e=>e())),t.length=0},r=ks((()=>{const t=EI(qr(e[0])).filter((e=>null!=e));return t.every((e=>'string'!=typeof e))?t:void 0})),i=function(e,t,n){return _a(e,t,{...n,immediate:!0})}((()=>{var t,n;return[null!=(n=null==(t=r.value)?void 0:t.map((e=>ZI(e))))?n:[BI].filter((e=>null!=e)),EI(qr(r.value?e[1]:e[0])),EI(Hr(r.value?e[2]:e[1])),qr(r.value?e[3]:e[2])]}),(([e,r,i,o])=>{if(n(),!(null==e?void 0:e.length)||!(null==r?void 0:r.length)||!(null==i?void 0:i.length))return;const a=mI(o)?{...o}:o;t.push(...e.flatMap((e=>r.flatMap((t=>i.map((n=>((e,t,n,r)=>(e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)))(e,t,n,a))))))))}),{flush:'post'});return cI(n),()=>{i(),n()}}let qI=!1;function KI(e,t,n={}){const{window:r=BI,ignore:i=[],capture:o=!0,detectIframe:a=!1,controls:s=!1}=n;if(!r)return s?{stop:gI,cancel:gI,trigger:gI}:gI;if(vI&&!qI){qI=!0;const e={passive:!0};Array.from(r.document.body.children).forEach((t=>t.addEventListener('click',gI,e))),r.document.documentElement.addEventListener('click',gI,e)}let l=!0;const c=e=>qr(i).some((t=>{if('string'==typeof t)return Array.from(r.document.querySelectorAll(t)).some((t=>t===e.target||e.composedPath().includes(t)));{const n=ZI(t);return n&&(e.target===n||e.composedPath().includes(n))}}));const u=n=>{const r=ZI(e);null!=n.target&&(r instanceof Element||!function(e){const t=qr(e);return t&&16===t.$.subTree.shapeFlag}(e)||!function(e,t){const n=qr(e),r=n.$.subTree&&n.$.subTree.children;return!(null==r||!Array.isArray(r))&&r.some((e=>e.el===t.target||t.composedPath().includes(e.el)))}(e,n))&&r&&r!==n.target&&!n.composedPath().includes(r)&&('detail'in n&&0===n.detail&&(l=!c(n)),l?t(n):l=!0)};let d=!1;const p=[HI(r,'click',(e=>{d||(d=!0,setTimeout((()=>{d=!1}),0),u(e))}),{passive:!0,capture:o}),HI(r,'pointerdown',(t=>{const n=ZI(e);l=!c(t)&&!(!n||t.composedPath().includes(n))}),{passive:!0}),a&&HI(r,'blur',(n=>{setTimeout((()=>{var i;const o=ZI(e);'IFRAME'!==(null==(i=r.document.activeElement)?void 0:i.tagName)||(null==o?void 0:o.contains(r.document.activeElement))||t(n)}),0)}),{passive:!0})].filter(Boolean),f=()=>p.forEach((e=>e()));return s?{stop:f,cancel:()=>{l=!1},trigger:e=>{l=!0,u(e),l=!1}}:f}function GI(){const e=Br(!1),t=cs();return t&&Eo((()=>{e.value=!0}),t),e}function WI(e){const t=GI();return ks((()=>(t.value,Boolean(e()))))}const JI=Symbol('vueuse-ssr-width');function YI(){const e=Yo()?((...e)=>{var t;const n=e[0],r=null==(t=cs())?void 0:t.proxy;if(null==r&&!Yo())throw new Error('injectLocal must be called in setup');return r&&dI.has(r)&&n in dI.get(r)?dI.get(r)[n]:Jo(...e)})(JI,null):null;return'number'==typeof e?e:void 0}function XI(e){return JSON.parse(JSON.stringify(e))}const QI='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:'undefined'!=typeof global?global:'undefined'!=typeof self?self:{},eT='__vueuse_ssr_handlers__',tT=nT();function nT(){return eT in QI||(QI[eT]=QI[eT]||{}),QI[eT]}const rT={boolean:{read:e=>'true'===e,write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},iT='vueuse-storage';function oT(e,t,n,r={}){var i;const{flush:o='pre',deep:a=!0,listenToStorageChanges:s=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:u,window:d=BI,eventFilter:p,onError:f=e=>{console.error(e)},initOnMounted:h}=r,m=(u?Br:Mr)('function'==typeof t?t():t),g=ks((()=>qr(e)));if(!n)try{n=function(e,t){return tT[e]||t}('getDefaultStorage',(()=>{var e;return null==(e=BI)?void 0:e.localStorage}))()}catch(UJ){f(UJ)}if(!n)return m;const v=qr(t),y=function(e){return null==e?'any':e instanceof Set?'set':e instanceof Map?'map':e instanceof Date?'date':'boolean'==typeof e?'boolean':'string'==typeof e?'string':'object'==typeof e?'object':Number.isNaN(e)?'any':'number'}(v),b=null!=(i=r.serializer)?i:rT[y],{pause:w,resume:k}=NI(m,(e=>function(e){try{const t=n.getItem(g.value);if(null==e)E(t,null),n.removeItem(g.value);else{const r=b.write(e);t!==r&&(n.setItem(g.value,r),E(t,r))}}catch(UJ){f(UJ)}}(e)),{flush:o,deep:a,eventFilter:p});_a(g,(()=>O()),{flush:o});let x=!1;const S=e=>{h&&!x||O(e.detail)};function E(e,t){if(d){const r={key:g.value,oldValue:e,newValue:t,storageArea:n};d.dispatchEvent(n instanceof Storage?new StorageEvent('storage',r):new CustomEvent(iT,{detail:r}))}}function O(e){if(!e||e.storageArea===n)if(e&&null==e.key)m.value=v;else if(!e||e.key===g.value){w();try{const t=b.write(m.value);void 0!==e&&(null==e?void 0:e.newValue)===t||(m.value=function(e){const t=e?e.newValue:n.getItem(g.value);if(null==t)return l&&null!=v&&n.setItem(g.value,b.write(v)),v;if(!e&&c){const e=b.read(t);return'function'==typeof c?c(e,v):'object'!==y||Array.isArray(e)?e:{...v,...e}}return'string'!=typeof t?t:b.read(t)}(e))}catch(UJ){f(UJ)}finally{e?yi(k):k()}}}return d&&s&&(n instanceof Storage?HI(d,'storage',(e=>{h&&!x||O(e)}),{passive:!0}):HI(d,iT,S)),h?jI((()=>{x=!0,O()})):O(),m}function aT(e){return e}function sT(e,t){return e.value=t}function lT(e){return e?'function'==typeof e?e:XI:aT}function cT(e){return e?'function'==typeof e?e:XI:aT}function uT(e,t={}){const{deep:n=!1,flush:r='pre',eventFilter:i,shouldCommit:o=()=>!0}=t,{eventFilter:a,pause:s,resume:l,isActive:c}=xI(i);let u=e.value;const{ignoreUpdates:d,ignorePrevAsyncUpdates:p,stop:f}=LI(e,v,{deep:n,flush:r,eventFilter:a});const h=function(e,t={}){const{clone:n=!1,dump:r=lT(n),parse:i=cT(n),setSource:o=sT}=t;function a(){return Ur({snapshot:r(e.value),timestamp:+Date.now()})}const s=Mr(a()),l=Mr([]),c=Mr([]),u=t=>{o(e,i(t.snapshot)),s.value=t},d=ks((()=>[s.value,...l.value])),p=ks((()=>l.value.length>0)),f=ks((()=>c.value.length>0));return{source:e,undoStack:l,redoStack:c,last:s,history:d,canUndo:p,canRedo:f,clear:()=>{l.value.splice(0,l.value.length),c.value.splice(0,c.value.length)},commit:()=>{l.value.unshift(s.value),s.value=a(),t.capacity&&l.value.length>t.capacity&&l.value.splice(t.capacity,Number.POSITIVE_INFINITY),c.value.length&&c.value.splice(0,c.value.length)},reset:()=>{u(s.value)},undo:()=>{const e=l.value.shift();e&&(c.value.unshift(s.value),u(e))},redo:()=>{const e=c.value.shift();e&&(l.value.unshift(s.value),u(e))}}}(e,{...t,clone:t.clone||n,setSource:function(e,t){p(),d((()=>{e.value=t,u=t}))}}),{clear:m,commit:g}=h;function v(){p(),o(u,e.value)&&(u=e.value,g())}return{...h,isTracking:c,pause:s,resume:function(e){l(),e&&v()},commit:v,batch:function(e){let t=!1;const n=()=>t=!0;d((()=>{e(n)})),t||v()},dispose:function(){f(),m()}}}const dT={multiple:!0,accept:'*',reset:!1,directory:!1};function pT(e={}){const{document:t=FI}=e,n=Mr(function(e){if(!e)return null;if(e instanceof FileList)return e;const t=new DataTransfer;for(const n of e)t.items.add(n);return t.files}(e.initialFiles)),{on:r,trigger:i}=uI(),{on:o,trigger:a}=uI(),s=ks((()=>{var r;const o=null!=(r=ZI(e.input))?r:t?t.createElement('input'):void 0;return o&&(o.type='file',o.onchange=e=>{const t=e.target;n.value=t.files,i(n.value)},o.oncancel=()=>{a()}),o})),l=()=>{n.value=null,s.value&&s.value.value&&(s.value.value='',i(null))},c=e=>{const t=s.value;var n,r;t&&(t.multiple=qr(e.multiple),t.accept=qr(e.accept),t.webkitdirectory=qr(e.directory),n=e,r='capture',Object.prototype.hasOwnProperty.call(n,r)&&(t.capture=qr(e.capture)))};return ba((()=>{c(e)})),{files:Tr(n),open:t=>{const n=s.value;if(!n)return;const r={...dT,...e,...t};c(r),qr(r.reset)&&l(),n.click()},reset:l,onCancel:o,onChange:r}}function fT(e,t,n={}){const{window:r=BI}=n;return oT(e,t,null==r?void 0:r.localStorage,n)}function hT(e,t){qr(e)&&t(qr(e))}function mT(e){return Array.from(e).map((({label:e,kind:t,language:n,mode:r,activeCues:i,cues:o,inBandMetadataTrackDispatchType:a},s)=>({id:s,label:e,kind:t,language:n,mode:r,activeCues:i,cues:o,inBandMetadataTrackDispatchType:a})))}const gT={src:'',tracks:[]};function vT(e={}){const{window:t=BI,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:o=!0,type:a='inner'}=e,s=Br(n),l=Br(r),c=()=>{if(t)if('outer'===a)s.value=t.outerWidth,l.value=t.outerHeight;else if('visual'===a&&t.visualViewport){const{width:e,height:n,scale:r}=t.visualViewport;s.value=Math.round(e*r),l.value=Math.round(n*r)}else o?(s.value=t.innerWidth,l.value=t.innerHeight):(s.value=t.document.documentElement.clientWidth,l.value=t.document.documentElement.clientHeight)};c(),jI(c);const u={passive:!0};if(HI('resize',c,u),t&&'visual'===a&&t.visualViewport&&HI(t.visualViewport,'resize',c,u),i){const e=function(e,t={}){const{window:n=BI,ssrWidth:r=YI()}=t,i=WI((()=>n&&'matchMedia'in n&&'function'==typeof n.matchMedia)),o=Br('number'==typeof r),a=Br(),s=Br(!1);return ba((()=>{if(o.value){o.value=!i.value;const t=qr(e).split(',');s.value=t.some((e=>{const t=e.includes('not all'),n=e.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),i=e.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let o=Boolean(n||i);return n&&o&&(o=r>=SI(n[1])),i&&o&&(o=r<=SI(i[1])),t?!o:o}))}else i.value&&(a.value=n.matchMedia(qr(e)),s.value=a.value.matches)})),HI(a,'change',(e=>{s.value=e.matches}),{passive:!0}),ks((()=>s.value))}('(orientation: portrait)');_a(e,(()=>c()))}return{width:s,height:l}}const yT=fo({__name:'Item',props:{type:{default:'plain'},initiallyExpanded:{type:Boolean,default:!1},duration:{default:260}},setup(e,{expose:t}){t();const[n,r]=VI(),i=e,o=Bo().slots,a=ks((()=>!!o.content)),s=ks((()=>!!o.detail)),l=Mr(i.initiallyExpanded),c=Mr(!1),u=ho('container_ref'),d=ho('content_ref');function p(){if(c.value||l.value)return;const e=d.value,t=u.value;if(!e||!t)return;c.value=!0,t.classList.add('expanded'),e.classList.add('animating'),e.style.visibility='hidden',e.style.display='flex',e.style.overflow='hidden',e.style.height='',e.style.opacity='0',e.style.transform='translateY(-6px) scaleY(0.98)',e.style.willChange='height, opacity, transform',e.offsetHeight;const n=e.scrollHeight;e.style.height='0px',requestAnimationFrame((()=>{requestAnimationFrame((()=>{const t='cubic-bezier(0.25, 0.1, 0.25, 1)';e.style.transition=`height ${i.duration}ms ${t}, opacity ${i.duration}ms ${t}, transform ${i.duration}ms ${t}`,e.style.visibility='',e.style.height=`${n}px`,e.style.opacity='1',e.style.transform='translateY(0) scaleY(1)',window.setTimeout((()=>{e.style.transitionProperty='none',e.style.height='',e.style.opacity='',e.style.transform='',e.style.overflow='',e.style.willChange='',e.offsetHeight,e.style.transitionProperty='',e.classList.remove('animating'),c.value=!1,l.value=!0}),i.duration)}))}))}function f(){if(c.value||!l.value)return;const e=d.value,t=u.value;if(!e||!t)return;c.value=!0,e.classList.add('animating');const n=e.scrollHeight;e.style.display='flex',e.style.overflow='hidden',e.style.height=`${n}px`,e.style.opacity='1',e.style.transform='translateY(0) scaleY(1)',e.style.willChange='height, opacity, transform',requestAnimationFrame((()=>{requestAnimationFrame((()=>{const n='cubic-bezier(0.25, 0.1, 0.25, 1)';e.style.transition=`height ${i.duration}ms ${n}, opacity ${i.duration}ms ${n}, transform ${i.duration}ms ${n}`,e.style.height='0px',e.style.opacity='0',e.style.transform='translateY(-4px) scaleY(0.98)',window.setTimeout((()=>{e.style.display='none',e.style.transitionProperty='none',e.style.height='',e.style.opacity='',e.style.transform='',e.style.overflow='',e.style.willChange='',e.offsetHeight,e.style.transitionProperty='',e.classList.remove('animating'),t.classList.remove('expanded'),c.value=!1,l.value=!1}),i.duration)}))}))}const h={DefineNonDetailPart:n,NonDetailPart:r,props:i,slots:o,has_content:a,has_detail:s,is_expanded:l,is_animating:c,container_ref:u,content_ref:d,toggle:function(){c.value||(l.value?f():p())},expand:p,collapse:f};return Object.defineProperty(h,'__isScriptSetup',{enumerable:!1,value:!0}),h}}),bT={class:'flex min-w-0 flex-1 flex-col'},_T={class:'TH-Item--title text-base font-bold'},wT={class:'mt-0.25 text-sm opacity-70'},kT={class:'flex-none shrink-0',style:{'max-width':'30%'}},xT={ref:'content_ref',class:'TH-collapsible--content flex w-full flex-col flex-wrap gap-0.5'};const ST=sI(yT,[['render',function(e,t,n,r,i,o){const a=lI;return La(),Ba('div',{ref:'container_ref',class:nn(['flex items-center justify-between gap-0.75',['box'===n.type?'rounded-md border border-(--grey5050a) p-1':'items-center',{'TH-collapsible flex-col items-center':r.has_detail,expanded:r.has_detail&&r.is_expanded}]])},[Wa(r.DefineNonDetailPart,null,{default:Ui((()=>[Ga('div',bT,[Ga('div',_T,[Do(e.$slots,'title',{},void 0,!0)]),Ga('div',wT,[Do(e.$slots,'description',{},void 0,!0)])]),Ga('div',kT,[Do(e.$slots,'content',{},void 0,!0)])])),_:3}),r.has_detail?(La(),Ba(Na,{key:1},[Ga('div',{class:nn(['flex w-full flex-wrap items-center justify-between gap-0.75',{'justify-between':r.has_content}]),onClick:r.toggle},[Wa(r.NonDetailPart)],2),Ga('div',xT,[Wa(a,{type:'major','margin-y':'my-0.25',weight:'h-[0.75px]'}),Do(e.$slots,'detail',{},void 0,!0)],512)],64)):(La(),Fa(r.NonDetailPart,{key:0}))],2)}],['__scopeId','data-v-eeab3bf2'],['__file','Item.vue']]);const ET=sI(fo({__name:'Button',props:{type:{default:'tavern_helper'},onClick:{}},setup(e,{expose:t}){t();const n={};return Object.defineProperty(n,'__isScriptSetup',{enumerable:!1,value:!0}),n}}),[['render',function(e,t,n,r,i,o){return La(),Ba('div',{class:nn(['tavern_helper'===n.type?'TH-Button--container':'menu_button menu_button_icon interactable flex-wrap','cursor-pointer']),onClick:t[0]||(t[0]=(...e)=>n.onClick&&n.onClick(...e))},[Do(e.$slots,'default',{},void 0,!0)],2)}],['__scopeId','data-v-c6614a95'],['__file','Button.vue']]),$T={class:'relative flex w-full justify-between gap-1 rounded-md bg-[var(--grey5020a)] p-1.5'},OT={class:'flex flex-1 flex-col text-sm opacity-70'},IT={class:'mb-1.5'};const TT=sI({},[['render',function(e,t){return La(),Ba('div',$T,[Ga('div',OT,[Ga('div',IT,un(e.t`KAKAA`),1),Ga('div',null,un(e.t``),1),Ga('div',null,un(e.t``),1)]),t[0]||(t[0]=Qa('<div class="flex items-center gap-0.75"><a href="https://n0vi028.github.io/JS-Slash-Runner-Doc/guide///.html" target="_blank"><i class="fa-solid fa-book"></i></a><a href="https://github.com/N0VI028/JS-Slash-Runner" target="_blank"><i class="fa-brands fa-github"></i></a><a href="https://discord.com/channels/1291925535324110879/1363482767421341868/1363482767421341868" target="_blank"><i class="fa-brands fa-discord"></i></a></div><div class="pointer-events-none absolute top-[50%] right-0.75 z-[-1] translate-y-[-50%] text-xl font-bold opacity-10"> About Us </div>',2))])}],['__file','Info.vue']]),AT=Object.create(null);AT.open='0',AT.close='1',AT.ping='2',AT.pong='3',AT.message='4',AT.upgrade='5',AT.noop='6';const CT=Object.create(null);Object.keys(AT).forEach((e=>{CT[AT[e]]=e}));const NT={type:'error',data:'parser error'},PT='function'==typeof Blob||'undefined'!=typeof Blob&&'[object BlobConstructor]'===Object.prototype.toString.call(Blob),jT='function'==typeof ArrayBuffer,DT=e=>'function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,RT=({type:e,data:t},n,r)=>PT&&t instanceof Blob?n?r(t):UT(t,r):jT&&(t instanceof ArrayBuffer||DT(t))?n?r(t):UT(new Blob([t]),r):r(AT[e]+(t||'')),UT=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(',')[1];t('b'+(e||''))},n.readAsDataURL(e)};function LT(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let zT;const VT='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',MT='undefined'==typeof Uint8Array?[]:new Uint8Array(256);for(let zJ=0;zJ<64;zJ++)MT[VT.charCodeAt(zJ)]=zJ;const BT='function'==typeof ArrayBuffer,FT=(e,t)=>{if('string'!=typeof e)return{type:'message',data:HT(e,t)};const n=e.charAt(0);if('b'===n)return{type:'message',data:ZT(e.substring(1),t)};return CT[n]?e.length>1?{type:CT[n],data:e.substring(1)}:{type:CT[n]}:NT},ZT=(e,t)=>{if(BT){const n=(e=>{let t,n,r,i,o,a=.75*e.length,s=e.length,l=0;'='===e[e.length-1]&&(a--,'='===e[e.length-2]&&a--);const c=new ArrayBuffer(a),u=new Uint8Array(c);for(t=0;t<s;t+=4)n=MT[e.charCodeAt(t)],r=MT[e.charCodeAt(t+1)],i=MT[e.charCodeAt(t+2)],o=MT[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c})(e);return HT(n,t)}return{base64:!0,data:e}},HT=(e,t)=>'blob'===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,qT=String.fromCharCode(30);function KT(){return new TransformStream({transform(e,t){!function(e,t){PT&&e.data instanceof Blob?e.data.arrayBuffer().then(LT).then(t):jT&&(e.data instanceof ArrayBuffer||DT(e.data))?t(LT(e.data)):RT(e,!1,(e=>{zT||(zT=new TextEncoder),t(zT.encode(e))}))}(e,(n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&'string'!=typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(n)}))}})}let GT;function WT(e){return e.reduce(((e,t)=>e+t.length),0)}function JT(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function YT(e){if(e)return function(e){for(var t in YT.prototype)e[t]=YT.prototype[t];return e}(e)}YT.prototype.on=YT.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks['$'+e]=this._callbacks['$'+e]||[]).push(t),this},YT.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},YT.prototype.off=YT.prototype.removeListener=YT.prototype.removeAllListeners=YT.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks['$'+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks['$'+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks['$'+e],this},YT.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks['$'+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},YT.prototype.emitReserved=YT.prototype.emit,YT.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks['$'+e]||[]},YT.prototype.hasListeners=function(e){return!!this.listeners(e).length};const XT='function'==typeof Promise&&'function'==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),QT='undefined'!=typeof self?self:'undefined'!=typeof window?window:Function('return this')();function eA(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const tA=QT.setTimeout,nA=QT.clearTimeout;function rA(e,t){t.useNativeTimers?(e.setTimeoutFn=tA.bind(QT),e.clearTimeoutFn=nA.bind(QT)):(e.setTimeoutFn=QT.setTimeout.bind(QT),e.clearTimeoutFn=QT.clearTimeout.bind(QT))}function iA(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class oA extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type='TransportError'}}class aA extends YT{constructor(e){super(),this.writable=!1,rA(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved('error',new oA(e,t,n)),this}open(){return this.readyState='opening',this.doOpen(),this}close(){return'opening'!==this.readyState&&'open'!==this.readyState||(this.doClose(),this.onClose()),this}send(e){'open'===this.readyState&&this.write(e)}onOpen(){this.readyState='open',this.writable=!0,super.emitReserved('open')}onData(e){const t=FT(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved('packet',e)}onClose(e){this.readyState='closed',super.emitReserved('close',e)}pause(e){}createUri(e,t={}){return e+'://'+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(':')?e:'['+e+']'}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?':'+this.opts.port:''}_query(e){const t=function(e){let t='';for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+='&'),t+=encodeURIComponent(n)+'='+encodeURIComponent(e[n]));return t}(e);return t.length?'?'+t:''}}class sA extends aA{constructor(){super(...arguments),this._polling=!1}get name(){return'polling'}doOpen(){this._poll()}pause(e){this.readyState='pausing';const t=()=>{this.readyState='paused',e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once('pollComplete',(function(){--e||t()}))),this.writable||(e++,this.once('drain',(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved('poll')}onData(e){((e,t)=>{const n=e.split(qT),r=[];for(let i=0;i<n.length;i++){const e=FT(n[i],t);if(r.push(e),'error'===e.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if('opening'===this.readyState&&'open'===e.type&&this.onOpen(),'close'===e.type)return this.onClose({description:'transport closed by the server'}),!1;this.onPacket(e)})),'closed'!==this.readyState&&(this._polling=!1,this.emitReserved('pollComplete'),'open'===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:'close'}])};'open'===this.readyState?e():this.once('open',e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach(((e,o)=>{RT(e,!1,(e=>{r[o]=e,++i===n&&t(r.join(qT))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved('drain')}))}))}uri(){const e=this.opts.secure?'https':'http',t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=iA()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let lA=!1;try{lA='undefined'!=typeof XMLHttpRequest&&'withCredentials'in new XMLHttpRequest}catch(LJ){}const cA=lA;function uA(){}class dA extends sA{constructor(e){if(super(e),'undefined'!=typeof location){const t='https:'===location.protocol;let n=location.port;n||(n=t?'443':'80'),this.xd='undefined'!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:'POST',data:e});n.on('success',t),n.on('error',((e,t)=>{this.onError('xhr post error',e,t)}))}doPoll(){const e=this.request();e.on('data',this.onData.bind(this)),e.on('error',((e,t)=>{this.onError('xhr poll error',e,t)})),this.pollXhr=e}}class pA extends YT{constructor(e,t,n){super(),this.createRequest=e,rA(this,n),this._opts=n,this._method=n.method||'GET',this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=eA(this._opts,'agent','pfx','key','passphrase','cert','ca','ciphers','rejectUnauthorized','autoUnref');t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(UJ){}if('POST'===this._method)try{n.setRequestHeader('Content-type','text/plain;charset=UTF-8')}catch(UJ){}try{n.setRequestHeader('Accept','*/*')}catch(UJ){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),'withCredentials'in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader('set-cookie'))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError('number'==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(UJ){return void this.setTimeoutFn((()=>{this._onError(UJ)}),0)}'undefined'!=typeof document&&(this._index=pA.requestsCount++,pA.requests[this._index]=this)}_onError(e){this.emitReserved('error',e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=uA,e)try{this._xhr.abort()}catch(UJ){}'undefined'!=typeof document&&delete pA.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved('data',e),this.emitReserved('success'),this._cleanup())}abort(){this._cleanup()}}if(pA.requestsCount=0,pA.requests={},'undefined'!=typeof document)if('function'==typeof attachEvent)attachEvent('onunload',fA);else if('function'==typeof addEventListener){addEventListener('onpagehide'in QT?'pagehide':'unload',fA,!1)}function fA(){for(let e in pA.requests)pA.requests.hasOwnProperty(e)&&pA.requests[e].abort()}const hA=function(){const e=mA({xdomain:!1});return e&&null!==e.responseType}();function mA(e){const t=e.xdomain;try{if('undefined'!=typeof XMLHttpRequest&&(!t||cA))return new XMLHttpRequest}catch(UJ){}if(!t)try{return new(QT[['Active'].concat('Object').join('X')])('Microsoft.XMLHTTP')}catch(UJ){}}const gA='undefined'!=typeof navigator&&'string'==typeof navigator.product&&'reactnative'===navigator.product.toLowerCase();class vA extends aA{get name(){return'websocket'}doOpen(){const e=this.uri(),t=this.opts.protocols,n=gA?{}:eA(this.opts,'agent','perMessageDeflate','pfx','key','passphrase','cert','ca','ciphers','rejectUnauthorized','localAddress','protocolVersion','origin','maxPayload','family','checkServerIdentity');this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(LJ){return this.emitReserved('error',LJ)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:'websocket connection closed',context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError('websocket error',e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;RT(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(UJ){}r&&XT((()=>{this.writable=!0,this.emitReserved('drain')}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?'wss':'ws',t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=iA()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const yA=QT.WebSocket||QT.MozWebSocket;const bA={websocket:class extends vA{createSocket(e,t,n){return gA?new yA(e,t,n):t?new yA(e,t):new yA(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends aA{get name(){return'webtransport'}doOpen(){try{this._transport=new WebTransport(this.createUri('https'),this.opts.transportOptions[this.name])}catch(LJ){return this.emitReserved('error',LJ)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError('webtransport error',e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){GT||(GT=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(a,s){for(n.push(a);;){if(0===r){if(WT(n)<1)break;const e=JT(n,1);o=!(128&~e[0]),i=127&e[0],r=i<126?3:126===i?1:2}else if(1===r){if(WT(n)<2)break;const e=JT(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(WT(n)<8)break;const e=JT(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){s.enqueue(NT);break}i=o*Math.pow(2,32)+t.getUint32(4),r=3}else{if(WT(n)<i)break;const e=JT(n,i);s.enqueue(FT(o?e:GT.decode(e),t)),r=0}if(0===i||i>e){s.enqueue(NT);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=KT();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then((({done:e,value:t})=>{e||(this.onPacket(t),i())})).catch((e=>{}))};i();const o={type:'open'};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&XT((()=>{this.writable=!0,this.emitReserved('drain')}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends dA{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=hA&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new pA(mA,this.uri(),e)}}},_A=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,wA=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'];function kA(e){if(e.length>8e3)throw'URI too long';const t=e,n=e.indexOf('['),r=e.indexOf(']');-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,';')+e.substring(r,e.length));let i=_A.exec(e||''),o={},a=14;for(;a--;)o[wA[a]]=i[a]||'';return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,':'),o.authority=o.authority.replace('[','').replace(']','').replace(/;/g,':'),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,'/').split('/');'/'!=t.slice(0,1)&&0!==t.length||r.splice(0,1);'/'==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}const xA='function'==typeof addEventListener&&'function'==typeof removeEventListener,SA=[];xA&&addEventListener('offline',(()=>{SA.forEach((e=>e()))}),!1);class EA extends YT{constructor(e,t){if(super(),this.binaryType='arraybuffer',this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&'object'==typeof e&&(t=e,e=null),e){const n=kA(e);t.hostname=n.host,t.secure='https'===n.protocol||'wss'===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=kA(t.host).host);rA(this,t),this.secure=null!=t.secure?t.secure:'undefined'!=typeof location&&'https:'===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?'443':'80'),this.hostname=t.hostname||('undefined'!=typeof location?location.hostname:'localhost'),this.port=t.port||('undefined'!=typeof location&&location.port?location.port:this.secure?'443':'80'),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:'/engine.io',agent:!1,withCredentials:!1,upgrade:!0,timestampParam:'t',rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,'')+(this.opts.addTrailingSlash?'/':''),'string'==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split('&');for(let r=0,i=n.length;r<i;r++){let e=n[r].split('=');t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),xA&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener('beforeunload',this._beforeunloadEventListener,!1)),'localhost'!==this.hostname&&(this._offlineEventListener=()=>{this._onClose('transport close',{description:'network connection lost'})},SA.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved('error','No transports available')}),0);const e=this.opts.rememberUpgrade&&EA.priorWebsocketSuccess&&-1!==this.transports.indexOf('websocket')?'websocket':this.transports[0];this.readyState='opening';const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on('drain',this._onDrain.bind(this)).on('packet',this._onPacket.bind(this)).on('error',this._onError.bind(this)).on('close',(e=>this._onClose('transport close',e)))}onOpen(){this.readyState='open',EA.priorWebsocketSuccess='websocket'===this.transport.name,this.emitReserved('open'),this.flush()}_onPacket(e){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState)switch(this.emitReserved('packet',e),this.emitReserved('heartbeat'),e.type){case'open':this.onHandshake(JSON.parse(e.data));break;case'ping':this._sendPacket('pong'),this.emitReserved('ping'),this.emitReserved('pong'),this._resetPingTimeout();break;case'error':const t=new Error('server error');t.code=e.data,this._onError(t);break;case'message':this.emitReserved('data',e.data),this.emitReserved('message',e.data)}}onHandshake(e){this.emitReserved('handshake',e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),'closed'!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose('ping timeout')}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved('drain'):this.flush()}flush(){if('closed'!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved('flush')}}_getWritablePackets(){if(!(this._maxPayload&&'polling'===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+='string'==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,XT((()=>{this._onClose('ping timeout')}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket('message',e,t,n),this}send(e,t,n){return this._sendPacket('message',e,t,n),this}_sendPacket(e,t,n,r){if('function'==typeof t&&(r=t,t=void 0),'function'==typeof n&&(r=n,n=null),'closing'===this.readyState||'closed'===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved('packetCreate',i),this.writeBuffer.push(i),r&&this.once('flush',r),this.flush()}close(){const e=()=>{this._onClose('forced close'),this.transport.close()},t=()=>{this.off('upgrade',t),this.off('upgradeError',t),e()},n=()=>{this.once('upgrade',t),this.once('upgradeError',t)};return'opening'!==this.readyState&&'open'!==this.readyState||(this.readyState='closing',this.writeBuffer.length?this.once('drain',(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(EA.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&'opening'===this.readyState)return this.transports.shift(),this._open();this.emitReserved('error',e),this._onClose('transport error',e)}_onClose(e,t){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners('close'),this.transport.close(),this.transport.removeAllListeners(),xA&&(this._beforeunloadEventListener&&removeEventListener('beforeunload',this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=SA.indexOf(this._offlineEventListener);-1!==e&&SA.splice(e,1)}this.readyState='closed',this.id=null,this.emitReserved('close',e,t),this.writeBuffer=[],this._prevBufferLen=0}}}EA.protocol=4;class $A extends EA{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),'open'===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;EA.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:'ping',data:'probe'}]),t.once('packet',(e=>{if(!n)if('pong'===e.type&&'probe'===e.data){if(this.upgrading=!0,this.emitReserved('upgrading',t),!t)return;EA.priorWebsocketSuccess='websocket'===t.name,this.transport.pause((()=>{n||'closed'!==this.readyState&&(c(),this.setTransport(t),t.send([{type:'upgrade'}]),this.emitReserved('upgrade',t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error('probe error');e.transport=t.name,this.emitReserved('upgradeError',e)}})))};function i(){n||(n=!0,c(),t.close(),t=null)}const o=e=>{const n=new Error('probe error: '+e);n.transport=t.name,i(),this.emitReserved('upgradeError',n)};function a(){o('transport closed')}function s(){o('socket closed')}function l(e){t&&e.name!==t.name&&i()}const c=()=>{t.removeListener('open',r),t.removeListener('error',o),t.removeListener('close',a),this.off('close',s),this.off('upgrading',l)};t.once('open',r),t.once('error',o),t.once('close',a),this.once('close',s),this.once('upgrading',l),-1!==this._upgrades.indexOf('webtransport')&&'webtransport'!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let OA=class extends $A{constructor(e,t={}){const n='object'==typeof e?e:t;(!n.transports||n.transports&&'string'==typeof n.transports[0])&&(n.transports=(n.transports||['polling','websocket','webtransport']).map((e=>bA[e])).filter((e=>!!e))),super(e,n)}};const IA='function'==typeof ArrayBuffer,TA=Object.prototype.toString,AA='function'==typeof Blob||'undefined'!=typeof Blob&&'[object BlobConstructor]'===TA.call(Blob),CA='function'==typeof File||'undefined'!=typeof File&&'[object FileConstructor]'===TA.call(File);function NA(e){return IA&&(e instanceof ArrayBuffer||(e=>'function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||AA&&e instanceof Blob||CA&&e instanceof File}function PA(e,t){if(!e||'object'!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(PA(e[t]))return!0;return!1}if(NA(e))return!0;if(e.toJSON&&'function'==typeof e.toJSON&&1===arguments.length)return PA(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&PA(e[n]))return!0;return!1}function jA(e){const t=[],n=e.data,r=e;return r.data=DA(n,t),r.attachments=t.length,{packet:r,buffers:t}}function DA(e,t){if(!e)return e;if(NA(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=DA(e[r],t);return n}if('object'==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=DA(e[r],t));return n}return e}function RA(e,t){return e.data=UA(e.data,t),delete e.attachments,e}function UA(e,t){if(!e)return e;if(e&&!0===e._placeholder){if('number'==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error('illegal attachments')}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=UA(e[n],t);else if('object'==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=UA(e[n],t));return e}const LA=['connect','connect_error','disconnect','disconnecting','newListener','removeListener'];var zA;!function(e){e[e.CONNECT=0]='CONNECT',e[e.DISCONNECT=1]='DISCONNECT',e[e.EVENT=2]='EVENT',e[e.ACK=3]='ACK',e[e.CONNECT_ERROR=4]='CONNECT_ERROR',e[e.BINARY_EVENT=5]='BINARY_EVENT',e[e.BINARY_ACK=6]='BINARY_ACK'}(zA||(zA={}));function VA(e){return'[object Object]'===Object.prototype.toString.call(e)}class MA extends YT{constructor(e){super(),this.reviver=e}add(e){let t;if('string'==typeof e){if(this.reconstructor)throw new Error('got plaintext data when reconstructing a packet');t=this.decodeString(e);const n=t.type===zA.BINARY_EVENT;n||t.type===zA.BINARY_ACK?(t.type=n?zA.EVENT:zA.ACK,this.reconstructor=new BA(t),0===t.attachments&&super.emitReserved('decoded',t)):super.emitReserved('decoded',t)}else{if(!NA(e)&&!e.base64)throw new Error('Unknown type: '+e);if(!this.reconstructor)throw new Error('got binary data when not reconstructing a packet');t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved('decoded',t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===zA[n.type])throw new Error('unknown packet type '+n.type);if(n.type===zA.BINARY_EVENT||n.type===zA.BINARY_ACK){const r=t+1;for(;'-'!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||'-'!==e.charAt(t))throw new Error('Illegal attachments');n.attachments=Number(i)}if('/'===e.charAt(t+1)){const r=t+1;for(;++t;){if(','===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp='/';const r=e.charAt(t+1);if(''!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!MA.isPayloadValid(n.type,r))throw new Error('invalid payload');n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(UJ){return!1}}static isPayloadValid(e,t){switch(e){case zA.CONNECT:return VA(t);case zA.DISCONNECT:return void 0===t;case zA.CONNECT_ERROR:return'string'==typeof t||VA(t);case zA.EVENT:case zA.BINARY_EVENT:return Array.isArray(t)&&('number'==typeof t[0]||'string'==typeof t[0]&&-1===LA.indexOf(t[0]));case zA.ACK:case zA.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BA{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=RA(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const FA=Object.freeze(Object.defineProperty({__proto__:null,Decoder:MA,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==zA.EVENT&&e.type!==zA.ACK||!PA(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===zA.EVENT?zA.BINARY_EVENT:zA.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=''+e.type;return e.type!==zA.BINARY_EVENT&&e.type!==zA.BINARY_ACK||(t+=e.attachments+'-'),e.nsp&&'/'!==e.nsp&&(t+=e.nsp+','),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=jA(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}},get PacketType(){return zA},protocol:5},Symbol.toStringTag,{value:'Module'}));function ZA(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const HA=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qA extends YT{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ZA(e,'open',this.onopen.bind(this)),ZA(e,'packet',this.onpacket.bind(this)),ZA(e,'error',this.onerror.bind(this)),ZA(e,'close',this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),'open'===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift('message'),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(HA.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:zA.EVENT,data:t,options:{}};if(o.options.compress=!1!==this.flags.compress,'function'==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),o.id=e}const a=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,s=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!a||(s?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const i=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error('operation has timed out'))}),r),o=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,e)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise(((n,r)=>{const i=(e,t)=>e?r(e):n(t);i.withError=!0,t.push(i),this.emit(e,...t)}))}_addToQueue(e){let t;'function'==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{if(n!==this._queue[0])return;return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){'function'==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:zA.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved('connect_error',e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved('disconnect',e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error('socket has been disconnected'))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case zA.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved('connect_error',new Error('It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)'));break;case zA.EVENT:case zA.BINARY_EVENT:this.onevent(e);break;case zA.ACK:case zA.BINARY_ACK:this.onack(e);break;case zA.DISCONNECT:this.ondisconnect();break;case zA.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved('connect_error',t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&'string'==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:zA.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];'function'==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved('connect'),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose('io server disconnect')}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:zA.DISCONNECT}),this.destroy(),this.connected&&this.onclose('io client disconnect'),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function KA(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}KA.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},KA.prototype.reset=function(){this.attempts=0},KA.prototype.setMin=function(e){this.ms=e},KA.prototype.setMax=function(e){this.max=e},KA.prototype.setJitter=function(e){this.jitter=e};class GA extends YT{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&'object'==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||'/socket.io',this.opts=t,rA(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new KA({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState='closed',this.uri=e;const r=t.parser||FA;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf('open'))return this;this.engine=new OA(this.uri,this.opts);const t=this.engine,n=this;this._readyState='opening',this.skipReconnect=!1;const r=ZA(t,'open',(function(){n.onopen(),e&&e()})),i=t=>{this.cleanup(),this._readyState='closed',this.emitReserved('error',t),e?e(t):this.maybeReconnectOnOpen()},o=ZA(t,'error',i);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),i(new Error('timeout')),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState='open',this.emitReserved('open');const e=this.engine;this.subs.push(ZA(e,'ping',this.onping.bind(this)),ZA(e,'data',this.ondata.bind(this)),ZA(e,'error',this.onerror.bind(this)),ZA(e,'close',this.onclose.bind(this)),ZA(this.decoder,'decoded',this.ondecoded.bind(this)))}onping(){this.emitReserved('ping')}ondata(e){try{this.decoder.add(e)}catch(UJ){this.onclose('parse error',UJ)}}ondecoded(e){XT((()=>{this.emitReserved('packet',e)}),this.setTimeoutFn)}onerror(e){this.emitReserved('error',e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new qA(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose('forced close')}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState='closed',this.emitReserved('close',e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved('reconnect_failed'),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved('reconnect_attempt',e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved('reconnect_error',t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved('reconnect',e)}}const WA={};function JA(e,t){'object'==typeof e&&(t=e,e=void 0);const n=function(e,t='',n){let r=e;n=n||'undefined'!=typeof location&&location,null==e&&(e=n.protocol+'//'+n.host),'string'==typeof e&&('/'===e.charAt(0)&&(e='/'===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+'//'+e:'https://'+e),r=kA(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port='80':/^(http|ws)s$/.test(r.protocol)&&(r.port='443')),r.path=r.path||'/';const i=-1!==r.host.indexOf(':')?'['+r.host+']':r.host;return r.id=r.protocol+'://'+i+':'+r.port+t,r.href=r.protocol+'://'+i+(n&&n.port===r.port?'':':'+r.port),r}(e,(t=t||{}).path||'/socket.io'),r=n.source,i=n.id,o=n.path,a=WA[i]&&o in WA[i].nsps;let s;return t.forceNew||t['force new connection']||!1===t.multiplex||a?s=new GA(r,t):(WA[i]||(WA[i]=new GA(r,t)),s=WA[i]),n.query&&!t.query&&(t.query=n.queryKey),s.socket(n.path,t)}let YA;function XA(e,t,n,r){const i=TI((()=>{FS().reloadAll()}),r),o=TI((()=>{WS().reloadAll()}),r),a=Mr(!1);return ba((()=>{if(YA&&(YA.close(),YA=null,a.value=!1),e.value)return YA=JA(n.value,{transports:['websocket']}),YA.on('connect',(()=>{console.info('[Listener] '),a.value=!0})),YA.on('connect_error',(e=>{t.value&&toastr.error(Se`${e.name}: ${e.message}`,Se`[], ...`),console.error(`${e.name}: ${e.message}${e.stack??''}`),a.value=YA?.connected??!1})),YA.on('disconnect',((e,n)=>{t.value&&toastr.warning(Se`${e}`,Se`[]`),console.info(`[Listener] : ${e}\n${n}`),a.value=YA?.connected??!1})),YA.on('iframe_updated',(()=>(i(),void o()))),YA.on('script_iframe_updated',(()=>o())),YA.on('message_iframe_updated',(()=>i())),result})),a}Object.assign(JA,{Manager:GA,Socket:qA,io:JA,connect:JA});const QA=fo({__name:'Listener',setup(e,{expose:t}){t();const{enabled:n,enable_echo:r,url:i,duration:o}=Yr(LS().settings.listener),a={enabled:n,enable_echo:r,url:i,duration:o,connected:XA(n,r,i,o)};return Object.defineProperty(a,'__isScriptSetup',{enumerable:!1,value:!0}),a}}),eC={class:'flex flex-wrap items-center justify-between gap-0.5'},tC={class:'flex-container'},nC={class:'flex items-center'},rC={style:{'margin-right':'10px'}},iC={class:'flex items-center'},oC={class:'menu_button menu_button_icon interactable'},aC={href:'https://n0vi028.github.io/JS-Slash-Runner-Doc/guide//.html',target:'_blank'},sC={class:'flex flex-col flex-wrap gap-0.5'},lC={class:'flex flex-col'};const cC=sI(QA,[['render',function(e,t,n,r,i,o){const a=ST;return La(),Fa(a,{type:'box'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t``),1)])),content:Ui((()=>[Ga('i',{class:'fa-solid fa-wifi mr-0.5',style:Yt({color:r.connected?'green':'rgb(170, 0, 0)'})},null,4)])),detail:Ui((()=>[Ga('div',eC,[Ga('div',tC,[Ga('div',nC,[Li(Ga('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>r.enabled=e),type:'checkbox',style:{margin:'0 5px 0 1px'}},null,512),[[wl,r.enabled]]),Ga('span',rC,un(e.t``),1)]),Ga('div',iC,[Li(Ga('input',{'onUpdate:modelValue':t[1]||(t[1]=e=>r.enable_echo=e),type:'checkbox',style:{margin:'0 5px 0 1px'}},null,512),[[wl,r.enable_echo]]),Ga('span',null,un(e.t``),1)])]),Ga('div',oC,[Ga('a',aC,[Ga('small',null,[t[3]||(t[3]=Ga('i',{class:'fa-solid fa-book',style:{'margin-right':'5px'}},null,-1)),Xa(un(e.t``),1)])])])]),Ga('div',sC,[Ga('div',lC,[Ga('b',null,un(e.t` ()`),1),Li(Ga('input',{'onUpdate:modelValue':t[2]||(t[2]=e=>r.duration=e),class:'text_pole',type:'number',min:'1'},null,512),[[_l,r.duration]])])])])),_:1})}],['__file','Listener.vue']]),uC=fo({__name:'Toggle',props:Zo({id:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:['update:modelValue'],setup(e,{expose:t}){t();const n={model:ka(e,'modelValue'),props:e};return Object.defineProperty(n,'__isScriptSetup',{enumerable:!1,value:!0}),n}}),dC={class:'relative inline-block h-1 w-2'},pC=['id'],fC=['for'];const hC=sI(uC,[['render',function(e,t,n,r,i,o){return La(),Ba('div',dC,[Li(Ga('input',{id:r.props.id,'onUpdate:modelValue':t[0]||(t[0]=e=>r.model=e),type:'checkbox',class:'peer sr-only'},null,8,pC),[[wl,r.model]]),Ga('label',{for:r.props.id,class:'absolute inset-0 cursor-pointer overflow-hidden rounded-full bg-gray-300 transition-all duration-300 peer-checked:bg-[var(--SmartThemeQuoteColor)] peer-focus:shadow-[0_0_1px_var(--SmartThemeQuoteColor)] after:absolute after:top-1/2 after:left-[0.125rem] after:h-0.75 after:w-0.75 after:-translate-y-1/2 after:rounded-full after:bg-white after:transition-all after:duration-300 after:content-[\'\'] peer-checked:after:right-[0.125rem] peer-checked:after:left-auto'},null,8,fC)])}],['__file','Toggle.vue']]);let mC=!1;function gC(e,t,n){mC=n}function vC(){mC=!1}function yC(e){const t=$(`div.mes[mesid="${e}"]`),n=t.find('.mes_text');if(0===n.length||!h$.some((e=>e.regex.test(n.text()))))return;const r=n=>{for(const r of h$)n=n.replace(r.regex,((n,...i)=>r.replace({message_id:Number(e),role:'true'===t.attr('is_user')?'user':'assistant'},n,...i)));return n};n.html(((e,t)=>r(t))),n.find('code').filter(((e,t)=>h$.some((e=>e.regex.test($(t).text()))))).text(((e,t)=>r(t))).removeClass('hljs').each(((e,t)=>{ql(t)}))}function bC(){$('div.mes').each(((e,t)=>{yC($(t).attr('mesid'))}))}function _C(e){_a(e,((e,t)=>{e?bC():!e&&t&&Gl()})),c.on('chatLoaded',(()=>{e.value&&bC()})),c.on(u.GENERATE_AFTER_COMBINE_PROMPTS,gC),c.on(u.GENERATION_ENDED,vC),c.on(u.GENERATE_AFTER_DATA,((t,n)=>{e.value&&function(e,t){if(!(t??mC))for(const n of e.prompt)for(const e of h$)n.content=n.content.replace(e.regex,((t,...r)=>e.replace({role:n.role},t,...r)))}(t,n)})),[u.CHARACTER_MESSAGE_RENDERED,u.USER_MESSAGE_RENDERED,u.MESSAGE_UPDATED,u.MESSAGE_SWIPED].forEach((t=>{c.on(t,(t=>{e.value&&yC(t)}))}))}const wC=fo({__name:'MacroLike',setup(e,{expose:t}){t();const n=ei(LS().settings.macro,'enabled'),r=function(e){return ks({get:()=>!e.value,set:t=>{e.value=!t}})}(n);_C(n);const i={enabled:n,disabled:r};return Object.defineProperty(i,'__isScriptSetup',{enumerable:!1,value:!0}),i}});const kC=sI(wC,[['render',function(e,t,n,r,i,o){const a=hC,s=ST;return La(),Fa(s,{type:'box'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t`/ \{\{get_message_variable::\}\} `),1)])),content:Ui((()=>[Wa(a,{id:'TH-macro-enabled',modelValue:r.disabled,'onUpdate:modelValue':t[0]||(t[0]=e=>r.disabled=e)},null,8,['modelValue'])])),_:1})}],['__file','MacroLike.vue']]),xC=fo({__name:'Reference',setup(e,{expose:t}){function n(){const e=Object.keys(ct.commands).filter((e=>ct.commands[e].name===e)).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))).map((e=>ct.commands[e])),t=e=>({is_required:e.isRequired,default_value:e.defaultValue??void 0,accepts_multiple:e.acceptsMultiple,enum_list:e.enumList.length>0?e.enumList.map((e=>e.value)):void 0,type_list:e.typeList.length>0?e.typeList:void 0}),n=e=>({name:e.name,...t(e)});return e.map((e=>{return{name:e.name,named_args:e.namedArgumentList.map(n)??[],unnamed_args:e.unnamedArgumentList.map(t)??[],return_type:e.returns??'void',help_string:(r=e.helpString,$('<span>').html(r).text().split('\n').map((e=>e.trim())).filter((e=>''!==e)).join(' ')??'NO DETAILS')};var r})).map((e=>`/${e.name}${e.named_args.length>0?' ':''}${e.named_args.map((e=>`[${e.accepts_multiple?'...':''}${e.name}=${e.enum_list?e.enum_list.join('|'):e.type_list?e.type_list.join('|'):''}]${e.is_required?'':'?'}${e.default_value?`=${e.default_value}`:''}`)).join(' ')}${e.unnamed_args.length>0?' ':''}${e.unnamed_args.map((e=>`(${e.accepts_multiple?'...':''}${e.enum_list?e.enum_list.join('|'):e.type_list?e.type_list.join('|'):''})${e.is_required?'':'?'}${e.default_value?`=${e.default_value}`:''}`)).join(' ')} // ${e.help_string}`)).join('\n')}t();const r=ho('tavern_helper_types_button'),i=ho('tavern_helper_types_popup');Eo((()=>{const e=Popper.createPopper(r.value,i.value,{placement:'right-end'});$(r.value).on('click',(function(){const t=$(i.value);t.css('display','none'===t.css('display')?'block':'none'),e.update()}))}));const o={open:function(e){window.open(e,'_blank')},formatSlashCommands:n,tavern_helper_types_button:r,tavern_helper_types_popup:i,downloadSlashCommands:function(e){const t=e.target,r=URL.createObjectURL(new Blob([n()],{type:'text/plain'}));t.href=r,t.download='slash_command.txt',setTimeout((()=>URL.revokeObjectURL(r)),0)}};return Object.defineProperty(o,'__isScriptSetup',{enumerable:!1,value:!0}),o}}),SC={class:'flex w-full flex-wrap gap-0.5'},EC={class:'mb-0.5 flex items-center justify-center gap-0.5'},$C={ref:'tavern_helper_types_button',class:'TH-reference-button'},OC={ref:'tavern_helper_types_popup',class:'list-group',style:{display:'none'}},IC={target:'_blank',href:'https://gitlab.com/novi028/JS-Slash-Runner/-/raw/main/dist/@types.zip?ref_type=heads&inline=false',class:'list-group-item'},TC={target:'_blank',href:'https://gitlab.com/novi028/JS-Slash-Runner/-/raw/main/dist/@types.txt?ref_type=heads&inline=false',class:'list-group-item'},AC={class:'mb-0.5 flex items-center justify-center gap-0.5'};const CC=sI(xC,[['render',function(e,t,n,r,i,o){const a=lI,s=ST;return La(),Fa(s,{type:'box'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t``),1)])),detail:Ui((()=>[Ga('div',SC,[Wa(a,{'margin-y':'0'},{default:Ui((()=>[Xa(un(e.t``),1)])),_:1}),Ga('div',EC,[Ga('div',{class:'TH-reference-button',onClick:t[0]||(t[0]=e=>r.open('https://n0vi028.github.io/JS-Slash-Runner-Doc/guide//.html'))},[Xa(un(e.t``),1),t[2]||(t[2]=Ga('i',{class:'fa-solid fa-xs fa-external-link'},null,-1))]),Ga('div',$C,[Xa(un(e.t``),1),t[3]||(t[3]=Ga('i',{class:'fa-solid fa-ellipsis-vertical'},null,-1))],512),Ga('div',OC,[Ga('a',IC,[Xa(un(e.t``),1),t[4]||(t[4]=Ga('i',{class:'fa-solid fa-download'},null,-1))]),Ga('a',TC,[Xa(un(e.t` AI `),1),t[5]||(t[5]=Ga('i',{class:'fa-solid fa-download'},null,-1))])],512)]),Wa(a,{'margin-y':'0'},{default:Ui((()=>[Xa(un(e.t` /STScript`),1)])),_:1}),Ga('div',AC,[Ga('div',{class:'TH-reference-button',onClick:t[1]||(t[1]=e=>r.open('https://rentry.org/sillytavern-script-book'))},[Xa(un(e.t``)+' ',1),t[6]||(t[6]=Ga('i',{class:'fa-solid fa-external-link'},null,-1))]),Ga('div',{class:'TH-reference-button',onClick:r.downloadSlashCommands},[Xa(un(e.t``),1),t[7]||(t[7]=Ga('i',{class:'fa-solid fa-download'},null,-1))])])])])),_:1})}],['__scopeId','data-v-7ac3f269'],['__file','Reference.vue']]),NC=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,PC=e=>{if('string'!=typeof e)throw new TypeError('Invalid argument expected string');const t=e.match(NC);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},jC=e=>'*'===e||'x'===e||'X'===e,DC=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},RC=(e,t)=>{if(jC(e)||jC(t))return 0;const[n,r]=((e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t])(DC(e),DC(t));return n>r?1:n<r?-1:0},UC=(e,t)=>{for(let n=0;n<Math.max(e.length,t.length);n++){const r=RC(e[n]||'0',t[n]||'0');if(0!==r)return r}return 0},LC=(e,t,n)=>{MC(n);const r=((e,t)=>{const n=PC(e),r=PC(t),i=n.pop(),o=r.pop(),a=UC(n,r);return 0!==a?a:i&&o?UC(i.split('.'),o.split('.')):i||o?i?-1:1:0})(e,t);return zC[n].includes(r)},zC={'>':[1],'>=':[0,1],'=':[0],'<=':[-1,0],'<':[-1],'!=':[-1,1]},VC=Object.keys(zC),MC=e=>{if('string'!=typeof e)throw new TypeError('Invalid operator type, expected string but got '+typeof e);if(-1===VC.indexOf(e))throw new Error(`Invalid operator, expected one of ${VC.join('|')}`)};function BC(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var FC={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function ZC(e){FC=e}var HC={exec:()=>null};function qC(e,t=''){let n='string'==typeof e?e:e.source,r={replace:(e,t)=>{let i='string'==typeof t?t:t.source;return i=i.replace(KC.caret,'$1'),n=n.replace(e,i),r},getRegex:()=>new RegExp(n,t)};return r}var KC={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,'i')},GC=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,WC=/(?:[*+-]|\d{1,9}[.)])/,JC=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,YC=qC(JC).replace(/bull/g,WC).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,'').getRegex(),XC=qC(JC).replace(/bull/g,WC).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),QC=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,eN=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,tN=qC(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace('label',eN).replace('title',/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),nN=qC(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,WC).getRegex(),rN='address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul',iN=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,oN=qC('^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))','i').replace('comment',iN).replace('tag',rN).replace('attribute',/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),aN=qC(QC).replace('hr',GC).replace('heading',' {0,3}#{1,6}(?:\\s|$)').replace('|lheading','').replace('|table','').replace('blockquote',' {0,3}>').replace('fences',' {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n').replace('list',' {0,3}(?:[*+-]|1[.)]) ').replace('html','</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag',rN).getRegex(),sN={blockquote:qC(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace('paragraph',aN).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:tN,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:GC,html:oN,lheading:YC,list:nN,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:aN,table:HC,text:/^[^\n]+/},lN=qC('^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)').replace('hr',GC).replace('heading',' {0,3}#{1,6}(?:\\s|$)').replace('blockquote',' {0,3}>').replace('code','(?: {4}| {0,3}\t)[^\\n]').replace('fences',' {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n').replace('list',' {0,3}(?:[*+-]|1[.)]) ').replace('html','</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag',rN).getRegex(),cN={...sN,lheading:XC,table:lN,paragraph:qC(QC).replace('hr',GC).replace('heading',' {0,3}#{1,6}(?:\\s|$)').replace('|lheading','').replace('table',lN).replace('blockquote',' {0,3}>').replace('fences',' {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n').replace('list',' {0,3}(?:[*+-]|1[.)]) ').replace('html','</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag',rN).getRegex()},uN={...sN,html:qC('^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|\'[^\']*\'|\\s[^\'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))').replace('comment',iN).replace(/tag/g,'(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b').getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:HC,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:qC(QC).replace('hr',GC).replace('heading',' *#{1,6} *[^\n]').replace('lheading',YC).replace('|table','').replace('blockquote',' {0,3}>').replace('|fences','').replace('|list','').replace('|html','').replace('|tag','').getRegex()},dN=/^( {2,}|\\)\n(?!\s*$)/,pN=/[\p{P}\p{S}]/u,fN=/[\s\p{P}\p{S}]/u,hN=/[^\s\p{P}\p{S}]/u,mN=qC(/^((?![*_])punctSpace)/,'u').replace(/punctSpace/g,fN).getRegex(),gN=/(?!~)[\p{P}\p{S}]/u,vN=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,yN=qC(vN,'u').replace(/punct/g,pN).getRegex(),bN=qC(vN,'u').replace(/punct/g,gN).getRegex(),_N='^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)',wN=qC(_N,'gu').replace(/notPunctSpace/g,hN).replace(/punctSpace/g,fN).replace(/punct/g,pN).getRegex(),kN=qC(_N,'gu').replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,gN).getRegex(),xN=qC('^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)','gu').replace(/notPunctSpace/g,hN).replace(/punctSpace/g,fN).replace(/punct/g,pN).getRegex(),SN=qC(/\\(punct)/,'gu').replace(/punct/g,pN).getRegex(),EN=qC(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace('scheme',/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace('email',/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$N=qC(iN).replace('(?:--\x3e|$)','--\x3e').getRegex(),ON=qC('^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>').replace('comment',$N).replace('attribute',/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),IN=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,TN=qC(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace('label',IN).replace('href',/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace('title',/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),AN=qC(/^!?\[(label)\]\[(ref)\]/).replace('label',IN).replace('ref',eN).getRegex(),CN=qC(/^!?\[(ref)\](?:\[\])?/).replace('ref',eN).getRegex(),NN=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,PN={_backpedal:HC,anyPunctuation:SN,autolink:EN,blockSkip:/\[(?:[^\[\]`]|`[^`]*?`)*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,br:dN,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:HC,emStrongLDelim:yN,emStrongRDelimAst:wN,emStrongRDelimUnd:xN,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:TN,nolink:CN,punctuation:mN,reflink:AN,reflinkSearch:qC('reflink|nolink(?!\\()','g').replace('reflink',AN).replace('nolink',CN).getRegex(),tag:ON,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:HC},jN={...PN,link:qC(/^!?\[(label)\]\((.*?)\)/).replace('label',IN).getRegex(),reflink:qC(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace('label',IN).getRegex()},DN={...PN,emStrongRDelimAst:kN,emStrongLDelim:bN,url:qC(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace('protocol',NN).replace('email',/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:qC(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace('protocol',NN).getRegex()},RN={...DN,br:qC(dN).replace('{2,}','*').getRegex(),text:qC(DN.text).replace('\\b_','\\b_| {2,}\\n').replace(/\{2,\}/g,'*').getRegex()},UN={normal:sN,gfm:cN,pedantic:uN},LN={normal:PN,gfm:DN,breaks:RN,pedantic:jN},zN={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'},VN=e=>zN[e];function MN(e,t){if(t){if(KC.escapeTest.test(e))return e.replace(KC.escapeReplace,VN)}else if(KC.escapeTestNoEncode.test(e))return e.replace(KC.escapeReplaceNoEncode,VN);return e}function BN(e){try{e=encodeURI(e).replace(KC.percentDecode,'%')}catch{return null}return e}function FN(e,t){let n=e.replace(KC.findPipe,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&'\\'===n[i];)r=!r;return r?'|':' |'})),r=n.split(KC.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push('');for(;i<r.length;i++)r[i]=r[i].trim().replace(KC.slashPipe,'|');return r}function ZN(e,t,n){let r=e.length;if(0===r)return'';let i=0;for(;i<r;){if(e.charAt(r-i-1)!==t)break;i++}return e.slice(0,r-i)}function HN(e,t,n,r,i){let o=t.href,a=t.title||null,s=e[1].replace(i.other.outputLinkReplace,'$1');r.state.inLink=!0;let l={type:'!'===e[0].charAt(0)?'image':'link',raw:n,href:o,title:a,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}var qN=class{options;rules;lexer;constructor(e){this.options=e||FC}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:'space',raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,'');return{type:'code',raw:t[0],codeBlockStyle:'indented',text:this.options.pedantic?e:ZN(e,'\n')}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],n=function(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(null===r)return t;let i=r[1];return t.split('\n').map((e=>{let t=e.match(n.other.beginningSpace);if(null===t)return e;let[r]=t;return r.length>=i.length?e.slice(i.length):e})).join('\n')}(e,t[3]||'',this.rules);return{type:'code',raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,'$1'):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=ZN(e,'#');(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:'heading',raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:'hr',raw:ZN(t[0],'\n')}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=ZN(t[0],'\n').split('\n'),n='',r='',i=[];for(;e.length>0;){let t,o=!1,a=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))a.push(e[t]),o=!0;else{if(o)break;a.push(e[t])}e=e.slice(t);let s=a.join('\n'),l=s.replace(this.rules.other.blockquoteSetextReplace,'\n    $1').replace(this.rules.other.blockquoteSetextReplace2,'');n=n?`${n}\n${s}`:s,r=r?`${r}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===e.length)break;let u=i.at(-1);if('code'===u?.type)break;if('blockquote'===u?.type){let t=u,o=t.raw+'\n'+e.join('\n'),a=this.blockquote(o);i[i.length-1]=a,n=n.substring(0,n.length-t.raw.length)+a.raw,r=r.substring(0,r.length-t.text.length)+a.text;break}if('list'!==u?.type);else{let t=u,o=t.raw+'\n'+e.join('\n'),a=this.list(o);i[i.length-1]=a,n=n.substring(0,n.length-u.raw.length)+a.raw,r=r.substring(0,r.length-t.raw.length)+a.raw,e=o.substring(i.at(-1).raw.length).split('\n')}}return{type:'blockquote',raw:n,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:'list',raw:'',ordered:r,start:r?+n.slice(0,-1):'',loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:'[*+-]');let o=this.rules.other.listItemRegex(n),a=!1;for(;e;){let n=!1,r='',s='';if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split('\n',1)[0].replace(this.rules.other.listReplaceTabs,(e=>' '.repeat(3*e.length))),c=e.split('\n',1)[0],u=!l.trim(),d=0;if(this.options.pedantic?(d=2,s=l.trimStart()):u?d=t[1].length+1:(d=t[2].search(this.rules.other.nonSpaceChar),d=d>4?1:d,s=l.slice(d),d+=t[1].length),u&&this.rules.other.blankLine.test(c)&&(r+=c+'\n',e=e.substring(c.length+1),n=!0),!n){let t=this.rules.other.nextBulletRegex(d),n=this.rules.other.hrRegex(d),i=this.rules.other.fencesBeginRegex(d),o=this.rules.other.headingBeginRegex(d),a=this.rules.other.htmlBeginRegex(d);for(;e;){let p,f=e.split('\n',1)[0];if(c=f,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,'  '),p=c):p=c.replace(this.rules.other.tabCharGlobal,'    '),i.test(c)||o.test(c)||a.test(c)||t.test(c)||n.test(c))break;if(p.search(this.rules.other.nonSpaceChar)>=d||!c.trim())s+='\n'+p.slice(d);else{if(u||l.replace(this.rules.other.tabCharGlobal,'    ').search(this.rules.other.nonSpaceChar)>=4||i.test(l)||o.test(l)||n.test(l))break;s+='\n'+c}!u&&!c.trim()&&(u=!0),r+=f+'\n',e=e.substring(f.length+1),l=p.slice(d)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(a=!0));let p,f=null;this.options.gfm&&(f=this.rules.other.listIsTask.exec(s),f&&(p='[ ] '!==f[0],s=s.replace(this.rules.other.listReplaceTask,''))),i.items.push({type:'list_item',raw:r,task:!!f,checked:p,loose:!1,text:s,tokens:[]}),i.raw+=r}let s=i.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter((e=>'space'===e.type)),n=t.length>0&&t.some((e=>this.rules.other.anyLine.test(e.raw)));i.loose=n}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:'html',block:!0,raw:t[0],pre:'pre'===t[1]||'script'===t[1]||'style'===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal,' '),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,'$1').replace(this.rules.inline.anyPunctuation,'$1'):'',r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,'$1'):t[3];return{type:'def',tag:e,raw:t[0],href:n,title:r}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=FN(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,'').split('|'),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,'').split('\n'):[],o={type:'table',raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let e of r)this.rules.other.tableAlignRight.test(e)?o.align.push('right'):this.rules.other.tableAlignCenter.test(e)?o.align.push('center'):this.rules.other.tableAlignLeft.test(e)?o.align.push('left'):o.align.push(null);for(let e=0;e<n.length;e++)o.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:o.align[e]});for(let e of i)o.rows.push(FN(e,o.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]}))));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:'heading',raw:t[0],depth:'='===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e='\n'===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:'paragraph',raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:'text',raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:'escape',raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:'html',raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=ZN(e.slice(0,-1),'\\');if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if('\\'===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}(t[2],'()');if(-2===e)return;if(e>-1){let n=(0===t[0].indexOf('!')?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=''}}let n=t[2],r='';if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):'';return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),HN(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,'$1'),title:r&&r.replace(this.rules.inline.anyPunctuation,'$1')},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=t[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal,' ').toLowerCase()];if(!e){let e=n[0].charAt(0);return{type:'text',raw:e,text:e}}return HN(n,e,n[0],this.lexer,this.rules)}}emStrong(e,t,n=''){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!r[1]&&!r[2]||!n||this.rules.inline.punctuation.exec(n))){let n,i,o=[...r[0]].length-1,a=o,s=0,l='*'===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+o);null!=(r=l.exec(t));){if(n=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!n)continue;if(i=[...n].length,r[3]||r[4]){a+=i;continue}if((r[5]||r[6])&&o%3&&!((o+i)%3)){s+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+s);let t=[...r[0]][0].length,l=e.slice(0,o+r.index+t+i);if(Math.min(o,i)%2){let e=l.slice(1,-1);return{type:'em',raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:'strong',raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal,' '),n=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&r&&(e=e.substring(1,e.length-1)),{type:'codespan',raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:'br',raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:'del',raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,n;return'@'===t[2]?(e=t[1],n='mailto:'+e):(e=t[1],n=e),{type:'link',raw:t[0],text:e,href:n,tokens:[{type:'text',raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if('@'===t[2])e=t[0],n='mailto:'+e;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??''}while(r!==t[0]);e=t[0],n='www.'===t[1]?'http://'+t[0]:t[0]}return{type:'link',raw:t[0],text:e,href:n,tokens:[{type:'text',raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:'text',raw:t[0],text:t[0],escaped:e}}}},KN=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||FC,this.options.tokenizer=this.options.tokenizer||new qN,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:KC,block:UN.normal,inline:LN.normal};this.options.pedantic?(t.block=UN.pedantic,t.inline=LN.pedantic):this.options.gfm&&(t.block=UN.gfm,this.options.breaks?t.inline=LN.breaks:t.inline=LN.gfm),this.tokenizer.rules=t}static get rules(){return{block:UN,inline:LN}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){e=e.replace(KC.carriageReturn,'\n'),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(KC.tabCharGlobal,'    ').replace(KC.spaceLine,''));e;){let r;if(this.options.extensions?.block?.some((n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0))))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let n=t.at(-1);1===r.raw.length&&void 0!==n?n.raw+='\n':t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let n=t.at(-1);'paragraph'===n?.type||'text'===n?.type?(n.raw+=(n.raw.endsWith('\n')?'':'\n')+r.raw,n.text+='\n'+r.text,this.inlineQueue.at(-1).src=n.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let n=t.at(-1);'paragraph'===n?.type||'text'===n?.type?(n.raw+=(n.raw.endsWith('\n')?'':'\n')+r.raw,n.text+='\n'+r.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let t,n=1/0,r=e.slice(1);this.options.extensions.startBlock.forEach((e=>{t=e.call({lexer:this},r),'number'==typeof t&&t>=0&&(n=Math.min(n,t))})),n<1/0&&n>=0&&(i=e.substring(0,n+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let o=t.at(-1);n&&'paragraph'===o?.type?(o.raw+=(o.raw.endsWith('\n')?'':'\n')+r.raw,o.text+='\n'+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r),n=i.length!==e.length,e=e.substring(r.raw.length)}else if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let n=t.at(-1);'text'===n?.type?(n.raw+=(n.raw.endsWith('\n')?'':'\n')+r.raw,n.text+='\n'+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(r)}else if(e){let t='Infinite loop on byte: '+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,r=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(n));)e.includes(r[0].slice(r[0].lastIndexOf('[')+1,-1))&&(n=n.slice(0,r.index)+'['+'a'.repeat(r[0].length-2)+']'+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,r.index)+'++'+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,r.index)+'['+'a'.repeat(r[0].length-2)+']'+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,o='';for(;e;){let r;if(i||(o=''),i=!1,this.options.extensions?.inline?.some((n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0))))continue;if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length);let n=t.at(-1);'text'===r.type&&'text'===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,n,o)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}let a=e;if(this.options.extensions?.startInline){let t,n=1/0,r=e.slice(1);this.options.extensions.startInline.forEach((e=>{t=e.call({lexer:this},r),'number'==typeof t&&t>=0&&(n=Math.min(n,t))})),n<1/0&&n>=0&&(a=e.substring(0,n+1))}if(r=this.tokenizer.inlineText(a)){e=e.substring(r.raw.length),'_'!==r.raw.slice(-1)&&(o=r.raw.slice(-1)),i=!0;let n=t.at(-1);'text'===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r)}else if(e){let t='Infinite loop on byte: '+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},GN=class{options;parser;constructor(e){this.options=e||FC}space(e){return''}code({text:e,lang:t,escaped:n}){let r=(t||'').match(KC.notSpaceStart)?.[0],i=e.replace(KC.endingNewline,'')+'\n';return r?'<pre><code class="language-'+MN(r)+'">'+(n?i:MN(i,!0))+'</code></pre>\n':'<pre><code>'+(n?i:MN(i,!0))+'</code></pre>\n'}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}def(e){return''}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return'<hr>\n'}list(e){let t=e.ordered,n=e.start,r='';for(let o=0;o<e.items.length;o++){let t=e.items[o];r+=this.listitem(t)}let i=t?'ol':'ul';return'<'+i+(t&&1!==n?' start="'+n+'"':'')+'>\n'+r+'</'+i+'>\n'}listitem(e){let t='';if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?'paragraph'===e.tokens[0]?.type?(e.tokens[0].text=n+' '+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&'text'===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+' '+MN(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:'text',raw:n+' ',text:n+' ',escaped:!0}):t+=n+' '}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return'<input '+(e?'checked="" ':'')+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t='',n='';for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r='';for(let i=0;i<e.rows.length;i++){let t=e.rows[i];n='';for(let e=0;e<t.length;e++)n+=this.tablecell(t[e]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),'<table>\n<thead>\n'+t+'</thead>\n'+r+'</table>\n'}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?'th':'td';return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${MN(e,!0)}</code>`}br(e){return'<br>'}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=BN(e);if(null===i)return r;let o='<a href="'+(e=i)+'"';return t&&(o+=' title="'+MN(t)+'"'),o+='>'+r+'</a>',o}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=BN(e);if(null===i)return MN(n);let o=`<img src="${e=i}" alt="${n}"`;return t&&(o+=` title="${MN(t)}"`),o+='>',o}text(e){return'tokens'in e&&e.tokens?this.parser.parseInline(e.tokens):'escaped'in e&&e.escaped?e.text:MN(e.text)}},WN=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return''+e}image({text:e}){return''+e}br(){return''}},JN=class e{options;renderer;textRenderer;constructor(e){this.options=e||FC,this.options.renderer=this.options.renderer||new GN,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new WN}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e,t=!0){let n='';for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!['space','hr','heading','code','table','blockquote','list','html','def','paragraph','text'].includes(e.type)){n+=t||'';continue}}let o=i;switch(o.type){case'space':n+=this.renderer.space(o);continue;case'hr':n+=this.renderer.hr(o);continue;case'heading':n+=this.renderer.heading(o);continue;case'code':n+=this.renderer.code(o);continue;case'table':n+=this.renderer.table(o);continue;case'blockquote':n+=this.renderer.blockquote(o);continue;case'list':n+=this.renderer.list(o);continue;case'html':n+=this.renderer.html(o);continue;case'def':n+=this.renderer.def(o);continue;case'paragraph':n+=this.renderer.paragraph(o);continue;case'text':{let i=o,a=this.renderer.text(i);for(;r+1<e.length&&'text'===e[r+1].type;)i=e[++r],a+='\n'+this.renderer.text(i);n+=t?this.renderer.paragraph({type:'paragraph',raw:a,text:a,tokens:[{type:'text',raw:a,text:a,escaped:!0}]}):a;continue}default:{let e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),'';throw new Error(e)}}}return n}parseInline(e,t=this.renderer){let n='';for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!['escape','html','link','image','strong','em','codespan','br','del','text'].includes(i.type)){n+=e||'';continue}}let o=i;switch(o.type){case'escape':case'text':n+=t.text(o);break;case'html':n+=t.html(o);break;case'link':n+=t.link(o);break;case'image':n+=t.image(o);break;case'strong':n+=t.strong(o);break;case'em':n+=t.em(o);break;case'codespan':n+=t.codespan(o);break;case'br':n+=t.br(o);break;case'del':n+=t.del(o);break;default:{let e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),'';throw new Error(e)}}}return n}},YN=class{options;block;constructor(e){this.options=e||FC}static passThroughHooks=new Set(['preprocess','postprocess','processAllTokens','emStrongMask']);static passThroughHooksRespectAsync=new Set(['preprocess','postprocess','processAllTokens']);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?KN.lex:KN.lexInline}provideParser(){return this.block?JN.parse:JN.parseInline}},XN=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=JN;Renderer=GN;TextRenderer=WN;Lexer=KN;Tokenizer=qN;Hooks=YN;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case'table':{let e=r;for(let r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of e.rows)for(let e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case'list':{let e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{let e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((r=>{let i=e[r].flat(1/0);n=n.concat(this.walkTokens(i,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{let n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error('extension name required');if('renderer'in e){let n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if('tokenizer'in e){if(!e.level||'block'!==e.level&&'inline'!==e.level)throw new Error('extension level must be \'block\' or \'inline\'');let n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&('block'===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:'inline'===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}'childTokens'in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){let t=this.defaults.renderer||new GN(this.defaults);for(let n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(['options','parser'].includes(n))continue;let r=n,i=e.renderer[r],o=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n||''}}n.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new qN(this.defaults);for(let n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(['options','rules','lexer'].includes(n))continue;let r=n,i=e.tokenizer[r],o=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new YN;for(let n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(['options','block'].includes(n))continue;let r=n,i=e.hooks[r],o=t[r];YN.passThroughHooks.has(n)?t[r]=e=>{if(this.defaults.async&&YN.passThroughHooksRespectAsync.has(n))return(async()=>{let n=await i.call(t,e);return o.call(t,n)})();let r=i.call(t,e);return o.call(t,r)}:t[r]=(...e)=>{if(this.defaults.async)return(async()=>{let n=await i.apply(t,e);return!1===n&&(n=await o.apply(t,e)),n})();let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return KN.lex(e,t??this.defaults)}parser(e,t){return JN.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===r.async)return o(new Error('marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.'));if(typeof t>'u'||null===t)return o(new Error('marked(): input parameter is undefined or null'));if('string'!=typeof t)return o(new Error('marked(): input parameter is of type '+Object.prototype.toString.call(t)+', string expected'));if(i.hooks&&(i.hooks.options=i,i.hooks.block=e),i.async)return(async()=>{let n=i.hooks?await i.hooks.preprocess(t):t,r=await(i.hooks?await i.hooks.provideLexer():e?KN.lex:KN.lexInline)(n,i),o=i.hooks?await i.hooks.processAllTokens(r):r;i.walkTokens&&await Promise.all(this.walkTokens(o,i.walkTokens));let a=await(i.hooks?await i.hooks.provideParser():e?JN.parse:JN.parseInline)(o,i);return i.hooks?await i.hooks.postprocess(a):a})().catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let n=(i.hooks?i.hooks.provideLexer():e?KN.lex:KN.lexInline)(t,i);i.hooks&&(n=i.hooks.processAllTokens(n)),i.walkTokens&&this.walkTokens(n,i.walkTokens);let r=(i.hooks?i.hooks.provideParser():e?JN.parse:JN.parseInline)(n,i);return i.hooks&&(r=i.hooks.postprocess(r)),r}catch(sD){return o(sD)}}}onError(e,t){return n=>{if(n.message+='\nPlease report this to https://github.com/markedjs/marked.',e){let e='<p>An error occurred:</p><pre>'+MN(n.message+'',!0)+'</pre>';return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function QN(e,t){return XN.parse(e,t)}let eP;async function tP(){if(!eP){const e=await fetch(`https://gitlab.com/api/v4/projects/${encodeURIComponent('novi028/JS-Slash-Runner')}/repository/files/manifest.json/raw?ref=main`);if(!e.ok)throw new Error(`: ${e.status} ${e.statusText}`);eP=_.get(JSON.parse(await e.text()),'version')}return eP}async function nP(){return LC(await tP(),$O(),'>=')}async function rP(e,t){const n=await async function(){const e=await fetch(`https://gitlab.com/api/v4/projects/${encodeURIComponent('novi028/JS-Slash-Runner')}/repository/files/CHANGELOG.md/raw?ref=main`);if(!e.ok)throw new Error(`: ${e.status} ${e.statusText}`);return await e.text()}(),r=[...n.matchAll(/(?:^|\n)(?:#{1,3}\s*|\[)([0-9]+\.[0-9]+\.[0-9]+)(?:\]|\s|$)/g)];let i,o;if(LC(e,t,'>=')){const e=r.find((e=>e[1]===t));if(!e){const e=Se``;throw toastr.error(e,Se``),new Error(e)}i=e.index;const a=r.find((e=>e.index>i));o=a?a.index:n.length}else{const n=r.find((t=>t[1]===e));if(!n){const t=Se` '${e}' `;throw toastr.error(t,Se``),new Error(t)}i=n.index;const a=r.find((e=>e[1]===t));if(!a){const e=Se` '${t}' `;throw toastr.error(e,Se``),new Error(e)}o=a.index}return n.substring(i,o).trim()}QN.options=QN.setOptions=function(e){return XN.setOptions(e),QN.defaults=XN.defaults,ZC(QN.defaults),QN},QN.getDefaults=BC,QN.defaults=FC,QN.use=function(...e){return XN.use(...e),QN.defaults=XN.defaults,ZC(QN.defaults),QN},QN.walkTokens=function(e,t){return XN.walkTokens(e,t)},QN.parseInline=XN.parseInline,QN.Parser=JN,QN.parser=JN.parse,QN.Renderer=GN,QN.TextRenderer=WN,QN.Lexer=KN,QN.lexer=KN.lex,QN.Tokenizer=qN,QN.Hooks=YN,QN.parse=QN,QN.options,QN.setOptions,QN.use,QN.walkTokens,QN.parseInline,JN.parse,KN.lex;
/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
var iP=['input:not([inert])','select:not([inert])','textarea:not([inert])','a[href]:not([inert])','button:not([inert])','[tabindex]:not(slot):not([inert])','audio[controls]:not([inert])','video[controls]:not([inert])','[contenteditable]:not([contenteditable="false"]):not([inert])','details>summary:first-of-type:not([inert])','details:not([inert])'],oP=iP.join(','),aP='undefined'==typeof Element,sP=aP?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,lP=!aP&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},cP=function e(t,n){var r;void 0===n&&(n=!0);var i=null==t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,'inert');return''===i||'true'===i||n&&t&&e(t.parentNode)},uP=function(e,t,n){if(cP(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(oP));return t&&sP.call(e,oP)&&r.unshift(e),r=r.filter(n)},dP=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!cP(a,!1))if('SLOT'===a.tagName){var s=a.assignedElements(),l=e(s.length?s:a.children,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:a,candidates:l})}else{sP.call(a,oP)&&r.filter(a)&&(n||!t.includes(a))&&i.push(a);var c=a.shadowRoot||'function'==typeof r.getShadowRoot&&r.getShadowRoot(a),u=!cP(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(c&&u){var d=e(!0===c?a.children:c.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:a,candidates:d})}else o.unshift.apply(o,a.children)}}return i},pP=function(e){return!isNaN(parseInt(e.getAttribute('tabindex'),10))},fP=function(e){if(!e)throw new Error('No node provided');return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,'contenteditable');return''===n||'true'===n}(e))&&!pP(e)?0:e.tabIndex},hP=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},mP=function(e){return'INPUT'===e.tagName},gP=function(e){return function(e){return mP(e)&&'radio'===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||lP(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if('undefined'!=typeof window&&void 0!==window.CSS&&'function'==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(LJ){return console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',LJ.message),!1}var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!i||i===e}(e)},vP=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},yP=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if('hidden'===getComputedStyle(e).visibility)return!0;var i=sP.call(e,'details>summary:first-of-type')?e.parentElement:e;if(sP.call(i,'details:not([open]) *'))return!0;if(n&&'full'!==n&&'legacy-full'!==n){if('non-zero-area'===n)return vP(e)}else{if('function'==typeof r){for(var o=e;e;){var a=e.parentElement,s=lP(e);if(a&&!a.shadowRoot&&!0===r(a))return vP(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=o}if(function(e){var t,n,r,i,o=e&&lP(e),a=null===(t=o)||void 0===t?void 0:t.host,s=!1;if(o&&o!==e)for(s=!!(null!==(n=a)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(a)||null!=e&&null!==(i=e.ownerDocument)&&void 0!==i&&i.contains(e));!s&&a;){var l,c,u;s=!(null===(c=a=null===(l=o=lP(a))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(a))}return s}(e))return!e.getClientRects().length;if('legacy-full'!==n)return!0}return!1},bP=function(e,t){return!(t.disabled||cP(t)||function(e){return mP(e)&&'hidden'===e.type}(t)||yP(t,e)||function(e){return'DETAILS'===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return'SUMMARY'===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if('FIELDSET'===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if('LEGEND'===r.tagName)return!!sP.call(t,'fieldset[disabled] *')||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},_P=function(e,t){return!(gP(t)||fP(t)<0||!bP(e,t))},wP=function(e){var t=parseInt(e.getAttribute('tabindex'),10);return!!(isNaN(t)||t>=0)},kP=function e(t){var n=[],r=[];return t.forEach((function(t,i){var o=!!t.scopeParent,a=o?t.scopeParent:t,s=function(e,t){var n=fP(e);return n<0&&t&&!pP(e)?0:n}(a,o),l=o?e(t.candidates):a;0===s?o?n.push.apply(n,l):n.push(a):r.push({documentOrder:i,tabIndex:s,item:t,isScope:o,content:l})})),r.sort(hP).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},xP=function(e,t){if(t=t||{},!e)throw new Error('No node provided');return!1!==sP.call(e,oP)&&_P(t,e)},SP=iP.concat('iframe').join(','),EP=function(e,t){if(t=t||{},!e)throw new Error('No node provided');return!1!==sP.call(e,SP)&&bP(t,e)};
/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
function $P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function OP(e,t,n){return(t=function(e){var t=function(e,t){if('object'!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if('object'!=typeof r)return r;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===t?String:Number)(e)}(e,'string');return'symbol'==typeof t?t:t+''}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IP(Object(n),!0).forEach((function(t){OP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AP(e){return function(e){if(Array.isArray(e))return $P(e)}(e)||function(e){if('undefined'!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e['@@iterator'])return Array.from(e)}(e)||function(e,t){if(e){if('string'==typeof e)return $P(e,t);var n={}.toString.call(e).slice(8,-1);return'Object'===n&&e.constructor&&(n=e.constructor.name),'Map'===n||'Set'===n?Array.from(e):'Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$P(e,t):void 0}}(e)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}var CP=function(e,t){if(e.length>0){var n=e[e.length-1];n!==t&&n._setPausedState(!0)}var r=e.indexOf(t);-1===r||e.splice(r,1),e.push(t)},NP=function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)},PP=function(e){return'Tab'===(null==e?void 0:e.key)||9===(null==e?void 0:e.keyCode)},jP=function(e){return PP(e)&&!e.shiftKey},DP=function(e){return PP(e)&&e.shiftKey},RP=function(e){return setTimeout(e,0)},UP=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return'function'==typeof e?e.apply(void 0,n):e},LP=function(e){return e.target.shadowRoot&&'function'==typeof e.composedPath?e.composedPath()[0]:e.target},zP=[],VP=function(e,t){var n,r=(null==t?void 0:t.document)||document,i=(null==t?void 0:t.trapStack)||zP,o=TP({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:jP,isKeyBackward:DP},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},s=function(e,t,n){return e&&void 0!==e[t]?e[t]:o[n||t]},l=function(e,t){var n='function'==typeof(null==t?void 0:t.composedPath)?t.composedPath():void 0;return a.containerGroups.findIndex((function(t){var r=t.container,i=t.tabbableNodes;return r.contains(e)||(null==n?void 0:n.includes(r))||i.find((function(t){return t===e}))}))},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasFallback,i=void 0!==n&&n,a=t.params,s=void 0===a?[]:a,l=o[e];if('function'==typeof l&&(l=l.apply(void 0,AP(s))),!0===l&&(l=void 0),!l){if(void 0===l||!1===l)return l;throw new Error('`'.concat(e,'` was specified but was not a node, or did not return a node'))}var c=l;if('string'==typeof l){try{c=r.querySelector(l)}catch(LJ){throw new Error('`'.concat(e,'` appears to be an invalid selector; error="').concat(LJ.message,'"'))}if(!c&&!i)throw new Error('`'.concat(e,'` as selector refers to no known node'))}return c},u=function(){var e=c('initialFocus',{hasFallback:!0});if(!1===e)return!1;if(void 0===e||e&&!EP(e,o.tabbableOptions))if(l(r.activeElement)>=0)e=r.activeElement;else{var t=a.tabbableGroups[0];e=t&&t.firstTabbableNode||c('fallbackFocus')}else null===e&&(e=c('fallbackFocus'));if(!e)throw new Error('Your focus-trap needs to have at least one focusable element');return e},d=function(){if(a.containerGroups=a.containers.map((function(e){var t=function(e,t){var n;return n=(t=t||{}).getShadowRoot?dP([e],t.includeContainer,{filter:_P.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:wP}):uP(e,t.includeContainer,_P.bind(null,t)),kP(n)}(e,o.tabbableOptions),n=function(e,t){return(t=t||{}).getShadowRoot?dP([e],t.includeContainer,{filter:bP.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):uP(e,t.includeContainer,bP.bind(null,t))}(e,o.tabbableOptions),r=t.length>0?t[0]:void 0,i=t.length>0?t[t.length-1]:void 0,a=n.find((function(e){return xP(e)})),s=n.slice().reverse().find((function(e){return xP(e)})),l=!!t.find((function(e){return fP(e)>0}));return{container:e,tabbableNodes:t,focusableNodes:n,posTabIndexesFound:l,firstTabbableNode:r,lastTabbableNode:i,firstDomTabbableNode:a,lastDomTabbableNode:s,nextTabbableNode:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.indexOf(e);return i<0?r?n.slice(n.indexOf(e)+1).find((function(e){return xP(e)})):n.slice(0,n.indexOf(e)).reverse().find((function(e){return xP(e)})):t[i+(r?1:-1)]}}})),a.tabbableGroups=a.containerGroups.filter((function(e){return e.tabbableNodes.length>0})),a.tabbableGroups.length<=0&&!c('fallbackFocus'))throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');if(a.containerGroups.find((function(e){return e.posTabIndexesFound}))&&a.containerGroups.length>1)throw new Error('At least one node with a positive tabindex was found in one of your focus-trap\'s multiple containers. Positive tabindexes are only supported in single-container focus-traps.')},p=function(e){var t=e.activeElement;if(t)return t.shadowRoot&&null!==t.shadowRoot.activeElement?p(t.shadowRoot):t},f=function(e){!1!==e&&e!==p(document)&&(e&&e.focus?(e.focus({preventScroll:!!o.preventScroll}),a.mostRecentlyFocusedNode=e,function(e){return e.tagName&&'input'===e.tagName.toLowerCase()&&'function'==typeof e.select}(e)&&e.select()):f(u()))},h=function(e){var t=c('setReturnFocus',{params:[e]});return t||!1!==t&&e},m=function(e){var t=e.target,n=e.event,r=e.isBackward,i=void 0!==r&&r;t=t||LP(n),d();var s=null;if(a.tabbableGroups.length>0){var u=l(t,n),p=u>=0?a.containerGroups[u]:void 0;if(u<0)s=i?a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:a.tabbableGroups[0].firstTabbableNode;else if(i){var f=a.tabbableGroups.findIndex((function(e){var n=e.firstTabbableNode;return t===n}));if(f<0&&(p.container===t||EP(t,o.tabbableOptions)&&!xP(t,o.tabbableOptions)&&!p.nextTabbableNode(t,!1))&&(f=u),f>=0){var h=0===f?a.tabbableGroups.length-1:f-1,m=a.tabbableGroups[h];s=fP(t)>=0?m.lastTabbableNode:m.lastDomTabbableNode}else PP(n)||(s=p.nextTabbableNode(t,!1))}else{var g=a.tabbableGroups.findIndex((function(e){var n=e.lastTabbableNode;return t===n}));if(g<0&&(p.container===t||EP(t,o.tabbableOptions)&&!xP(t,o.tabbableOptions)&&!p.nextTabbableNode(t))&&(g=u),g>=0){var v=g===a.tabbableGroups.length-1?0:g+1,y=a.tabbableGroups[v];s=fP(t)>=0?y.firstTabbableNode:y.firstDomTabbableNode}else PP(n)||(s=p.nextTabbableNode(t))}}else s=c('fallbackFocus');return s},g=function(e){var t=LP(e);l(t,e)>=0||(UP(o.clickOutsideDeactivates,e)?n.deactivate({returnFocus:o.returnFocusOnDeactivate}):UP(o.allowOutsideClick,e)||e.preventDefault())},v=function(e){var t=LP(e),n=l(t,e)>=0;if(n||t instanceof Document)n&&(a.mostRecentlyFocusedNode=t);else{var r;e.stopImmediatePropagation();var i=!0;if(a.mostRecentlyFocusedNode)if(fP(a.mostRecentlyFocusedNode)>0){var s=l(a.mostRecentlyFocusedNode),c=a.containerGroups[s].tabbableNodes;if(c.length>0){var d=c.findIndex((function(e){return e===a.mostRecentlyFocusedNode}));d>=0&&(o.isKeyForward(a.recentNavEvent)?d+1<c.length&&(r=c[d+1],i=!1):d-1>=0&&(r=c[d-1],i=!1))}}else a.containerGroups.some((function(e){return e.tabbableNodes.some((function(e){return fP(e)>0}))}))||(i=!1);else i=!1;i&&(r=m({target:a.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(a.recentNavEvent)})),f(r||(a.mostRecentlyFocusedNode||u()))}a.recentNavEvent=void 0},y=function(e){(o.isKeyForward(e)||o.isKeyBackward(e))&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.recentNavEvent=e;var n=m({event:e,isBackward:t});n&&(PP(e)&&e.preventDefault(),f(n))}(e,o.isKeyBackward(e))},b=function(e){var t;'Escape'!==(null==(t=e)?void 0:t.key)&&'Esc'!==(null==t?void 0:t.key)&&27!==(null==t?void 0:t.keyCode)||!1===UP(o.escapeDeactivates,e)||(e.preventDefault(),n.deactivate())},w=function(e){var t=LP(e);l(t,e)>=0||UP(o.clickOutsideDeactivates,e)||UP(o.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},k=function(){if(a.active)return CP(i,n),a.delayInitialFocusTimer=o.delayInitialFocus?RP((function(){f(u())})):f(u()),r.addEventListener('focusin',v,!0),r.addEventListener('mousedown',g,{capture:!0,passive:!1}),r.addEventListener('touchstart',g,{capture:!0,passive:!1}),r.addEventListener('click',w,{capture:!0,passive:!1}),r.addEventListener('keydown',y,{capture:!0,passive:!1}),r.addEventListener('keydown',b),n},x=function(){if(a.active)return r.removeEventListener('focusin',v,!0),r.removeEventListener('mousedown',g,!0),r.removeEventListener('touchstart',g,!0),r.removeEventListener('click',w,!0),r.removeEventListener('keydown',y,!0),r.removeEventListener('keydown',b),n},S='undefined'!=typeof window&&'MutationObserver'in window?new MutationObserver((function(e){e.some((function(e){return Array.from(e.removedNodes).some((function(e){return e===a.mostRecentlyFocusedNode}))}))&&f(u())})):void 0,E=function(){S&&(S.disconnect(),a.active&&!a.paused&&a.containers.map((function(e){S.observe(e,{subtree:!0,childList:!0})})))};return n={get active(){return a.active},get paused(){return a.paused},activate:function(e){if(a.active)return this;var t=s(e,'onActivate'),n=s(e,'onPostActivate'),i=s(e,'checkCanFocusTrap');i||d(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=p(r),null==t||t();var o=function(){i&&d(),k(),E(),null==n||n()};return i?(i(a.containers.concat()).then(o,o),this):(o(),this)},deactivate:function(e){if(!a.active)return this;var t=TP({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},e);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,x(),a.active=!1,a.paused=!1,E(),NP(i,n);var r=s(t,'onDeactivate'),l=s(t,'onPostDeactivate'),c=s(t,'checkCanReturnFocus'),u=s(t,'returnFocus','returnFocusOnDeactivate');null==r||r();var d=function(){RP((function(){u&&f(h(a.nodeFocusedBeforeActivation)),null==l||l()}))};return u&&c?(c(h(a.nodeFocusedBeforeActivation)).then(d,d),this):(d(),this)},pause:function(e){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,e)):this},unpause:function(e){return a.active?(a.manuallyPaused=!1,i[i.length-1]!==this?this:this._setPausedState(!1,e)):this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return a.containers=t.map((function(e){return'string'==typeof e?r.querySelector(e):e})),a.active&&d(),E(),this}},Object.defineProperties(n,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(e,t){if(a.paused===e)return this;if(a.paused=e,e){var n=s(t,'onPause'),r=s(t,'onPostPause');null==n||n(),x(),E(),null==r||r()}else{var i=s(t,'onUnpause'),o=s(t,'onPostUnpause');null==i||i(),d(),k(),E(),null==o||o()}return this}}}),n.updateContainerElements(e),n};const MP=()=>{};function BP(e,t,n){return e>n?n:e<t?t:e}const FP=e=>'string'==typeof e;function ZP(e,t){var n;const r=(null==(n=HP(e,t))?void 0:n[0])||t;e.push(r)}function HP(e,t){const n=e.indexOf(t);if(-1!==n)return e.splice(n,1)}function qP(e){return Object.entries(e)}const KP={teleportTo:{type:[String,null,Boolean,Object],default:'body'},modalId:{type:[String,Number,Symbol],default:void 0},modelValue:{type:Boolean,default:void 0},displayDirective:{type:String,default:'if',validator:e=>['if','show','visible'].includes(e)},hideOverlay:{type:Boolean,default:void 0},overlayBehavior:{type:String,default:'auto',validator:e=>['auto','persist'].includes(e)},overlayTransition:{type:[String,Object],default:void 0},contentTransition:{type:[String,Object],default:void 0},overlayClass:{type:void 0,default:void 0},contentClass:{type:void 0,default:void 0},overlayStyle:{type:[String,Object,Array],default:void 0},contentStyle:{type:[String,Object,Array],default:void 0},clickToClose:{type:Boolean,default:!0},escToClose:{type:Boolean,default:!0},background:{type:String,default:'non-interactive',validator:e=>['interactive','non-interactive'].includes(e)},focusTrap:{type:[Boolean,Object],default:()=>({allowOutsideClick:!0})},lockScroll:{type:Boolean,default:!0},reserveScrollBarGap:{type:Boolean,default:!0},zIndexFn:{type:Function,default:({index:e})=>1e3+2*e},swipeToClose:{type:String,default:'none',validator:e=>['none','up','right','down','left'].includes(e)},threshold:{type:Number,default:0},showSwipeBanner:{type:Boolean,default:void 0},preventNavigationGestures:{type:Boolean,default:void 0}};function GP(e=!1){const t=Mr(e),n=Mr(t.value?0:void 0);return[t,n,{beforeEnter(){n.value=1},afterEnter(){n.value=0},beforeLeave(){n.value=3},afterLeave(){n.value=2}}]}function WP(e,t,n){let r=!1;const{open:i,close:o}=n,a=Mr(!1),s={get value(){return a.value},set value(n){!function(n){(n?i():o())?(a.value=n,n!==e.modelValue&&t('update:modelValue',n)):(r=!0,t('update:modelValue',!n),yi((()=>{r=!1})))}(n)}};return _a((()=>e.modelValue),(e=>{r||(s.value=!!e)})),{modelValueLocal:s}}function JP(e,t){if(!1===e.focusTrap)return{focus(){},blur(){}};const{focusEl:n}=t,{hasFocus:r,activate:i,deactivate:o}=function(e,t={}){let n;const{immediate:r,...i}=t,o=Br(!1),a=Br(!1),s=e=>n&&n.activate(e),l=e=>n&&n.deactivate(e);return _a(ks((()=>EI(qr(e)).map((e=>{const t=qr(e);return'string'==typeof t?t:ZI(t)})).filter(fI))),(e=>{if(e.length)if(n){const t=null==n?void 0:n.active;null==n||n.updateContainerElements(e),!t&&r&&s()}else n=VP(e,{...i,onActivate(){o.value=!0,t.onActivate&&t.onActivate()},onDeactivate(){o.value=!1,t.onDeactivate&&t.onDeactivate()}}),r&&s()}),{flush:'post'}),cI((()=>l())),{hasFocus:o,isPaused:a,activate:s,deactivate:l,pause:()=>{n&&(n.pause(),a.value=!0)},unpause:()=>{n&&(n.unpause(),a.value=!1)}}}(n,e.focusTrap);return{focus:function(){requestAnimationFrame((()=>{i()}))},blur:function(){r.value&&o()}}}let YP=!1;if(typeof window<'u'){const e={get passive(){YP=!0}};window.addEventListener('testPassive',null,e),window.removeEventListener('testPassive',null,e)}const XP=typeof window<'u'&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||'MacIntel'===window.navigator.platform&&window.navigator.maxTouchPoints>1);let QP,ej,tj=[],nj=!1,rj=0,ij=-1;const oj=(e,t)=>{let n=!1;return(e=>{const t=[];for(;e;){if(t.push(e),e.classList.contains('vfm'))return t;e=e.parentElement}return t})(e).forEach((e=>{(e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return['auto','scroll'].includes(t.overflowY)&&e.scrollHeight>e.clientHeight})(e)&&((e,t)=>!(0===e.scrollTop&&t<0||e.scrollTop+e.clientHeight+t>=e.scrollHeight&&t>0))(e,t)&&(n=!0)})),n},aj=e=>tj.some((()=>oj(e,-rj))),sj=e=>{const t=e||window.event;return!!(aj(t.target)||t.touches.length>1)||(t.preventDefault&&t.preventDefault(),!1)},lj=(e,t)=>{if(!e)return void console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');if(tj.some((t=>t.targetElement===e)))return;const n={targetElement:e,options:t||{}};tj=[...tj,n],XP?(e.ontouchstart=e=>{1===e.targetTouches.length&&(ij=e.targetTouches[0].clientY)},e.ontouchmove=t=>{1===t.targetTouches.length&&((e,t)=>{rj=e.targetTouches[0].clientY-ij,!aj(e.target)&&(t&&0===t.scrollTop&&rj>0||(e=>!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight)(t)&&rj<0?sj(e):e.stopPropagation())})(t,e)},nj||(document.addEventListener('touchmove',sj,YP?{passive:!1}:void 0),nj=!0)):(e=>{if(void 0===ej){const t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;if(t&&n>0){const e=parseInt(getComputedStyle(document.body).getPropertyValue('padding-right'),10);ej=document.body.style.paddingRight,document.body.style.paddingRight=`${e+n}px`}}void 0===QP&&(QP=document.body.style.overflow,document.body.style.overflow='hidden')})(t)},cj=e=>{e?(tj=tj.filter((t=>t.targetElement!==e)),XP?(e.ontouchstart=null,e.ontouchmove=null,nj&&0===tj.length&&(document.removeEventListener('touchmove',sj,YP?{passive:!1}:void 0),nj=!1)):tj.length||(void 0!==ej&&(document.body.style.paddingRight=ej,ej=void 0),void 0!==QP&&(document.body.style.overflow=QP,QP=void 0))):console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.')};const uj={beforeMount(e,{value:t},{transition:n}){e._vov='hidden'===e.style.visibility?'':e.style.visibility,n&&t?n.beforeEnter(e):dj(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),dj(e,!0),r.enter(e)):r.leave(e,(()=>{dj(e,!1)})):dj(e,t))},beforeUnmount(e,{value:t}){dj(e,t)}};function dj(e,t){e.style.visibility=t?e._vov:'hidden'}const pj=e=>{if(e instanceof MouseEvent){const{clientX:t,clientY:n}=e;return{x:t,y:n}}{const{clientX:t,clientY:n}=e.targetTouches[0];return{x:t,y:n}}};function fj(e,{threshold:t=0,onSwipeStart:n,onSwipe:r,onSwipeEnd:i,passive:o=!0}){const a=Or({x:0,y:0}),s=Or({x:0,y:0}),l=ks((()=>a.x-s.x)),c=ks((()=>a.y-s.y)),{max:u,abs:d}=Math,p=ks((()=>u(d(l.value),d(c.value))>=t)),f=Mr(!1),h=ks((()=>p.value?d(l.value)>d(c.value)?l.value>0?'left':'right':c.value>0?'up':'down':'none')),m=(e,t)=>{s.x=e,s.y=t};let g,v;function y(t){g.capture&&!g.passive&&t.preventDefault();const{x:r,y:i}=pj(t);((e,t)=>{a.x=e,a.y=t})(r,i),m(r,i),null==n||n(t),v=[HI(e,'mousemove',b,g),HI(e,'touchmove',b,g),HI(e,'mouseup',w,g),HI(e,'touchend',w,g),HI(e,'touchcancel',w,g)]}function b(e){const{x:t,y:n}=pj(e);m(t,n),!f.value&&p.value&&(f.value=!0),f.value&&(null==r||r(e))}function w(e){f.value&&(null==i||i(e,h.value)),f.value=!1,v.forEach((e=>e()))}let k=[];return Eo((()=>{const t=function(e){if(!e)return!1;let t=!1;const n={get passive(){return t=!0,!1}};return e.addEventListener('x',MP,n),e.removeEventListener('x',MP),t}(null==window?void 0:window.document);g=o?t?{passive:!0}:{capture:!1}:t?{passive:!1,capture:!0}:{capture:!0},k=[HI(e,'mousedown',y,g),HI(e,'touchstart',y,g)]})),{isSwiping:f,direction:h,coordsStart:a,coordsEnd:s,lengthX:l,lengthY:c,stop:()=>{k.forEach((e=>e())),v.forEach((e=>e()))}}}function hj(e,t){const{vfmContentEl:n,modelValueLocal:r}=t,i=Mr(),o=ks((()=>{if(void 0!==e.swipeToClose&&'none'!==e.swipeToClose)return e.showSwipeBanner?i.value:n.value})),a=Mr(0),s=Mr(!0);let l,c=MP,u=!0,d=!1;const{lengthX:p,lengthY:f,direction:h,isSwiping:m}=fj(o,{threshold:e.threshold,onSwipeStart(e){c=HI(document,'selectionchange',(()=>{var e;s.value=null==(e=window.getSelection())?void 0:e.isCollapsed})),l=(new Date).getTime(),d=v(null==e?void 0:e.target)},onSwipe(){var t,n,r,i;if(d&&s.value&&h.value===e.swipeToClose)if('up'===h.value){const n=BP(Math.abs(f.value||0),0,(null==(t=o.value)?void 0:t.offsetHeight)||0)-(e.threshold||0);a.value=n}else if('down'===h.value){const t=BP(Math.abs(f.value||0),0,(null==(n=o.value)?void 0:n.offsetHeight)||0)-(e.threshold||0);a.value=-t}else if('right'===h.value){const t=BP(Math.abs(p.value||0),0,(null==(r=o.value)?void 0:r.offsetWidth)||0)-(e.threshold||0);a.value=-t}else if('left'===h.value){const t=BP(Math.abs(p.value||0),0,(null==(i=o.value)?void 0:i.offsetWidth)||0)-(e.threshold||0);a.value=t}},onSwipeEnd(t,n){if(c(),!s.value)return void(s.value=!0);const i=(new Date).getTime(),h=n===e.swipeToClose,m=(()=>{var e,t;return'up'===n||'down'===n?Math.abs((null==f?void 0:f.value)||0)>.1*((null==(e=o.value)?void 0:e.offsetHeight)||0):'left'===n||'right'===n?Math.abs((null==p?void 0:p.value)||0)>.1*((null==(t=o.value)?void 0:t.offsetWidth)||0):void 0})();u&&d&&h&&(m||i-l<=300)?r.value=!1:a.value=0}}),g=ks((()=>{if('none'===e.swipeToClose)return;const t=(()=>{switch(e.swipeToClose){case'up':case'down':return'translateY';case'left':case'right':return'translateX'}})();return{class:{'vfm-bounce-back':!m.value},style:{transform:`${t}(${-a.value}px)`}}}));function v(t){const n=null==t?void 0:t.tagName;if(!n||['INPUT','TEXTAREA'].includes(n))return!1;const r=(()=>{switch(e.swipeToClose){case'up':return(null==t?void 0:t.scrollTop)+(null==t?void 0:t.clientHeight)===(null==t?void 0:t.scrollHeight);case'left':return(null==t?void 0:t.scrollLeft)+(null==t?void 0:t.clientWidth)===(null==t?void 0:t.scrollWidth);case'down':return 0===(null==t?void 0:t.scrollTop);case'right':return 0===(null==t?void 0:t.scrollLeft);default:return!1}})();return t===o.value?r:r&&v(null==t?void 0:t.parentElement)}return _a((()=>s.value),(e=>{e||(a.value=0)})),_a((()=>r.value),(e=>{e&&(a.value=0)})),_a((()=>a.value),((t,n)=>{switch(e.swipeToClose){case'down':case'right':u=t<n;break;case'up':case'left':u=t>n}})),{vfmContentEl:n,swipeBannerEl:i,bindSwipe:g,onTouchStartSwipeBanner:function(t){e.preventNavigationGestures&&t.preventDefault()}}}const mj=Symbol('vfm');let gj;const vj={install:MP,modals:[],openedModals:[],openedModalOverlays:[],dynamicModals:[],modalsContainers:Mr([]),get:()=>{},toggle:()=>{},open:()=>{},close:()=>{},closeAll:()=>Promise.allSettled([])};function yj(e){var t;return null==(t=null==e?void 0:e.exposed)?void 0:t.modalExposed}const bj=fo({inheritAttrs:!1}),_j=fo({...bj,__name:'VueFinalModal',props:KP,emits:['update:modelValue','beforeOpen','opened','beforeClose','closed','clickOutside'],setup(e,{expose:t,emit:n}){const r=e,i=n,o=Bo().attrs,a=cs(),{modals:s,openedModals:l,openedModalOverlays:c}=wj(),u=Mr(),d=Mr(),{focus:p,blur:f}=JP(r,{focusEl:u}),{zIndex:h,refreshZIndex:m,resetZIndex:g}=function(e){const t=Mr();return{zIndex:t,refreshZIndex:function(n){var r;t.value=null==(r=e.zIndexFn)?void 0:r.call(e,{index:n<=-1?0:n})},resetZIndex:function(){t.value=void 0}}}(r),{modelValueLocal:v}=WP(r,i,{open:function(){let e=!1;return i('beforeOpen',{stop:()=>e=!0}),!e&&(ZP(l,a),ZP(c,a),M(),A(),!0)},close:function(){let e=!1;return i('beforeClose',{stop:()=>e=!0}),!e&&(HP(c,a),M(),f(),C(),!0)}}),{enableBodyScroll:y,disableBodyScroll:b}=function(e,t){const{lockScrollEl:n,modelValueLocal:r}=t;let i;function o(){i&&cj(i)}function a(){r.value&&e.lockScroll&&i&&lj(i,{reserveScrollBarGap:e.reserveScrollBarGap,allowTouchMove:e=>{for(;e&&e!==document.body;){if(null!==e.getAttribute('vfm-scroll-lock-ignore'))return!0;e=e.parentElement}return!1}})}return _a(n,(e=>{e&&(i=e)}),{immediate:!0}),_a((()=>e.lockScroll),(e=>{e?a():o()})),$o((()=>{o()})),{enableBodyScroll:o,disableBodyScroll:a}}(r,{lockScrollEl:u,modelValueLocal:v});let w=MP;const{visible:k,contentVisible:x,contentListeners:S,contentTransition:E,overlayVisible:O,overlayListeners:I,overlayTransition:T,enterTransition:A,leaveTransition:C}=function(e,t){const{modelValueLocal:n,onEntering:r,onEnter:i,onLeaving:o,onLeave:a}=t,s=Mr(n.value),[l,c,u]=GP(s.value),[d,p,f]=GP(s.value),h=ks((()=>'string'==typeof e.contentTransition?{name:e.contentTransition,appear:!0}:{appear:!0,...e.contentTransition})),m=ks((()=>'string'==typeof e.overlayTransition?{name:e.overlayTransition,appear:!0}:{appear:!0,...e.overlayTransition}));return _a(ks((()=>(e.hideOverlay||2===p.value)&&2===c.value)),(e=>{e&&(s.value=!1)})),_a(c,(e=>{if(1===e){if(!s.value)return;null==r||r()}else if(0===e){if(!s.value)return;null==i||i()}else 3===e?null==o||o():2===e&&(null==a||a())})),{visible:s,contentVisible:l,contentListeners:u,contentTransition:h,overlayVisible:d,overlayListeners:f,overlayTransition:m,enterTransition:async function(){s.value=!0,await yi(),l.value=!0,d.value=!0},leaveTransition:function(){l.value=!1,d.value=!1}}}(r,{modelValueLocal:v,onEntering(){yi((()=>{b(),p()}))},onEnter(){i('opened'),w('opened')},onLeave(){HP(l,a),g(),y(),i('closed'),w('closed')}}),{onEsc:N,onMouseupRoot:P,onMousedown:j}=function(e,t,n){const{vfmRootEl:r,vfmContentEl:i,visible:o,modelValueLocal:a}=n,s=Mr();return{onEsc:function(){o.value&&e.escToClose&&(a.value=!1)},onMouseupRoot:function(){var n;s.value===r.value&&(e.clickToClose?a.value=!1:(null==(n=i.value)||n.focus(),t('clickOutside')))},onMousedown:function(e){s.value=null==e?void 0:e.target}}}(r,i,{vfmRootEl:u,vfmContentEl:d,visible:k,modelValueLocal:v}),{swipeBannerEl:D,bindSwipe:R,onTouchStartSwipeBanner:U}=hj(r,{vfmContentEl:d,modelValueLocal:v}),L=ks((()=>a?l.indexOf(a):-1));function V(){v.value=!1}async function M(){await yi();const e=c.filter((e=>{var t;const n=yj(e);return'auto'===(null==n?void 0:n.value.overlayBehavior.value)&&!(null!=(t=null==n?void 0:n.value.hideOverlay)&&t.value)}));e.forEach(((t,n)=>{const r=yj(t);null!=r&&r.value&&(r.value.overlayVisible.value=n===e.length-1)}))}_a([()=>r.zIndexFn,L],(()=>{k.value&&m(L.value)})),Eo((()=>{ZP(s,a)})),r.modelValue&&(v.value=!0),$o((()=>{y(),HP(s,a),HP(l,a),f(),M()}));const B=ei((()=>r.modalId)),F=ei((()=>r.hideOverlay)),Z=ei((()=>r.overlayBehavior)),H=ks((()=>({modalId:B,hideOverlay:F,overlayBehavior:Z,overlayVisible:O,toggle:e=>new Promise((t=>{w=(e=>(...t)=>{e&&(null==e||e(...t),e=null)})((e=>t(e)));const n='boolean'==typeof e?e:!v.value;v.value=n}))})));return t({modalExposed:H}),(e,t)=>(La(),Fa(Wi,{to:e.teleportTo?e.teleportTo:void 0,disabled:!e.teleportTo},['if'!==e.displayDirective||Hr(k)?Li((La(),Ba('div',is({key:0},Hr(o),{ref_key:'vfmRootEl',ref:u,class:['vfm vfm--fixed vfm--inset',{'vfm--prevent-none':'interactive'===e.background}],style:{zIndex:Hr(h)},role:'dialog','aria-modal':'true',onKeydown:t[7]||(t[7]=Nl((()=>Hr(N)()),['esc'])),onMouseup:t[8]||(t[8]=Al((()=>Hr(P)()),['self'])),onMousedown:t[9]||(t[9]=Al((e=>Hr(j)(e)),['self']))}),[F.value?es('',!0):(La(),Fa(Us,is({key:0},Hr(T),Uo(Hr(I))),{default:Ui((()=>['if'!==e.displayDirective||Hr(O)?Li((La(),Ba('div',{key:0,class:nn(['vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none',e.overlayClass]),style:Yt(e.overlayStyle),'aria-hidden':'true'},null,6)),[[Ys,'show'!==e.displayDirective||Hr(O)],[Hr(uj),'visible'!==e.displayDirective||Hr(O)]]):es('',!0)])),_:1},16)),Wa(Us,is(Hr(E),Uo(Hr(S))),{default:Ui((()=>['if'!==e.displayDirective||Hr(x)?Li((La(),Ba('div',is({key:0,ref_key:'vfmContentEl',ref:d,class:['vfm__content vfm--outline-none',[e.contentClass,{'vfm--prevent-auto':'interactive'===e.background}]],style:e.contentStyle,tabindex:'0'},Hr(R),{onMousedown:t[6]||(t[6]=()=>Hr(j)())}),[Do(e.$slots,'default',rn(Ja({close:V}))),e.showSwipeBanner?(La(),Ba('div',{key:0,ref_key:'swipeBannerEl',ref:D,class:'vfm-swipe-banner-container',onTouchstart:t[2]||(t[2]=e=>Hr(U)(e))},[Do(e.$slots,'swipe-banner',{},(()=>[Ga('div',{class:'vfm-swipe-banner-back',onTouchstart:t[0]||(t[0]=t=>'left'===e.swipeToClose&&t.preventDefault())},null,32),Ga('div',{class:'vfm-swipe-banner-forward',onTouchstart:t[1]||(t[1]=t=>'right'===e.swipeToClose&&t.preventDefault())},null,32)]))],544)):!e.showSwipeBanner&&e.preventNavigationGestures?(La(),Ba('div',{key:1,class:'vfm-swipe-banner-container',onTouchstart:t[5]||(t[5]=e=>Hr(U)(e))},[Ga('div',{class:'vfm-swipe-banner-back',onTouchstart:t[3]||(t[3]=t=>'left'===e.swipeToClose&&t.preventDefault())},null,32),Ga('div',{class:'vfm-swipe-banner-forward',onTouchstart:t[4]||(t[4]=t=>'right'===e.swipeToClose&&t.preventDefault())},null,32)],32)):es('',!0)],16)),[[Ys,'show'!==e.displayDirective||Hr(x)],[Hr(uj),'visible'!==e.displayDirective||Hr(x)]]):es('',!0)])),_:3},16)],16)),[[Ys,'show'!==e.displayDirective||Hr(k)],[Hr(uj),'visible'!==e.displayDirective||Hr(k)]]):es('',!0)],8,['to','disabled']))}});function wj(){const e=cs()&&Jo(mj,vj)||gj;if(!e)throw new Error('[Vue Final Modal]: getActiveVfm was called with no active Vfm. Did you forget to install vfm?\n\tconst vfm = createVfm()\n\tapp.use(vfm)\nThis will fail in production.');return e}function kj(e,t=_j){const{component:n,slots:r,...i}=e,o=typeof r>'u'?{}:Object.fromEntries(qP(r).map((([e,t])=>FP(t)?[e,t]:Sj(t)?[e,{...t,component:Ur(t.component)}]:[e,Ur(t)])));return{...i,component:Ur(n||t),slots:o}}function xj(e){const t=Or({id:Symbol('useModal'),modelValue:!(null==e||!e.defaultModelValue),resolveOpened:()=>{},resolveClosed:()=>{},attrs:{},...kj(e)});function n(e,t){t.component&&(e.component=t.component),t.attrs&&function(e,t){Object.entries(t).forEach((([t,n])=>{e[t]=n}))}(e.attrs,t.attrs)}function r(){const e=wj(),n=e.dynamicModals.indexOf(t);-1!==n&&e.dynamicModals.splice(n,1)}return function(e,t){II()&&Oo(e,t)}((()=>{null!=t&&t.keepAlive||r()})),!0===t.modelValue&&(gj?null==gj||gj.dynamicModals.push(t):yi((()=>{const e=wj();null==e||e.dynamicModals.push(t)}))),{options:t,open:async function(){let e;return gj?e=gj:(await yi(),e=wj()),t.modelValue?Promise.resolve('[Vue Final Modal] modal is already opened.'):(r(),t.modelValue=!0,e.dynamicModals.push(t),new Promise((e=>{t.resolveOpened=()=>e('opened')})))},close:function(){return t.modelValue?(t.modelValue=!1,new Promise((e=>{t.resolveClosed=()=>e('closed')}))):Promise.resolve('[Vue Final Modal] modal is already closed.')},patchOptions:function(e){const{slots:r,...i}=kj(e,t.component);void 0!==e.defaultModelValue&&(t.defaultModelValue=e.defaultModelValue),void 0!==(null==e?void 0:e.keepAlive)&&(t.keepAlive=null==e?void 0:e.keepAlive),n(t,i),r&&qP(r).forEach((([e,r])=>{const i=t.slots[e];FP(i)?t.slots[e]=r:Sj(i)&&Sj(r)?n(i,r):t.slots[e]=r}))},destroy:r}}function Sj(e){return'object'==typeof e&&null!==e&&'component'in e}const Ej=['innerHTML'],$j=fo({__name:'ModalsContainer',setup(e){const{modalsContainers:t,dynamicModals:n}=wj(),r=Symbol('ModalsContainer'),i=ks((()=>{var e;return r===(null==(e=t.value)?void 0:e[0])}));return t.value.push(r),$o((()=>{t.value=t.value.filter((e=>e!==r))})),(e,t)=>i.value?(La(!0),Ba(Na,{key:0},jo(Hr(n),((e,t)=>(La(),Fa(Co(e.component),is({key:e.id},{displayDirective:null!=e&&e.keepAlive?'show':void 0,...'object'==typeof e.attrs?e.attrs:{}},{modelValue:e.modelValue,'onUpdate:modelValue':t=>e.modelValue=t,onClosed:()=>function(e){var t,r,i;null==(r=null==(t=n[e])?void 0:t.resolveClosed)||r.call(t),null!=(i=n[e])&&i.keepAlive||n.splice(e,1)}(t),onOpened:()=>function(e){var t,r;null==(r=null==(t=n[e])?void 0:t.resolveOpened)||r.call(t)}(t)}),function(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(St(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.key?(...e)=>{const t=r.fn(...e);return t&&(t.key=r.key),t}:r.fn)}return e}({_:2},[jo(e.slots,((e,t)=>({name:t,fn:Ui((()=>[Hr(FP)(e)?(La(),Ba('div',{key:0,innerHTML:e},null,8,Ej)):Hr(Sj)(e)?(La(),Fa(Co(e.component),rn(is({key:1},e.attrs)),null,16)):(La(),Fa(Co(e),{key:2}))]))})))]),1040,['modelValue','onUpdate:modelValue','onClosed','onOpened'])))),128)):es('',!0)}}),Oj=fo({__name:'Popup',props:Zo({buttons:{default:()=>[{name:''}]},width:{default:'normal'}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:Zo(['update:modelValue','opened','beforeClose','closed'],['update:modelValue']),setup(e,{expose:t,emit:n}){t();const r=ka(e,'modelValue'),i=n,o=ho('dialog_ref');const a={visible:r,emit:i,dialog_ref:o,close:function(){r.value=!1},get VueFinalModal(){return _j}};return Object.defineProperty(a,'__isScriptSetup',{enumerable:!1,value:!0}),a}}),Ij={class:'max-h-[80vh] overflow-y-auto'},Tj={key:0,class:'flex items-center justify-center gap-[20px]'},Aj=['onClick'];const Cj=sI(Oj,[['render',function(e,t,n,r,i,o){return La(),Fa(r.VueFinalModal,{modelValue:r.visible,'onUpdate:modelValue':t[0]||(t[0]=e=>r.visible=e),class:'TH-popup absolute! top-1/2! left-1/2! h-fit -translate-x-1/2 -translate-y-1/2','content-class':'flex items-center justify-center','teleport-to':'body','z-index-fn':()=>1e4,'hide-overlay':!0},{default:Ui((()=>[Ga('div',{ref:'dialog_ref',class:nn(['popup box-border px-1.5! focus:outline-none','normal'===n.width?'w-fit!':'wide'===n.width?'w-full!':'']),style:Yt('normal'!==n.width&&'wide'!==n.width?`width: ${n.width} !important;`:''),role:'dialog','aria-modal':'true'},[Ga('div',Ij,[Do(e.$slots,'default')]),n.buttons.length?(La(),Ba('div',Tj,[(La(!0),Ba(Na,null,jo(n.buttons,(e=>(La(),Ba('button',{key:e.name,class:nn(['menu_button interactable w-[unset]!',[e.class,{'popup-button-ok':e.shouldEmphasize}]]),onClick:t=>e.onClick?e.onClick(r.close):r.close()},un(e.name),11,Aj)))),128))])):es('',!0)],6)])),_:3},8,['modelValue'])}],['__file','Popup.vue']]),Nj=['innerHTML'];const Pj=sI(fo({__name:'Update',setup(e,{expose:t}){t();const n=Mr(Se`<div>...</div>`);Eo((async()=>{n.value=await async function(){return QN.parse(await rP($O(),await tP()))}()}));const r={changelog:n,onConfirm:async function(e){e()}};return Object.defineProperty(r,'__isScriptSetup',{enumerable:!1,value:!0}),r}}),[['render',function(e,t,n,r,i,o){const a=Cj;return La(),Fa(a,{buttons:[{name:'',shouldEmphasize:!0,onClick:r.onConfirm},{name:''}]},{default:Ui((()=>[Ga('div',{innerHTML:r.changelog},null,8,Nj)])),_:1},8,['buttons'])}],['__file','Update.vue']]),jj={class:'flex items-center gap-0.5'},Dj={style:{'word-spacing':'1.5'}},Rj={class:'flex flex-col gap-0.75'},Uj={style:{'word-spacing':'1.5'}};const Lj=sI(fo({__name:'Main',setup(e,{expose:t}){t();const n=$O(),r=Mr(!1),i=Mr('');Eo((async()=>{r.value=await nP(),r.value&&(i.value=await tP())}));const{open:o}=xj({component:Pj}),a={current_version:n,has_update:r,latest_version:i,openUpdateModal:o,Info:TT,Listener:cC,MacroLike:kC,Reference:CC,get getSmartThemeQuoteTextColor(){return fc}};return Object.defineProperty(a,'__isScriptSetup',{enumerable:!1,value:!0}),a}}),[['render',function(e,t,n,r,i,o){const a=ET,s=ST,l=lI;return La(),Ba(Na,null,[Wa(s,{type:'plain'},{title:Ui((()=>[Ga('div',jj,[Ga('span',null,un(e.t``),1),r.has_update?(La(),Ba('div',{key:0,class:'rounded-full bg-(--SmartThemeQuoteColor) px-0.5 text-xs font-medium',style:Yt({color:r.getSmartThemeQuoteTextColor()??'inherit'})},un(e.t`Ver ${r.latest_version}`),5)):es('',!0)])])),description:Ui((()=>[Xa(un(e.t`: ${r.current_version}`),1)])),content:Ui((()=>[Wa(a,{onClick:r.openUpdateModal},{default:Ui((()=>[Xa(un(e.t``),1)])),_:1},8,['onClick'])])),_:1}),Wa(l,{type:'major'},{default:Ui((()=>[t[0]||(t[0]=Ga('i',{class:'fa-solid fa-tools mr-0.5'},null,-1)),Ga('div',Dj,un(e.t``),1)])),_:1}),Ga('div',Rj,[Wa(r.Listener),Wa(r.Reference),Wa(r.MacroLike)]),Wa(l,{type:'major'},{default:Ui((()=>[t[1]||(t[1]=Ga('i',{class:'fa-solid fa-shapes mr-0.5'},null,-1)),Ga('div',Uj,un(e.t``),1)])),_:1}),Wa(r.Info)],64)}],['__file','Main.vue']]);function zj(e){return URL.createObjectURL(new Blob([e],{type:'application/javascript'}))}const Vj=zj('const original$ = $;\n_.set(window, \'$\', (selector, context) => {\n  if (context === undefined || context === null) {\n    if (window.parent && window.parent.document) {\n      context = window.parent.document;\n    } else {\n      context = window.document;\n    }\n  }\n  return original$(selector, context);\n});\n'),Mj=zj('window._ = window.parent._;\nlet result = _(window);\nresult = result.set(\'SillyTavern\', _.get(window.parent, \'SillyTavern\').getContext());\nresult = result.merge(_.pick(window.parent, [\'EjsTemplate\', \'Mvu\', \'TavernHelper\', \'YAML\', \'toastr\', \'z\']));\nresult = result.merge(result.get(\'TavernHelper\'));\nresult = result.merge(\n  ...Object.entries(result.get(\'TavernHelper\')._bind).map(([key, value]) => ({\n    [key.replace(\'_\', \'\')]: value.bind(window),\n  })),\n);\nresult.value();\n\n$(window).on(\'pagehide\', eventClearAll);\n');const Bj=fo({__name:'Iframe',props:{id:{},element:{},withLoading:{type:Boolean},useBlobUrl:{type:Boolean}},setup(e,{expose:t}){t();const n=e,r=$(n.element),i=Mr(n.withLoading),o=ks((e=>{e?.src&&URL.revokeObjectURL(e.src);const t=function(e,t){return`<html>\n<head>\n<link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" />\n<script src="https://testingcf.jsdelivr.net/gh/N0VI028/JS-Slash-Runner/lib/tailwindcss.min.js"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/jquery/dist/jquery.min.js"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/jquery-ui/dist/jquery-ui.min.js"><\/script>\n<link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/jquery-ui/themes/base/theme.min.css" />\n<script src="https://testingcf.jsdelivr.net/npm/jquery-ui-touch-punch"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/vue/dist/vue.runtime.global.prod.min.js"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/vue-router/dist/vue-router.global.prod.min.js"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/pixi.js/dist/pixi.min.js"><\/script>\n\n${t?`<base href="${window.location.origin}"/>`:''}\n<script src="${Mj}"><\/script>\n</head>\n<body>\n${e}\n</body>\n</html>\n`}(r.find('code').text(),n.useBlobUrl);return n.useBlobUrl?{src:URL.createObjectURL(new Blob([t],{type:'text/html'}))}:{srcdoc:t}}));Oo((()=>{o.value.src&&URL.revokeObjectURL(o.value.src)})),Eo((()=>{r.children().filter(((e,t)=>!$(t).is('iframe')&&!$(t).hasClass('TH-message-iframe-loading'))).hide()})),$o((()=>{const e=r.children('.TH-collapse-code-block-button');0===e.length?r.children('code').show():e.text('').show()}));const a={props:n,$element:r,loading:i,src_prop:o};return Object.defineProperty(a,'__isScriptSetup',{enumerable:!1,value:!0}),a}}),Fj={key:0,class:'TH-message-iframe-loading'},Zj=['id'];const Hj=sI(Bj,[['render',function(e,t,n,r,i,o){return La(),Ba(Na,null,[r.loading?(La(),Ba('div',Fj,'Loading...')):es('',!0),Li(Ga('iframe',is({id:`TH-message-${n.id}`,ref:'iframe',loading:'lazy'},r.src_prop,{onLoad:t[0]||(t[0]=e=>r.loading=!1)}),null,16,Zj),[[Ys,!r.loading]])],64)}],['__file','Iframe.vue']]),qj=hljs.highlightElement;function Kj(e){const t=e.find('code');if(t.hasClass('TH-collapse-code-block'))return;const n=$('<div class="TH-collapse-code-block-button"></div>').on('click',(function(){t.is(':visible')?(t.hide(),$(this).text('')):(t.show(),$(this).text(''))})).prependTo(e);n.siblings('iframe').length>0&&n.hide(),t.hide()}function Gj(e){$(`.mes[mesid=${e}]`).find('pre').each((function(){Kj($(this))}))}function Wj(){$('#chat').find('pre').each((function(){Kj($(this))}))}function Jj(e){_a(e,((e,t)=>{e?Wj():!e&&t&&($('.TH-collapse-code-block-button').remove(),$('#chat').find('pre > code').filter(((e,t)=>0===$(t).siblings('iframe').length)).show())})),c.on('chatLoaded',(()=>{e.value&&Wj()})),c.on(u.MESSAGE_UPDATED,(t=>{e.value&&Gj(Number(t))})),c.on(u.CHARACTER_MESSAGE_RENDERED,(t=>{e.value&&Gj(Number(t))}))}const Yj=sI(fo({__name:'Render',setup(e,{expose:t}){t(),hljs.highlightElement=e=>{$(e).text().includes('<body')||qj(e)};const{enabled:n,collapse_code_block:r,with_loading:i,use_blob_url:o,depth:a}=Yr(LS().settings.render);Jj(r);const s={enabled:n,collapse_code_block:r,with_loading:i,use_blob_url:o,depth:a,runtimes:ei(FS(),'runtimes'),Iframe:Hj};return Object.defineProperty(s,'__isScriptSetup',{enumerable:!1,value:!0}),s}}),[['render',function(e,t,n,r,i,o){const a=hC,s=ST,l=lI;return La(),Ba(Na,null,[Wa(s,{type:'plain'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t``),1)])),content:Ui((()=>[Wa(a,{id:'TH-render-enabled',modelValue:r.enabled,'onUpdate:modelValue':t[0]||(t[0]=e=>r.enabled=e)},null,8,['modelValue'])])),_:1}),Wa(l),Wa(s,{type:'plain'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t``),1)])),content:Ui((()=>[Wa(a,{id:'TH-render-collapse-code-block',modelValue:r.collapse_code_block,'onUpdate:modelValue':t[1]||(t[1]=e=>r.collapse_code_block=e)},null,8,['modelValue'])])),_:1}),Wa(l),Wa(s,{type:'plain'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t``),1)])),content:Ui((()=>[Wa(a,{id:'TH-render-with-loading',modelValue:r.with_loading,'onUpdate:modelValue':t[2]||(t[2]=e=>r.with_loading=e)},null,8,['modelValue'])])),_:1}),Wa(l),Wa(s,{type:'plain'},{title:Ui((()=>[Xa(un(e.t` Blob URL `),1)])),description:Ui((()=>[Xa(un(e.t` Blob URL  f12 `),1)])),content:Ui((()=>[Wa(a,{id:'TH-render-use-blob-url',modelValue:r.use_blob_url,'onUpdate:modelValue':t[3]||(t[3]=e=>r.use_blob_url=e)},null,8,['modelValue'])])),_:1}),Wa(l),Wa(s,{type:'plain'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t`0`),1)])),content:Ui((()=>[Li(Ga('input',{'onUpdate:modelValue':t[4]||(t[4]=e=>r.depth=e),class:'text_pole w-3.5!',type:'number',min:0},null,512),[[_l,r.depth]])])),_:1}),(La(!0),Ba(Na,null,jo(r.runtimes,((e,t)=>(La(),Ba(Na,{key:t},[(La(!0),Ba(Na,null,jo(e,((e,n)=>(La(),Fa(Wi,{key:e,to:e},[Wa(r.Iframe,{id:`${t}-${n}`,element:e,'with-loading':r.with_loading,'use-blob-url':r.use_blob_url},null,8,['id','element','with-loading','use-blob-url'])],8,['to'])))),128))],64)))),128))],64)}],['__file','Render.vue']]),Xj=fo({__name:'SearchBar',props:Zo({placeholder:{default:'...'},debounce:{default:300},clearable:{type:Boolean,default:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:['update:modelValue'],setup(e,{expose:t}){t();const n=ka(e,'modelValue'),r=e,i=ho('internal'),o=TI((()=>{const e=i.value.value;n.value=''!==e?a(e):null}),(()=>r.debounce));function a(e){try{const t=e.match(/(\/?)(.+)\1([a-z]*)/i);if(!t)return null;if(t[3]&&!/^(?!.*?(.).*?\1)[gmixXsuUAJ]+$/.test(t[3]))return new RegExp(e,'gi');let n=t[3];return-1===n.indexOf('g')&&(n+='g'),-1===n.indexOf('i')&&(n+='i'),new RegExp(t[2],n)}catch{return null}}const s={input:n,props:r,internal:i,onInput:o,regexFromString:a,onClear:function(){i.value.value='',n.value=null}};return Object.defineProperty(s,'__isScriptSetup',{enumerable:!1,value:!0}),s}}),Qj={class:'flex w-full flex-wrap items-center gap-0.5'},eD={class:'relative flex min-w-0 flex-1'},tD=['placeholder'];const nD=sI(Xj,[['render',function(e,t,n,r,i,o){return La(),Ba('div',Qj,[Ga('div',eD,[Ga('input',{ref:'internal',placeholder:n.placeholder,class:'text_pole m-0! w-full pr-2! pl-2!',type:'text',onInput:t[0]||(t[0]=(...e)=>r.onInput&&r.onInput(...e))},null,40,tD),t[2]||(t[2]=Ga('i',{class:'fa-solid fa-search pointer-events-none absolute top-1/2 left-0.5 z-1 -translate-y-[50%] text-(--SmartThemeBodyColor) opacity-60'},null,-1)),n.clearable&&null!==r.input?(La(),Ba('button',{key:0,class:'absolute top-1/2 right-0.5 z-2 flex h-1.5 w-1.5 -translate-y-[50%] cursor-pointer border-none bg-transparent text-(--SmartThemeBodyColor) opacity-80',title:'',onClick:r.onClear},[...t[1]||(t[1]=[Ga('i',{class:'fa-solid fa-xmark TH-SearchBar--clear-icon'},null,-1)])])):es('',!0)])])}],['__file','SearchBar.vue']]);function rD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,'default')?e.default:e}var iD,oD={};var aD=function(){if(iD)return oD;iD=1,oD.remove=function(e){return e.replace(/[^\u0000-\u007e]/g,(function(e){return t[e]||e}))};for(var e=[{base:' ',chars:''},{base:'0',chars:''},{base:'A',chars:''},{base:'AA',chars:''},{base:'AE',chars:''},{base:'AO',chars:''},{base:'AU',chars:''},{base:'AV',chars:''},{base:'AY',chars:''},{base:'B',chars:''},{base:'C',chars:'C'},{base:'D',chars:''},{base:'Dh',chars:''},{base:'DZ',chars:''},{base:'Dz',chars:''},{base:'E',chars:''},{base:'F',chars:''},{base:'G',chars:''},{base:'H',chars:''},{base:'I',chars:''},{base:'J',chars:''},{base:'K',chars:''},{base:'L',chars:''},{base:'LJ',chars:''},{base:'Lj',chars:''},{base:'M',chars:''},{base:'N',chars:''},{base:'NJ',chars:''},{base:'Nj',chars:''},{base:'O',chars:''},{base:'OE',chars:''},{base:'OI',chars:''},{base:'OO',chars:''},{base:'OU',chars:''},{base:'P',chars:''},{base:'Q',chars:''},{base:'R',chars:''},{base:'S',chars:''},{base:'T',chars:''},{base:'Th',chars:''},{base:'TZ',chars:''},{base:'U',chars:''},{base:'V',chars:''},{base:'VY',chars:''},{base:'W',chars:''},{base:'X',chars:''},{base:'Y',chars:''},{base:'Z',chars:''},{base:'a',chars:''},{base:'aa',chars:''},{base:'ae',chars:''},{base:'ao',chars:''},{base:'au',chars:''},{base:'av',chars:''},{base:'ay',chars:''},{base:'b',chars:''},{base:'c',chars:''},{base:'d',chars:''},{base:'dh',chars:''},{base:'dz',chars:''},{base:'e',chars:''},{base:'f',chars:''},{base:'ff',chars:''},{base:'fi',chars:''},{base:'fl',chars:''},{base:'ffi',chars:''},{base:'ffl',chars:''},{base:'g',chars:''},{base:'h',chars:''},{base:'hv',chars:''},{base:'i',chars:''},{base:'j',chars:''},{base:'k',chars:''},{base:'l',chars:''},{base:'lj',chars:''},{base:'m',chars:''},{base:'n',chars:''},{base:'nj',chars:''},{base:'o',chars:''},{base:'oe',chars:''},{base:'oi',chars:''},{base:'oo',chars:''},{base:'ou',chars:''},{base:'p',chars:''},{base:'q',chars:''},{base:'r',chars:''},{base:'s',chars:''},{base:'ss',chars:''},{base:'t',chars:''},{base:'th',chars:''},{base:'tz',chars:''},{base:'u',chars:''},{base:'v',chars:''},{base:'vy',chars:''},{base:'w',chars:''},{base:'x',chars:''},{base:'y',chars:''},{base:'z',chars:''}],t={},n=0;n<e.length;n+=1)for(var r=e[n].chars,i=0;i<r.length;i+=1)t[r[i]]=e[n].base;return oD.replacementList=e,oD.diacriticsMap=t,oD}();const sD=rD(aD),lD=e=>e.replace(/[-\\^$*+?.()|[\]{}]/g,'\\$&'),cD=(e,t,n=!1)=>{if(!t.query||t.query instanceof String&&!t.query.trim())return e;let r=e,i=t.query,o=!1;t.diacriticsSensitive||(r=sD.remove(r),i=t.query instanceof RegExp?new RegExp(sD.remove(t.query.source)):sD.remove(t.query),o=r!==e);const a=(e=>{let t;if(e.query instanceof RegExp)return new RegExp(String.raw`(${e.query.source})`,'g'+(e.caseSensitive?'':'i'));const n=(e=>{if('partial'===e)return e=>lD(e);{const e=String.raw`[\s/(\[{<'"|\u3000]`,t=String.raw`[.,\s/)\]}>:;'"!?|\u3000]`;return n=>String.raw`(?<=^|${e})${lD(n)}(?=$|${t})`}})(e.matchMode);if(e.splitBySpace){const r=e.query.trim().replace(/\s+/g,' ');t=String.raw`(${r.split(/\s/).map(n).join('|')})`}else t=String.raw`(${n(e.query)})`;return new RegExp(String.raw`${t}`,'g'+(e.caseSensitive?'':'i'))})({query:i,splitBySpace:t.splitBySpace,caseSensitive:t.caseSensitive,matchMode:t.matchMode}),s=r.split(a),l=o?((e,t)=>{const n=[];return t.forEach((t=>{const r=n.join('').length,i=r+t.length;n.push(e.slice(r,i))})),n})(e,s):s;return n?s.map(((e,n)=>{if(a.test(e)){const e=t.highlightClass?` class="${t.highlightClass}"`:'',r=t.highlightStyle?` style="${t.highlightStyle}"`:'';return`<${t.highlightTag}${e}${r}>${l[n]}</${t.highlightTag}>`}return l[n]})).join(''):s.map(((e,n)=>a.test(e)?xs(t.highlightTag,{class:t.highlightClass,style:t.highlightStyle},l[n]):l[n]))},uD=e=>'string'==typeof e?[]:e.filter((e=>'string'!=typeof e)).map((e=>'string'==typeof e?e:e.children));var dD=fo({name:'VueWordHighlighter',props:{query:{type:[String,RegExp],required:!0,default:''},caseSensitive:{type:Boolean,default:!1},diacriticsSensitive:{type:Boolean,default:!1},splitBySpace:{type:Boolean,default:!1},matchMode:{type:String,default:'partial'},highlightClass:{type:[Object,String,Array],default:''},highlightStyle:{type:[Object,String,Array],default:''},highlightTag:{type:String,default:'mark'},wrapperTag:{type:String,default:'span'},wrapperClass:{type:[Object,String,Array],default:''},textToHighlight:{type:String,default:''},htmlToHighlight:{type:String,default:''}},emits:['matches'],setup:(e,t)=>()=>{if(e.htmlToHighlight){const t='(<(?:"[^"]*"[\'"]*|\'[^\']*\'[\'"]*|[^\'">])+>)',n=e.htmlToHighlight.split(new RegExp(t,'gs')),r=n.map(((r,i)=>new RegExp(t).test(r)||i>0&&n[i-1].startsWith('<script')?r:cD(r,{query:e.query,splitBySpace:e.splitBySpace,caseSensitive:e.caseSensitive,diacriticsSensitive:e.diacriticsSensitive,matchMode:e.matchMode,highlightTag:e.highlightTag,highlightClass:e.highlightClass,highlightStyle:e.highlightStyle},!0))).join('');return xs(e.wrapperTag,{class:e.wrapperClass,innerHTML:r})}if(e.textToHighlight){const n=cD(e.textToHighlight,{query:e.query,splitBySpace:e.splitBySpace,caseSensitive:e.caseSensitive,diacriticsSensitive:e.diacriticsSensitive,matchMode:e.matchMode,highlightTag:e.highlightTag,highlightClass:e.highlightClass,highlightStyle:e.highlightStyle});return t.emit('matches',uD(n)),xs(e.wrapperTag,{class:e.wrapperClass},n)}if(t.slots&&t.slots.default){const n=r=>{if(r.type===ja)return r;if('string'==typeof r.children){const n=cD(r.children,{query:e.query,splitBySpace:e.splitBySpace,caseSensitive:e.caseSensitive,diacriticsSensitive:e.diacriticsSensitive,matchMode:e.matchMode,highlightTag:e.highlightTag,highlightClass:e.highlightClass,highlightStyle:e.highlightStyle}),i=uD(n);return t.emit('matches',i),0===i.length?r:'string'==typeof r.type?xs(r.type,{...r.props},[xs(e.wrapperTag,{class:e.wrapperClass},n)]):xs(e.wrapperTag,{class:e.wrapperClass},n)}return xs(r.type,{...r.props},Array.isArray(r.children)?r.children.map((e=>n(e))):[])},r=t.slots.default();return Array.isArray(r)?r.map((e=>n(e))):r}}});const pD=fo({__name:'Highlighter',props:{query:{}},setup(e,{expose:t}){t();const n=e,r=ks((()=>null===n.query?'':n.query)),i={props:n,normalized_query:r,get WordHighlighter(){return dD}};return Object.defineProperty(i,'__isScriptSetup',{enumerable:!1,value:!0}),i}});const fD=sI(pD,[['render',function(e,t,n,r,i,o){return La(),Fa(r.WordHighlighter,{query:r.normalized_query,'highlight-class':'TH-Highlighter--mark'},{default:Ui((()=>[Do(e.$slots,'default')])),_:3},8,['query'])}],['__file','Highlighter.vue']]),hD=Hy({name:mv().nonempty(''),content:mv(),info:mv(),button:Hy({enabled:by(),buttons:By(d_)}),data:rb(mv(),Ny())}),mD=Hy({name:mv().nonempty(''),icon:mv(),color:mv()});var gD,vD;var yD=vD?gD:(vD=1,gD=Popper);function bD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _D(e,t){if(e){if('string'==typeof e)return bD(e,t);var n={}.toString.call(e).slice(8,-1);return'Object'===n&&e.constructor&&(n=e.constructor.name),'Map'===n||'Set'===n?Array.from(e):'Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bD(e,t):void 0}}function wD(e){return function(e){if(Array.isArray(e))return bD(e)}(e)||function(e){if('undefined'!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e['@@iterator'])return Array.from(e)}(e)||_D(e)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function kD(e){return kD='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},kD(e)}function xD(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function SD(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){xD(o,r,i,a,s,'next',e)}function s(e){xD(o,r,i,a,s,'throw',e)}a(void 0)}))}}var ED={exports:{}},$D={exports:{}};!function(e){function t(n){return e.exports=t='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}($D),function(e){var t=$D.exports.default;function n(){e.exports=n=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var r,i={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},l='function'==typeof Symbol?Symbol:{},c=l.iterator||'@@iterator',u=l.asyncIterator||'@@asyncIterator',d=l.toStringTag||'@@toStringTag';function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},'')}catch(r){p=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),a=new j(r||[]);return s(o,'_invoke',{value:C(e,n,a)}),o}function h(e,t,n){try{return{type:'normal',arg:e.call(t,n)}}catch(e){return{type:'throw',arg:e}}}i.wrap=f;var m='suspendedStart',g='suspendedYield',v='executing',y='completed',b={};function w(){}function k(){}function x(){}var S={};p(S,c,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(D([])));O&&O!==o&&a.call(O,c)&&(S=O);var I=x.prototype=w.prototype=Object.create(S);function T(e){['next','throw','return'].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,n){function r(i,o,s,l){var c=h(e[i],e,o);if('throw'!==c.type){var u=c.arg,d=u.value;return d&&'object'==t(d)&&a.call(d,'__await')?n.resolve(d.__await).then((function(e){r('next',e,s,l)}),(function(e){r('throw',e,s,l)})):n.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r('throw',e,s,l)}))}l(c.arg)}var i;s(this,'_invoke',{value:function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}})}function C(e,t,n){var i=m;return function(o,a){if(i===v)throw Error('Generator is already running');if(i===y){if('throw'===o)throw a;return{value:r,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var l=N(s,n);if(l){if(l===b)continue;return l}}if('next'===n.method)n.sent=n._sent=n.arg;else if('throw'===n.method){if(i===m)throw i=y,n.arg;n.dispatchException(n.arg)}else'return'===n.method&&n.abrupt('return',n.arg);i=v;var c=h(e,t,n);if('normal'===c.type){if(i=n.done?y:g,c.arg===b)continue;return{value:c.arg,done:n.done}}'throw'===c.type&&(i=y,n.method='throw',n.arg=c.arg)}}}function N(e,t){var n=t.method,i=e.iterator[n];if(i===r)return t.delegate=null,'throw'===n&&e.iterator.return&&(t.method='return',t.arg=r,N(e,t),'throw'===t.method)||'return'!==n&&(t.method='throw',t.arg=new TypeError('The iterator does not provide a \''+n+'\' method')),b;var o=h(i,e.iterator,t.arg);if('throw'===o.type)return t.method='throw',t.arg=o.arg,t.delegate=null,b;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,'return'!==t.method&&(t.method='next',t.arg=r),t.delegate=null,b):a:(t.method='throw',t.arg=new TypeError('iterator result is not an object'),t.delegate=null,b)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type='normal',delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:'root'}],e.forEach(_,this),this.reset(!0)}function D(e){if(e||''===e){var n=e[c];if(n)return n.call(e);if('function'==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+' is not iterable')}return k.prototype=x,s(I,'constructor',{value:x,configurable:!0}),s(x,'constructor',{value:k,configurable:!0}),k.displayName=p(x,d,'GeneratorFunction'),i.isGeneratorFunction=function(e){var t='function'==typeof e&&e.constructor;return!!t&&(t===k||'GeneratorFunction'===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,p(e,d,'GeneratorFunction')),e.prototype=Object.create(I),e},i.awrap=function(e){return{__await:e}},T(A.prototype),p(A.prototype,u,(function(){return this})),i.AsyncIterator=A,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new A(f(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(I),p(I,d,'Generator'),p(I,c,(function(){return this})),p(I,'toString',(function(){return'[object Generator]'})),i.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},i.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method='next',this.arg=r,this.tryEntries.forEach(P),!e)for(var t in this)'t'===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if('throw'===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type='throw',s.arg=e,t.next=n,i&&(t.method='next',t.arg=r),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if('root'===o.tryLoc)return n('end');if(o.tryLoc<=this.prev){var l=a.call(o,'catchLoc'),c=a.call(o,'finallyLoc');if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error('try statement without catch or finally');if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,'finallyLoc')&&this.prev<r.finallyLoc){var i=r;break}}i&&('break'===e||'continue'===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method='next',this.next=i.finallyLoc,b):this.complete(o)},complete:function(e,t){if('throw'===e.type)throw e.arg;return'break'===e.type||'continue'===e.type?this.next=e.arg:'return'===e.type?(this.rval=this.arg=e.arg,this.method='return',this.next='end'):'normal'===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if('throw'===r.type){var i=r.arg;P(n)}return i}}throw Error('illegal catch attempt')},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},'next'===this.method&&(this.arg=r),b}},i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ED);var OD=ED.exports(),z=OD;try{regeneratorRuntime=OD}catch(UJ){'object'==typeof globalThis?globalThis.regeneratorRuntime=OD:Function('r','regeneratorRuntime = r')(OD)}function ID(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:'undefined'!=typeof Symbol&&e[Symbol.iterator]||e['@@iterator'];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||_D(e,t)||function(){throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function TD(e,t,n){return(t=function(e){var t=function(e,t){if('object'!=kD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if('object'!=kD(r))return r;throw new TypeError('@@toPrimitive must return a primitive value.')}return String(e)}(e,'string');return'symbol'==kD(t)?t:t+''}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AD=fo({name:'Saturation',props:{size:{type:Number,default:160},hue:{type:Number,default:0},saturation:{type:Number,default:0},value:{type:Number,default:0}},emits:['change'],setup:function(e,t){var n=t.emit;return{saturationStyle:ks((function(){return{width:''.concat(e.size,'px'),height:''.concat(e.size,'px'),background:'hsl('.concat(e.hue,', 100%, 50%)')}})),sliderStyle:ks((function(){return{top:''.concat((100-e.value)/100*e.size-5,'px'),left:''.concat(e.saturation*e.size/100-5,'px'),width:''.concat(10,'px'),height:''.concat(10,'px')}})),onSelect:function(t){var r=t.target.getBoundingClientRect(),i=r.left,o=r.top,a=function(t){var r,a;t instanceof MouseEvent?(r=t.clientX,a=t.clientY):t instanceof TouchEvent&&(r=t.touches[0].clientX,a=t.touches[0].clientY);var s=r-i,l=a-o;s<0&&(s=0),l<0&&(l=0),s>e.size&&(s=e.size),l>e.size&&(l=e.size);var c=s/e.size*100,u=100-l/e.size*100;n('change',c,u)};a(t);var s=function(){document.removeEventListener('mousemove',a),document.removeEventListener('mouseup',s),document.removeEventListener('touchmove',a),document.removeEventListener('touchend',s)};a(t),t instanceof MouseEvent&&(document.addEventListener('mousemove',a),document.addEventListener('mouseup',s)),t instanceof TouchEvent&&(t.preventDefault(),document.addEventListener('touchmove',a,{passive:!1}),document.addEventListener('touchend',s))}}}});function CD(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&'undefined'!=typeof document){var r=document.head||document.getElementsByTagName('head')[0],i=document.createElement('style');i.type='text/css','top'===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}CD('.saturation[data-v-24517fec]{position:relative}.saturation-black[data-v-24517fec],.saturation-white[data-v-24517fec]{cursor:pointer;height:100%;left:0;position:absolute;top:0;width:100%}.saturation-white[data-v-24517fec]{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.saturation-black[data-v-24517fec]{background:linear-gradient(0deg,#000,transparent)}.slider[data-v-24517fec]{border:1px solid #fff;border-radius:50%;box-shadow:0 0 1px 1px rgba(0,0,0,.3);left:0;pointer-events:none;position:absolute;top:0;z-index:1}'),AD.render=function(e,t,n,r,i,o){return La(),Ba('div',{class:'saturation',style:Yt(e.saturationStyle),onMousedown:t[0]||(t[0]=Al((function(){return e.onSelect&&e.onSelect.apply(e,arguments)}),['prevent','stop'])),onTouchstart:t[1]||(t[1]=Al((function(){return e.onSelect&&e.onSelect.apply(e,arguments)}),['prevent','stop']))},[t[2]||(t[2]=Ga('div',{class:'saturation-white'},null,-1)),t[3]||(t[3]=Ga('div',{class:'saturation-black'},null,-1)),Ga('div',{class:'slider',style:Yt(e.sliderStyle)},null,4)],36)},AD.__scopeId='data-v-24517fec',AD.__file='src/picker/Saturation.vue';var ND=fo({name:'Hue',props:{width:{type:Number,default:15},height:{type:Number,default:160},hue:{type:Number,default:0}},emits:['change'],setup:function(e,t){var n=t.emit,r=ks((function(){return{top:''.concat((1-e.hue/360)*e.height-2,'px'),height:''.concat(4,'px')}})),i=Mr();return Eo((function(){!function(){if(i.value){i.value.width=e.width,i.value.height=e.height;var t=i.value.getContext('2d');if(t){var n=t.createLinearGradient(0,0,0,e.height);n.addColorStop(0,'#FF0000'),n.addColorStop(.17,'#FF00FF'),n.addColorStop(.34,'#0000FF'),n.addColorStop(.51,'#00FFFF'),n.addColorStop(.68,'#00FF00'),n.addColorStop(.17*5,'#FFFF00'),n.addColorStop(1,'#FF0000'),t.fillStyle=n,t.fillRect(0,0,e.width,e.height)}}}()})),{canvas:i,sliderStyle:r,onSelect:function(t){var r=t.target.getBoundingClientRect().top,i=function(t){var i;t instanceof MouseEvent?i=t.clientY:t instanceof TouchEvent&&(i=t.touches[0].clientY);var o=i-r;o<0&&(o=0),o>e.height&&(o=e.height);var a=-100*o/e.height+100;n('change',360*a/100)},o=function(){document.removeEventListener('mousemove',i),document.removeEventListener('mouseup',o),document.removeEventListener('touchmove',i),document.removeEventListener('touchend',o)};i(t),t instanceof MouseEvent&&(document.addEventListener('mousemove',i),document.addEventListener('mouseup',o)),t instanceof TouchEvent&&(t.preventDefault(),document.addEventListener('touchmove',i,{passive:!1}),document.addEventListener('touchend',o))}}}}),PD={ref:'canvas'};CD('.hue[data-v-78b9f4f0]{position:relative;touch-action:none}.slider[data-v-78b9f4f0]{background:#fff;box-shadow:0 0 1px 0 rgba(0,0,0,.3);left:0;pointer-events:none;position:absolute;width:100%;z-index:1}'),ND.render=function(e,t,n,r,i,o){return La(),Ba('div',{class:'hue',onMousedown:t[0]||(t[0]=Al((function(){return e.onSelect&&e.onSelect.apply(e,arguments)}),['prevent','stop'])),onTouchstart:t[1]||(t[1]=Al((function(){return e.onSelect&&e.onSelect.apply(e,arguments)}),['prevent','stop']))},[Ga('canvas',PD,null,512),Ga('div',{class:'slider',style:Yt(e.sliderStyle)},null,4)],32)},ND.__scopeId='data-v-78b9f4f0',ND.__file='src/picker/Hue.vue';var jD=fo({name:'Alpha',props:{width:{type:Number,default:15},height:{type:Number,default:160},color:{type:String,default:'#000000'},alpha:{type:Number,default:1}},setup:function(e,t){var n=t.emit,r=ks((function(){return{top:''.concat(e.alpha*e.height-2,'px'),height:''.concat(4,'px')}})),i=Mr(),o=function(){var t=i.value.getContext('2d');i.value.width=e.width,i.value.height=e.height;var n=function(){var e=document.createElement('canvas'),t=e.getContext('2d');return e.width=10,e.height=10,t.fillStyle='#ffffff',t.fillRect(0,0,10,10),t.fillStyle='#ccd5db',t.fillRect(0,0,5,5),t.fillRect(5,5,5,5),e}();t.fillStyle=t.createPattern(n,'repeat'),t.fillRect(0,0,e.width,e.height);var r=t.createLinearGradient(0,0,0,e.height);r.addColorStop(.01,'rgba(255,255,255,0)'),r.addColorStop(.99,e.color),t.fillStyle=r,t.fillRect(0,0,e.width,e.height)};return _a((function(){return e.color}),(function(){o()})),Eo((function(){o()})),{canvas:i,sliderStyle:r,onSelect:function(t){var r=t.target.getBoundingClientRect().top,i=function(t){var i;t instanceof MouseEvent?i=t.clientY:t instanceof TouchEvent&&(i=t.touches[0].clientY);var o=i-r;o<0&&(o=0),o>e.height&&(o=e.height);var a=parseFloat((o/e.height).toFixed(2));n('change',a)},o=function(){document.removeEventListener('mousemove',i),document.removeEventListener('mouseup',o),document.removeEventListener('touchmove',i),document.removeEventListener('touchend',o)};i(t),t instanceof MouseEvent&&(document.addEventListener('mousemove',i),document.addEventListener('mouseup',o)),t instanceof TouchEvent&&(t.preventDefault(),document.addEventListener('touchmove',i,{passive:!1}),document.addEventListener('touchend',o))}}}}),DD={ref:'canvas'};CD('.alpha[data-v-24dc9656]{position:relative;touch-action:none}.slider[data-v-24dc9656]{background:#fff;box-shadow:0 0 1px 0 rgba(0,0,0,.3);left:0;pointer-events:none;position:absolute;width:100%;z-index:1}'),jD.render=function(e,t,n,r,i,o){return La(),Ba('div',{class:'alpha',onMousedown:t[0]||(t[0]=Al((function(){return e.onSelect&&e.onSelect.apply(e,arguments)}),['prevent','stop'])),onTouchstart:t[1]||(t[1]=Al((function(){return e.onSelect&&e.onSelect.apply(e,arguments)}),['prevent','stop']))},[Ga('canvas',DD,null,512),Ga('div',{class:'slider',style:Yt(e.sliderStyle)},null,4)],32)},jD.__scopeId='data-v-24dc9656',jD.__file='src/picker/Alpha.vue';var RD={rgb:'RGBA',hex:'HEX',hsl:'HSLA',hsv:'HSVA'},UD={rgb:'RGB',hex:'HEX',hsl:'HSL',hsv:'HSV'},LD={RGB:'rgb',RGBA:'rgb',HEX:'hex',HSL:'hsl',HSLA:'hsl',HSV:'hsv',HSVA:'hsv'};function zD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zD(Object(n),!0).forEach((function(t){TD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var MD=null,BD=function(e,t,n){var r=Mr({}),i=n||{},o=i.placement,a=i.defaultStyle,s={strategy:i.strategy||'absolute',placement:o||'auto',onFirstUpdate:function(){MD.update()},modifiers:[{name:'offset',options:{offset:[0,5]}},{name:'computeStyles',options:{gpuAcceleration:!1,adaptive:!0}},{name:'flip',options:{allowedAutoPlacements:['top','bottom']}},{name:'applyStyles',enabled:!1},{name:'updateState',enabled:!0,phase:'write',requires:['computeStyles'],fn:function(e){var t=e.state,n=t.styles,i=t.placement,o=n.popper;r.value=VD(VD(VD({},o),a),{},{transformOrigin:'top'===i?'center bottom':'center top'})}}]};return _a((function(){return[Hr(e),Hr(t)]}),(function(e,t){var n,r=ID(e,2),i=r[0],o=r[1],a=ID(t,2),l=a[0],c=a[1];if(i&&o&&(l!==i||c!==l)){null===(n=MD)||void 0===n||n.destroy();var u=i.$el||i,d=o.$el||o;yi((function(){MD=yD.createPopper(u,d,s)}))}})),$o((function(){var e;MD&&(null===(e=MD)||void 0===e||e.destroy(),MD=null)})),{instance:MD,style:r}},FD=fo({props:{value:{type:String,default:'RGBA'},showAlpha:{type:Boolean},options:{type:[Boolean,Array]}},emits:['change'],setup:function(e,t){var n=t.emit,r=Mr(null),i=Mr(null),o=Mr(!1),a=BD(r,i,{strategy:'fixed',defaultStyle:{zIndex:2}}).style,s=ks((function(){return Array.isArray(e.options)&&e.options.length>1})),l=ks((function(){var t=e.options,n=e.showAlpha,r=e.value;return Array.isArray(t)?n?t.map((function(e){return RD[e]})).filter((function(e){return!e.includes(r)})):t.map((function(e){return UD[e]})).filter((function(e){return!e.includes(r)})):[]})),c=function(e){var t,n,i=e.target;(null===(t=Hr(r))||void 0===t||!t.isEqualNode(i))&&(null===(n=Hr(r))||void 0===n?void 0:n.contains(i))||(o.value=!1)};return Eo((function(){document.addEventListener('mouseup',c,!1)})),Oo((function(){document.removeEventListener('mouseup',c,!1)})),{targetRef:r,selectorRef:i,selectorStyle:a,isShowSelector:o,isNeedSelect:s,formatOptions:l,onShow:function(){s.value&&(o.value=!0)},onFormatChange:function(e){n('change',LD[e])}}}}),ZD={class:'format'},HD={key:0,class:'arrow'},qD=['onClick'];CD('.format[data-v-5f6e8f5e]{position:relative}.label[data-v-5f6e8f5e]{align-items:center;background:#e7e8e9;color:#999;display:flex;float:left;font-weight:500;height:30px;justify-content:center;position:relative;width:60px}[pick-colors-theme=dark] .label[data-v-5f6e8f5e]{background:#252930;color:#999}.arrow[data-v-5f6e8f5e]{height:6px;margin-bottom:4px;margin-left:5px;transform:rotate(135deg);width:6px}.arrow[data-v-5f6e8f5e],[pick-colors-theme=dark] .arrow[data-v-5f6e8f5e]{border-right:1px solid #999;border-top:1px solid #999}.selector[data-v-5f6e8f5e]{align-items:center;background:#f7f8f9;border-radius:5px;box-shadow:0 0 16px 0 rgba(0,0,0,.16);cursor:pointer;display:flex;flex-direction:column;font-weight:400;justify-content:center;padding:4px}[pick-colors-theme=dark] .selector[data-v-5f6e8f5e]{background:#252930;color:#999}.selector-item[data-v-5f6e8f5e]{align-items:center;display:flex;height:30px;justify-content:center;width:60px}.selector-item[data-v-5f6e8f5e]:hover{background:#e1f2fe}[pick-colors-theme=dark] .selector-item[data-v-5f6e8f5e]{color:#fff}[pick-colors-theme=dark] .selector-item[data-v-5f6e8f5e]:hover{background:#0087fa}.active-selector-item[data-v-5f6e8f5e]{background:#e1f2fe}[pick-colors-theme=dark] .active-selector-item[data-v-5f6e8f5e]{background:#0087fa}.v-enter-active[data-v-5f6e8f5e],.v-leave-active[data-v-5f6e8f5e]{opacity:1;transform:scaleY(1);transform-origin:center top;transition:opacity .2s ease-in-out,transform .2s ease-in-out}.v-enter-from[data-v-5f6e8f5e],.v-leave-to[data-v-5f6e8f5e]{opacity:0;transform:scaleY(0)}'),FD.render=function(e,t,n,r,i,o){return La(),Ba('div',ZD,[Ga('div',{class:'label',ref:'targetRef',onClick:t[0]||(t[0]=function(){return e.onShow&&e.onShow.apply(e,arguments)})},[Ga('span',null,un(e.value),1),e.isNeedSelect?(La(),Ba('div',HD)):es('v-if',!0)],512),Wa(Us,null,{default:Ui((function(){return[e.isShowSelector?(La(),Ba('div',{key:0,class:'selector',ref:'selectorRef',style:Yt(e.selectorStyle)},[(La(!0),Ba(Na,null,jo(e.formatOptions,(function(t){return La(),Ba('div',{class:'selector-item',key:t,onClick:function(n){return e.onFormatChange(t)}},un(t),9,qD)})),128))],4)):es('v-if',!0)]})),_:1})])},FD.__scopeId='data-v-5f6e8f5e',FD.__file='src/picker/input-value/FormatValue.vue';var KD=fo({name:'Input',components:{FormatValue:FD},props:{format:{type:String,default:'RGBA'},value:{type:String,default:''},width:{type:Number},showAlpha:{type:Boolean},formatOptions:{type:[Boolean,Array]}},emits:['change','focus','blur','enter','formatChange'],setup:function(e,t){var n=t.emit;return{onInput:function(e){var t;n('change',null===(t=e.target)||void 0===t?void 0:t.value)},valueStyle:ks((function(){return{minWidth:''.concat(e.width,'px'),maxWidth:''.concat(e.width,'px'),width:''.concat(e.width,'px')}})),onFocus:function(){n('focus')},onBlur:function(){n('blur')},onEnter:function(){n('enter')},onFormatChange:function(e){n('formatChange',e)}}}}),GD={class:'input'},WD=['.value'];function JD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JD(Object(n),!0).forEach((function(t){TD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}CD('.input[data-v-2c454c00]{display:flex;font-size:12px}.value[data-v-2c454c00]{background:#eceef0;border:1px solid #eceef0;box-sizing:border-box;color:#666;flex:1;height:30px;text-align:center}[pick-colors-theme=dark] .value[data-v-2c454c00]{background:#2e333a;border:1px solid #2e333a;color:#fff}.value[data-v-2c454c00]:focus{border:1px solid #1890ff;outline:none}'),KD.render=function(e,t,n,r,i,o){var a=To('FormatValue');return La(),Ba('div',GD,[Wa(a,{value:e.format,showAlpha:e.showAlpha,options:e.formatOptions,onChange:e.onFormatChange},null,8,['value','showAlpha','options','onChange']),Ga('input',{class:'value',style:Yt(e.valueStyle),'.value':e.value,onFocus:t[0]||(t[0]=function(){return e.onFocus&&e.onFocus.apply(e,arguments)}),onInput:t[1]||(t[1]=function(){return e.onInput&&e.onInput.apply(e,arguments)}),onBlur:t[2]||(t[2]=function(){return e.onBlur&&e.onBlur.apply(e,arguments)}),onKeydown:t[3]||(t[3]=Nl((function(){return e.onEnter&&e.onEnter.apply(e,arguments)}),['enter']))},null,44,WD)])},KD.__scopeId='data-v-2c454c00',KD.__file='src/picker/input-value/InputValue.vue';var XD=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},QD={10:'A',11:'B',12:'C',13:'D',14:'E',15:'F'},eR=function(e){e=Math.min(Math.round(e),255);var t=Math.floor(e/16),n=e%16;return''.concat(QD[t]||t).concat(QD[n]||n)},tR=function(e){var t=e.r,n=e.g,r=e.b;return isNaN(t)||isNaN(n)||isNaN(r)?'':'#'.concat(eR(t)).concat(eR(n)).concat(eR(r))},nR=function(e,t){var n;'string'==typeof(n=e)&&-1!==n.indexOf('.')&&1===parseFloat(n)&&(e='100%');var r=function(e){return'string'==typeof e&&-1!==e.indexOf('%')}(e);return e=Math.min(t,Math.max(0,parseFloat(''.concat(e)))),r&&(e=parseInt(''.concat(e*t),10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)},rR=function(e,t,n){e=6*nR(e,360),t=nR(t,100),n=nR(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6,c=[n,a,o,o,s,n][l],u=[s,n,n,a,o,o][l],d=[o,o,s,n,n,a][l];return{r:Math.round(255*c),g:Math.round(255*u),b:Math.round(255*d)}},iR=function(e,t,n){var r,i,o=e.h,a=e.s,s=e.v,l=e.a;if(n)switch(['hsl','hsv','rga'].includes(t)&&(l=(i=(r=l).toString().match(/\.(\d{1,2})(\d*)/))&&i[2].length>0?parseFloat(r.toFixed(2)):r),t){case'hsl':var c=XD(o,a/100,s/100);return'hsla('.concat(o.toFixed(0),', ').concat(Math.round(100*c[1]),'%, ').concat(Math.round(100*c[2]),'%, ').concat(l,')');case'hsv':return'hsva('.concat(o.toFixed(0),', ').concat(Math.round(a),'%, ').concat(Math.round(s),'%, ').concat(l,')');case'rgb':var u=rR(o,a,s),d=u.r,p=u.g,f=u.b;return'rgba('.concat(d,', ').concat(p,', ').concat(f,', ').concat(l,')');default:return''.concat(tR(rR(o,a,s))).concat(eR(255*l))}else switch(t){case'hsl':var h=XD(o,a/100,s/100);return'hsl('.concat(o.toFixed(0),', ').concat(Math.round(100*h[1]),'%, ').concat(Math.round(100*h[2]),'%)');case'hsv':return'hsv('.concat(o.toFixed(0),', ').concat(Math.round(a),'%, ').concat(Math.round(s),'%)');case'rgb':var m=rR(o,a,s),g=m.r,v=m.g,y=m.b;return'rgb('.concat(g,', ').concat(v,', ').concat(y,')');default:return tR(rR(o,a,s))}},oR=function(e){var t=e.r,n=e.g,r=e.b;t=nR(t,255),n=nR(n,255),r=nR(r,255);var i,o=Math.max(t,n,r),a=Math.min(t,n,r),s=o,l=o-a,c=0===o?0:l/o;if(o===a)i=0;else{switch(o){case t:i=(n-r)/l+(n<r?6:0);break;case n:i=(r-t)/l+2;break;case r:i=(t-n)/l+4}i/=6}return{h:360*i,s:100*c,v:100*s}},aR=function(e){var t=e.h,n=e.s,r=e.l;r/=100;var i=n/=100,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,{h:+t,s:100*(0===r?2*i/(o+i):2*n/(r+n)),v:(r+n)/2*100}},sR=function(e){var t=[];if(e.match(/^#([0-9a-fA-f]{3,4})$/g))for(var n=1;n<e.length;n++)t.push(parseInt('0x'+e[n].repeat(2)));else if(e.match(/^#([0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/g))for(var r=1;r<e.length;r+=2)t.push(parseInt('0x'+e.slice(r,r+2)));return{r:t[0],g:t[1],b:t[2],a:t[3]}},lR=function(e,t,n){if('string'==typeof e&&''!==e){var r=pR(e,fR(e),n),i=hR(r);return null==i?'':iR(i,t,n)}return''},cR=function(e){var t=ID(e.match(/(\d(\.\d+)?)+/g),4);return{r:t[0],g:t[1],b:t[2],a:t[3]}},uR=function(e){var t=ID(e.match(/(\d(\.\d+)?)+/g),4),n=t[0],r=t[1],i=t[2],o=t[3];return{h:n,s:parseFloat(r),l:parseFloat(i),a:o}},dR=function(e){var t=ID(e.match(/(\d(\.\d+)?)+/g),4),n=t[0],r=t[1],i=t[2],o=t[3];return{h:parseFloat(n),s:parseFloat(r),v:parseFloat(i),a:parseFloat(o)}},pR=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&!arguments[2])switch(t){case'rgb':return YD(YD({},oR(cR(e))),{},{a:1});case'hsv':var n=dR(e);return{h:n.h,s:n.s,v:n.v,a:1};case'hsl':return YD(YD({},aR(uR(e))),{},{a:1});default:return YD(YD({},oR(sR(e))),{},{a:1})}else switch(t){case'rgb':var r=cR(e),i=r.r,o=r.g,a=r.b,s=r.a;return YD(YD({},oR({r:i,g:o,b:a})),{},{a:+s});case'hsv':var l=dR(e);return{h:l.h,s:l.s,v:l.v,a:l.a};case'hsl':var c=uR(e),u=c.h,d=c.s,p=c.l,f=c.a;return YD(YD({},aR({h:u,s:d,l:p})),{},{a:+f});default:var h=sR(e),m=h.r,g=h.g,v=h.b,y=h.a;return YD(YD({},oR({r:m,g:g,b:v})),{},{a:y/255})}},fR=function(e){return e.match(/^#/)?'hex':e.match(/^rgb/)?'rgb':e.match(/^hsl/)?'hsl':e.match(/^hsv/)?'hsv':'hex'},hR=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;return isNaN(t)&&isNaN(n)&&isNaN(r)?null:(isNaN(t)&&(t=0),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),{h:t,s:n,v:r,a:i})},mR=fo({name:'ColorItem',props:{size:{type:[Number,String],default:20},width:{type:[Number,String]},height:{type:[Number,String]},value:{type:String,default:''},border:{type:Boolean,default:!0},borderRadius:{type:Number,default:5},selected:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1}},emits:['select'],setup:function(e){var t=Mr(),n=Jo('theme',{theme:'light'}).theme,r=ks((function(){return parseFloat((e.width||e.size)+'')})),i=ks((function(){return parseFloat((e.height||e.size)+'')})),o=ks((function(){return{width:''.concat(Hr(r),'px'),height:''.concat(Hr(i),'px'),border:e.border?'1px solid '.concat('dark'===Hr(n)?'#434345':'#d9d9d9'):'',borderRadius:''.concat(e.borderRadius,'px'),boxShadow:e.selected?'0 0 3px 2px '.concat('dark'===Hr(n)?'#2681ff':'#1890ff'):''}})),a=function(){var n=t.value.getContext('2d');t.value.width=Hr(r),t.value.height=Hr(i);var o=function(){var e=document.createElement('canvas'),t=e.getContext('2d');return e.width=10,e.height=10,t.fillStyle='#ffffff',t.fillRect(0,0,10,10),t.fillStyle='#ccd5db',t.fillRect(0,0,5,5),t.fillRect(5,5,5,5),e}();n.fillStyle=n.createPattern(o,'repeat'),n.fillRect(0,0,Hr(r),Hr(i)),n.fillStyle=e.value,n.fillRect(0,0,Hr(r),Hr(i))};return _a((function(){return e.value}),(function(){a()})),Eo((function(){a()})),{canvas:t,colorItemStyle:o}}}),gR=['draggable'];CD('.color-item[data-v-02da71fd]{display:inline-block;vertical-align:top}'),mR.render=function(e,t,n,r,i,o){return La(),Ba('canvas',{class:'color-item',style:Yt(e.colorItemStyle),ref:'canvas',draggable:e.draggable},null,12,gR)},mR.__scopeId='data-v-02da71fd',mR.__file='src/color-item/ColorItem.vue';var vR=fo({name:'Colors',components:{ColorItem:mR},props:{colors:{type:Array,default:function(){return[]}},selectedIndex:{type:Number,default:-1}},emits:['change'],setup:function(e,t){var n=t.emit;return{onSelectColor:function(e,t){n('change',e,t)},useColors:ks((function(){return e.colors.map((function(e){return lR(e,'hex',!0)}))}))}}}),yR={class:'colors'};function bR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bR(Object(n),!0).forEach((function(t){TD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}CD('.colors[data-v-0f8b52a8]{align-items:center;display:flex;flex-wrap:wrap;margin-top:5px}.color-item[data-v-0f8b52a8]{margin:5px}'),vR.render=function(e,t,n,r,i,o){var a=To('color-item');return La(),Ba('div',yR,[(La(!0),Ba(Na,null,jo(e.useColors,(function(t,n){return La(),Fa(a,{key:n,class:'color-item',size:16,value:t,border:!1,'border-radius':3,selected:e.selectedIndex===n,onClick:Al((function(r){return e.onSelectColor(t,+n)}),['stop','prevent'])},null,8,['value','selected','onClick'])})),128))])},vR.__scopeId='data-v-0f8b52a8',vR.__file='src/picker/Colors.vue';var wR=fo({name:'Picker',components:{Colors:vR,Saturation:AD,Hue:ND,Alpha:jD,InputValue:KD},props:{format:{type:String,default:'hex'},showAlpha:{type:Boolean,default:!1},value:{type:String,default:''},colors:{type:Array,default:function(){return[]}},style:{type:Object,default:function(){return{}}},formatOptions:{type:[Boolean,Array]}},emits:['change','formatChange'],setup:function(e,t){var n=t.emit,r=ks((function(){return _R(_R({},e.style),{},{width:e.showAlpha?'230px':'205px'})})),i=Mr(),o=Mr(),a=Mr(),s=function(){var t,n=null===(t=e.value)||void 0===t?void 0:t.trim();if(null!=n&&''!==n){var r=fR(n);return hR(pR(n,r,e.showAlpha))}return null};_a((function(){return e.value}),(function(){e.value!==Hr(a)&&(i.value=s())}),{immediate:!0}),_a((function(){return[Hr(i),e.format]}),(function(t){var r=ID(t,2),i=r[0],l=r[1],c='';null!=i?(c=iR(_R({},i),e.format,e.showAlpha),o.value=_R({},i)):o.value=null,a.value=c;var u=s();JSON.stringify(i)!==JSON.stringify(u)&&JSON.stringify(i)!==JSON.stringify(l)&&n('change',c)}),{immediate:!0});var l=ks((function(){var e;return(null===(e=Hr(i))||void 0===e?void 0:e.h)||0})),c=ks((function(){var e;return(null===(e=Hr(i))||void 0===e?void 0:e.s)||0})),u=ks((function(){var e;return(null===(e=Hr(i))||void 0===e?void 0:e.v)||0})),d=ks((function(){var e,t;return null!=(null===(e=Hr(i))||void 0===e?void 0:e.a)?null===(t=Hr(i))||void 0===t?void 0:t.a:1})),p=ks((function(){return rR(Hr(l),Hr(c),Hr(u))})),f=ks((function(){return'rgb('.concat(Hr(p).r,', ').concat(Hr(p).g,', ').concat(Hr(p).b,')')})),h=Mr(-1);return{h:l,s:c,v:u,a:d,rgbStr:f,onSelectSaturation:function(e,t){h.value=-1,null==Hr(i)?i.value={h:Hr(l),s:e,v:t,a:Hr(d)}:i.value=_R(_R({},Hr(i)),{},{s:e,v:t})},onSelectHue:function(e){h.value=-1,null==Hr(i)&&(i.value={h:e,s:Hr(c),v:Hr(u),a:Hr(d)}),i.value=_R(_R({},Hr(i)),{},{h:e})},onSelectAlpha:function(e){h.value=-1,null==Hr(i)?i.value={h:Hr(l),s:Hr(c),v:Hr(u),a:e}:i.value=_R(_R({},Hr(i)),{},{a:e})},handleInputFormat:function(t){return e.showAlpha?RD[t]:UD[t]},colorValue:a,pickerStyle:r,onInputChange:function(e){h.value=-1,a.value=e},handleChange:function(){var t,n=null===(t=Hr(a))||void 0===t?void 0:t.trim();if(''!==n){var r=e.showAlpha,s=fR(n),l=hR(pR(n,s,r)),c=function(e){if(!e)return!1;var t=e.h,n=e.s,r=e.v,i=e.a;return!(isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))}(l);c?i.value=l:null!=Hr(o)?i.value=Hr(o):a.value=''}else i.value=null},selectColorIndex:h,onSelectColor:function(e,t){if(h.value=t,''===(e=e.trim()))i.value=null;else{var n=fR(e);n?function(e,t){if(0!==e.length){var n=pR(e,t,!0),r=n.h,o=n.s,a=n.v;if(!(isNaN(r)||isNaN(o)||isNaN(a))){var s=1,l=n.a;isNaN(l)||(s=l),i.value={h:r,s:o,v:a,a:s}}}}(e,n):i.value=null}},onFormatChange:function(e){n('formatChange',e)}}}}),kR={class:'picker-inner'},xR={class:'picker-header'};CD('.picker[data-v-6ceadec6]{background:#f7f8f9;border-radius:4px;box-shadow:0 0 16px 0 rgba(0,0,0,.16)}.picker-inner[data-v-6ceadec6]{padding:10px}[pick-colors-theme=dark] .picker-inner[data-v-6ceadec6]{background:#1d2024;box-shadow:0 0 16px 0 rgba(0,0,0,.16)}.picker-header[data-v-6ceadec6]{display:flex;margin-bottom:5px}.alpha[data-v-6ceadec6],.hue[data-v-6ceadec6]{margin-left:10px}.colors[data-v-6ceadec6]{margin-top:5px}'),wR.render=function(e,t,n,r,i,o){var a=To('saturation'),s=To('hue'),l=To('alpha'),c=To('input-value'),u=To('Colors');return La(),Ba('div',{class:'picker',style:Yt(e.pickerStyle)},[Ga('div',kR,[Ga('div',xR,[Wa(a,{class:'saturation',hue:e.h,saturation:e.s,value:e.v,onChange:e.onSelectSaturation},null,8,['hue','saturation','value','onChange']),Wa(s,{class:'hue',hue:e.h,onChange:e.onSelectHue},null,8,['hue','onChange']),e.showAlpha?(La(),Fa(l,{key:0,class:'alpha',alpha:e.a,color:e.rgbStr,onChange:e.onSelectAlpha},null,8,['alpha','color','onChange'])):es('v-if',!0)]),Wa(c,{format:e.handleInputFormat(e.format),value:e.colorValue,showAlpha:e.showAlpha,width:e.showAlpha?150:125,formatOptions:e.formatOptions,onChange:e.onInputChange,onBlur:e.handleChange,onEnter:e.handleChange,onFormatChange:e.onFormatChange},null,8,['format','value','showAlpha','width','formatOptions','onChange','onBlur','onEnter','onFormatChange']),e.colors.length>0?(La(),Fa(u,{key:0,class:'colors',colors:e.colors,'selected-index':e.selectColorIndex,onChange:e.onSelectColor},null,8,['colors','selected-index','onChange'])):es('v-if',!0)])],4)},wR.__scopeId='data-v-6ceadec6',wR.__file='src/picker/Picker.vue';var SR=fo({name:'AddColorItem',props:{size:{type:Number,default:20},selected:{type:Boolean,default:!1}},setup:function(e){var t=Jo('theme',{theme:'light'}).theme;return{addColorItemStyle:ks((function(){return{width:''.concat(e.size,'px'),height:''.concat(e.size,'px'),lineHeight:''.concat(e.size,'px'),boxShadow:e.selected?'0 0 3px 2px '.concat('dark'===Hr(t)?'#2681ff':'#1890ff'):''}}))}}});CD('.add-color-item[data-v-ceb1719c]{background:#fff;border:1px solid #d9d9d9;border-radius:5px;vertical-align:top}.container[data-v-ceb1719c]{pointer-events:none;transform:scale(.9);transform-origin:center}[pick-colors-theme=dark] .add-color-item[data-v-ceb1719c]{background:#141414;border:1px solid #434343}path[data-v-ceb1719c]{fill:#000}[pick-colors-theme=dark] path[data-v-ceb1719c]{fill:#fff}'),SR.render=function(e,t,n,r,i,o){return La(),Ba('svg',{class:'add-color-item',style:Yt(e.addColorItemStyle),viewBox:'0 0 1024 1024',xmlns:'http://www.w3.org/2000/svg'},t[0]||(t[0]=[Ga('g',{class:'container'},[Ga('path',{d:'M544 464V160h-80v304H160v80h304v304h80V544h304v-80z'})],-1)]),4)},SR.__scopeId='data-v-ceb1719c',SR.__file='src/add-color-item/AddColorItem.vue';var ER=fo({name:'ColorPicker',components:{ColorItem:mR,Picker:wR,AddColorItem:SR},props:{value:{type:[String,Array]},theme:{type:String,default:'light'},size:{type:[Number,String],default:20},width:{type:[Number,String]},height:{type:[Number,String]},format:{type:String},showPicker:{type:Boolean,default:void 0},showAlpha:{type:Boolean,default:!1},addColor:{type:Boolean,default:!1},deleteColor:{type:Boolean,default:!0},max:{type:Number,default:13},popupContainer:{type:[String,Object,Boolean],default:'body'},zIndex:{type:Number,default:1e3},colors:{type:Array,default:function(){return['#ff4500','#ff8c00','#ffd700','#90ee90','#00ced1','#1e90ff','#c71585','#ff4500','#ff7d4d','#00babd','#1f93ff','#fa64c3']}},position:{type:String},placement:{type:String},formatOptions:{type:[Boolean,Array],default:!1}},emits:['change','update:value','update:showPicker','overflowMax','closePicker','formatChange'],setup:function(e,t){var n=t.emit,r=Mr([]),i=ks((function(){return Hr(r).map((function(t){return lR(t,'hex',e.showAlpha)}))})),o=Mr('hex');_a((function(){return e.format}),(function(){o.value=e.format}),{immediate:!0}),_a((function(){return e.value}),(function(){var t=e.value||'',n=Array.isArray(t)?t:[t];r.value=n.map((function(t){return lR(t,Hr(o),e.showAlpha)}))}),{immediate:!0});var a=Mr(void 0),s=ks((function(){return Hr(r)[Hr(a)]})),l=Mr(!1);_a((function(){return e.showPicker}),(function(){l.value=e.showPicker}),{immediate:!0});var c,u,d=Mr(null),p=Mr(null),f=BD(d,p,{defaultStyle:{zIndex:e.zIndex},strategy:e.position,placement:e.placement}).style,h=function(){null==Hr(d)&&(d.value=Hr(E)[0]),null==Hr(a)&&(a.value=0),void 0===e.showPicker?l.value=!0:n('update:showPicker',!0)},m=function(){a.value=void 0,void 0===e.showPicker?l.value=!1:n('update:showPicker',!1),n('closePicker',Rr(Array.isArray(e.value)||e.addColor?Hr(r):Hr(r)[0]))},g=Mr(),v=function(){var e=SD(z.mark((function e(t){var n,r,i,o;return z.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target,null!=(i=null===(n=r.dataset)||void 0===n?void 0:n.index)&&''!==i){e.next=4;break}return e.abrupt('return');case 4:if(o=+i,Hr(a)!==o){e.next=7;break}return e.abrupt('return');case 7:null!=Hr(a)&&Hr(a)!==o?(m(),c&&clearTimeout(c),c=setTimeout((function(){h(),clearTimeout(c)}),100)):h(),a.value=o,d.value=r;case 10:case'end':return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=SD(z.mark((function e(t){var n,r,i,o,a;return z.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.target,null!==(n=Hr(g))&&void 0!==n&&n.isEqualNode(o)||!(null===(r=Hr(g))||void 0===r?void 0:r.contains(o))){e.next=4;break}return e.abrupt('return');case 4:if(!(null==(a=null===(i=Hr(p))||void 0===i?void 0:i.$el)?void 0:a.contains(o))){e.next=8;break}return e.abrupt('return');case 8:u&&clearTimeout(u),u=setTimeout((function(){Hr(l)&&m()}),0);case 10:case'end':return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();_a(l,(function(){Hr(l)&&(h(),clearTimeout(u))}));var b,w=Mr(e.max>Hr(r).length),k=ks((function(){return'string'==typeof e.popupContainer||'object'===kD(e.popupContainer)&&null!=e.popupContainer?e.popupContainer:'body'})),x=ks((function(){return'boolean'==typeof e.popupContainer&&!1===e.popupContainer})),S=ks((function(){return e.theme}));_a((function(){return[e.theme,Hr(p)]}),(function(){yi((function(){var e,t;null===(e=Hr(g))||void 0===e||e.setAttribute('pick-colors-theme',Hr(S)),null===(t=Hr(p))||void 0===t||null===(t=t.$el)||void 0===t||t.setAttribute('pick-colors-theme',Hr(S))}))}),{immediate:!0}),Wo('theme',{theme:S});var E=Mr([]);return Eo((function(){document.addEventListener('mouseup',y,!1),e.showPicker&&h()})),Oo((function(){document.removeEventListener('mouseup',y,!1),c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null)})),{valueList:r,colorItemSelected:function(t){return(e.addColor?Hr(r).length>0:Hr(r).length>1)&&Hr(a)===t},selectedColor:s,selectedIndex:a,isShowPicker:l,addColorItemShow:w,onPickerChange:function(t){var i=Hr(a),o=Hr(r).slice(),s=Hr(r).length;if(null!=i){i>=0?o[i]=t:(a.value=s,o.push(t));var l;l=Array.isArray(e.value)||e.addColor?o:t,r.value=Array.isArray(l)?l:[l],n('update:value',l),n('change',l,t,i),e.addColor&&s>=e.max&&(w.value=!1,n('overflowMax'))}},colorPicker:g,onColorClick:v,pickerRef:p,onColorItemDragStart:function(e){e.dataTransfer.effectAllowed='move';var t=e.target;b=+t.dataset.index},onColorItemDragOver:function(e){},onColorItemDrop:function(e){var t=+e.target.dataset.index,i=wD(Hr(r)),o=i[b];i.splice(b,1);var a=i.slice(0,t),s=i.splice(t),l=a.concat([o]).concat(s);n('update:value',l),n('change',l,l[b],b)},colorItemsRef:E,pickerStyle:f,values:i,teleportDisabled:x,toPopupContainer:k,formatValue:o,onFormatChange:function(e){o.value=e,n('formatChange',e)}}}});CD('.color-picker[data-v-3c43ade8]{display:inline-block}.color-item[data-v-3c43ade8]{margin:5px}.add-color-item[data-v-3c43ade8]{display:inline-block;margin:5px}.picker[data-v-3c43ade8]{overflow:hidden}.v-enter-active[data-v-3c43ade8],.v-leave-active[data-v-3c43ade8]{opacity:1;transform:scaleY(1);transform-origin:center top;transition:opacity .2s ease-in-out,transform .2s ease-in-out}.v-enter-from[data-v-3c43ade8],.v-leave-to[data-v-3c43ade8]{opacity:0;transform:scaleY(0)}'),ER.render=function(e,t,n,r,i,o){var a=To('color-item'),s=To('add-color-item'),l=To('picker');return La(),Ba('div',{class:'color-picker',ref:'colorPicker',onDragstart:t[0]||(t[0]=Al((function(){return e.onColorItemDragStart&&e.onColorItemDragStart.apply(e,arguments)}),['stop'])),onDragover:t[1]||(t[1]=Al((function(){return e.onColorItemDragOver&&e.onColorItemDragOver.apply(e,arguments)}),['prevent','stop'])),onDrop:t[2]||(t[2]=Al((function(){return e.onColorItemDrop&&e.onColorItemDrop.apply(e,arguments)}),['prevent','stop'])),onClick:t[3]||(t[3]=Al((function(){return e.onColorClick&&e.onColorClick.apply(e,arguments)}),['stop']))},[(La(!0),Ba(Na,null,jo(e.values,(function(t,n){return La(),Fa(a,{class:'color-item',key:n,ref_for:!0,ref:function(t){return e.colorItemsRef[n]=t},size:e.size,width:e.width,height:e.height,value:t,selected:e.colorItemSelected(n),'data-index':n,draggable:e.valueList.length>1,format:e.formatValue},null,8,['size','width','height','value','selected','data-index','draggable','format'])})),128)),e.addColor&&e.addColorItemShow?(La(),Fa(s,{key:0,class:'add-color-item',ref:'addColorItem',selected:e.colorItemSelected(-1),'data-index':-1},null,8,['selected'])):es('v-if',!0),(La(),Fa(Wi,{to:e.toPopupContainer,disabled:e.teleportDisabled},[Wa(Us,null,{default:Ui((function(){return[e.isShowPicker?(La(),Fa(l,{key:0,class:'picker',style:Yt(e.pickerStyle),ref:'pickerRef',value:e.selectedColor,format:e.formatValue,'show-alpha':e.showAlpha,colors:e.colors,formatOptions:e.formatOptions,onChange:e.onPickerChange,onFormatChange:e.onFormatChange},null,8,['style','value','format','show-alpha','colors','formatOptions','onChange','onFormatChange'])):es('v-if',!0)]})),_:1})],8,['to','disabled']))],544)},ER.__scopeId='data-v-3c43ade8',ER.__file='src/ColorPicker.vue';const $R=fo({__name:'FolderEditor',props:{scriptFolder:{}},emits:['submit'],setup(e,{expose:t,emit:n}){t();const r=e,i=n,o=Mr(_.cloneDeep(r.scriptFolder??{name:'',icon:'',color:dc})),a={props:r,emit:i,script_folder:o,selectIcon:async()=>{const e=await De();e&&(o.value.icon=e)},submit:e=>{const t=mD.safeParse(o.value);t.success?(i('submit',t.data),e()):_(t.error.issues).groupBy('path').entries().forEach((([e,t])=>{toastr.error(t.map((e=>e.message)).join('\n'),e)}))},get PickColors(){return ER}};return Object.defineProperty(a,'__isScriptSetup',{enumerable:!1,value:!0}),a}}),OR={class:'my-0.5 text-md font-bold'},IR={class:'flex w-full flex-col justify-center gap-0.5 p-1'},TR={class:'flex flex-col items-start'},AR={class:'font-bold'},CR=['placeholder'],NR={class:'flex flex-col items-start'},PR={class:'font-bold'},jR={class:'my-0.5 flex w-full gap-2'},DR={class:'flex flex-wrap items-center'},RR={class:'flex flex-wrap items-center'};const UR=sI($R,[['render',function(e,t,n,r,i,o){const a=Cj;return La(),Fa(a,{buttons:[{name:e.t``,shouldEmphasize:!0,onClick:r.submit},{name:e.t``}]},{default:Ui((()=>[Ga('div',OR,un(void 0!==r.props.scriptFolder?e.t``:e.t``),1),Ga('div',IR,[Ga('div',TR,[Ga('div',AR,un(e.t`:`),1),Li(Ga('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>r.script_folder.name=e),type:'text',class:'text_pole w-full',placeholder:e.t``},null,8,CR),[[_l,r.script_folder.name]])]),Ga('div',NR,[Ga('div',PR,un(e.t`:`),1),Ga('div',jR,[Ga('div',DR,[Ga('span',null,un(e.t``),1),Wa(r.PickColors,{value:r.script_folder.color,'onUpdate:value':t[1]||(t[1]=e=>r.script_folder.color=e),'z-index':1e4},null,8,['value'])]),Ga('div',RR,[Ga('span',null,un(e.t``),1),Ga('i',{class:nn(['fa-solid ml-[5px] cursor-pointer rounded-sm border border-(--SmartThemeBorderColor) p-[5px]',r.script_folder.icon?r.script_folder.icon:'fa-folder']),onClick:r.selectIcon},null,2),Li(Ga('input',{'onUpdate:modelValue':t[2]||(t[2]=e=>r.script_folder.icon=e),type:'hidden',value:'fa-folder'},null,512),[[_l,r.script_folder.icon]])])])])])])),_:1},8,['buttons'])}],['__file','FolderEditor.vue']]),LR=fo({__name:'ScriptEditor',props:{script:{}},emits:['submit'],setup(e,{expose:t,emit:n}){t();const r=e,i=n,o=Mr(_.cloneDeep(r.script??{name:'',content:'',info:'',button:{enabled:!0,buttons:[]},data:{}})),a={props:r,emit:i,script:o,submit:e=>{const t=hD.safeParse(o.value);t.success?(i('submit',t.data),e()):_(t.error.issues).groupBy('path').entries().forEach((([e,t])=>{toastr.error(t.map((e=>e.message)).join('\n'),e)}))},addVariable:()=>{},addButton:()=>{o.value.button.buttons.push({name:'',visible:!0})},deleteButton:e=>{o.value.button.buttons.splice(e,1)}};return Object.defineProperty(a,'__isScriptSetup',{enumerable:!1,value:!0}),a}}),zR={class:'flex h-full flex-col flex-wrap items-center gap-0.25 overflow-y-auto'},VR={class:'my-0.5 text-md font-bold'},MR={class:'TH-script-editor-container'},BR={class:'TH-script-editor-container'},FR=['placeholder'],ZR={class:'TH-script-editor-container'},HR={class:'TH-script-editor-container'},qR={class:'flex flex-wrap items-center justify-center gap-[5px]'},KR={class:'TH-script-editor-container'},GR={class:'flex w-full items-center justify-between'},WR={class:'flex flex-col'},JR={class:'flex flex-wrap items-center gap-[5px]'},YR={class:'button-list'},XR=['onUpdate:modelValue'],QR=['onUpdate:modelValue','placeholder'],eU=['data-index','onClick'];const tU=sI(LR,[['render',function(e,t,n,r,i,o){const a=hC,s=Cj;return La(),Fa(s,{buttons:[{name:e.t``,shouldEmphasize:!0,onClick:e=>r.submit(e)},{name:e.t``}],width:'500px'},{default:Ui((()=>[Ga('div',zR,[Ga('div',VR,un(void 0!==r.props.script?e.t``:e.t``),1),Ga('div',MR,[Ga('div',null,un(e.t``),1),Li(Ga('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>r.script.name=e),type:'text',class:'text_pole'},null,512),[[_l,r.script.name]])]),Ga('div',BR,[Ga('div',null,un(e.t``),1),Li(Ga('textarea',{'onUpdate:modelValue':t[1]||(t[1]=e=>r.script.content=e),placeholder:e.t`JavaScript `,rows:'6',class:'text_pole font-[family-name:var(--monoFontFamily)]!'},null,8,FR),[[_l,r.script.content]])]),Ga('div',ZR,[Ga('div',null,un(e.t``),1),Li(Ga('textarea',{'onUpdate:modelValue':t[2]||(t[2]=e=>r.script.info=e),placeholder:', ,  markdown  html',rows:'3',class:'text_pole font-[family-name:var(--monoFontFamily)]!'},null,512),[[_l,r.script.info]])]),Ga('div',HR,[Ga('div',qR,[Ga('div',null,un(e.t``),1),Ga('div',{class:'menu_button interactable',onClick:r.addVariable},[...t[4]||(t[4]=[Ga('i',{class:'fa-solid fa-plus'},null,-1)])])]),Ga('small',null,un(e.t`, `),1),t[5]||(t[5]=Ga('div',{class:'flex w-full flex-col flex-wrap gap-1'},null,-1))]),Ga('div',KR,[Ga('div',GR,[Ga('div',WR,[Ga('div',JR,[Ga('div',null,un(e.t``),1),Ga('div',{class:'menu_button interactable',onClick:r.addButton},[...t[6]||(t[6]=[Ga('i',{class:'fa-solid fa-plus'},null,-1)])])]),Ga('small',null,un(e.t` getButtonEvent `),1)]),Wa(a,{id:'TH-script-editor-button-enabled-toggle',modelValue:r.script.button.enabled,'onUpdate:modelValue':t[3]||(t[3]=e=>r.script.button.enabled=e)},null,8,['modelValue'])]),Ga('div',YR,[(La(!0),Ba(Na,null,jo(r.script.button.buttons,((n,i)=>(La(),Ba('div',{key:`button-${i}`,class:'flex items-center justify-between gap-1'},[t[8]||(t[8]=Ga('span',{class:''},'',-1)),Li(Ga('input',{'onUpdate:modelValue':e=>n.visible=e,type:'checkbox'},null,8,XR),[[wl,n.visible]]),Li(Ga('input',{'onUpdate:modelValue':e=>n.name=e,class:'text_pole',type:'text',placeholder:e.t``},null,8,QR),[[_l,n.name]]),Ga('div',{class:'menu_button interactable','data-index':i,onClick:e=>r.deleteButton(i)},[...t[7]||(t[7]=[Ga('i',{class:'fa-solid fa-trash'},null,-1)])],8,eU)])))),128))])])])])),_:1},8,['buttons'])}],['__scopeId','data-v-75489c78'],['__file','ScriptEditor.vue']]),nU=fo({__name:'ScriptItem',props:Zo({searchInput:{},isBatchMode:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:Zo(['delete','toggle-selection'],['update:modelValue']),setup(e,{expose:t,emit:n}){t();const[r,i]=VI(),o=ka(e,'modelValue'),a=e,s=n,l=ks((()=>null===a.searchInput||a.searchInput.test(o.value.name))),{open:c}=xj({component:tU,attrs:{script:o.value,onSubmit:e=>{const t=o.value.enabled&&!_.isEqual(_.pick(o.value,'content','data'),_.pick(e,'content','data'));_.assign(o.value,e),t&&WS().reload(o.value.id)}}}),{open:u}=xj({component:Cj,attrs:{buttons:[{name:Se``,shouldEmphasize:!0,onClick:e=>{s('delete',o.value.id),e()}},{name:Se``}]},slots:{default:Se`<div>? </div>`}}),d=async e=>{const t=_.cloneDeep(o.value);e.should_strip_data&&_.set(t,'data',{});return{filename:await Re(Se`-${t.name}.json`),data:JSON.stringify(t,null,2)}},p=async e=>{const{filename:t,data:n}=await d(e);Ue(n,t,'application/json')},f={DefineToolButton:r,ToolButton:i,script:o,props:a,emit:s,is_visible:l,openScriptEditor:c,openScriptInfo:()=>xj({component:Cj,attrs:{buttons:[{name:Se``}]},slots:{default:`<div class='text-left'>${o.value.info?QN.parse(o.value.info):Se``}</div>`}}).open(),openDeleteConfirm:u,createExportPayload:d,downloadExport:p,exportScript:()=>{_.isEmpty(o.value.data)?p({should_strip_data:!1}):xj({component:Cj,attrs:{buttons:[{name:Se``,onClick:e=>{p({should_strip_data:!0}),e()}},{name:Se``,shouldEmphasize:!0,onClick:e=>{p({should_strip_data:!0}),e()}},{name:Se``,onClick:e=>e()}]},slots:{default:Se`<div>'${o.value.name}'  API Key </div>`}}).open()}};return Object.defineProperty(f,'__isScriptSetup',{enumerable:!1,value:!0}),f}}),rU={class:'flex w-full items-center justify-between rounded-[10px] border border-(--SmartThemeBorderColor) bg-(--SmartThemeBlurTintColor) p-[5px]','data-type':'script'},iU={key:0,class:'flex items-center'},oU=['checked'],aU={key:1,class:'TH-handle cursor-grab select-none active:cursor-grabbing'},sU={class:'flex flex-nowrap items-center gap-[5px]'},lU=['title'];const cU=sI(nU,[['render',function(e,t,n,r,i,o){const a=fD;return Li((La(),Ba('div',rU,[r.props.isBatchMode?(La(),Ba('div',iU,[Ga('input',{type:'checkbox',checked:r.props.isSelected,class:'cursor-pointer',onChange:t[0]||(t[0]=e=>r.emit('toggle-selection',r.script.id))},null,40,oU)])):(La(),Ba('span',aU,'')),Ga('div',{class:'ml-0.5 flex-grow overflow-hidden',style:Yt({textDecoration:r.script.enabled?'none':'line-through',filter:r.script.enabled?'none':'grayscale(0.5)'})},[Wa(a,{query:r.props.searchInput},{default:Ui((()=>[Xa(un(r.script.name),1)])),_:1},8,['query'])],4),Li(Ga('div',sU,[Ga('div',{class:nn(['cursor-pointer',{enabled:r.script.enabled}]),onClick:t[1]||(t[1]=e=>r.script.enabled=!r.script.enabled)},[Ga('i',{class:nn(['fa-solid',[r.script.enabled?'fa-toggle-on':'fa-toggle-off']])},null,2)],2),Wa(r.DefineToolButton,null,{default:Ui((({name:e,icon:t})=>[Ga('div',{class:'menu_button interactable mt-0! mr-0.5 mb-0! p-[5px]!',title:e},[Ga('i',{class:nn(['fa-solid',t])},null,2)],8,lU)])),_:1}),Wa(r.ToolButton,{name:'',icon:'fa-info-circle',onClick:r.openScriptInfo}),Wa(r.ToolButton,{name:'',icon:'fa-pencil',onClick:r.openScriptEditor},null,8,['onClick']),Wa(r.ToolButton,{name:'',icon:'fa-file-export',onClick:r.exportScript}),Wa(r.ToolButton,{name:'',icon:'fa-trash',onClick:r.openDeleteConfirm},null,8,['onClick'])],512),[[Ys,!r.props.isBatchMode]])],512)),[[Ys,r.is_visible]])}],['__file','ScriptItem.vue']]);var uU=Object.defineProperty,dU=Object.getOwnPropertySymbols,pU=Object.prototype.hasOwnProperty,fU=Object.prototype.propertyIsEnumerable,hU=(e,t,n)=>t in e?uU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mU=(e,t)=>{for(var n in t||(t={}))pU.call(t,n)&&hU(e,n,t[n]);if(dU)for(var n of dU(t))fU.call(t,n)&&hU(e,n,t[n]);return e},gU=(e,t)=>{var n={};for(var r in e)pU.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&dU)for(var r of dU(e))t.indexOf(r)<0&&fU.call(e,r)&&(n[r]=e[r]);return n};const vU='[vue-draggable-plus]: ';function yU(e,t,n){return n>=0&&n<e.length&&e.splice(n,0,e.splice(t,1)[0]),e}function bU(e,t){return Array.isArray(e)&&e.splice(t,1),e}function _U(e,t,n){return Array.isArray(e)&&e.splice(t,0,n),e}function wU(e,t,n){const r=e.children[n];e.insertBefore(t,r)}function kU(e){e.parentNode&&e.parentNode.removeChild(e)}function xU(e,t=document){var n;let r=null;return r='function'==typeof(null==t?void 0:t.querySelector)?null==(n=null==t?void 0:t.querySelector)?void 0:n.call(t,e):document.querySelector(e),r||function(e){console.warn(vU+e)}(`Element not found: ${e}`),r}function SU(e,t){Object.keys(e).forEach((n=>{t(n,e[n])}))}const EU=Object.assign;
/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function $U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$U(Object(n),!0).forEach((function(t){TU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IU(e){return(IU='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e})(e)}function TU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AU(){return AU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AU.apply(this,arguments)}function CU(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function NU(e){if('undefined'!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var PU=NU(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),jU=NU(/Edge/i),DU=NU(/firefox/i),RU=NU(/safari/i)&&!NU(/chrome/i)&&!NU(/android/i),UU=NU(/iP(ad|od|hone)/i),LU=NU(/chrome/i)&&NU(/android/i),zU={capture:!1,passive:!1};function VU(e,t,n){e.addEventListener(t,n,!PU&&zU)}function MU(e,t,n){e.removeEventListener(t,n,!PU&&zU)}function BU(e,t){if(t){if('>'===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function FU(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ZU(e,t,n,r){if(e){n=n||document;do{if(null!=t&&('>'===t[0]?e.parentNode===n&&BU(e,t):BU(e,t))||r&&e===n)return e;if(e===n)break}while(e=FU(e))}return null}var HU,qU=/\s+/g;function KU(e,t,n){if(e&&t)if(e.classList)e.classList[n?'add':'remove'](t);else{var r=(' '+e.className+' ').replace(qU,' ').replace(' '+t+' ',' ');e.className=(r+(n?' '+t:'')).replace(qU,' ')}}function GU(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,''):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];!(t in r)&&-1===t.indexOf('webkit')&&(t='-webkit-'+t),r[t]=n+('string'==typeof n?'':'px')}}function WU(e,t){var n='';if('string'==typeof e)n=e;else do{var r=GU(e,'transform');r&&'none'!==r&&(n=r+' '+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function JU(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function YU(){return document.scrollingElement||document.documentElement}function XU(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var o,a,s,l,c,u,d;if(e!==window&&e.parentNode&&e!==YU()?(a=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,c=o.right,u=o.height,d=o.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!PU))do{if(i&&i.getBoundingClientRect&&('none'!==GU(i,'transform')||n&&'static'!==GU(i,'position'))){var p=i.getBoundingClientRect();a-=p.top+parseInt(GU(i,'border-top-width')),s-=p.left+parseInt(GU(i,'border-left-width')),l=a+o.height,c=s+o.width;break}}while(i=i.parentNode);if(r&&e!==window){var f=WU(i||e),h=f&&f.a,m=f&&f.d;f&&(l=(a/=m)+(u/=m),c=(s/=h)+(d/=h))}return{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function QU(e,t,n){for(var r=iL(e,!0),i=XU(e)[t];r;){if(!(i>=XU(r)[n]))return r;if(r===YU())break;r=iL(r,!1)}return!1}function eL(e,t,n,r){for(var i=0,o=0,a=e.children;o<a.length;){if('none'!==a[o].style.display&&a[o]!==lz.ghost&&(r||a[o]!==lz.dragged)&&ZU(a[o],n.draggable,e,!1)){if(i===t)return a[o];i++}o++}return null}function tL(e,t){for(var n=e.lastElementChild;n&&(n===lz.ghost||'none'===GU(n,'display')||t&&!BU(n,t));)n=n.previousElementSibling;return n||null}function nL(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)'TEMPLATE'!==e.nodeName.toUpperCase()&&e!==lz.clone&&(!t||BU(e,t))&&n++;return n}function rL(e){var t=0,n=0,r=YU();if(e)do{var i=WU(e),o=i.a,a=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}function iL(e,t){if(!e||!e.getBoundingClientRect)return YU();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=GU(n);if(n.clientWidth<n.scrollWidth&&('auto'==i.overflowX||'scroll'==i.overflowX)||n.clientHeight<n.scrollHeight&&('auto'==i.overflowY||'scroll'==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return YU();if(r||t)return n;r=!0}}}while(n=n.parentNode);return YU()}function oL(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function aL(e,t){return function(){if(!HU){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),HU=setTimeout((function(){HU=void 0}),t)}}}function sL(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function lL(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function cL(e,t,n){var r={};return Array.from(e.children).forEach((function(i){var o,a,s,l;if(ZU(i,t.draggable,e,!1)&&!i.animated&&i!==n){var c=XU(i);r.left=Math.min(null!==(o=r.left)&&void 0!==o?o:1/0,c.left),r.top=Math.min(null!==(a=r.top)&&void 0!==a?a:1/0,c.top),r.right=Math.max(null!==(s=r.right)&&void 0!==s?s:-1/0,c.right),r.bottom=Math.max(null!==(l=r.bottom)&&void 0!==l?l:-1/0,c.bottom)}})),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var uL='Sortable'+(new Date).getTime();function dL(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if('none'!==GU(e,'display')&&e!==lz.ghost){t.push({target:e,rect:XU(e)});var n=OU({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=WU(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void('function'==typeof n&&n());var i=!1,o=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,s=XU(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=WU(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&oL(l,s)&&!oL(a,s)&&(u.top-s.top)/(u.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(u,l,c,r.options)),oL(s,a)||(n.prevFromRect=a,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,u,s,t)),t&&(i=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){'function'==typeof n&&n()}),o):'function'==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){GU(e,'transition',''),GU(e,'transform','');var i=WU(this.el),o=i&&i.a,a=i&&i.d,s=(t.left-n.left)/(o||1),l=(t.top-n.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,GU(e,'transform','translate3d('+s+'px,'+l+'px,0)'),this.forRepaintDummy=function(e){return e.offsetWidth}(e),GU(e,'transition','transform '+r+'ms'+(this.options.easing?' '+this.options.easing:'')),GU(e,'transform','translate3d(0,0,0)'),'number'==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){GU(e,'transition',''),GU(e,'transform',''),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var pL=[],fL={initializeByDefault:!0},hL={mount:function(e){for(var t in fL)fL.hasOwnProperty(t)&&!(t in e)&&(e[t]=fL[t]);pL.forEach((function(t){if(t.pluginName===e.pluginName)throw'Sortable: Cannot mount plugin '.concat(e.pluginName,' more than once')})),pL.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+'Global';pL.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](OU({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](OU({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var i in pL.forEach((function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var o=new r(e,t,e.options);o.sortable=e,o.options=e.options,e[i]=o,AU(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);void 0!==o&&(e.options[i]=o)}},getEventProperties:function(e,t){var n={};return pL.forEach((function(r){'function'==typeof r.eventProperties&&AU(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return pL.forEach((function(i){e[i.pluginName]&&i.optionListeners&&'function'==typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))})),r}};var mL=['evt'],gL=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=CU(n,mL);hL.pluginEvent.bind(lz)(e,t,OU({dragEl:yL,parentEl:bL,ghostEl:_L,rootEl:wL,nextEl:kL,lastDownEl:xL,cloneEl:SL,cloneHidden:EL,dragStarted:LL,putSortable:CL,activeSortable:lz.active,originalEvent:r,oldIndex:$L,oldDraggableIndex:IL,newIndex:OL,newDraggableIndex:TL,hideGhostForTarget:iz,unhideGhostForTarget:oz,cloneNowHidden:function(){EL=!0},cloneNowShown:function(){EL=!1},dispatchSortableEvent:function(e){vL({sortable:t,name:e,originalEvent:r})}},i))};function vL(e){!function(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,p=e.originalEvent,f=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[uL]){var m,g=t.options,v='on'+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||PU||jU?(m=document.createEvent('Event')).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=a||n,m.from=s||n,m.item=i||n,m.clone=o,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=p,m.pullMode=f?f.lastPutMode:void 0;var y=OU(OU({},h),hL.getEventProperties(r,t));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}(OU({putSortable:CL,cloneEl:SL,targetEl:yL,rootEl:wL,oldIndex:$L,oldDraggableIndex:IL,newIndex:OL,newDraggableIndex:TL},e))}var yL,bL,_L,wL,kL,xL,SL,EL,$L,OL,IL,TL,AL,CL,NL,PL,jL,DL,RL,UL,LL,zL,VL,ML,BL,FL=!1,ZL=!1,HL=[],qL=!1,KL=!1,GL=[],WL=!1,JL=[],YL='undefined'!=typeof document,XL=UU,QL=jU||PU?'cssFloat':'float',ez=YL&&!LU&&!UU&&'draggable'in document.createElement('div'),tz=function(){if(YL){if(PU)return!1;var e=document.createElement('x');return e.style.cssText='pointer-events:auto','auto'===e.style.pointerEvents}}(),nz=function(e,t){var n=GU(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=eL(e,0,t),o=eL(e,1,t),a=i&&GU(i),s=o&&GU(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+XU(i).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+XU(o).width;if('flex'===n.display)return'column'===n.flexDirection||'column-reverse'===n.flexDirection?'vertical':'horizontal';if('grid'===n.display)return n.gridTemplateColumns.split(' ').length<=1?'vertical':'horizontal';if(i&&a.float&&'none'!==a.float){var u='left'===a.float?'left':'right';return!o||'both'!==s.clear&&s.clear!==u?'horizontal':'vertical'}return i&&('block'===a.display||'flex'===a.display||'table'===a.display||'grid'===a.display||l>=r&&'none'===n[QL]||o&&'none'===n[QL]&&l+c>r)?'vertical':'horizontal'},rz=function(e){function t(e,n){return function(r,i,o,a){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&'clone'===e)return e;if('function'==typeof e)return t(e(r,i,o,a),n)(r,i,o,a);var l=(n?r:i).options.group.name;return!0===e||'string'==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},r=e.group;(!r||'object'!=IU(r))&&(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},iz=function(){!tz&&_L&&GU(_L,'display','none')},oz=function(){!tz&&_L&&GU(_L,'display','')};YL&&!LU&&document.addEventListener('click',(function(e){if(ZL)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ZL=!1,!1}),!0);var az=function(e){if(yL){var t=function(e,t){var n;return HL.some((function(r){var i=r[uL].options.emptyInsertThreshold;if(i&&!tL(r)){var o=XU(r),a=e>=o.left-i&&e<=o.right+i,s=t>=o.top-i&&t<=o.bottom+i;if(a&&s)return n=r}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[uL]._onDragOver(n)}}},sz=function(e){yL&&yL.parentNode[uL]._isOutsideThisEl(e.target)};function lz(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw'Sortable: `el` must be an HTMLElement, not '.concat({}.toString.call(e));this.el=e,this.options=t=AU({},t),e[uL]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?'>li':'>*',swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return nz(e,this.options)},ghostClass:'sortable-ghost',chosenClass:'sortable-chosen',dragClass:'sortable-drag',ignore:'a, img',filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData('Text',t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:'data-id',delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:'sortable-fallback',fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==lz.supportPointer&&'PointerEvent'in window&&!RU,emptyInsertThreshold:5};for(var r in hL.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in rz(t),this)'_'===i.charAt(0)&&'function'==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&ez,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?VU(e,'pointerdown',this._onTapStart):(VU(e,'mousedown',this._onTapStart),VU(e,'touchstart',this._onTapStart)),this.nativeDraggable&&(VU(e,'dragover',this),VU(e,'dragenter',this)),HL.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),AU(this,dL())}function cz(e,t,n,r,i,o,a,s){var l,c,u=e[uL],d=u.options.onMove;return!window.CustomEvent||PU||jU?(l=document.createEvent('Event')).initEvent('move',!0,!0):l=new CustomEvent('move',{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=o||XU(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function uz(e){e.draggable=!1}function dz(){WL=!1}function pz(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function fz(e){return setTimeout(e,0)}function hz(e){return clearTimeout(e)}lz.prototype={constructor:lz,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(zL=null)},_getDirection:function(e,t){return'function'==typeof this.options.direction?this.options.direction.call(this,e,t,yL):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&'touch'===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=r.filter;if(function(e){JL.length=0;for(var t=e.getElementsByTagName('input'),n=t.length;n--;){var r=t[n];r.checked&&JL.push(r)}}(n),!yL&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!RU||!s||'SELECT'!==s.tagName.toUpperCase())&&!((s=ZU(s,r.draggable,n,!1))&&s.animated||xL===s)){if($L=nL(s),IL=nL(s,r.draggable),'function'==typeof c){if(c.call(this,e,s,this))return vL({sortable:t,rootEl:l,name:'filter',targetEl:s,toEl:n,fromEl:n}),gL('filter',t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(',').some((function(r){if(r=ZU(l,r.trim(),n,!1))return vL({sortable:t,rootEl:r,name:'filter',targetEl:s,fromEl:n,toEl:n}),gL('filter',t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());r.handle&&!ZU(l,r.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var r,i=this,o=i.el,a=i.options,s=o.ownerDocument;if(n&&!yL&&n.parentNode===o){var l=XU(n);if(wL=o,bL=(yL=n).parentNode,kL=yL.nextSibling,xL=n,AL=a.group,lz.dragged=yL,NL={target:yL,clientX:(t||e).clientX,clientY:(t||e).clientY},RL=NL.clientX-l.left,UL=NL.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,yL.style['will-change']='all',r=function(){gL('delayEnded',i,{evt:e}),lz.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!DU&&i.nativeDraggable&&(yL.draggable=!0),i._triggerDragStart(e,t),vL({sortable:i,name:'choose',originalEvent:e}),KU(yL,a.chosenClass,!0))},a.ignore.split(',').forEach((function(e){JU(yL,e.trim(),uz)})),VU(s,'dragover',az),VU(s,'mousemove',az),VU(s,'touchmove',az),VU(s,'mouseup',i._onDrop),VU(s,'touchend',i._onDrop),VU(s,'touchcancel',i._onDrop),DU&&this.nativeDraggable&&(this.options.touchStartThreshold=4,yL.draggable=!0),gL('delayStart',this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(jU||PU))r();else{if(lz.eventCanceled)return void this._onDrop();VU(s,'mouseup',i._disableDelayedDrag),VU(s,'touchend',i._disableDelayedDrag),VU(s,'touchcancel',i._disableDelayedDrag),VU(s,'mousemove',i._delayedDragTouchMoveHandler),VU(s,'touchmove',i._delayedDragTouchMoveHandler),a.supportPointer&&VU(s,'pointermove',i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){yL&&uz(yL),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;MU(e,'mouseup',this._disableDelayedDrag),MU(e,'touchend',this._disableDelayedDrag),MU(e,'touchcancel',this._disableDelayedDrag),MU(e,'mousemove',this._delayedDragTouchMoveHandler),MU(e,'touchmove',this._delayedDragTouchMoveHandler),MU(e,'pointermove',this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||'touch'==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?VU(document,'pointermove',this._onTouchMove):VU(document,t?'touchmove':'mousemove',this._onTouchMove):(VU(yL,'dragend',this),VU(wL,'dragstart',this._onDragStart));try{document.selection?fz((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(FL=!1,wL&&yL){gL('dragStarted',this,{evt:t}),this.nativeDraggable&&VU(document,'dragover',sz);var n=this.options;!e&&KU(yL,n.dragClass,!1),KU(yL,n.ghostClass,!0),lz.active=this,e&&this._appendGhost(),vL({sortable:this,name:'start',originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(PL){this._lastX=PL.clientX,this._lastY=PL.clientY,iz();for(var e=document.elementFromPoint(PL.clientX,PL.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(PL.clientX,PL.clientY))!==t;)t=e;if(yL.parentNode[uL]._isOutsideThisEl(e),t)do{if(t[uL]){if(t[uL]._onDragOver({clientX:PL.clientX,clientY:PL.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);oz()}},_onTouchMove:function(e){if(NL){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=_L&&WU(_L,!0),a=_L&&o&&o.a,s=_L&&o&&o.d,l=XL&&BL&&rL(BL),c=(i.clientX-NL.clientX+r.x)/(a||1)+(l?l[0]-GL[0]:0)/(a||1),u=(i.clientY-NL.clientY+r.y)/(s||1)+(l?l[1]-GL[1]:0)/(s||1);if(!lz.active&&!FL){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(_L){o?(o.e+=c-(jL||0),o.f+=u-(DL||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d='matrix('.concat(o.a,',').concat(o.b,',').concat(o.c,',').concat(o.d,',').concat(o.e,',').concat(o.f,')');GU(_L,'webkitTransform',d),GU(_L,'mozTransform',d),GU(_L,'msTransform',d),GU(_L,'transform',d),jL=c,DL=u,PL=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!_L){var e=this.options.fallbackOnBody?document.body:wL,t=XU(yL,!0,XL,!0,e),n=this.options;if(XL){for(BL=e;'static'===GU(BL,'position')&&'none'===GU(BL,'transform')&&BL!==document;)BL=BL.parentNode;BL!==document.body&&BL!==document.documentElement?(BL===document&&(BL=YU()),t.top+=BL.scrollTop,t.left+=BL.scrollLeft):BL=YU(),GL=rL(BL)}KU(_L=yL.cloneNode(!0),n.ghostClass,!1),KU(_L,n.fallbackClass,!0),KU(_L,n.dragClass,!0),GU(_L,'transition',''),GU(_L,'transform',''),GU(_L,'box-sizing','border-box'),GU(_L,'margin',0),GU(_L,'top',t.top),GU(_L,'left',t.left),GU(_L,'width',t.width),GU(_L,'height',t.height),GU(_L,'opacity','0.8'),GU(_L,'position',XL?'absolute':'fixed'),GU(_L,'zIndex','100000'),GU(_L,'pointerEvents','none'),lz.ghost=_L,e.appendChild(_L),GU(_L,'transform-origin',RL/parseInt(_L.style.width)*100+'% '+UL/parseInt(_L.style.height)*100+'%')}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;gL('dragStart',this,{evt:e}),lz.eventCanceled?this._onDrop():(gL('setupClone',this),lz.eventCanceled||((SL=lL(yL)).removeAttribute('id'),SL.draggable=!1,SL.style['will-change']='',this._hideClone(),KU(SL,this.options.chosenClass,!1),lz.clone=SL),n.cloneId=fz((function(){gL('clone',n),!lz.eventCanceled&&(n.options.removeCloneOnHide||wL.insertBefore(SL,yL),n._hideClone(),vL({sortable:n,name:'clone'}))})),!t&&KU(yL,i.dragClass,!0),t?(ZL=!0,n._loopId=setInterval(n._emulateDragOver,50)):(MU(document,'mouseup',n._onDrop),MU(document,'touchend',n._onDrop),MU(document,'touchcancel',n._onDrop),r&&(r.effectAllowed='move',i.setData&&i.setData.call(n,r,yL)),VU(document,'drop',n),GU(yL,'transform','translateZ(0)')),FL=!0,n._dragStartId=fz(n._dragStarted.bind(n,t,e)),VU(document,'selectstart',n),LL=!0,RU&&GU(document.body,'user-select','none'))},_onDragOver:function(e){var t,n,r,i,o=this.el,a=e.target,s=this.options,l=s.group,c=lz.active,u=AL===l,d=s.sort,p=CL||c,f=this,h=!1;if(!WL){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=ZU(a,s.draggable,o,!0),T('dragOver'),lz.eventCanceled)return h;if(yL.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||f._ignoreWhileAnimating===a)return C(!1);if(ZL=!1,c&&!s.disabled&&(u?d||(r=bL!==wL):CL===this||(this.lastPutMode=AL.checkPull(this,c,yL,e))&&l.checkPut(this,c,yL,e))){if(i='vertical'===this._getDirection(e,a),t=XU(yL),T('dragOverValid'),lz.eventCanceled)return h;if(r)return bL=wL,A(),this._hideClone(),T('revert'),lz.eventCanceled||(kL?wL.insertBefore(yL,kL):wL.appendChild(yL)),C(!0);var m=tL(o,s.draggable);if(!m||function(e,t,n){var r=XU(tL(n.el,n.options.draggable)),i=cL(n.el,n.options,_L),o=10;return t?e.clientX>i.right+o||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+o||e.clientX>r.right&&e.clientY>r.top}(e,i,this)&&!m.animated){if(m===yL)return C(!1);if(m&&o===e.target&&(a=m),a&&(n=XU(a)),!1!==cz(wL,o,yL,t,a,n,e,!!a))return A(),m&&m.nextSibling?o.insertBefore(yL,m.nextSibling):o.appendChild(yL),bL=o,N(),C(!0)}else if(m&&function(e,t,n){var r=XU(eL(n.el,0,n.options,!0)),i=cL(n.el,n.options,_L),o=10;return t?e.clientX<i.left-o||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-o||e.clientY<r.bottom&&e.clientX<r.left}(e,i,this)){var g=eL(o,0,s,!0);if(g===yL)return C(!1);if(n=XU(a=g),!1!==cz(wL,o,yL,t,a,n,e,!1))return A(),o.insertBefore(yL,g),bL=o,N(),C(!0)}else if(a.parentNode===o){n=XU(a);var v,y,b,w=yL.parentNode!==o,k=!function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===a||i===s||r+o/2===a+l/2}(yL.animated&&yL.toRect||t,a.animated&&a.toRect||n,i),x=i?'top':'left',S=QU(a,'top','top')||QU(yL,'top','top'),_=S?S.scrollTop:void 0;if(zL!==a&&(y=n[x],qL=!1,KL=!k&&s.invertSwap||w),v=function(e,t,n,r,i,o,a,s){var l=r?e.clientY:e.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,p=!1;if(!a)if(s&&ML<c*i){if(!qL&&(1===VL?l>u+c*o/2:l<d-c*o/2)&&(qL=!0),qL)p=!0;else if(1===VL?l<u+ML:l>d-ML)return-VL}else if(l>u+c*(1-i)/2&&l<d-c*(1-i)/2)return function(e){return nL(yL)<nL(e)?1:-1}(t);return p=p||a,p&&(l<u+c*o/2||l>d-c*o/2)?l>u+c/2?1:-1:0}(e,a,n,i,k?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,KL,zL===a),0!==v){var E=nL(yL);do{E-=v,b=bL.children[E]}while(b&&('none'===GU(b,'display')||b===_L))}if(0===v||b===a)return C(!1);zL=a,VL=v;var O=a.nextElementSibling,z=!1,I=cz(wL,o,yL,t,a,n,e,z=1===v);if(!1!==I)return(1===I||-1===I)&&(z=1===I),WL=!0,setTimeout(dz,30),A(),z&&!O?o.appendChild(yL):a.parentNode.insertBefore(yL,z?O:a),S&&sL(S,0,_-S.scrollTop),bL=yL.parentNode,void 0!==y&&!KL&&(ML=Math.abs(y-XU(a)[x])),N(),C(!0)}if(o.contains(yL))return C(!1)}return!1}function T(s,l){gL(s,f,OU({evt:e,isOwner:u,axis:i?'vertical':'horizontal',revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:p,target:a,completed:C,onMove:function(n,r){return cz(wL,o,yL,t,n,XU(n),e,r)},changed:N},l))}function A(){T('dragOverAnimationCapture'),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function C(t){return T('dragOverCompleted',{insertion:t}),t&&(u?c._hideClone():c._showClone(f),f!==p&&(KU(yL,CL?CL.options.ghostClass:c.options.ghostClass,!1),KU(yL,s.ghostClass,!0)),CL!==f&&f!==lz.active?CL=f:f===lz.active&&CL&&(CL=null),p===f&&(f._ignoreWhileAnimating=a),f.animateAll((function(){T('dragOverAnimationComplete'),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===yL&&!yL.animated||a===o&&!a.animated)&&(zL=null),!s.dragoverBubble&&!e.rootEl&&a!==document&&(yL.parentNode[uL]._isOutsideThisEl(e.target),!t&&az(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function N(){OL=nL(yL),TL=nL(yL,s.draggable),vL({sortable:f,name:'change',toEl:o,newIndex:OL,newDraggableIndex:TL,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){MU(document,'mousemove',this._onTouchMove),MU(document,'touchmove',this._onTouchMove),MU(document,'pointermove',this._onTouchMove),MU(document,'dragover',az),MU(document,'mousemove',az),MU(document,'touchmove',az)},_offUpEvents:function(){var e=this.el.ownerDocument;MU(e,'mouseup',this._onDrop),MU(e,'touchend',this._onDrop),MU(e,'pointerup',this._onDrop),MU(e,'touchcancel',this._onDrop),MU(document,'selectstart',this)},_onDrop:function(e){var t=this.el,n=this.options;OL=nL(yL),TL=nL(yL,n.draggable),gL('drop',this,{evt:e}),bL=yL&&yL.parentNode,OL=nL(yL),TL=nL(yL,n.draggable),lz.eventCanceled||(FL=!1,KL=!1,qL=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hz(this.cloneId),hz(this._dragStartId),this.nativeDraggable&&(MU(document,'drop',this),MU(t,'dragstart',this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),RU&&GU(document.body,'user-select',''),GU(yL,'transform',''),e&&(LL&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),_L&&_L.parentNode&&_L.parentNode.removeChild(_L),(wL===bL||CL&&'clone'!==CL.lastPutMode)&&SL&&SL.parentNode&&SL.parentNode.removeChild(SL),yL&&(this.nativeDraggable&&MU(yL,'dragend',this),uz(yL),yL.style['will-change']='',LL&&!FL&&KU(yL,CL?CL.options.ghostClass:this.options.ghostClass,!1),KU(yL,this.options.chosenClass,!1),vL({sortable:this,name:'unchoose',toEl:bL,newIndex:null,newDraggableIndex:null,originalEvent:e}),wL!==bL?(OL>=0&&(vL({rootEl:bL,name:'add',toEl:bL,fromEl:wL,originalEvent:e}),vL({sortable:this,name:'remove',toEl:bL,originalEvent:e}),vL({rootEl:bL,name:'sort',toEl:bL,fromEl:wL,originalEvent:e}),vL({sortable:this,name:'sort',toEl:bL,originalEvent:e})),CL&&CL.save()):OL!==$L&&OL>=0&&(vL({sortable:this,name:'update',toEl:bL,originalEvent:e}),vL({sortable:this,name:'sort',toEl:bL,originalEvent:e})),lz.active&&((null==OL||-1===OL)&&(OL=$L,TL=IL),vL({sortable:this,name:'end',toEl:bL,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){gL('nulling',this),wL=yL=bL=_L=kL=SL=xL=EL=NL=PL=LL=OL=TL=$L=IL=zL=VL=CL=AL=lz.dragged=lz.ghost=lz.clone=lz.active=null,JL.forEach((function(e){e.checked=!0})),JL.length=jL=DL=0},handleEvent:function(e){switch(e.type){case'drop':case'dragend':this._onDrop(e);break;case'dragenter':case'dragover':yL&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect='move'),e.cancelable&&e.preventDefault()}(e));break;case'selectstart':e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)ZU(e=n[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||pz(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach((function(e,t){var i=r.children[t];ZU(i,this.options.draggable,r,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ZU(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=hL.modifyOption(this,e,t);n[e]=void 0!==r?r:t,'group'===e&&rz(n)},destroy:function(){gL('destroy',this);var e=this.el;e[uL]=null,MU(e,'mousedown',this._onTapStart),MU(e,'touchstart',this._onTapStart),MU(e,'pointerdown',this._onTapStart),this.nativeDraggable&&(MU(e,'dragover',this),MU(e,'dragenter',this)),Array.prototype.forEach.call(e.querySelectorAll('[draggable]'),(function(e){e.removeAttribute('draggable')})),this._onDrop(),this._disableDelayedDragEvents(),HL.splice(HL.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!EL){if(gL('hideClone',this),lz.eventCanceled)return;GU(SL,'display','none'),this.options.removeCloneOnHide&&SL.parentNode&&SL.parentNode.removeChild(SL),EL=!0}},_showClone:function(e){if('clone'===e.lastPutMode){if(EL){if(gL('showClone',this),lz.eventCanceled)return;yL.parentNode!=wL||this.options.group.revertClone?kL?wL.insertBefore(SL,kL):wL.appendChild(SL):wL.insertBefore(SL,yL),this.options.group.revertClone&&this.animate(yL,SL),GU(SL,'display',''),EL=!1}}else this._hideClone()}},YL&&VU(document,'touchmove',(function(e){(lz.active||FL)&&e.cancelable&&e.preventDefault()})),lz.utils={on:VU,off:MU,css:GU,find:JU,is:function(e,t){return!!ZU(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:aL,closest:ZU,toggleClass:KU,clone:lL,index:nL,nextTick:fz,cancelNextTick:hz,detectDirection:nz,getChild:eL},lz.get=function(e){return e[uL]},lz.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw'Sortable: Mounted plugin must be a constructor function, not '.concat({}.toString.call(e));e.utils&&(lz.utils=OU(OU({},lz.utils),e.utils)),hL.mount(e)}))},lz.create=function(e,t){return new lz(e,t)},lz.version='1.15.2';var mz,gz,vz,yz,bz,_z,wz=[],kz=!1;function xz(){wz.forEach((function(e){clearInterval(e.pid)})),wz=[]}function Sz(){clearInterval(_z)}var Ez=aL((function(e,t,n,r){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=YU(),u=!1;gz!==n&&(gz=n,xz(),mz=t.scroll,i=t.scrollFn,!0===mz&&(mz=iL(n,!0)));var d=0,p=mz;do{var f=p,h=XU(f),m=h.top,g=h.bottom,v=h.left,y=h.right,b=h.width,w=h.height,k=void 0,x=void 0,S=f.scrollWidth,E=f.scrollHeight,O=GU(f),I=f.scrollLeft,T=f.scrollTop;f===c?(k=b<S&&('auto'===O.overflowX||'scroll'===O.overflowX||'visible'===O.overflowX),x=w<E&&('auto'===O.overflowY||'scroll'===O.overflowY||'visible'===O.overflowY)):(k=b<S&&('auto'===O.overflowX||'scroll'===O.overflowX),x=w<E&&('auto'===O.overflowY||'scroll'===O.overflowY));var _=k&&(Math.abs(y-o)<=s&&I+b<S)-(Math.abs(v-o)<=s&&!!I),A=x&&(Math.abs(g-a)<=s&&T+w<E)-(Math.abs(m-a)<=s&&!!T);if(!wz[d])for(var C=0;C<=d;C++)wz[C]||(wz[C]={});(wz[d].vx!=_||wz[d].vy!=A||wz[d].el!==f)&&(wz[d].el=f,wz[d].vx=_,wz[d].vy=A,clearInterval(wz[d].pid),(0!=_||0!=A)&&(u=!0,wz[d].pid=setInterval(function(){r&&0===this.layer&&lz.active._onTouchMove(bz);var t=wz[this.layer].vy?wz[this.layer].vy*l:0,z=wz[this.layer].vx?wz[this.layer].vx*l:0;'function'==typeof i&&'continue'!==i.call(lz.dragged.parentNode[uL],z,t,e,bz,wz[this.layer].el)||sL(wz[this.layer].el,z,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==c&&(p=iL(p,!1)));kz=u}}),30),$z=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||i;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(o('spill'),this.onSpill({dragEl:r,putSortable:n}))}};function Oz(){}function Iz(){}function Tz(e){return null==e?e:JSON.parse(JSON.stringify(e))}Oz.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=eL(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:$z},AU(Oz,{pluginName:'revertOnSpill'}),Iz.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:$z},AU(Iz,{pluginName:'removeOnSpill'}),lz.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)'_'===e.charAt(0)&&'function'==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?VU(document,'dragover',this._handleAutoScroll):this.options.supportPointer?VU(document,'pointermove',this._handleFallbackAutoScroll):t.touches?VU(document,'touchmove',this._handleFallbackAutoScroll):VU(document,'mousemove',this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?MU(document,'dragover',this._handleAutoScroll):(MU(document,'pointermove',this._handleFallbackAutoScroll),MU(document,'touchmove',this._handleFallbackAutoScroll),MU(document,'mousemove',this._handleFallbackAutoScroll)),Sz(),xz(),clearTimeout(HU),HU=void 0},nulling:function(){bz=gz=mz=kz=_z=vz=yz=null,wz.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,i);if(bz=e,t||this.options.forceAutoScrollFallback||jU||PU||RU){Ez(e,this.options,o,t);var a=iL(o,!0);kz&&(!_z||r!==vz||i!==yz)&&(_z&&Sz(),_z=setInterval((function(){var o=iL(document.elementFromPoint(r,i),!0);o!==a&&(a=o,xz()),Ez(e,n.options,o,t)}),10),vz=r,yz=i)}else{if(!this.options.bubbleScroll||iL(o,!0)===YU())return void xz();Ez(e,this.options,iL(o,!1),!1)}}},AU(e,{pluginName:'scroll',initializeByDefault:!0})}),lz.mount(Iz,Oz);let Az=null,Cz=null;function Nz(e=null,t=null){Az=e,Cz=t}const Pz=Symbol('cloneElement');function jz(...e){var t,n;const r=null==(t=cs())?void 0:t.proxy;let i=null;const o=e[0];let[,a,s]=e;Array.isArray(Hr(a))||(s=a,a=null);let l=null;const{immediate:c=!0,clone:u=Tz,customUpdate:d}=null!=(n=Hr(s))?n:{};const p={onUpdate:function(e){if(d)return void d(e);const{from:t,item:n,oldIndex:r,oldDraggableIndex:_,newDraggableIndex:i}=e;if(kU(n),wU(t,n,r),Vr(a)){const e=[...Hr(a)];a.value=yU(e,_,i)}else yU(Hr(a),_,i)},onStart:function(e){var t;const{from:n,oldIndex:r,item:o}=e;i=Array.from(n.childNodes);const _=Hr(null==(t=Hr(a))?void 0:t[r]),s=u(_);Nz(_,s),o[Pz]=s},onAdd:function(e){const t=e.item[Pz];if(!function(e){return void 0===e}(t)){if(kU(e.item),Vr(a)){const n=[...Hr(a)];return void(a.value=_U(n,e.newDraggableIndex,t))}_U(Hr(a),e.newDraggableIndex,t)}},onRemove:function(e){const{from:t,item:n,oldIndex:r,oldDraggableIndex:_,pullMode:i,clone:o}=e;if(wU(t,n,r),'clone'!==i)if(Vr(a)){const e=[...Hr(a)];a.value=bU(e,_)}else bU(Hr(a),_);else kU(o)},onEnd:function(e){const{newIndex:t,oldIndex:n,from:r,to:_}=e;let o=null;const a=t===n&&r===_;try{if(a){let e=null;null==i||i.some(((z,t)=>{if(e&&(null==i?void 0:i.length)!==_.childNodes.length)return r.insertBefore(e,z.nextSibling),!0;const n=_.childNodes[t];e=null==_?void 0:_.replaceChild(z,n)}))}}catch(ND){o=ND}finally{i=null}yi((()=>{if(Nz(),o)throw o}))}};function f(e){const t=Hr(o);return e||(e=function(e){return'string'==typeof e}(t)?xU(t,null==r?void 0:r.$el):t),e&&!function(e){return e instanceof HTMLElement}(e)&&(e=e.$el),e||function(e){console.error(vU+e)}('Root element not found'),e}function h(){var e;const _=null!=(e=Hr(s))?e:{},{immediate:t,clone:n}=_,r=gU(_,['immediate','clone']);return SU(r,((e,t)=>{(function(e){return 111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)})(e)&&(r[e]=(e,...z)=>(EU(e,{data:Az,clonedData:Cz}),t(e,...z)))})),function(e,t){const n=mU({},e);return Object.keys(t).forEach((r=>{n[r]?n[r]=function(e,t,n=null){return function(...r){return e.apply(n,r),t.apply(n,r)}}(e[r],t[r]):n[r]=t[r]})),n}(null===a?{}:p,r)}const m=e=>{e=f(e),l&&g.destroy(),l=new lz(e,h())};_a((()=>s),(()=>{l&&SU(h(),((e,t)=>{null==l||l.option(e,t)}))}),{deep:!0});const g={option:(e,t)=>null==l?void 0:l.option(e,t),destroy:()=>{null==l||l.destroy(),l=null},save:()=>null==l?void 0:l.save(),toArray:()=>null==l?void 0:l.toArray(),closest:(...e)=>null==l?void 0:l.closest(...e)};return function(e){cs()?Eo(e):yi(e)}((()=>{c&&m()})),function(e){cs()&&Oo(e)}(g.destroy),mU({start:m,pause:()=>null==g?void 0:g.option('disabled',!0),resume:()=>null==g?void 0:g.option('disabled',!1)},g)}const Dz=['update','start','add','remove','choose','unchoose','end','sort','filter','clone','move','change'],Rz=['clone','animation','ghostClass','group','sort','disabled','store','handle','draggable','swapThreshold','invertSwap','invertedSwapThreshold','removeCloneOnHide','direction','chosenClass','dragClass','ignore','filter','preventOnFilter','easing','setData','dropBubble','dragoverBubble','dataIdAttr','delay','delayOnTouchOnly','touchStartThreshold','forceFallback','fallbackClass','fallbackOnBody','fallbackTolerance','fallbackOffset','supportPointer','emptyInsertThreshold','scroll','forceAutoScrollFallback','scrollSensitivity','scrollSpeed','bubbleScroll','modelValue','tag','target','customUpdate',...Dz.map((e=>`on${e.replace(/^\S/,(e=>e.toUpperCase()))}`))],Uz=fo({name:'VueDraggable',model:{prop:'modelValue',event:'update:modelValue'},props:Rz,emits:['update:modelValue',...Dz],setup(e,{slots:t,emit:n,expose:r,attrs:i}){const o=Dz.reduce(((e,t)=>{const r=`on${t.replace(/^\S/,(e=>e.toUpperCase()))}`;return e[r]=(...e)=>n(t,...e),e}),{}),a=ks((()=>{const t=Yr(e),{modelValue:n}=t,r=gU(t,['modelValue']),a=Object.entries(r).reduce(((e,[t,n])=>{const r=Hr(n);return void 0!==r&&(e[t]=r),e}),{});return mU(mU({},o),function(e){return Object.keys(e).reduce(((t,n)=>(void 0!==e[n]&&(t[function(e){return e.replace(/-(\w)/g,((e,t)=>t?t.toUpperCase():''))}(n)]=e[n]),t)),{})}(mU(mU({},i),a)))})),s=ks({get:()=>e.modelValue,set:e=>n('update:modelValue',e)}),l=Mr(),c=Or(jz(e.target||l,s,a));return r(c),()=>{var n;return xs(e.tag||'div',{ref:l},null==(n=null==t?void 0:t.default)?void 0:n.call(t,c))}}}),Lz=fo({__name:'FolderItem',props:Zo({searchInput:{default:null},isBatchMode:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:Zo(['delete','toggle-selection','update:is-expanded'],['update:modelValue']),setup(e,{expose:t,emit:n}){t();const[r,i]=VI(),o=ka(e,'modelValue'),a=e,s=n,l=ks({get:()=>a.isExpanded,set:e=>{s('update:is-expanded',e)}}),c=ks((()=>null===a.searchInput||(!!a.searchInput.test(o.value.name)||o.value.scripts.some((e=>a.searchInput.test(e.name)))))),{open:u}=xj({component:UR,attrs:{scriptFolder:o.value,onSubmit:e=>{_.assign(o.value,e)}}}),{open:d}=xj({component:Cj,attrs:{buttons:[{name:Se``,shouldEmphasize:!0,onClick:e=>{s('delete',o.value.id),e()}},{name:Se``}]},slots:{default:Se`<div></div>`}}),p=async e=>{const t=_.cloneDeep(o.value);e.should_strip_data&&t.scripts.forEach((e=>{_.set(e,'data',{})}));return{filename:await Re(Se`-${t.name}.json`),data:JSON.stringify(t,null,2)}},f=async e=>{const{filename:t,data:n}=await p(e);Ue(n,t,'application/json')},h={DefineScriptFolderButton:r,ScriptFolderButton:i,script_folder:o,props:a,emit:s,is_expanded:l,is_visible:c,openFolderEditor:u,handleScriptDelete:e=>{_.remove(o.value.scripts,(t=>t.id===e))},openDeleteConfirm:d,createExportPayload:p,downloadExport:f,exportFolder:async()=>{o.value.scripts.some((e=>!_.isEmpty(e.data)))?xj({component:Cj,attrs:{buttons:[{name:Se``,onClick:e=>{f({should_strip_data:!0}),e()}},{name:Se``,shouldEmphasize:!0,onClick:e=>{f({should_strip_data:!0}),e()}},{name:Se``,onClick:e=>e()}]},slots:{default:Se`<div>'${o.value.name}' , ?  API Key </div>`}}).open():f({should_strip_data:!1})},ScriptItem:cU,get VueDraggable(){return Uz}};return Object.defineProperty(h,'__isScriptSetup',{enumerable:!1,value:!0}),h}}),zz=['data-folder-id'],Vz=['checked'],Mz={class:'flex shrink-0 flex-wrap items-center gap-0.25'},Bz={class:'mt-0! mr-0.5 mb-0! cursor-pointer'};const Fz=sI(Lz,[['render',function(e,t,n,r,i,o){const a=fD;return Li((La(),Ba('div',{class:'w-full rounded-md border border-(--SmartThemeBorderColor) bg-(--grey5020a)','data-type':'folder','data-folder':'','data-folder-id':r.script_folder.id},[Ga('div',{class:'flex w-full cursor-pointer items-center justify-between p-0.5',onClick:t[5]||(t[5]=e=>r.is_expanded=!r.is_expanded)},[r.props.isBatchMode?(La(),Ba('div',{key:0,class:'flex items-center',onClick:t[1]||(t[1]=Al((()=>{}),['stop']))},[Ga('input',{type:'checkbox',checked:r.props.isSelected,class:'cursor-pointer',onChange:t[0]||(t[0]=e=>r.emit('toggle-selection',r.script_folder.id))},null,40,Vz)])):(La(),Ba('span',{key:1,class:'TH-handle cursor-grab select-none active:cursor-grabbing','aria-hidden':'true',onClick:t[2]||(t[2]=Al((()=>{}),['stop']))},'  ')),Ga('i',{class:nn(['fa-solid ml-0.5',r.script_folder.icon||'fa-folder']),style:Yt({color:r.script_folder.color||'var(--SmartThemeQuoteColor)'})},null,6),Ga('span',{class:'TH-folder-name ml-0.5 flex-grow overflow-hidden',style:Yt({textDecoration:r.script_folder.enabled?'none':'line-through',filter:r.script_folder.enabled?'none':'grayscale(0.5)'})},[Wa(a,{query:r.props.searchInput,'text-to-highlight':r.script_folder.name},null,8,['query','text-to-highlight'])],4),Li(Ga('div',Mz,[Ga('div',{class:nn(['mt-0! mr-0.5 mb-0! cursor-pointer',{enabled:r.script_folder.enabled}]),title:'',onClick:t[3]||(t[3]=Al((e=>r.script_folder.enabled=!r.script_folder.enabled),['stop']))},[Ga('i',{class:nn(['fa-solid',[r.script_folder.enabled?'fa-toggle-on':'fa-toggle-off']])},null,2)],2),Wa(r.DefineScriptFolderButton,null,{default:Ui((({icon:e})=>[Ga('div',Bz,[Ga('i',{class:nn(['fa-solid',e])},null,2)])])),_:1}),Wa(r.ScriptFolderButton,{name:'',icon:'fa-pencil',onClick:Al(r.openFolderEditor,['stop'])},null,8,['onClick']),Wa(r.ScriptFolderButton,{name:'',icon:'fa-file-export',onClick:Al(r.exportFolder,['stop'])}),Wa(r.ScriptFolderButton,{name:'',icon:'fa-trash',onClick:Al(r.openDeleteConfirm,['stop'])},null,8,['onClick']),Wa(r.ScriptFolderButton,{name:'',icon:r.is_expanded?'fa-chevron-down':'fa-chevron-up'},null,8,['icon'])],512),[[Ys,!r.props.isBatchMode]]),r.props.isBatchMode?(La(),Ba('div',{key:2,class:'mr-0.5 cursor-pointer',onClick:t[4]||(t[4]=Al((()=>{}),['stop']))},[Ga('i',{class:nn(['fa-solid',r.is_expanded?'fa-chevron-down':'fa-chevron-up'])},null,2)])):es('',!0)]),Li(Wa(r.VueDraggable,{modelValue:r.script_folder.scripts,'onUpdate:modelValue':t[6]||(t[6]=e=>r.script_folder.scripts=e),group:'scripts',handle:'.TH-handle',class:'flex flex-grow flex-col gap-[5px] overflow-y-auto p-0.5','item-key':'id','force-fallback':!0,'fallback-offset':{x:0,y:0},'fallback-on-body':!0,direction:'vertical',disabled:null!==n.searchInput},{default:Ui((()=>[(La(!0),Ba(Na,null,jo(r.script_folder.scripts,((e,t)=>(La(),Ba('div',{key:r.script_folder.scripts[t].id},[Wa(r.ScriptItem,{modelValue:r.script_folder.scripts[t],'onUpdate:modelValue':e=>r.script_folder.scripts[t]=e,'search-input':r.props.searchInput,onDelete:r.handleScriptDelete},null,8,['modelValue','onUpdate:modelValue','search-input'])])))),128))])),_:1},8,['modelValue','disabled']),[[Ys,r.is_expanded]])],8,zz)),[[Ys,r.is_visible]])}],['__file','FolderItem.vue']]),Zz=fo({__name:'Container',props:Zo({title:{},description:{},searchInput:{},storeType:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:['update:modelValue'],setup(e,{expose:t}){t();const n=ka(e,'modelValue'),r=e,[i,o]=VI(),a=ei(n.value,'script_trees'),s=Mr(new Map),l=Mr(!1),c=Mr(new Set),u=()=>{const e=[],t=[];for(const n of c.value){const r=a.value.find((e=>e.id===n));r&&(m_(r)?e.push(r):t.push(r))}return{scripts:e,folders:t}},d={store:n,props:r,DefineBatchViewTemplate:i,ReuseBatchViewTemplate:o,script_trees:a,folderExpandedStates:s,handleDelete:e=>{_.remove(n.value.script_trees,(t=>t.id===e)),s.value.delete(e)},isBatchMode:l,selectedItems:c,toggleBatchView:()=>{l.value=!l.value,l.value||c.value.clear()},exitBatchMode:()=>{l.value=!1,c.value.clear()},toggleSelection:e=>{c.value.has(e)?c.value.delete(e):c.value.add(e)},onStart:e=>{console.log('onStart'),a.value.forEach((e=>{console.log(e),m_(e)||s.value.set(e.id,!0)}))},getSelectedItems:u,handleBatchDelete:()=>{const{scripts:e,folders:t}=u(),r=e.length+t.length;xj({component:Cj,attrs:{buttons:[{name:Se``,shouldEmphasize:!0,onClick:e=>{for(const t of c.value)_.remove(n.value.script_trees,(e=>e.id===t));c.value.clear(),e()}},{name:Se``}]},slots:{default:Se`<div> ${r} </div>`}}).open()},handleBatchExport:async()=>{const{scripts:e,folders:t}=u(),n={scripts:e,folders:t,exportDate:(new Date).toISOString()},r=await Re(Se`--${(new Date).toLocaleDateString()}.json`),i=JSON.stringify(n,null,2);Ue(i,r,'application/json')},handleBatchMoveToFolder:()=>{const{scripts:e}=u();if(0===e.length)return void xj({component:Cj,attrs:{buttons:[{name:Se``}]},slots:{default:Se`<div></div>`}}).open();const t=a.value.filter((e=>!m_(e)));if(0===t.length)return void xj({component:Cj,attrs:{buttons:[{name:Se``}]},slots:{default:Se`<div></div>`}}).open();const r=Mr(null),{open:i}=xj({component:Cj,attrs:{buttons:[{name:Se``,shouldEmphasize:!0,onClick:i=>{if(!r.value)return;const o=t.find((e=>e.id===r.value));o&&(e.forEach((e=>{_.remove(n.value.script_trees,(t=>t.id===e.id)),o.scripts.push(e)})),c.value.clear(),i())}},{name:Se``}]},slots:{default:()=>xs('div',[xs('div',{class:'mb-0.5'},Se``),xs('div',{class:'max-h-12 overflow-y-auto flex flex-col gap-0.25'},t.map((e=>xs('div',{class:['cursor-pointer p-0.5 rounded hover:bg-(--SmartThemeBlurTintColor)',r.value===e.id?'bg-(--SmartThemeBlurTintColor)':''],onClick:()=>{r.value=e.id}},[xs('i',{class:['fa-solid',e.icon||'fa-folder'],style:{color:e.color||'var(--SmartThemeQuoteColor)',marginRight:'0.5rem'}}),xs('span',e.name)]))))])}});i()},FolderItem:Fz,ScriptItem:cU,get isScript(){return m_},get VueDraggable(){return Uz}};return Object.defineProperty(d,'__isScriptSetup',{enumerable:!1,value:!0}),d}}),Hz={class:'mt-0.5 flex items-center justify-between'},qz={class:'flex flex-col'},Kz={class:'flex items-center'},Gz={class:'font-bold'},Wz={class:'mt-0.25 text-sm opacity-70'},Jz=['title','disabled','onClick'],Yz={class:'ml-0.25'},Xz={class:'mt-0.5 flex items-center gap-0.5 border-b border-(--SmartThemeBorderColor) pb-0.5'},Qz={class:'flex h-full flex-col overflow-hidden'},eV={key:0,class:'text-center opacity-50'};const tV=sI(Zz,[['render',function(e,t,n,r,i,o){const a=hC;return La(),Ba(Na,null,[Ga('div',Hz,[Ga('div',qz,[Ga('div',Kz,[Ga('div',Gz,un(r.props.title),1),Ga('div',{class:'ml-0.5 flex cursor-pointer items-center justify-center',onClick:t[0]||(t[0]=e=>r.toggleBatchView())},[...t[3]||(t[3]=[Ga('i',{class:'fa-solid fa-cog'},null,-1)])])]),Ga('div',Wz,un(r.props.description),1)]),Li(Wa(a,{id:`${r.props.title}-script-enable-toggle`,modelValue:r.store.enabled,'onUpdate:modelValue':t[1]||(t[1]=e=>r.store.enabled=e)},null,8,['id','modelValue']),[[Ys,!r.isBatchMode]])]),Wa(r.DefineBatchViewTemplate,null,{default:Ui((({icon:e,name:t,buttonTitle:n,onClick:r,disabled:i,isEmphasized:o})=>[Ga('button',{class:nn(['menu_button interactable my-0! w-[unset]! flex-wrap text-sm!',{'bg-(--crimson70a)!':o}]),title:n,disabled:i,onClick:r},[Ga('i',{class:nn(['fa-solid',e])},null,2),Ga('span',Yz,un(t),1)],10,Jz)])),_:1}),Li(Ga('div',Xz,[Wa(r.ReuseBatchViewTemplate,{icon:'fa-trash',name:e.t``,'button-title':e.t``,disabled:0===r.selectedItems.size,'on-click':r.handleBatchDelete,'is-emphasized':!0},null,8,['name','button-title','disabled']),Wa(r.ReuseBatchViewTemplate,{icon:'fa-file-export',name:e.t``,'button-title':e.t``,disabled:0===r.selectedItems.size,'on-click':r.handleBatchExport},null,8,['name','button-title','disabled']),Wa(r.ReuseBatchViewTemplate,{icon:'fa-folder',name:e.t``,'button-title':e.t``,disabled:0===r.selectedItems.size,'on-click':r.handleBatchMoveToFolder},null,8,['name','button-title','disabled']),Wa(r.ReuseBatchViewTemplate,{icon:'fa-times',name:e.t``,'button-title':e.t``,disabled:!1,'on-click':r.exitBatchMode},null,8,['name','button-title'])],512),[[Ys,r.isBatchMode]]),Ga('div',Qz,[Wa(r.VueDraggable,{modelValue:r.script_trees,'onUpdate:modelValue':t[2]||(t[2]=e=>r.script_trees=e),group:'scripts',handle:'.TH-handle',class:nn(['flex flex-grow flex-col gap-[5px] overflow-y-auto py-0.5',{'min-h-2':0===r.script_trees.length}]),'item-key':'id','force-fallback':!0,'fallback-offset':{x:0,y:0},'fallback-on-body':!0,'data-container-type':r.props.storeType,direction:'vertical',disabled:null!==n.searchInput||r.isBatchMode,onStart:r.onStart},{default:Ui((()=>[(La(!0),Ba(Na,null,jo(r.script_trees,((e,t)=>(La(),Ba('div',{key:e.id},[r.isScript(r.script_trees[t])?(La(),Fa(r.ScriptItem,{key:0,modelValue:r.script_trees[t],'onUpdate:modelValue':e=>r.script_trees[t]=e,'search-input':r.props.searchInput,'is-batch-mode':r.isBatchMode,'is-selected':r.selectedItems.has(r.script_trees[t].id),onDelete:r.handleDelete,onToggleSelection:r.toggleSelection},null,8,['modelValue','onUpdate:modelValue','search-input','is-batch-mode','is-selected'])):(La(),Fa(r.FolderItem,{key:1,modelValue:r.script_trees[t],'onUpdate:modelValue':e=>r.script_trees[t]=e,'search-input':r.props.searchInput,'is-batch-mode':r.isBatchMode,'is-selected':r.selectedItems.has(r.script_trees[t].id),'is-expanded':r.folderExpandedStates.get(r.script_trees[t].id)??!1,onDelete:r.handleDelete,onToggleSelection:r.toggleSelection,'onUpdate:isExpanded':e=>r.folderExpandedStates.set(r.script_trees[t].id,e)},null,8,['modelValue','onUpdate:modelValue','search-input','is-batch-mode','is-selected','is-expanded','onUpdate:isExpanded']))])))),128)),0===r.script_trees.length?(La(),Ba('div',eV,un(e.t``),1)):es('',!0)])),_:1},8,['modelValue','class','data-container-type','disabled'])])],64)}],['__file','Container.vue']]);const nV=fo({__name:'Iframe',props:{id:{},content:{},useBlobUrl:{type:Boolean}},setup(e,{expose:t}){t();const n=e,r=ks((e=>{e?.src&&URL.revokeObjectURL(e.src);const t=function(e,t){return`<html>\n<head>\n<script src="https://testingcf.jsdelivr.net/npm/jquery/dist/jquery.min.js"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/jquery-ui/dist/jquery-ui.min.js"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/jquery-ui-touch-punch"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/vue/dist/vue.runtime.global.prod.min.js"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/vue-router/dist/vue-router.global.prod.min.js"><\/script>\n<script src="https://testingcf.jsdelivr.net/npm/pixi.js/dist/pixi.min.js"><\/script>\n\n${t?`<base href="${window.location.origin}"/>`:''}\n<script src="${Mj}"><\/script>\n<script src="${Vj}"><\/script>\n</head>\n<body>\n<script type="module">\n${e}\n<\/script>\n</body>\n</html>\n`}(n.content,n.useBlobUrl);return n.useBlobUrl?{src:URL.createObjectURL(new Blob([t],{type:'text/html'}))}:{srcdoc:t}}));Oo((()=>{r.value.src&&URL.revokeObjectURL(r.value.src)}));const i={props:n,src_prop:r};return Object.defineProperty(i,'__isScriptSetup',{enumerable:!1,value:!0}),i}}),rV=['id'];const iV=sI(nV,[['render',function(e,t,n,r,i,o){return Li((La(),Ba('iframe',is({id:`TH-script-${n.id}`},r.src_prop),null,16,rV)),[[Ys,!1]])}],['__file','Iframe.vue']]),oV=fo({__name:'Builtin',setup(e,{expose:t}){t();const[n,r]=VI();async function i(e){const t=await fetch(e.info_url);if(!t.ok)throw Error(`: ${t.status} ${t.statusText}`);return t.text()}async function o(e){return{type:'script',enabled:!1,name:e.name,id:Ie(),content:`import '${e.content_url}'`,info:await i(e),button:{enabled:!0,buttons:[]},data:{}}}const a={DefineToolButton:n,ToolButton:r,getInfo:i,toScript:o,builtins:[{name:Se`: `,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'},{name:Se``,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'},{name:Se``,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'},{name:Se``,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'},{name:Se``,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'},{name:Se`: `,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'},{name:Se``,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'},{name:Se`:  AI `,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'},{name:Se`token: AI`,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist//token/index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src//token/README.md'},{name:Se``,content_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist///index.js',info_url:'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src///README.md'}],openInfo:async function(e){toastr.info(Se`...`),xj({component:Cj,attrs:{buttons:[{name:Se``}],onOpened:()=>{toastr.clear()}},slots:{default:`${QN.parse(await i(e))}`}}).open()},importScript:async function(e){toastr.info(Se`...`);const t=await o(e);toastr.clear(),HS().script_trees.push(t),toastr.success(Se`: '${t.name}'`)},Popup:Cj};return Object.defineProperty(a,'__isScriptSetup',{enumerable:!1,value:!0}),a}}),aV={class:'my-1.25 flex flex-col flex-wrap gap-0.5'},sV={href:'https://n0vi028.github.io/JS-Slash-Runner-Doc/guide//.html',target:'_blank'},lV={class:'ml-0.5 flex-grow overflow-hidden text-left! text-ellipsis! whitespace-nowrap!'},cV={class:'flex flex-shrink-0! flex-nowrap! items-center gap-0.5'},uV=['title'];const dV=sI(oV,[['render',function(e,t,n,r,i,o){return La(),Fa(r.Popup,{buttons:[{name:e.t``}]},{default:Ui((()=>[Ga('div',aV,[Ga('div',null,[Xa(un(e.t`, `),1),t[0]||(t[0]=Ga('br',null,null,-1)),Xa(' '+un(e.t`, `)+' ',1),Ga('a',sV,un(e.t``),1)]),(La(),Ba(Na,null,jo(r.builtins,(e=>Ga('div',{key:e.name,class:'flex w-full items-center justify-between rounded-sm border border-(--SmartThemeBorderColor) p-0.25'},[Ga('div',lV,un(e.name),1),Ga('div',cV,[Wa(r.DefineToolButton,null,{default:Ui((({name:e,icon:t})=>[Ga('div',{class:'menu_button interactable my-0! mr-0.5',title:e},[Ga('i',{class:nn(['fa-solid',t])},null,2)],8,uV)])),_:1}),Wa(r.ToolButton,{name:'',icon:'fa-info-circle',onClick:t=>r.openInfo(e)},null,8,['onClick']),Wa(r.ToolButton,{name:'',icon:'fa-plus',onClick:t=>r.importScript(e)},null,8,['onClick'])])]))),64))])])),_:1},8,['buttons'])}],['__file','Builtin.vue']]),pV={class:'my-0.5 text-md font-bold'},fV={class:'flex w-full flex-wrap justify-center gap-1.5 p-1',role:'radiogroup'},hV=['value'];const mV=sI(fo({__name:'Selector',props:Zo({title:{},options:{}},{modelValue:{},modelModifiers:{}}),emits:['update:modelValue'],setup(e,{expose:t}){t();const n={result:ka(e,'modelValue')};return Object.defineProperty(n,'__isScriptSetup',{enumerable:!1,value:!0}),n}}),[['render',function(e,t,n,r,i,o){return La(),Ba('div',null,[Ga('div',pV,un(n.title),1),Ga('div',fV,[(La(!0),Ba(Na,null,jo(n.options,((e,n)=>(La(),Ba('label',{key:n,class:'inline-flex items-center gap-[5px]'},[Li(Ga('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>r.result=e),type:'radio',value:e.value},null,8,hV),[[xl,r.result]]),Ga('span',null,un(e.label),1)])))),128))])])}],['__file','Selector.vue']]),gV=fo({__name:'TargetSelector',emits:['submit'],setup(e,{expose:t,emit:n}){t();const r=n;const i=Mr('global'),o=ei(DS(),'id'),a=ks((()=>{let e=_([]);return e=e.push({label:Se``,value:'global'}),void 0!==o.value&&(e=e.push({label:Se``,value:'character'})),e=e.push({label:Se``,value:'preset'}),e.value()})),s={emit:r,submit:function(e){r('submit',i.value),e()},target:i,character_id:o,options:a};return Object.defineProperty(s,'__isScriptSetup',{enumerable:!1,value:!0}),s}});const vV=sI(gV,[['render',function(e,t,n,r,i,o){const a=mV,s=Cj;return La(),Fa(s,{buttons:[{name:e.t``,shouldEmphasize:!0,onClick:r.submit},{name:e.t``}]},{default:Ui((()=>[Wa(a,{modelValue:r.target,'onUpdate:modelValue':t[0]||(t[0]=e=>r.target=e),title:e.t``,options:r.options},null,8,['modelValue','title','options'])])),_:1},8,['buttons'])}],['__file','TargetSelector.vue']]),yV=fo({__name:'Toolbar',setup(e,{expose:t}){function n(e){switch(e){case'global':return HS();case'character':return qS();case'preset':return KS()}}function r(e,t){n(e).script_trees.push(x_(p_,t))}function i(e,t){n(e).script_trees.push(x_(f_,t))}t();const{open:o,onChange:a}=pT({accept:'.json,.zip',directory:!1});async function s(e,t){t&&await Promise.all(Array.from(t).map((async t=>{try{const r=x_(h_,{...JSON.parse(await t.text())});r.enabled=!1,r.id=Ie(),function(e){return'folder'===e.type}(r)&&r.scripts.forEach((e=>{e.id=Ie()})),n(e).script_trees.push(r)}catch(LJ){const n=LJ;console.error(n),toastr.error(n.message,Se` '${t.name}' `)}})))}const{open:l}=xj({component:vV,attrs:{onSubmit:async e=>{const t=a((n=>{s(e,n),t.off()}));o()}}}),{open:c}=xj({component:dV}),u={openCreator:function(e){let t;const n=xj({component:vV,attrs:{onSubmit:async e=>{t=e,o.open()}}}),o=xj({component:'script'===e?tU:UR,attrs:{onSubmit:async o=>{'script'===e?r(t,o):i(t,o),n.close()}}});n.open()},getStoreFormType:n,onScriptEditorSubmit:r,onFolderEditorSubmit:i,openFileDialog:o,onChange:a,handleImport:s,openImport:l,openBuiltin:c};return Object.defineProperty(u,'__isScriptSetup',{enumerable:!1,value:!0}),u}}),bV={class:'flex gap-0.25'};const _V=sI(yV,[['render',function(e,t,n,r,i,o){const a=ET;return La(),Ba('div',bV,[Wa(a,{type:'tavern',onClick:t[0]||(t[0]=e=>r.openCreator('script'))},{default:Ui((()=>[t[2]||(t[2]=Ga('i',{class:'fa-solid fa-scroll'},null,-1)),Ga('small',null,un(e.t`+ `),1)])),_:1}),Wa(a,{type:'tavern',onClick:t[1]||(t[1]=e=>r.openCreator('folder'))},{default:Ui((()=>[t[3]||(t[3]=Ga('i',{class:'fa-solid fa-folder-plus'},null,-1)),Ga('small',null,un(e.t`+ `),1)])),_:1}),Wa(a,{type:'tavern',onClick:r.openImport},{default:Ui((()=>[t[4]||(t[4]=Ga('i',{class:'fa-solid fa-file-import'},null,-1)),Ga('small',null,un(e.t``),1)])),_:1},8,['onClick']),Wa(a,{type:'tavern',onClick:r.openBuiltin},{default:Ui((()=>[t[5]||(t[5]=Ga('i',{class:'fa-solid fa-archive'},null,-1)),Ga('small',null,un(e.t``),1)])),_:1},8,['onClick'])])}],['__file','Toolbar.vue']]);function wV(...e){return _(e).flatten().flatMap((e=>m_(e)?e:[e,...e.scripts])).value()}function kV(e,...t){const n=wV(...t.map((e=>e.script_trees)));wV(e).filter((e=>!n.some((t=>t.id===e.id)))).forEach((e=>{e.id=Ie()}))}const xV=['onClick'];const SV=sI(fo({__name:'Script',setup(e,{expose:t}){t();const n=Mr(null),r=ei(DS(),'id'),i=ei(MS(),'id'),o=HS(),a=qS(),s=KS();!function(e,t,n,r,i){_a(e,(()=>{kV(r.script_trees,n,i)})),_a(t,(()=>{kV(i.script_trees,n,r)}))}(r,i,o,a,s);const{runtimes:l,button_map:d}=Yr(WS()),p={search_input:n,character_id:r,preset_id:i,global_scripts:o,character_scripts:a,preset_scripts:s,runtimes:l,button_map:d,use_blob_url:ei(LS().settings.render,'use_blob_url'),button_element:function(){const e=Mr(Symbol());c.on(u.CHAT_CHANGED,(()=>{e.value=Symbol()}));const t=Br(_.cloneDeep(_.get(Ve,'quickReplyV2')));c.on(u.SETTINGS_UPDATED,(()=>{const n=_.get(Ve,'quickReplyV2');_.isEqual(t,n)||(t.value=_.cloneDeep(n),e.value=Symbol())}));const n=Br(null);return _a([t,e],(([e])=>{const t=$('#send_form'),r=t.children('#qr--bar'),i=r.length>0?r:$('<div id="qr--bar" class="flex-container flexGap5">').appendTo(t);if(e.isCombined){const e=i.children('.qr--buttons');if(e.length>0)return void(n.value=e[0])}n.value=i[0]})),n}(),Container:tV,Iframe:iV,Toolbar:_V,get eventSource(){return c}};return Object.defineProperty(p,'__isScriptSetup',{enumerable:!1,value:!0}),p}}),[['render',function(e,t,n,r,i,o){const a=nD,s=lI;return La(),Ba(Na,null,[Wa(r.Toolbar,{class:'flex w-full flex-wrap gap-0.5'}),Wa(a,{modelValue:r.search_input,'onUpdate:modelValue':t[0]||(t[0]=e=>r.search_input=e),class:'flex w-full flex-wrap items-center gap-0.5',placeholder:e.t`//`,clearable:''},null,8,['modelValue','placeholder']),Wa(r.Container,{modelValue:r.global_scripts,'onUpdate:modelValue':t[1]||(t[1]=e=>r.global_scripts=e),title:e.t``,description:e.t``,'search-input':r.search_input,'store-type':'global'},null,8,['modelValue','title','description','search-input']),void 0!==r.character_id?(La(),Ba(Na,{key:0},[Wa(s),Wa(r.Container,{modelValue:r.character_scripts,'onUpdate:modelValue':t[2]||(t[2]=e=>r.character_scripts=e),title:e.t``,description:e.t``,'search-input':r.search_input,'store-type':'character'},null,8,['modelValue','title','description','search-input'])],64)):es('',!0),Wa(s),Wa(r.Container,{modelValue:r.preset_scripts,'onUpdate:modelValue':t[3]||(t[3]=e=>r.preset_scripts=e),title:e.t``,description:e.t``,'search-input':r.search_input,'store-type':'preset'},null,8,['modelValue','title','description','search-input']),(La(!0),Ba(Na,null,jo(r.runtimes,(e=>(La(),Fa(r.Iframe,{key:e.id+e.reload_memo,id:e.id,content:e.content,'use-blob-url':r.use_blob_url},null,8,['id','content','use-blob-url'])))),128)),r.button_element?(La(),Fa(Wi,{key:1,to:r.button_element},[(La(!0),Ba(Na,null,jo(r.button_map,((e,t)=>(La(),Ba('div',{key:t,class:'qr--buttons flex gap-[5px]'},[(La(!0),Ba(Na,null,jo(e,(e=>(La(),Ba('div',{key:e.button_id,class:'qr--button menu_button interactable',onClick:t=>r.eventSource.emit(e.button_id)},un(e.button_name),9,xV)))),128))])))),128))],8,['to'])):es('',!0)],64)}],['__file','Script.vue']]),EV=fo({__name:'Dialog',props:{width:{default:'60vw'},height:{default:'70vh'},mobileWidth:{default:'90vw'},mobileHeight:{default:'70vh'},title:{default:''},showGuide:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},minWidth:{default:300},minHeight:{default:200},maxWidth:{default:'90vw'},maxHeight:{default:'90vh'},edgeSnap:{type:Boolean,default:!0},snapDistance:{default:100},handles:{default:()=>['tl','tm','tr','mr','br','bm','bl','ml']},showHandles:{type:Boolean,default:!1},initialX:{type:[Number,String,Function],default:'10%'},initialY:{type:[Number,Function],default:()=>Math.max(50,.15*window.innerHeight)},mobileInitialX:{type:[Number,Function],default:()=>Math.max(0,.05*window.innerWidth)},mobileInitialY:{type:[Number,Function],default:()=>Math.max(20,.15*window.innerHeight)},storageId:{default:void 0}},emits:['close','dragging','dragstop','resizing','resizestop','activated','deactivated','openGuidePopup'],setup(e,{expose:t,emit:n}){t();const r=e,i=n,{width:o}=vT(),a=ho('dialog_ref'),s=ho('header_ref'),l=Mr(32);function c(){l.value=s.value?.offsetHeight??32}ba((()=>{c()})),HI(window,'resize',(()=>{c()}));const u=Mr({width:0,height:0}),d=Mr(!1),p=Mr(''),f=Mr(1),h={x:0,y:0},m={width:0,height:0},g=Mr(!1),v=Mr(null);function y(){if(!a.value)return;a.value.style.left=`${h.x}px`,a.value.style.top=`${h.y}px`,a.value.style.width=`${m.width}px`;const e=`${l.value}px`;a.value.style.height=b.value?e:`${m.height}px`}const b=Mr(!1);const w=e=>{if('number'==typeof e)return e;if(e.endsWith('vw'))return parseFloat(e)*o.value/100;if(e.endsWith('vh'))return parseFloat(e)*window.innerHeight/100;if(e.endsWith('px'))return parseFloat(e);if(e.endsWith('%'))return parseFloat(e)*o.value/100;if(e.endsWith('rem')){const t=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;return parseFloat(e)*t}return parseFloat(e)||400},k=ut(),x=()=>{const e=k?r.mobileWidth:r.width,t=k?r.mobileHeight:r.height;u.value.width=w(e),u.value.height=w(t),m.width=u.value.width,m.height=u.value.height,f.value=u.value.width/u.value.height};x();const S=AI((e=>{i('dragging',e)}),16),E=AI((e=>{i('resizing',e)}),16),O=()=>{const e=e=>'function'==typeof e?e():'string'==typeof e?w(e):e;return{x:e(k?r.mobileInitialX:r.initialX)||Math.max(0,.1*o.value),y:e(k?r.mobileInitialY:r.initialY)||Math.max(20,.15*window.innerHeight)}},I=O(),T=Mr(I.x),A=Mr(I.y),C=Mr(!1),N=AI((()=>{y()}),16);function P(){return r.storageId?`TH-Dialog-${r.storageId}`:null}const j=P();r.storageId||console.warn('[TH-Dialog] storageId ');const D=r.storageId?fT(`TH-Dialog-${r.storageId}:pos`,{},{mergeDefaults:!0}):Mr({}),R=r.storageId?fT(`TH-Dialog-${r.storageId}:size`,{},{mergeDefaults:!0}):Mr({});function U(e,t,n){const[r,i]=t,[o,a]=n;return'number'==typeof e[r]&&'number'==typeof e[i]?{a:e[r],b:e[i]}:'number'==typeof e[o]&&'number'==typeof e[a]?{a:e[o],b:e[a]}:null}function L(e,t){if(j)try{k?(D.value.mobileLeft=e,D.value.mobileTop=t):(D.value.left=e,D.value.top=t)}catch(LJ){console.warn('[TH-Dialog] :',LJ)}}function V(e,t){if(j)try{k?(R.value.mobileWidth=e,R.value.mobileHeight=t):(R.value.width=e,R.value.height=t)}catch(LJ){console.warn('[TH-Dialog] :',LJ)}}function M(){if(!j)return null;try{const e=U(D.value,k?['mobileLeft','mobileTop']:['left','top'],k?['left','top']:['mobileLeft','mobileTop']);if(e&&'number'==typeof e.a&&'number'==typeof e.b)return{left:e.a,top:e.b}}catch(LJ){console.warn('[TH-Dialog] :',LJ)}return null}function B(){if(!j)return null;try{const e=U(R.value,k?['mobileWidth','mobileHeight']:['width','height'],k?['width','height']:['mobileWidth','mobileHeight']);if(e&&'number'==typeof e.a&&'number'==typeof e.b)return{width:e.a,height:e.b}}catch(LJ){console.warn('[TH-Dialog] :',LJ)}return null}function F(){const e=window.innerWidth,t=window.innerHeight;let n=!1;const r=.95*e,i=.95*t;u.value.width>r&&(u.value.width=r,m.width=r,n=!0),u.value.height>i&&(u.value.height=i,m.height=i,n=!0);const o=e-u.value.width,a=t-(b.value?l.value:u.value.height);T.value<0?(T.value=0,h.x=0,n=!0):T.value>o&&(T.value=Math.max(0,o),h.x=T.value,n=!0),A.value<0?(A.value=0,h.y=0,n=!0):A.value>a&&(A.value=Math.max(0,a),h.y=A.value,n=!0),n&&(y(),L(T.value,A.value),V(u.value.width,u.value.height))}Eo((()=>{const e=M();e&&(T.value=e.left,A.value=e.top),h.x=T.value,h.y=A.value;const t=B();t&&(u.value.width=t.width,u.value.height=t.height,m.width=t.width,m.height=t.height),y(),F()})),function(e,t,n={}){const{window:r=BI,...i}=n;let o;const a=WI((()=>r&&'ResizeObserver'in r)),s=()=>{o&&(o.disconnect(),o=void 0)},l=_a(ks((()=>{const t=qr(e);return Array.isArray(t)?t.map((e=>ZI(e))):[ZI(t)]})),(e=>{if(s(),a.value&&r){o=new ResizeObserver(t);for(const t of e)t&&o.observe(t,i)}}),{immediate:!0,flush:'post'}),c=()=>{s(),l()};cI(c)}(document.body,(()=>{AI((()=>{F()}),100)()}));const Z=(e,t,n,i,o,a)=>{if(!r.edgeSnap||k)return{left:n,top:i,width:o,height:a,snapped:!1};const s=window.innerWidth,l=window.innerHeight,c=r.snapDistance;return e<=c?{left:0,top:0,width:o,height:l,snapped:!0}:e>=s-c?{left:s-o,top:0,width:o,height:l,snapped:!0}:{left:n,top:i,width:o,height:a,snapped:!1}},H={tl:{name:'top-left',cursor:'cursor-nw-resize',class:'z-20 top-0 left-0 h-[5px] w-[5px]',style:{top:'0',left:'0'}},tm:{name:'top',cursor:'cursor-ns-resize',class:'z-10 top-0 left-0 h-[5px]',style:{top:'0',left:'0',width:'100%'}},tr:{name:'top-right',cursor:'cursor-ne-resize',class:'z-20 top-0 right-0 h-[5px] w-[5px]',style:{top:'0',right:'0'}},mr:{name:'right',cursor:'cursor-ew-resize',class:'z-10 top-0 right-0 w-[5px]',style:{top:'0',right:'0',height:'100%'}},br:{name:'bottom-right',cursor:'cursor-nw-resize',class:'z-20 bottom-0 right-0 h-[5px] w-[5px]',style:{bottom:'0',right:'0'}},bm:{name:'bottom',cursor:'cursor-ns-resize',class:'z-10 bottom-0 left-0 h-[5px]',style:{bottom:'0',left:'0',width:'100%'}},bl:{name:'bottom-left',cursor:'cursor-ne-resize',class:'z-20 bottom-0 left-0 h-[5px] w-[5px]',style:{bottom:'0',left:'0'}},ml:{name:'left',cursor:'cursor-ew-resize',class:'z-10 top-0 left-0 w-[5px]',style:{top:'0',left:'0',height:'100%'}}},q=ks((()=>{if(!r.resizable||b.value)return[];const e=r.handles.map((e=>({...H[e],style:{...H[e].style}}))).filter(Boolean),t=e.find((e=>'top'===e.name));t&&(t.style.top='0px',t.style.left='8px',t.style.right='8px',delete t.style.width);const n=e.find((e=>'right'===e.name));n&&(n.style.top='8px',n.style.bottom='8px',delete n.style.height);const i=e.find((e=>'left'===e.name));i&&(i.style.top='8px',i.style.bottom='8px',delete i.style.height);const o=e.find((e=>'bottom'===e.name));return o&&(o.style.left='8px',o.style.right='8px',delete o.style.width),e})),K=ks((()=>({position:'fixed',left:`${T.value}px`,top:`${A.value}px`,width:`${u.value.width}px`,height:b.value?`${l.value}px`:`${u.value.height}px`,zIndex:1e4,userSelect:C.value||d.value?'none':'auto'}))),G=ks((()=>({'dialog-dragging':C.value,'dialog-resizing':d.value,'dialog-resizable':r.resizable}))),W={props:r,emit:i,window_width:o,dialog_ref:a,header_ref:s,header_height:l,updateHeaderHeight:c,dialog_size:u,is_resizing:d,resize_direction:p,initial_aspect_ratio:f,temp_position:h,temp_size:m,was_snapped:g,pre_snap_rect:v,applyTempToDOM:y,is_collapsed:b,toggleCollapse:function(){d.value=!1,p.value='',b.value=!b.value,setTimeout((()=>{F()}),10)},openGuidePopup:function(){i('openGuidePopup')},convertToPixels:w,is_mobile:k,initizeSize:x,throttledEmitDragging:S,throttledEmitResizing:E,getinitPosition:O,initial_position:I,x:T,y:A,is_dragging:C,throttledUpdateUI:N,getStorageKey:P,__storage_key:j,position_storage:D,size_storage:R,pickPersistedValue:U,savePosition:L,saveSize:V,loadPosition:M,loadSize:B,checkAndAdjustBounds:F,startDrag:e=>{if(!r.draggable)return;e.preventDefault(),e.stopPropagation(),C.value=!0;const t=e.clientX,n=e.clientY,o=T.value,s=A.value;let c=!1,d=e.clientX,p=e.clientY;h.x=o,h.y=s;const f=[],y=()=>{C.value=!1;const e=Z(d,p,h.x,h.y,u.value.width,u.value.height);e.snapped?(v.value={left:h.x,top:h.y,width:u.value.width,height:u.value.height},g.value=!0):g.value=!1,T.value=e.left,A.value=e.top,e.snapped&&(u.value.width=e.width,u.value.height=e.height,m.width=e.width,m.height=e.height,h.x=e.left,h.y=e.top,a.value&&(a.value.style.left=`${e.left}px`,a.value.style.top=`${e.top}px`,a.value.style.width=`${e.width}px`,a.value.style.height=b.value?`${l.value}px`:`${e.height}px`)),f.forEach((e=>e())),i('dragstop',{left:T.value,top:A.value,width:u.value.width,height:u.value.height}),L(T.value,A.value)};f.push(HI(document,'pointermove',(e=>{const i=o+(e.clientX-t);let a=s+(e.clientY-n);if(g.value&&!c&&v.value){const t=r.snapDistance,n=e.clientX<=t,i=e.clientX>=window.innerWidth-t;if(!n&&!i){const{width:e,height:t}=v.value;u.value.width=e,u.value.height=t,m.width=e,m.height=t,c=!0,g.value=!1}}const f=window.innerHeight,y=b.value?l.value:m.height;a=Math.max(0,Math.min(a,f-y)),h.x=i,h.y=a,d=e.clientX,p=e.clientY,N(),S({left:i,top:a,width:u.value.width,height:u.value.height})}),{passive:!1}),HI(document,'pointerup',y),HI(document,'pointercancel',y))},checkEdgeSnap:Z,handle_configs:H,enabled_handles:q,startResize:(e,t)=>{if(!r.resizable||b.value)return;t.preventDefault(),t.stopPropagation(),d.value=!0,p.value=e;const n=t.clientX,o=t.clientY,a=u.value.width,s=u.value.height,l=T.value,c=A.value;h.x=l,h.y=c,m.width=a,m.height=s,i('activated');const f=[],g=()=>{d.value=!1,p.value='',T.value=h.x,A.value=h.y,u.value.width=m.width,u.value.height=m.height,f.forEach((e=>e())),i('resizestop',{left:T.value,top:A.value,width:u.value.width,height:u.value.height}),i('deactivated'),V(u.value.width,u.value.height)};f.push(HI(document,'pointermove',(t=>{const i=t.clientX-n,u=t.clientY-o,d=w(r.minWidth),p=r.maxWidth?w(r.maxWidth):1/0,f=w(r.minHeight),g=r.maxHeight?w(r.maxHeight):1/0;let v=a,y=s,b=l,k=c;e.includes('right')&&(v=Math.max(d,a+i),r.maxWidth&&(v=Math.min(p,v))),e.includes('left')&&(v=Math.max(d,a-i),r.maxWidth&&(v=Math.min(p,v)),b=l+(a-v)),e.includes('bottom')&&(y=Math.max(f,s+u),r.maxHeight&&(y=Math.min(g,y))),e.includes('top')&&(y=Math.max(f,s-u),r.maxHeight&&(y=Math.min(g,y)),k=c+(s-y)),h.x=b,h.y=k,m.width=v,m.height=y,N(),E({left:b,top:k,width:v,height:y})}),{passive:!1}),HI(document,'pointerup',g),HI(document,'pointercancel',g))},dialog_style:K,dialog_classes:G,get getSmartThemeQuoteTextColor(){return fc}};return Object.defineProperty(W,'__isScriptSetup',{enumerable:!1,value:!0}),W}}),$V={class:'flex h-full flex-col overflow-hidden rounded-sm bg-(--SmartThemeBlurTintColor) shadow-lg',role:'dialog','aria-modal':'true'},OV={ref:'header_ref',class:'flex flex-shrink-0 items-center justify-between rounded-t-sm bg-(--SmartThemeQuoteColor) px-1 select-none'},IV=['title'],TV=['title'],AV={key:0,class:'flex flex-1 flex-col overflow-hidden'},CV=['onPointerdown'];const NV=sI(EV,[['render',function(e,t,n,r,i,o){return La(),Ba('div',{ref:'dialog_ref',style:Yt(r.dialog_style),class:nn(r.dialog_classes)},[Ga('div',$V,[Ga('div',OV,[Ga('div',{class:'flex-1 cursor-move font-bold',style:Yt([{'touch-action':'none'},{color:r.getSmartThemeQuoteTextColor()??'inherit'}]),onPointerdown:r.startDrag},un(n.title),37),Ga('div',{class:'flex flex-shrink-0 gap-1',style:Yt({color:r.getSmartThemeQuoteTextColor()??'inherit'})},[n.showGuide?(La(),Ba('div',{key:0,class:'flex cursor-pointer items-center justify-center rounded-md border-none bg-transparent text-base!',onClick:r.openGuidePopup},[...t[1]||(t[1]=[Ga('i',{class:'fa-solid fa-question'},null,-1)])])):es('',!0),Ga('div',{class:'relative z-20 flex cursor-pointer items-center justify-center rounded-md border-none bg-transparent text-base!',title:r.is_collapsed?e.t``:e.t``,onClick:r.toggleCollapse},[Ga('i',{class:nn(r.is_collapsed?'fa-solid fa-chevron-down':'fa-solid fa-chevron-up')},null,2)],8,IV),Ga('div',{class:'fa-solid fa-close relative z-20 flex cursor-pointer items-center justify-center rounded-md border-none bg-transparent text-base!',title:e.t``,onClick:t[0]||(t[0]=e=>r.emit('close'))},null,8,TV)],4)],512),r.is_collapsed?es('',!0):(La(),Ba('div',AV,[Do(e.$slots,'default')]))]),(La(!0),Ba(Na,null,jo(r.enabled_handles,(e=>(La(),Ba('div',{key:e.name,class:nn(['absolute opacity-0',e.cursor,e.class,{'opacity-100':n.showHandles}]),style:Yt(e.style),onPointerdown:t=>r.startResize(e.name,t)},null,46,CV)))),128))],6)}],['__file','Dialog.vue']]),PV=fo({__name:'PlayListImporter',props:{onSubmit:{type:Function}},setup(e,{expose:t}){t();const n=e,r=Mr('single'),i=Mr([{url:'',title:''}]),o=Mr(''),a=ks((()=>[{name:'',shouldEmphasize:!0,onClick:l},{name:''}])),s=Mr(!0),l=e=>{let t=[];t='single'===r.value?i.value.filter((e=>''!==e.url.trim())).map((e=>{const t=e.url.trim();return{url:t,title:e.title.trim()||eI(t)}})):o.value.split('\n').map((e=>e.trim())).filter((e=>''!==e)).map((e=>{const t=e.split(',').map((e=>e.trim())),n=t[0];return{url:n,title:t[1]||eI(n)}})),t.length>0&&n.onSubmit?.(t),e()},c={props:n,activeTab:r,items:i,batchText:o,popupButtons:a,isVisible:s,submit:l,addItem:()=>{i.value.push({url:'',title:''})},removeItem:e=>{i.value.splice(e,1)},Popup:Cj};return Object.defineProperty(c,'__isScriptSetup',{enumerable:!1,value:!0}),c}}),jV={class:'flex flex-col gap-0.5'},DV={class:'mb-0.5 flex items-center gap-0.25'},RV={key:0,class:'flex flex-col gap-0.5'},UV={class:'flex w-full gap-0.25'},LV=['onUpdate:modelValue'],zV=['onUpdate:modelValue'],VV=['onClick'],MV={key:1,class:'flex flex-col gap-0.5'};const BV=sI(PV,[['render',function(e,t,n,r,i,o){return La(),Fa(r.Popup,{modelValue:r.isVisible,'onUpdate:modelValue':t[3]||(t[3]=e=>r.isVisible=e),buttons:r.popupButtons,width:'500px'},{default:Ui((()=>[Ga('div',jV,[t[7]||(t[7]=Ga('div',{class:'flex items-center justify-center gap-0.5'},[Ga('h3',null,'')],-1)),Ga('div',DV,[Ga('button',{class:nn(['menu_button interactable flex-1',{'bg-(--SmartThemeQuoteColor)! font-bold filter-none!':'single'===r.activeTab}]),onClick:t[0]||(t[0]=e=>r.activeTab='single')},'  ',2),Ga('button',{class:nn(['menu_button interactable flex-1',{'bg-(--SmartThemeQuoteColor)! font-bold filter-none!':'batch'===r.activeTab}]),onClick:t[1]||(t[1]=e=>r.activeTab='batch')},'  ',2)]),'single'===r.activeTab?(La(),Ba('div',RV,[(La(!0),Ba(Na,null,jo(r.items,((e,n)=>(La(),Ba('div',{key:n,class:'flex items-center gap-0.25'},[Ga('div',UV,[Li(Ga('input',{'onUpdate:modelValue':t=>e.title=t,type:'text',placeholder:'',class:'text_pole flex-1'},null,8,LV),[[_l,e.title]]),Li(Ga('input',{'onUpdate:modelValue':t=>e.url=t,type:'text',placeholder:' URL',class:'text_pole flex-2'},null,8,zV),[[_l,e.url]])]),r.items.length>1?(La(),Ba('button',{key:0,class:'menu_button interactable bg-(--crimson70a)!',onClick:e=>r.removeItem(n)},[...t[4]||(t[4]=[Ga('i',{class:'fa-solid fa-trash'},null,-1)])],8,VV)):es('',!0)])))),128)),Ga('button',{class:'menu_button interactable w-full!',onClick:r.addItem},[...t[5]||(t[5]=[Ga('i',{class:'fa-solid fa-plus'},null,-1),Xa('  ',-1)])])])):'batch'===r.activeTab?(La(),Ba('div',MV,[t[6]||(t[6]=Ga('small',null,' URL  URL, ',-1)),Li(Ga('textarea',{'onUpdate:modelValue':t[2]||(t[2]=e=>r.batchText=e),placeholder:'\nhttps://example.com/audio1.mp3\nhttps://example.com/audio2.mp3,\nhttps://example.com/audio3.mp3',rows:'10',class:'text_pole font-[family-name:var(--monoFontFamily)]!'},null,512),[[_l,r.batchText]])])):es('',!0)])])),_:1},8,['modelValue','buttons'])}],['__file','PlayListImporter.vue']]),FV=fo({__name:'PlayListItemEditor',props:{item:{},onSubmit:{type:Function}},setup(e,{expose:t}){t();const n=e,r=Mr(n.item.url),i=Mr(n.item.title||''),o=ks((()=>[{name:'',shouldEmphasize:!0,onClick:s},{name:''}])),a=Mr(!0),s=e=>{if(!r.value.trim())return;const t=i.value.trim()||eI(r.value);n.onSubmit?.({url:r.value,title:t}),e()},l={props:n,url:r,title:i,popupButtons:o,isVisible:a,submit:s};return Object.defineProperty(l,'__isScriptSetup',{enumerable:!1,value:!0}),l}}),ZV={class:'flex flex-col gap-0.5'},HV={class:'flex flex-col gap-0.5'};const qV=sI(FV,[['render',function(e,t,n,r,i,o){const a=Cj;return La(),Fa(a,{modelValue:r.isVisible,'onUpdate:modelValue':t[2]||(t[2]=e=>r.isVisible=e),buttons:r.popupButtons},{default:Ui((()=>[Ga('div',ZV,[t[6]||(t[6]=Ga('h3',null,'',-1)),Ga('div',HV,[Ga('label',null,[t[3]||(t[3]=Ga('strong',null,'',-1)),t[4]||(t[4]=Ga('small',{class:'block'},'',-1)),Li(Ga('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>r.title=e),type:'text',class:'text_pole',placeholder:''},null,512),[[_l,r.title]])]),Ga('label',null,[t[5]||(t[5]=Ga('strong',null,'',-1)),Li(Ga('input',{'onUpdate:modelValue':t[1]||(t[1]=e=>r.url=e),type:'text',class:'text_pole',placeholder:'',required:''},null,512),[[_l,r.url]])])])])])),_:1},8,['modelValue','buttons'])}],['__file','PlayListItemEditor.vue']]),KV=fo({__name:'PlayListEditor',props:{playlist:{},onSubmit:{type:Function}},setup(e,{expose:t}){t();const n=e,r=Mr([...n.playlist]),i=ks((()=>[{name:'',shouldEmphasize:!0,onClick:a},{name:''}])),o=Mr(!0),a=e=>{n.onSubmit?.(r.value),e()},s={props:n,playlist:r,popupButtons:i,isVisible:o,submit:a,openImporter:()=>{const{open:e}=xj({component:BV,attrs:{onSubmit:e=>{r.value.push(...e)}}});e()},openDeleteConfirm:e=>{const{open:t}=xj({component:Cj,attrs:{buttons:[{name:Se``,shouldEmphasize:!0,onClick:t=>{r.value.splice(e,1),t()}},{name:Se``}]},slots:{default:Se`<div>? </div>`}});t()},editItem:e=>{const{open:t}=xj({component:qV,attrs:{item:r.value[e],onSubmit:t=>{r.value[e]=t}}});t()},Popup:Cj};return Object.defineProperty(s,'__isScriptSetup',{enumerable:!1,value:!0}),s}}),GV={class:'flex flex-col gap-0.5'},WV={key:0,class:'text-center opacity-50'},JV={class:'flex min-w-0 grow items-center gap-0.5 rounded border border-[var(--SmartThemeBorderColor)] px-0.5 py-[1px]'},YV={class:'overflow-hidden break-all text-ellipsis whitespace-nowrap hover:whitespace-normal'},XV={class:'flex flex-shrink-0 items-center gap-0.5'},QV=['onClick'],eM=['onClick'];const tM=sI(KV,[['render',function(e,t,n,r,i,o){const a=To('VueDraggable');return La(),Fa(r.Popup,{modelValue:r.isVisible,'onUpdate:modelValue':t[1]||(t[1]=e=>r.isVisible=e),buttons:r.popupButtons,width:'500px'},{default:Ui((()=>[Ga('div',GV,[Ga('div',{class:'flex items-center justify-center gap-0.5'},[t[3]||(t[3]=Ga('h3',null,'',-1)),Ga('div',{title:'',class:'menu_button menu_button_icon',onClick:r.openImporter},[...t[2]||(t[2]=[Ga('i',{class:'fa-solid fa-file-import'},null,-1)])])]),0===r.playlist.length?(La(),Ba('div',WV,'')):es('',!0),Wa(a,{modelValue:r.playlist,'onUpdate:modelValue':t[0]||(t[0]=e=>r.playlist=e),handle:'.TH-handle',class:'flex flex-col',direction:'vertical','item-key':'id'},{default:Ui((()=>[(La(!0),Ba(Na,null,jo(r.playlist,((e,n)=>(La(),Ba('div',{key:e.url,class:'flex items-center gap-0.5'},[t[6]||(t[6]=Ga('span',{class:'TH-handle flex-shrink-0 cursor-grab select-none active:cursor-grabbing'},'',-1)),Ga('div',JV,[Ga('span',YV,un(e.title),1)]),Ga('div',XV,[Ga('button',{class:'menu_button interactable',onClick:e=>r.editItem(n)},[...t[4]||(t[4]=[Ga('i',{class:'fa-solid fa-pencil'},null,-1)])],8,QV),Ga('button',{class:'menu_button interactable bg-(--crimson70a)!',onClick:e=>r.openDeleteConfirm(n)},[...t[5]||(t[5]=[Ga('i',{class:'fa-solid fa-trash'},null,-1)])],8,eM)])])))),128))])),_:1},8,['modelValue'])])])),_:1},8,['modelValue','buttons'])}],['__file','PlayListEditor.vue']]);var nM,rM;const iM=rD(rM?nM:(rM=1,nM=_)),oM=fo({__name:'Controller',props:Zo({title:{},enabled:{type:Boolean},audioType:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:['update:modelValue'],setup(e,{expose:t}){t();const n=ka(e,'modelValue'),r=e,i=ho('audio'),o=function(e,t={}){e=bI(e),t={...gT,...t};const{document:n=FI}=t,r={passive:!0},i=Br(0),o=Br(0),a=Br(!1),s=Br(1),l=Br(!1),c=Br(!1),u=Br(!1),d=Br(1),p=Br(!1),f=Mr([]),h=Mr([]),m=Br(-1),g=Br(!1),v=Br(!1),y=n&&'pictureInPictureEnabled'in n,b=uI(),w=uI(),k=t=>{hT(e,(e=>{if(t){const n='number'==typeof t?t:t.id;e.textTracks[n].mode='disabled'}else for(let t=0;t<e.textTracks.length;++t)e.textTracks[t].mode='disabled';m.value=-1}))};ba((()=>{if(!n)return;const i=qr(e);if(!i)return;const o=qr(t.src);let a=[];o&&('string'==typeof o?a=[{src:o}]:Array.isArray(o)?a=o:mI(o)&&(a=[o]),i.querySelectorAll('source').forEach((e=>{e.remove()})),a.forEach((({src:e,type:t,media:o})=>{const a=n.createElement('source');a.setAttribute('src',e),a.setAttribute('type',t||''),a.setAttribute('media',o||''),HI(a,'error',b.trigger,r),i.appendChild(a)})),i.load())})),_a([e,s],(()=>{const t=qr(e);t&&(t.volume=s.value)})),_a([e,v],(()=>{const t=qr(e);t&&(t.muted=v.value)})),_a([e,d],(()=>{const t=qr(e);t&&(t.playbackRate=d.value)})),ba((()=>{if(!n)return;const r=qr(t.tracks),i=qr(e);r&&r.length&&i&&(i.querySelectorAll('track').forEach((e=>e.remove())),r.forEach((({default:e,kind:t,label:r,src:o,srcLang:a},s)=>{const l=n.createElement('track');l.default=e||!1,l.kind=t,l.label=r,l.src=o,l.srclang=a,l.default&&(m.value=s),i.appendChild(l)})))}));const{ignoreUpdates:x}=LI(i,(t=>{const n=qr(e);n&&(n.currentTime=t)})),{ignoreUpdates:S}=LI(u,(t=>{const n=qr(e);n&&(t?n.play().catch((e=>{throw w.trigger(e),e})):n.pause())}));HI(e,'timeupdate',(()=>x((()=>i.value=qr(e).currentTime))),r),HI(e,'durationchange',(()=>o.value=qr(e).duration),r),HI(e,'progress',(()=>f.value=function(e){let t=[];for(let n=0;n<e.length;++n)t=[...t,[e.start(n),e.end(n)]];return t}(qr(e).buffered)),r),HI(e,'seeking',(()=>a.value=!0),r),HI(e,'seeked',(()=>a.value=!1),r),HI(e,['waiting','loadstart'],(()=>{l.value=!0,S((()=>u.value=!1))}),r),HI(e,'loadeddata',(()=>l.value=!1),r),HI(e,'playing',(()=>{l.value=!1,c.value=!1,S((()=>u.value=!0))}),r),HI(e,'ratechange',(()=>d.value=qr(e).playbackRate),r),HI(e,'stalled',(()=>p.value=!0),r),HI(e,'ended',(()=>c.value=!0),r),HI(e,'pause',(()=>S((()=>u.value=!1))),r),HI(e,'play',(()=>S((()=>u.value=!0))),r),HI(e,'enterpictureinpicture',(()=>g.value=!0),r),HI(e,'leavepictureinpicture',(()=>g.value=!1),r),HI(e,'volumechange',(()=>{const t=qr(e);t&&(s.value=t.volume,v.value=t.muted)}),r);const E=[],O=_a([e],(()=>{const t=qr(e);t&&(O(),E[0]=HI(t.textTracks,'addtrack',(()=>h.value=mT(t.textTracks)),r),E[1]=HI(t.textTracks,'removetrack',(()=>h.value=mT(t.textTracks)),r),E[2]=HI(t.textTracks,'change',(()=>h.value=mT(t.textTracks)),r))}));return cI((()=>E.forEach((e=>e())))),{currentTime:i,duration:o,waiting:l,seeking:a,ended:c,stalled:p,buffered:f,playing:u,rate:d,volume:s,muted:v,tracks:h,selectedTrack:m,enableTrack:(t,n=!0)=>{hT(e,(e=>{const r='number'==typeof t?t:t.id;n&&k(),e.textTracks[r].mode='showing',m.value=r}))},disableTrack:k,supportsPictureInPicture:y,togglePictureInPicture:()=>new Promise(((t,r)=>{hT(e,(async e=>{y&&(g.value?n.exitPictureInPicture().then(t).catch(r):e.requestPictureInPicture().then(t).catch(r))}))})),isPictureInPicture:g,onSourceError:b.on,onPlaybackError:w.on}}(i,{src:()=>n.value.src}),a=ks({get:()=>r.enabled&&n.value.enabled&&n.value.playing,set:e=>{n.value.playing=e}});UI((()=>n.value.volume),(e=>{e>0&&n.value.muted?n.value.muted=!1:0!==e||n.value.muted||(n.value.muted=!0)}),{debounce:100});{const e=ks({get:()=>{const e=o.duration.value;return!e||isNaN(e)||0===e?0:o.currentTime.value/e*100},set:e=>{o.currentTime.value=e/100*o.duration.value}}),{progress:t,muted:r,volume:i}=Yr(n.value);PI(a,o.playing),PI(t,e),PI(r,o.muted),PI(i,o.volume)}ba((()=>{!n.value.src&&n.value.playlist.length>0&&(n.value.src=n.value.playlist[0].url)}));const{open:s}=xj({component:tM,attrs:{playlist:n.value.playlist,onSubmit:e=>{n.value.playlist=e}}}),l={model:n,props:r,audio_ref:i,controls:o,model_playing:a,onEnded:()=>{switch(o.ended.value=!1,n.value.progress=0,n.value.mode){case'repeat_one':n.value.playing=!0;break;case'repeat_all':{const e=(n.value.playlist.findIndex((e=>e.url===n.value.src))+1)%n.value.playlist.length;n.value.src=n.value.playlist[e].url,n.value.playing=!0;break}case'shuffle':n.value.src=iM.sample(n.value.playlist).url,n.value.playing=!0;break;case'play_one_and_stop':n.value.playing=!1}},openPlayList:s,get audio_mode_enum(){return v_}};return Object.defineProperty(l,'__isScriptSetup',{enumerable:!1,value:!0}),l}}),aM={class:'flex flex-row items-center justify-between'},sM={class:'flex items-center gap-0.5'},lM={class:'flex items-center gap-0.25'},cM={class:'relative h-[5px] w-4 cursor-pointer rounded-full border border-[var(--SmartThemeBorderColor)] bg-[var(--black30a)]'},uM=['disabled'],dM=['disabled'],pM={class:'flex grow items-center'},fM=['disabled'],hM={class:'flex grow items-center gap-0.25'},mM={class:'grow'},gM=['disabled'],vM=['value'],yM={class:'flex items-center gap-0.25'};const bM=sI(oM,[['render',function(e,t,n,r,i,o){return La(),Ba(Na,null,[Ga('div',{class:nn(['flex flex-col gap-0.5',{'opacity-50':!r.model.enabled}])},[Ga('div',aM,[Ga('div',sM,[Ga('label',null,un(r.props.title),1),Ga('div',{class:'cursor-pointer',onClick:t[0]||(t[0]=e=>r.model.enabled=!r.model.enabled)},[Ga('i',{class:nn(['fa-solid',r.model.enabled?'fa-toggle-on':'fa-toggle-off'])},null,2)])]),Ga('div',lM,[Ga('div',{class:'cursor-pointer',onClick:t[1]||(t[1]=e=>r.model.muted=!r.model.muted)},[Ga('i',{class:nn(['fa-solid',[r.model.muted?'fa-volume-xmark':'fa-volume-low']])},null,2)]),Ga('div',cM,[Ga('div',{class:'pointer-events-none absolute top-0 left-0 h-full rounded-full bg-[var(--SmartThemeBodyColor)] transition-all',style:Yt({width:100*r.model.volume+'%'})},null,4),Li(Ga('input',{'onUpdate:modelValue':t[2]||(t[2]=e=>r.model.volume=e),type:'range',min:'0',max:'1',step:'0.01',class:'absolute top-0 left-0 h-full w-full cursor-pointer opacity-0',disabled:!r.props.enabled||!r.model.enabled},null,8,uM),[[_l,r.model.volume,void 0,{number:!0}]])])])]),Ga('div',{class:'flex items-center gap-[10px] rounded-sm border border-(--SmartThemeBorderColor)/50 bg-neutral-900/15 px-0.75 py-0.25',disabled:!r.props.enabled||!r.model.enabled},[Ga('div',null,[Ga('button',{class:'menu_button min-h-2 min-w-2',onClick:t[3]||(t[3]=e=>r.model.playing=!r.model.playing)},[Ga('i',{class:nn(['fa-solid',[r.model_playing?'fa-pause':'fa-play']])},null,2)])]),Ga('div',pM,[Li(Ga('input',{'onUpdate:modelValue':t[4]||(t[4]=e=>r.model.progress=e),type:'range',value:'0',min:'0',max:'100',disabled:!r.props.enabled||!r.model.enabled},null,8,fM),[[_l,r.model.progress]])])],8,dM),Ga('div',hM,[Ga('div',mM,[Li(Ga('select',{'onUpdate:modelValue':t[5]||(t[5]=e=>r.model.src=e),class:'m-0! h-full',disabled:!r.props.enabled||!r.model.enabled},[(La(!0),Ba(Na,null,jo(r.model.playlist,(e=>(La(),Ba('option',{key:e.url,value:e.url},un(e.title),9,vM)))),128))],8,gM),[[Sl,r.model.src]])]),Ga('div',yM,[Ga('div',{class:'menu_button interactable',title:'',onClick:t[6]||(t[6]=(...e)=>r.openPlayList&&r.openPlayList(...e))},[...t[8]||(t[8]=[Ga('i',{class:'fa-solid fa-list-ol'},null,-1)])]),Ga('div',{class:'menu_button interactable',onClick:t[7]||(t[7]=e=>r.model.mode=r.audio_mode_enum[(r.audio_mode_enum.indexOf(r.model.mode)+1)%r.audio_mode_enum.length])},[Ga('i',{class:nn(['fa-solid',[{repeat_all:'fa-repeat',repeat_one:'fa-redo-alt',shuffle:'fa-random',play_one_and_stop:'fa-cancel'}[r.model.mode]]])},null,2)])])])],2),Li(Ga('audio',{ref:'audio',controls:'',onEnded:r.onEnded},null,544),[[Ys,!1]])],64)}],['__file','Controller.vue']]);const _M=sI(fo({__name:'AudioPlayer',setup(e,{expose:t}){t();const{enabled:n}=Yr(LS().settings.audio),r={enabled:n,bgm:YO(),ambient:XO(),Controller:bM};return Object.defineProperty(r,'__isScriptSetup',{enumerable:!1,value:!0}),r}}),[['render',function(e,t,n,r,i,o){const a=hC,s=ST;return La(),Fa(s,{type:'box'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t``),1)])),content:Ui((()=>[Wa(a,{id:'TH-toolbox-audio-player-enabled',modelValue:r.enabled,'onUpdate:modelValue':t[0]||(t[0]=e=>r.enabled=e),onClick:t[1]||(t[1]=Al((()=>{}),['stop']))},null,8,['modelValue'])])),detail:Ui((()=>[Ga('div',{class:nn(['flex max-w-full flex-col gap-1',{'opacity-50':!r.enabled}])},[Wa(r.Controller,{modelValue:r.bgm,'onUpdate:modelValue':t[2]||(t[2]=e=>r.bgm=e),title:e.t``,enabled:r.enabled,'audio-type':'bgm'},null,8,['modelValue','title','enabled']),Wa(r.Controller,{modelValue:r.ambient,'onUpdate:modelValue':t[3]||(t[3]=e=>r.ambient=e),title:e.t``,enabled:r.enabled,'audio-type':'ambient'},null,8,['modelValue','title','enabled'])],2)])),_:1})}],['__file','AudioPlayer.vue']]),wM=fo({__name:'Content',props:{content:{},searchInput:{},matchedOnly:{type:Boolean}},setup(e,{expose:t}){t();const n=e,r=Mr([]),i=Br([]);_a((()=>[n.searchInput,n.matchedOnly]),(([e,t])=>{if(null===e||!t)return;const o=_.concat(0,[...n.content.matchAll(/\n/g)].map((e=>e.index))??[]),a=o.length,s=e=>{let t=0,n=o.length-1;for(;t<=n;){const r=t+n>>>1,i=o[r];if(i===e)return r;i<e?t=r+1:n=r-1}return Math.max(0,t-1)},l=[...n.content.matchAll(e)];if(0===l.length)return r.value=[],void(i.value=[n.content]);const c=_(l).map((e=>({start:Math.max(0,s(e.index)-2),end:Math.min(a-1,s(e.index+e.length-1)+2)}))).sortBy('start').thru((e=>function(e,t){if(0===e.length)return[];const n=[[e[0]]];for(const[r,i]of _.zip(_.dropRight(e),_.drop(e)))t(r,i)?n[n.length-1].push(i):n.push([i]);return n}(e,((e,t)=>e.end>=t.start)))).map((e=>({start:e[0].start,end:e[e.length-1].end}))).value(),u=n.content.split('\n'),d=[];let p=-1;for(const{start:n,end:r}of c){if(n>p+1){const e=p+1,t=n-1;d.push({is_expanded:!1,content:u.slice(e,t+1).join('\n')})}d.push({is_expanded:!0,content:u.slice(n,r+1).join('\n')}),p=r}if(p<a-1){const e=p+1,t=a-1;d.push({is_expanded:!1,content:u.slice(e,t+1).join('\n')})}i.value=d.map((e=>e.content)),r.value=d.map((e=>e.is_expanded))}),{immediate:!0});const o={props:n,NEARBY_LINE_COUNT:2,is_expanded:r,parsed_content:i};return Object.defineProperty(o,'__isScriptSetup',{enumerable:!1,value:!0}),o}}),kM={key:0},xM=['onClick'];const SM=sI(wM,[['render',function(e,t,n,r,i,o){const a=fD;return La(),Fa(a,{query:n.searchInput},{default:Ui((()=>[null!==r.props.searchInput&&r.props.matchedOnly?(La(!0),Ba(Na,{key:0},jo(r.parsed_content,((e,t)=>(La(),Ba(Na,{key:t},[r.is_expanded[t]?(La(),Ba('div',kM,un(e),1)):(La(),Ba('div',{key:1,onClick:e=>r.is_expanded[t]=!0},' '+un((e.match(/\n/g)?.length??0)+1)+' ',9,xM))],64)))),128)):(La(),Ba(Na,{key:1},[Xa(un(n.content),1)],64))])),_:1},8,['query'])}],['__file','Content.vue']]);const EM=function(e,t,n){const{attrs:r,on:i,...o}=t;let a={};return i&&Object.entries(i).forEach((e=>{const[t,n]=e;a[`on${t[0].toUpperCase()+t.slice(1)}`]=n})),xs(e,{...r,...a,...o},n)};const $M=function(e,t,n){const{attrs:r,on:i,...o}=t;let a={};return i&&Object.entries(i).forEach((e=>{const[t,n]=e;a[`on${t[0].toUpperCase()+t.slice(1)}`]=n})),xs(e,{...r,...a,...o},{default:()=>n})};const OM=function(e,t){var n;return null==(n=e.$slots)?void 0:n[t]};function IM(...e){let t='';return e.forEach((e=>{'string'==typeof e?t+=e+';':Array.isArray(e)?t+=IM(...e):'object'==typeof e&&Object.entries(e).forEach((([e,n])=>{n&&(t+=`${e}:${n};`)}))})),t}const TM=fo({name:'ObserverItem',props:{resizeObserver:{type:ResizeObserver,require:!0},id:{type:[String,Number],require:!0}},setup:e=>(e=>{const t=Mr(null);return Eo((()=>{e.resizeObserver&&t.value&&e.resizeObserver.observe(t.value)})),$o((()=>{e.resizeObserver&&t.value&&e.resizeObserver.unobserve(t.value)})),{itemRefEl:t}})(e),render(){var e;const{id:t}=this;return EM('div',{ref:'itemRefEl',attrs:{'data-id':t}},[null==(e=OM(this,'default'))?void 0:e()])}}),AM={itemGap:0,fixed:!1,buffer:0,bufferTop:0,bufferBottom:0,scrollDistance:0,horizontal:!1,fixSelection:!1,start:0,offset:0,listStyle:'',listClass:'',itemStyle:'',itemClass:'',headerClass:'',headerStyle:'',footerClass:'',footerStyle:'',stickyHeaderClass:'',stickyHeaderStyle:'',stickyFooterClass:'',stickyFooterStyle:''};function CM(e,t){const n=new Proxy(e,{get(e,t){var n;return null!=(n=Reflect.get(e,t))?n:Reflect.get(AM,t)}}),r=Mr(null),i=Mr(null),o=Mr(null),a=Mr(null),s=Mr(null),l=Mr(null),c=new Map,u=Mr(0);let d='backward',p=!1,f=!1,h=!1,m=null;const g=Ir({clientSize:0,headerSize:0,footerSize:0,stickyHeaderSize:0,stickyFooterSize:0}),v=Ir({views:0,offset:0,listTotalSize:0,virtualSize:0,inViewBegin:0,inViewEnd:0,renderBegin:0,renderEnd:0,bufferTop:0,bufferBottom:0});function y(){const e=n.horizontal?'scrollLeft':'scrollTop';return r.value?r.value[e]:0}function b(){return v.listTotalSize+g.headerSize+g.footerSize+g.stickyHeaderSize+g.stickyFooterSize}function w(e){var t;return n.fixed?n.minSize+n.itemGap:null!=(t=c.get(String(e)))?t:n.minSize+n.itemGap}function k(e){var t,r;if(n.fixed)return{top:(n.minSize+n.itemGap)*e,current:n.minSize+n.itemGap,bottom:(n.minSize+n.itemGap)*(e+1)};const{itemKey:i}=n;let o=g.headerSize;for(let s=0;s<=e-1;s+=1){o+=w(null==(t=n.list[s])?void 0:t[i])}const a=w(null==(r=n.list[e])?void 0:r[i]);return{top:o,current:a,bottom:o+a}}function x(e){h=!0;const t=n.horizontal?'scrollLeft':'scrollTop';r.value&&(r.value[t]=e)}async function S(e){if(e<0)return;if(e>=n.list.length-1)return void E();let{top:t}=k(e);x(t);const r=()=>{const{top:n}=k(e);if(x(n),t!==n)return t=n,void(m=r);m=null};m=r}async function E(){let e=0;!function t(){e+=1,x(b()),setTimeout((()=>{e>10||Math.abs(Math.round(v.offset+g.clientSize)-Math.round(b()))>2&&t()}),3)}()}function O(e){var r;e<v.inViewBegin&&(p=!0),v.inViewBegin=e,v.inViewEnd=Math.min(e+v.views,n.list.length-1),null==(r=null==t?void 0:t.rangeUpdate)||r.call(t,v.inViewBegin,v.inViewEnd)}function I(){var e,t;const{views:r,offset:i,inViewBegin:o}=v,{itemKey:a}=n,s=i-g.headerSize;let l=o,c=v.virtualSize+R(v.renderBegin,v.inViewBegin);if(s<0)O(0);else{if('forward'===d){if(s>=c)return;for(let t=l-1;t>=0;t-=1){const r=w(null==(e=n.list[t])?void 0:e[a]);if(c-=r,c<=s&&s<c+r){l=t;break}}}if('backward'===d){if(s<=c)return;for(let e=l;e<=n.list.length-1;e+=1){const r=w(null==(t=n.list[e])?void 0:t[a]);if(c<=s&&s<c+r){l=e;break}c+=r}p=!1}l!==v.inViewBegin&&O(l)}}function T(e){var r;null==(r=null==t?void 0:t.scroll)||r.call(t,e);const i=y();i!==v.offset&&(d=i<v.offset?'forward':'backward',v.offset=i,I(),function(){var e,r;const i=Math.max(n.scrollDistance,2);if('forward'===d)v.offset-i<=0&&(null==(e=null==t?void 0:t.toTop)||e.call(t,n.list[0]));else if('backward'===d){const e=Math.round(v.offset+g.clientSize);Math.round(b()-e)<=i&&(null==(r=null==t?void 0:t.toBottom)||r.call(t,n.list[n.list.length-1]))}}())}function A(){!function(){const e=Math.ceil(g.clientSize/(n.minSize+n.itemGap))+1;v.views=e}(),O(v.inViewBegin)}function C(){var e;if(n.fixed)return void(v.listTotalSize=(n.minSize+n.itemGap)*n.list.length);const{itemKey:t}=n;let r=0;for(let i=0;i<=n.list.length-1;i+=1)r+=w(null==(e=n.list[i])?void 0:e[t]);v.listTotalSize=r}function N(){v.offset=0,v.listTotalSize=0,v.virtualSize=0,v.inViewBegin=0,v.inViewEnd=0,v.renderBegin=0,v.renderEnd=0,c.clear(),P()}function P(){u.value+=1}let j;'undefined'!=typeof ResizeObserver&&(j=new ResizeObserver((e=>{var r;let i=0;for(const s of e){const e=s.target.dataset.id;if(e){const l=w(e);let u=0;if(s.borderBoxSize){const e=Array.isArray(s.borderBoxSize)?s.borderBoxSize[0]:s.borderBoxSize;u=n.horizontal?e.inlineSize:e.blockSize}else u=n.horizontal?s.contentRect.width:s.contentRect.height;'client'===e?(g.clientSize=u,A()):'header'===e?g.headerSize=u:'footer'===e?g.footerSize=u:'stickyHeader'===e?g.stickyHeaderSize=u:'stickyFooter'===e?g.stickyFooterSize=u:l!==u&&(o=e,a=u,c.set(String(o),a),i+=u-l,null==(r=null==t?void 0:t.itemResize)||r.call(t,e,u))}}var o,a;v.listTotalSize+=i,m&&m(),!p&&!f||0===i||h||(p=!1,f=!1,x(v.offset+i)),h=!1})));const D=()=>{var e;let t=0;const r=v.renderBegin;for(let i=0;i<r;i++)t+=w(null==(e=n.list[i])?void 0:e[n.itemKey]);v.virtualSize=t};function R(e,t){var r;const i=Math.min(e,t),o=Math.max(e,t);let a=0;for(let s=i;s<o;s+=1)a+=w(null==(r=n.list[s])?void 0:r[n.itemKey]);return a}So((()=>{n.bufferTop?v.bufferTop=n.bufferTop:v.bufferTop=n.buffer,n.bufferBottom?v.bufferBottom=n.bufferBottom:v.bufferBottom=n.buffer})),Eo((()=>{r.value&&(r.value.addEventListener('scroll',T),null==j||j.observe(r.value)),s.value&&(null==j||j.observe(s.value)),l.value&&(null==j||j.observe(l.value)),o.value&&(null==j||j.observe(o.value)),a.value&&(null==j||j.observe(a.value)),n.start?S(n.start):n.offset&&x(n.offset)})),$o((()=>{r.value&&(r.value.removeEventListener('scroll',T),null==j||j.unobserve(r.value),g.clientSize=0),s.value&&(null==j||j.unobserve(s.value),g.stickyHeaderSize=0),l.value&&(null==j||j.unobserve(l.value),g.stickyFooterSize=0),o.value&&(null==j||j.unobserve(o.value),g.headerSize=0),a.value&&(null==j||j.unobserve(a.value),g.footerSize=0)})),_o((()=>{x(v.offset)}));const U=Br([]);return _a((()=>[v.inViewBegin,v.inViewEnd,u.value]),((e,t)=>{if(e&&t){const[t]=e,r=v.renderBegin;let i=t,o=v.inViewEnd;if(i=Math.max(0,i-v.bufferTop),o=Math.min(o+v.bufferBottom,n.list.length-1>0?n.list.length-1:0),null==n?void 0:n.renderControl){const{begin:e,end:r}=n.renderControl(t,v.inViewEnd);i=e,o=r}v.renderBegin=i,v.renderEnd=o,i>r?v.virtualSize+=R(i,r):v.virtualSize-=R(i,r),U.value=n.list.slice(v.renderBegin,v.renderEnd+1)}}),{immediate:!0}),_a((()=>n.list.length),(()=>{n.list.length<=0?N():(C(),O(v.inViewBegin),D(),P())}),{immediate:!0}),{props:n,renderList:U,clientRefEl:r,listRefEl:i,headerRefEl:o,footerRefEl:a,stickyHeaderRefEl:s,stickyFooterRefEl:l,reactiveData:v,slotSize:g,sizesMap:c,resizeObserver:j,getReactiveData:function(){return v},getOffset:y,getSlotSize:function(){return g.headerSize+g.footerSize+g.stickyHeaderSize+g.stickyFooterSize},reset:N,scrollToIndex:S,manualRender:function(e,t){const r=v.renderBegin;v.renderBegin=e,v.renderEnd=t,e>r?v.virtualSize+=R(e,r):v.virtualSize-=R(e,r),U.value=n.list.slice(v.renderBegin,v.renderEnd+1),D()},scrollIntoView:async function(e){var t;const{top:r,bottom:i}=k(e),o=y(),a=y()+g.clientSize,s=w(null==(t=n.list[e])?void 0:t[n.itemKey]);r<o&&o<i&&s<g.clientSize?x(r):r+g.stickyHeaderSize<a&&a<i+g.stickyHeaderSize&&s<g.clientSize?x(i-g.clientSize+g.stickyHeaderSize):(r+g.stickyHeaderSize>=a||i<=o)&&S(e)},scrollToTop:async function(){let e=0;!function t(){e+=1,x(0),setTimeout((()=>{var i;if(e>10)return;const o=n.horizontal?'scrollLeft':'scrollTop';0!==(null==(i=null==r?void 0:r.value)?void 0:i[o])&&t()}),3)}()},scrollToBottom:E,scrollToOffset:x,getItemSize:w,deleteItemSize:function(e){c.delete(String(e))},deletedList2Top:function(e){C();let t=0;e.forEach((e=>{t+=w(e[n.itemKey])})),D(),x(v.offset-t),I()},addedList2Top:function(e){C();let t=0;e.forEach((e=>{t+=w(e[n.itemKey])})),D(),x(v.offset+t),f=!0,h=!1,I()},getItemPosByIndex:k,forceUpdate:P}}const NM=fo({name:'VirtList',emits:{scroll:e=>e,toTop:e=>e,toBottom:e=>e,itemResize:(e,t)=>!0,rangeUpdate:(e,t)=>!0},props:{list:{type:Array,default:()=>[]},itemKey:{type:[String,Number],required:!0},minSize:{type:Number,default:20,required:!0},itemGap:{type:Number,default:0},renderControl:{type:Function,default:void 0},fixed:{type:Boolean,default:!1},buffer:{type:Number,default:0},bufferTop:{type:Number,default:0},bufferBottom:{type:Number,default:0},scrollDistance:{type:Number,default:0},horizontal:{type:Boolean,default:!1},start:{type:Number,default:0},offset:{type:Number,default:0},listStyle:{type:[String,Array,Object],default:''},listClass:{type:[String,Array,Object],default:''},itemStyle:{type:[String,Array,Object,Function],default:''},itemClass:{type:[String,Array,Object,Function],default:''},headerClass:{type:[String,Array,Object],default:''},headerStyle:{type:[String,Array,Object],default:''},footerClass:{type:[String,Array,Object],default:''},footerStyle:{type:[String,Array,Object],default:''},stickyHeaderClass:{type:[String,Array,Object],default:''},stickyHeaderStyle:{type:[String,Array,Object],default:''},stickyFooterClass:{type:[String,Array,Object],default:''},stickyFooterStyle:{type:[String,Array,Object],default:''}},setup(e,t){const n={scroll:e=>{t.emit('scroll',e)},toTop:e=>{t.emit('toTop',e)},toBottom:e=>{t.emit('toBottom',e)},itemResize:(e,n)=>{t.emit('itemResize',e,n)},rangeUpdate:(e,n)=>{t.emit('rangeUpdate',e,n)}};return CM(e,n)},render(){const{renderList:e,reactiveData:t,resizeObserver:n}=this,{itemGap:r,itemKey:i,horizontal:o,listStyle:a,listClass:s,itemStyle:l,itemClass:c,headerClass:u,headerStyle:d,footerClass:p,footerStyle:f,stickyHeaderClass:h,stickyHeaderStyle:m,stickyFooterClass:g,stickyFooterStyle:v}=this.props,{listTotalSize:y,virtualSize:b,renderBegin:w}=t;return EM('div',{ref:'clientRefEl',class:'virt-list__client',style:'width: 100%; height: 100%; overflow: auto;',attrs:{'data-id':'client'}},[(()=>{var e;return OM(this,'stickyHeader')?EM('div',{key:'slot-sticky-header',class:h,style:IM('position: sticky; z-index: 10;',o?'left: 0':'top: 0;',m),ref:'stickyHeaderRefEl',attrs:{'data-id':'stickyHeader'}},[null==(e=OM(this,'stickyHeader'))?void 0:e()]):null})(),(()=>{var e;return OM(this,'header')?EM('div',{key:'slot-header',class:u,style:d,ref:'headerRefEl',attrs:{'data-id':'header'}},[null==(e=OM(this,'header'))?void 0:e()]):null})(),(()=>{var t,u;const d=[];for(let o=0;o<e.length;o+=1){const a=e[o];d.push($M(TM,{key:a[i],class:'function'==typeof c?c(a,o):c,style:IM(r>0?`padding: ${r/2}px 0;`:'','function'==typeof l?l(a,o):l),attrs:{id:a[i],resizeObserver:n}},null==(t=OM(this,'default'))?void 0:t({itemData:a,index:w+o})))}if(0===d.length&&OM(this,'empty')){const e=this.slotSize.clientSize-this.getSlotSize();d.push(EM('div',{key:`slot-empty-${e}`,style:`height: ${e}px`},[null==(u=OM(this,'empty'))?void 0:u()]))}return EM('div',{ref:'listRefEl',class:s,style:o?`will-change: width; min-width: ${y}px; display: flex; ${a}`:`will-change: height; min-height: ${y}px; ${a}`},[EM('div',{style:o?`width: ${b}px; will-change: width;`:`height: ${b}px; will-change: height;`}),d])})(),(()=>{var e;return OM(this,'footer')?EM('div',{key:'slot-footer',class:p,style:f,ref:'footerRefEl',attrs:{'data-id':'footer'}},[null==(e=OM(this,'footer'))?void 0:e()]):null})(),(()=>{var e;return OM(this,'stickyFooter')?EM('div',{key:'slot-sticky-footer',class:g,style:IM('position: sticky; z-index: 10;',o?'right: 0':'bottom: 0;',v),ref:'stickyFooterRefEl',attrs:{'data-id':'stickyFooter'}},[null==(e=OM(this,'stickyFooter'))?void 0:e()]):null})()])}});function PM(e,t){const n=_a((()=>[qr(e),Hr(t)]),(([e,t],n)=>{if(n){const[e,t]=n;c.removeListener(e,t)}c.on(e,t)}),{immediate:!0}),r=()=>{n(),c.removeListener(qr(e),Hr(t))};return cI(r),r}const jM=fo({__name:'PromptViewer',setup(e,{expose:t}){t();const n=Mr(!1),r=ho('teleportTarget'),i=ho('virt_list'),o=Br([]),a=Mr(['system','user','assistant']),s=Mr(null),l=fT('TH-PromptViewer:matched_only',!1),c=ks((()=>_(o.value).filter((e=>a.value.includes(e.role))).filter((e=>null===s.value||s.value.test(e.content))).value())),d=fT('TH-PromptViewer:should_expand_by_default',!1),p=Mr([]);const f=Mr(!1);function h(){f.value||('openai'===G?'no_connection'!==W?(f.value=!0,J('normal')):toastr.error(Se` API, `):toastr.error(Se` API , `))}function m(e,t){t||(f.value&&(B(),f.value=!1),setTimeout((async()=>{o.value=await Promise.all(e.map((async({role:e,content:t},n)=>({id:n,role:e,content:t,token:await dt(t)})))),p.value=_.times(e.length,_.constant(d.value)),i.value?.forceUpdate()})))}h(),LC(Zl,'1.13.4','<=')?PM(u.CHAT_COMPLETION_PROMPT_READY,(e=>{m(e.chat,e.dryRun)})):PM(u.GENERATE_AFTER_DATA,((e,t)=>{m(e.prompt,t)}));const g={is_filter_opened:n,teleportTarget:r,virt_list_ref:i,prompts:o,roles_to_show:a,search_input:s,matched_only:l,filtered_prompts:c,should_expand_by_default:d,is_expanded:p,toggleAll:function(e){p.value=_.times(o.value.length,_.constant(e)),d.value=e},is_refreshing:f,triggerRefresh:h,collectPrompts:m,Content:SM,Teleport:Wi,get VirtList(){return NM}};return Object.defineProperty(g,'__isScriptSetup',{enumerable:!1,value:!0}),g}}),DM={class:'flex h-full flex-col overflow-hidden bg-(--SmartThemeBotMesBlurTintColor) p-1'},RM={class:'z-1 flex-shrink-0 text-wrap'},UM={class:'mb-0.75 flex items-center justify-between p-0.5'},LM={class:'flex flex-col gap-0.25'},zM={class:'text-base font-bold text-(--SmartThemeQuoteColor)'},VM={class:'text-sm text-(--SmartThemeQuoteColor)'},MM={class:'flex items-center gap-1'},BM={class:'my-0.75 flex flex-col gap-0.5 bg-(--grey5020a) p-0.5'},FM={class:'flex items-center gap-0.5'},ZM={class:'pointer-events-auto mr-0.5 flex flex-shrink-0 items-center rounded-sm text-sm whitespace-nowrap text-(--SmartThemeBodyColor)'},HM={for:'prompt-search-compact-mode'},qM={key:0,ref:'teleportTarget',class:'flex items-center gap-0.5'},KM={class:'flex gap-1'},GM={class:'flex items-center gap-0.5'},WM={class:'flex items-center gap-0.5'},JM={class:'flex items-center gap-0.5'},YM={key:0,class:'mt-1 text-center opacity-70'},XM={class:'rounded-md border border-(--SmartThemeBorderColor) p-0.5 text-(--SmartThemeBodyColor)'},QM=['onClick'],eB={class:'mt-0.5 max-h-[40%] overflow-x-hidden overflow-y-auto rounded-b-md leading-[1.4] break-words whitespace-pre-wrap text-(--mainFontSize)'};const tB=sI(jM,[['render',function(e,t,n,r,i,o){const a=nD,s=lI;return La(),Ba('div',DM,[Ga('div',RM,[Ga('div',UM,[Ga('div',LM,[Ga('div',zM,un(e.t`token`)+': '+un(r.filtered_prompts.reduce(((e,t)=>e+t.token),0)),1),Ga('div',VM,un(e.t`${r.filtered_prompts.length}/${r.prompts.length} `),1)]),Ga('div',MM,[Ga('div',{class:'fa-solid fa-expand cursor-pointer',title:'',onClick:t[0]||(t[0]=e=>r.toggleAll(!0))}),Ga('div',{class:'fa-solid fa-compress cursor-pointer',title:'',onClick:t[1]||(t[1]=e=>r.toggleAll(!1))}),Ga('div',{class:nn(['fa-solid fa-rotate-right cursor-pointer text-base duration-200',{'animate-spin':r.is_refreshing}]),title:'',onClick:r.triggerRefresh},null,2)])]),Ga('div',BM,[Ga('div',FM,[Ga('div',{class:'flex h-2 w-2 cursor-pointer items-center justify-center text-(--SmartThemeQuoteColor)',onClick:t[2]||(t[2]=e=>r.is_filter_opened=!r.is_filter_opened)},[...t[8]||(t[8]=[Ga('i',{class:'fa-solid fa-filter'},null,-1)])]),Wa(a,{modelValue:r.search_input,'onUpdate:modelValue':t[3]||(t[3]=e=>r.search_input=e),class:'grow rounded-sm border border-(--SmartThemeBorderColor) bg-transparent text-base text-(--mainTextColor)',placeholder:e.t`...`},null,8,['modelValue','placeholder']),Ga('div',ZM,[Li(Ga('input',{'onUpdate:modelValue':t[4]||(t[4]=e=>r.matched_only=e),type:'checkbox',class:'mr-0.25 mb-0 h-0.75 w-0.75'},null,512),[[wl,r.matched_only]]),Ga('label',HM,un(e.t``),1)])]),r.is_filter_opened?(La(),Ba('div',qM,null,512)):es('',!0),r.teleportTarget?(La(),Fa(Wi,{key:1,to:r.teleportTarget},[Ga('div',KM,[Ga('div',GM,[Li(Ga('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>r.roles_to_show=e),type:'checkbox',value:'system'},null,512),[[wl,r.roles_to_show]]),t[9]||(t[9]=Xa(' system ',-1))]),Ga('div',WM,[Li(Ga('input',{'onUpdate:modelValue':t[6]||(t[6]=e=>r.roles_to_show=e),type:'checkbox',value:'user'},null,512),[[wl,r.roles_to_show]]),t[10]||(t[10]=Xa(' user ',-1))]),Ga('div',JM,[Li(Ga('input',{'onUpdate:modelValue':t[7]||(t[7]=e=>r.roles_to_show=e),type:'checkbox',value:'assistant'},null,512),[[wl,r.roles_to_show]]),t[11]||(t[11]=Xa(' assistant ',-1))])])],8,['to'])):es('',!0)])]),r.is_refreshing?(La(),Ba('div',YM,', ...')):(La(),Fa(r.VirtList,{key:1,ref:'virt_list','item-key':'id',list:r.filtered_prompts,'min-size':20,'item-gap':7},{default:Ui((({itemData:e})=>[Ga('div',XM,[Ga('div',{class:'flex cursor-pointer items-center justify-between rounded-md rounded-b-none',onClick:t=>r.is_expanded[e.id]=!r.is_expanded[e.id]},[Ga('span',null,[t[12]||(t[12]=Xa(' Role: ',-1)),Ga('span',null,un(e.role),1),t[13]||(t[13]=Xa(' | Token: ',-1)),Ga('span',null,un(e.token),1)]),t[14]||(t[14]=Ga('div',{class:'fa-solid fa-circle-chevron-down'},null,-1))],8,QM),r.is_expanded[e.id]?(La(),Ba(Na,{key:0},[Wa(s),Ga('div',eB,[Wa(r.Content,{content:e.content,'search-input':r.search_input,'matched-only':r.matched_only},null,8,['content','search-input','matched-only'])])],64)):es('',!0)])])),_:1},8,['list']))])}],['__file','PromptViewer.vue']]);
/*!
  * vue-tippy v6.7.1
  * (c) 2025 
  * @license MIT
  */var nB='top',rB='bottom',iB='right',oB='left',aB='auto',sB=[nB,rB,iB,oB],lB='start',cB='end',uB='viewport',dB='popper',pB=sB.reduce((function(e,t){return e.concat([t+'-'+lB,t+'-'+cB])}),[]),fB=[].concat(sB,[aB]).reduce((function(e,t){return e.concat([t,t+'-'+lB,t+'-'+cB])}),[]),hB=['beforeRead','read','afterRead','beforeMain','main','afterMain','beforeWrite','write','afterWrite'];function mB(e){return e?(e.nodeName||'').toLowerCase():null}function gB(e){if(null==e)return window;if('[object Window]'!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function vB(e){return e instanceof gB(e).Element||e instanceof Element}function yB(e){return e instanceof gB(e).HTMLElement||e instanceof HTMLElement}function bB(e){return'undefined'!=typeof ShadowRoot&&(e instanceof gB(e).ShadowRoot||e instanceof ShadowRoot)}var _B={name:'applyStyles',enabled:!0,phase:'write',fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];yB(i)&&mB(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?'':t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:'0',top:'0',margin:'0'},arrow:{position:'absolute'},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]='',e}),{});yB(r)&&mB(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:['computeStyles']};function wB(e){return e.split('-')[0]}var kB=Math.max,xB=Math.min,SB=Math.round;function EB(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(yB(e)&&t){var o=e.offsetHeight,a=e.offsetWidth;a>0&&(r=SB(n.width)/a||1),o>0&&(i=SB(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function $B(e){var t=EB(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function OB(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&bB(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function IB(e){return gB(e).getComputedStyle(e)}function TB(e){return['table','td','th'].indexOf(mB(e))>=0}function AB(e){return((vB(e)?e.ownerDocument:e.document)||window.document).documentElement}function CB(e){return'html'===mB(e)?e:e.assignedSlot||e.parentNode||(bB(e)?e.host:null)||AB(e)}function NB(e){return yB(e)&&'fixed'!==IB(e).position?e.offsetParent:null}function PB(e){for(var t=gB(e),n=NB(e);n&&TB(n)&&'static'===IB(n).position;)n=NB(n);return n&&('html'===mB(n)||'body'===mB(n)&&'static'===IB(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf('firefox');if(-1!==navigator.userAgent.indexOf('Trident')&&yB(e)&&'fixed'===IB(e).position)return null;for(var n=CB(e);yB(n)&&['html','body'].indexOf(mB(n))<0;){var r=IB(n);if('none'!==r.transform||'none'!==r.perspective||'paint'===r.contain||-1!==['transform','perspective'].indexOf(r.willChange)||t&&'filter'===r.willChange||t&&r.filter&&'none'!==r.filter)return n;n=n.parentNode}return null}(e)||t}function jB(e){return['top','bottom'].indexOf(e)>=0?'x':'y'}function DB(e,t,n){return kB(e,xB(t,n))}function RB(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function UB(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var LB={name:'arrow',enabled:!0,phase:'main',fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=wB(n.placement),l=jB(s),c=[oB,iB].indexOf(s)>=0?'height':'width';if(o&&a){var u=function(e,t){return RB('number'!=typeof(e='function'==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:UB(e,sB))}(i.padding,n),d=$B(o),p='y'===l?nB:oB,f='y'===l?rB:iB,h=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=PB(o),v=g?'y'===l?g.clientHeight||0:g.clientWidth||0:0,y=h/2-m/2,b=u[p],w=v-d[c]-u[f],k=v/2-d[c]/2+y,x=DB(b,k,w),S=l;n.modifiersData[r]=((t={})[S]=x,t.centerOffset=x-k,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?'[data-popper-arrow]':n;null!=r&&('string'!=typeof r||(r=t.elements.popper.querySelector(r)))&&OB(t.elements.popper,r)&&(t.elements.arrow=r)},requires:['popperOffsets'],requiresIfExists:['preventOverflow']};function zB(e){return e.split('-')[1]}var VB={top:'auto',right:'auto',bottom:'auto',left:'auto'};function MB(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,p=!0===u?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:SB(t*r)/r||0,y:SB(n*r)/r||0}}(a):'function'==typeof u?u(a):a,f=p.x,h=void 0===f?0:f,m=p.y,g=void 0===m?0:m,v=a.hasOwnProperty('x'),y=a.hasOwnProperty('y'),b=oB,w=nB,k=window;if(c){var x=PB(n),S='clientHeight',E='clientWidth';if(x===gB(n)&&'static'!==IB(x=AB(n)).position&&'absolute'===s&&(S='scrollHeight',E='scrollWidth'),i===nB||(i===oB||i===iB)&&o===cB)w=rB,g-=(d&&k.visualViewport?k.visualViewport.height:x[S])-r.height,g*=l?1:-1;if(i===oB||(i===nB||i===rB)&&o===cB)b=iB,h-=(d&&k.visualViewport?k.visualViewport.width:x[E])-r.width,h*=l?1:-1}var O,I=Object.assign({position:s},c&&VB);return l?Object.assign({},I,((O={})[w]=y?'0':'',O[b]=v?'0':'',O.transform=(k.devicePixelRatio||1)<=1?'translate('+h+'px, '+g+'px)':'translate3d('+h+'px, '+g+'px, 0)',O)):Object.assign({},I,((t={})[w]=y?g+'px':'',t[b]=v?h+'px':'',t.transform='',t))}var BB={passive:!0};var FB={left:'right',right:'left',bottom:'top',top:'bottom'};function ZB(e){return e.replace(/left|right|bottom|top/g,(function(e){return FB[e]}))}var HB={start:'end',end:'start'};function qB(e){return e.replace(/start|end/g,(function(e){return HB[e]}))}function KB(e){var t=gB(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function GB(e){return EB(AB(e)).left+KB(e).scrollLeft}function WB(e){var t=IB(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function JB(e){return['html','body','#document'].indexOf(mB(e))>=0?e.ownerDocument.body:yB(e)&&WB(e)?e:JB(CB(e))}function YB(e,t){var n;void 0===t&&(t=[]);var r=JB(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=gB(r),a=i?[o].concat(o.visualViewport||[],WB(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(YB(CB(a)))}function XB(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function QB(e,t){return t===uB?XB(function(e){var t=gB(e),n=AB(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,s=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:i,height:o,x:a+GB(e),y:s}}(e)):vB(t)?function(e){var t=EB(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):XB(function(e){var t,n=AB(e),r=KB(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=kB(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=kB(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+GB(e),l=-r.scrollTop;return'rtl'===IB(i||n).direction&&(s+=kB(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(AB(e)))}function eF(e,t,n){var r='clippingParents'===t?function(e){var t=YB(CB(e)),n=['absolute','fixed'].indexOf(IB(e).position)>=0,r=n&&yB(e)?PB(e):e;return vB(r)?t.filter((function(e){return vB(e)&&OB(e,r)&&'body'!==mB(e)&&(!n||'static'!==IB(e).position)})):[]}(e):[].concat(t),i=[].concat(r,[n]),o=i[0],a=i.reduce((function(t,n){var r=QB(e,n);return t.top=kB(r.top,t.top),t.right=xB(r.right,t.right),t.bottom=xB(r.bottom,t.bottom),t.left=kB(r.left,t.left),t}),QB(e,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function tF(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?wB(i):null,a=i?zB(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case nB:t={x:s,y:n.y-r.height};break;case rB:t={x:s,y:n.y+n.height};break;case iB:t={x:n.x+n.width,y:l};break;case oB:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?jB(o):null;if(null!=c){var u='y'===c?'height':'width';switch(a){case lB:t[c]=t[c]-(n[u]/2-r[u]/2);break;case cB:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function nF(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,a=void 0===o?'clippingParents':o,s=n.rootBoundary,l=void 0===s?uB:s,c=n.elementContext,u=void 0===c?dB:c,d=n.altBoundary,p=void 0!==d&&d,f=n.padding,h=void 0===f?0:f,m=RB('number'!=typeof h?h:UB(h,sB)),g=u===dB?'reference':dB,v=e.rects.popper,y=e.elements[p?g:u],b=eF(vB(y)?y:y.contextElement||AB(e.elements.popper),a,l),w=EB(e.elements.reference),k=tF({reference:w,element:v,placement:i}),x=XB(Object.assign({},v,k)),S=u===dB?x:w,E={top:b.top-S.top+m.top,bottom:S.bottom-b.bottom+m.bottom,left:b.left-S.left+m.left,right:S.right-b.right+m.right},O=e.modifiersData.offset;if(u===dB&&O){var I=O[i];Object.keys(E).forEach((function(e){var t=[iB,rB].indexOf(e)>=0?1:-1,n=[nB,rB].indexOf(e)>=0?'y':'x';E[e]+=I[n]*t}))}return E}function rF(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?fB:l,u=zB(r),d=u?s?pB:pB.filter((function(e){return zB(e)===u})):sB,p=d.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=d);var f=p.reduce((function(t,n){return t[n]=nF(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[wB(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}var iF={name:'flip',enabled:!0,phase:'main',fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,h=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,v=wB(g),y=l||(v===g||!h?[ZB(g)]:function(e){if(wB(e)===aB)return[];var t=ZB(e);return[qB(e),t,qB(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(wB(n)===aB?rF(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,k=t.rects.popper,x=new Map,S=!0,E=b[0],O=0;O<b.length;O++){var I=b[O],T=wB(I),A=zB(I)===lB,C=[nB,rB].indexOf(T)>=0,N=C?'width':'height',P=nF(t,{placement:I,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),j=C?A?iB:oB:A?rB:nB;w[N]>k[N]&&(j=ZB(j));var D=ZB(j),R=[];if(o&&R.push(P[T]<=0),s&&R.push(P[j]<=0,P[D]<=0),R.every((function(e){return e}))){E=I,S=!1;break}x.set(I,R)}if(S)for(var U=function(e){var t=b.find((function(t){var n=x.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return E=t,'break'},L=h?3:1;L>0;L--){if('break'===U(L))break}t.placement!==E&&(t.modifiersData[r]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:['offset'],data:{_skip:!1}};function oF(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function aF(e){return[nB,iB,rB,oB].some((function(t){return e[t]>=0}))}var sF={name:'offset',enabled:!0,phase:'main',requires:['popperOffsets'],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=fB.reduce((function(e,n){return e[n]=function(e,t,n){var r=wB(e),i=[oB,nB].indexOf(r)>=0?-1:1,o='function'==typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[oB,iB].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};var lF={name:'preventOverflow',enabled:!0,phase:'main',fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,f=void 0===p||p,h=n.tetherOffset,m=void 0===h?0:h,g=nF(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=wB(t.placement),y=zB(t.placement),b=!y,w=jB(v),k='x'===w?'y':'x',x=t.modifiersData.popperOffsets,S=t.rects.reference,E=t.rects.popper,O='function'==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,I='number'==typeof O?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(x){if(o){var C,N='y'===w?nB:oB,P='y'===w?rB:iB,j='y'===w?'height':'width',D=x[w],R=D+g[N],U=D-g[P],L=f?-E[j]/2:0,V=y===lB?S[j]:E[j],M=y===lB?-E[j]:-S[j],B=t.elements.arrow,F=f&&B?$B(B):{width:0,height:0},Z=t.modifiersData['arrow#persistent']?t.modifiersData['arrow#persistent'].padding:{top:0,right:0,bottom:0,left:0},H=Z[N],q=Z[P],K=DB(0,S[j],F[j]),G=b?S[j]/2-L-K-H-I.mainAxis:V-K-H-I.mainAxis,W=b?-S[j]/2+L+K+q+I.mainAxis:M+K+q+I.mainAxis,J=t.elements.arrow&&PB(t.elements.arrow),Y=J?'y'===w?J.clientTop||0:J.clientLeft||0:0,X=null!=(C=null==T?void 0:T[w])?C:0,Q=D+W-X,ee=DB(f?xB(R,D+G-X-Y):R,D,f?kB(U,Q):U);x[w]=ee,A[w]=ee-D}if(s){var te,ne='x'===w?nB:oB,re='x'===w?rB:iB,ie=x[k],oe='y'===k?'height':'width',ae=ie+g[ne],se=ie-g[re],le=-1!==[nB,oB].indexOf(v),ce=null!=(te=null==T?void 0:T[k])?te:0,ue=le?ae:ie-S[oe]-E[oe]-ce+I.altAxis,de=le?ie+S[oe]+E[oe]-ce-I.altAxis:se,pe=f&&le?function(e,t,n){var r=DB(e,t,n);return r>n?n:r}(ue,ie,de):DB(f?ue:ae,ie,f?de:se);x[k]=pe,A[k]=pe-ie}t.modifiersData[r]=A}},requiresIfExists:['offset']};function cF(e,t,n){void 0===n&&(n=!1);var r,i,o=yB(t),a=yB(t)&&function(e){var t=e.getBoundingClientRect(),n=SB(t.width)/e.offsetWidth||1,r=SB(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=AB(t),l=EB(e,a),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(o||!o&&!n)&&(('body'!==mB(t)||WB(s))&&(c=(r=t)!==gB(r)&&yB(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:KB(r)),yB(t)?((u=EB(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=GB(s))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function uF(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function dF(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var pF={placement:'bottom',modifiers:[],strategy:'absolute'};function fF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&'function'==typeof e.getBoundingClientRect)}))}function hF(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?pF:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:'bottom',orderedModifiers:[],options:Object.assign({},pF,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s='function'==typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:vB(e)?YB(e):e.contextElement?YB(e.contextElement):[],popper:YB(t)};var u,d,p=function(e){var t=uF(e);return hB.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((u=[].concat(r,i.options.modifiers),d=u.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(d).map((function(e){return d[e]}))));return i.orderedModifiers=p.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if('function'==typeof o){var s=o({state:i,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(fF(t,n)){i.rects={reference:cF(t,PB(n),'fixed'===i.options.strategy),popper:$B(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;'function'==typeof a&&(i=a({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:dF((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!fF(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var mF=hF({defaultModifiers:[{name:'eventListeners',enabled:!0,phase:'write',fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=gB(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener('scroll',n.update,BB)})),s&&l.addEventListener('resize',n.update,BB),function(){o&&c.forEach((function(e){e.removeEventListener('scroll',n.update,BB)})),s&&l.removeEventListener('resize',n.update,BB)}},data:{}},{name:'popperOffsets',enabled:!0,phase:'read',fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=tF({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})},data:{}},{name:'computeStyles',enabled:!0,phase:'beforeWrite',fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:wB(t.placement),variation:zB(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:'fixed'===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,MB(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,MB(Object.assign({},c,{offsets:t.modifiersData.arrow,position:'absolute',adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{'data-popper-placement':t.placement})},data:{}},_B,sF,iF,lF,LB,{name:'hide',enabled:!0,phase:'main',requiresIfExists:['preventOverflow'],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=nF(t,{elementContext:'reference'}),s=nF(t,{altBoundary:!0}),l=oF(a,r),c=oF(s,i,o),u=aF(l),d=aF(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{'data-popper-reference-hidden':u,'data-popper-escaped':d})}}]}),gF='tippy-content',vF='tippy-backdrop',yF='tippy-arrow',bF='tippy-svg-arrow',_F={passive:!0,capture:!0},wF=function(){return document.body};function kF(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function xF(e,t){var n={}.toString.call(e);return 0===n.indexOf('[object')&&n.indexOf(t+']')>-1}function SF(e,t){return'function'==typeof e?e.apply(void 0,t):e}function EF(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function $F(e){return[].concat(e)}function OF(e,t){-1===e.indexOf(t)&&e.push(t)}function IF(e){return e.split('-')[0]}function TF(e){return[].slice.call(e)}function AF(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function CF(){return document.createElement('div')}function NF(e){return['Element','Fragment'].some((function(t){return xF(e,t)}))}function PF(e){return xF(e,'MouseEvent')}function jF(e){return NF(e)?[e]:function(e){return xF(e,'NodeList')}(e)?TF(e):Array.isArray(e)?e:TF(document.querySelectorAll(e))}function DF(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+'ms')}))}function RF(e,t){e.forEach((function(e){e&&e.setAttribute('data-state',t)}))}function UF(e){var t,n=$F(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function LF(e,t,n){var r=t+'EventListener';['transitionend','webkitTransitionEnd'].forEach((function(t){e[r](t,n)}))}function zF(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var VF={isTouch:!1},MF=0;function BF(){VF.isTouch||(VF.isTouch=!0,window.performance&&document.addEventListener('mousemove',FF))}function FF(){var e=performance.now();e-MF<20&&(VF.isTouch=!1,document.removeEventListener('mousemove',FF)),MF=e}function ZF(){var e=document.activeElement;if(function(e){return!(!e||!e._tippy||e._tippy.reference!==e)}(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var HF=!!('undefined'!=typeof window&&'undefined'!=typeof document)&&!!window.msCrypto,qF=Object.assign({appendTo:wF,aria:{content:'auto',expanded:'auto'},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:'',offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:'top',plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:'mouseenter focus',triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:'fade',arrow:!0,content:'',inertia:!1,maxWidth:350,role:'tooltip',theme:'',zIndex:9999}),KF=Object.keys(qF);function GF(e){var t=(e.plugins||[]).reduce((function(t,n){var r,i=n.name,o=n.defaultValue;i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=qF[i])?r:o);return t}),{});return Object.assign({},e,t)}function WF(e,t){var n=Object.assign({},t,{content:SF(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(GF(Object.assign({},qF,{plugins:t}))):KF).reduce((function(t,n){var r=(e.getAttribute('data-tippy-'+n)||'').trim();if(!r)return t;if('content'===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(UJ){t[n]=r}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},qF.aria,n.aria),n.aria={expanded:'auto'===n.aria.expanded?t.interactive:n.aria.expanded,content:'auto'===n.aria.content?t.interactive?null:'describedby':n.aria.content},n}function JF(e,t){e.innerHTML=t}function YF(e){var t=CF();return!0===e?t.className=yF:(t.className=bF,NF(e)?t.appendChild(e):JF(t,e)),t}function XF(e,t){NF(t.content)?(JF(e,''),e.appendChild(t.content)):'function'!=typeof t.content&&(t.allowHTML?JF(e,t.content):e.textContent=t.content)}function QF(e){var t=e.firstElementChild,n=TF(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(gF)})),arrow:n.find((function(e){return e.classList.contains(yF)||e.classList.contains(bF)})),backdrop:n.find((function(e){return e.classList.contains(vF)}))}}function eZ(e){var t=CF(),n=CF();n.className='tippy-box',n.setAttribute('data-state','hidden'),n.setAttribute('tabindex','-1');var r=CF();function i(n,r){var i=QF(t),o=i.box,a=i.content,s=i.arrow;r.theme?o.setAttribute('data-theme',r.theme):o.removeAttribute('data-theme'),'string'==typeof r.animation?o.setAttribute('data-animation',r.animation):o.removeAttribute('data-animation'),r.inertia?o.setAttribute('data-inertia',''):o.removeAttribute('data-inertia'),o.style.maxWidth='number'==typeof r.maxWidth?r.maxWidth+'px':r.maxWidth,r.role?o.setAttribute('role',r.role):o.removeAttribute('role'),n.content===r.content&&n.allowHTML===r.allowHTML||XF(a,e.props),r.arrow?s?n.arrow!==r.arrow&&(o.removeChild(s),o.appendChild(YF(r.arrow))):o.appendChild(YF(r.arrow)):s&&o.removeChild(s)}return r.className=gF,r.setAttribute('data-state','hidden'),XF(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}eZ.$$tippy=!0;var tZ=1,nZ=[],rZ=[];function iZ(e,t){var n,r,i,o,a,s,l,c,u=WF(e,Object.assign({},qF,GF(AF(t)))),d=!1,p=!1,f=!1,h=!1,m=[],g=EF(J,u.interactiveDebounce),v=tZ++,y=(c=u.plugins).filter((function(e,t){return c.indexOf(e)===t})),b={id:v,reference:e,popper:CF(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)},setProps:function(t){if(b.state.isDestroyed)return;D('onBeforeUpdate',[b,t]),G();var n=b.props,r=WF(e,Object.assign({},n,AF(t),{ignoreAttributes:!0}));b.props=r,K(),n.interactiveDebounce!==r.interactiveDebounce&&(L(),g=EF(J,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?$F(n.triggerTarget).forEach((function(e){e.removeAttribute('aria-expanded')})):r.triggerTarget&&e.removeAttribute('aria-expanded');U(),j(),x&&x(n,r);b.popperInstance&&(ee(),ne().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})));D('onAfterUpdate',[b,t])},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=VF.isTouch&&!b.props.touch,i=kF(b.props.duration,0,qF.duration);if(e||t||n||r)return;if(A().hasAttribute('disabled'))return;if(D('onShow',[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,T()&&(k.style.visibility='visible');j(),F(),b.state.isMounted||(k.style.transition='none');if(T()){var o=N();DF([o.box,o.content],0)}s=function(){var e;if(b.state.isVisible&&!h){if(h=!0,k.offsetHeight,k.style.transition=b.props.moveTransition,T()&&b.props.animation){var t=N(),n=t.box,r=t.content;DF([n,r],i),RF([n,r],'visible')}R(),U(),OF(rZ,b),null==(e=b.popperInstance)||e.forceUpdate(),D('onMount',[b]),b.props.animation&&T()&&function(e,t){H(e,t)}(i,(function(){b.state.isShown=!0,D('onShown',[b])}))}},function(){var e,t=b.props.appendTo,n=A();e=b.props.interactive&&t===wF||'parent'===t?n.parentNode:SF(t,[n]);e.contains(k)||e.appendChild(k);b.state.isMounted=!0,ee()}()},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=kF(b.props.duration,1,qF.duration);if(e||t||n)return;if(D('onHide',[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,h=!1,d=!1,T()&&(k.style.visibility='hidden');if(L(),Z(),j(!0),T()){var i=N(),o=i.box,a=i.content;b.props.animation&&(DF([o,a],r),RF([o,a],'hidden'))}R(),U(),b.props.animation?T()&&function(e,t){H(e,(function(){!b.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&t()}))}(r,b.unmount):b.unmount()},hideWithInteractivity:function(e){C().addEventListener('mousemove',g),OF(nZ,g),g(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide();if(!b.state.isMounted)return;te(),ne().forEach((function(e){e._tippy.unmount()})),k.parentNode&&k.parentNode.removeChild(k);rZ=rZ.filter((function(e){return e!==b})),b.state.isMounted=!1,D('onHidden',[b])},destroy:function(){if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),G(),delete e._tippy,b.state.isDestroyed=!0,D('onDestroy',[b])}};if(!u.render)return b;var w=u.render(b),k=w.popper,x=w.onUpdate;k.setAttribute('data-tippy-root',''),k.id='tippy-'+b.id,b.popper=k,e._tippy=b,k._tippy=b;var S=y.map((function(e){return e.fn(b)})),E=e.hasAttribute('aria-expanded');return K(),U(),j(),D('onCreate',[b]),u.showOnCreate&&re(),k.addEventListener('mouseenter',(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),k.addEventListener('mouseleave',(function(){b.props.interactive&&b.props.trigger.indexOf('mouseenter')>=0&&C().addEventListener('mousemove',g)})),b;function O(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function I(){return'hold'===O()[0]}function T(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function A(){return l||e}function C(){var e=A().parentNode;return e?UF(e):document}function N(){return QF(k)}function P(e){return b.state.isMounted&&!b.state.isVisible||VF.isTouch||o&&'focus'===o.type?0:kF(b.props.delay,e?0:1,qF.delay)}function j(e){void 0===e&&(e=!1),k.style.pointerEvents=b.props.interactive&&!e?'':'none',k.style.zIndex=''+b.props.zIndex}function D(e,t,n){var r;(void 0===n&&(n=!0),S.forEach((function(n){n[e]&&n[e].apply(n,t)})),n)&&(r=b.props)[e].apply(r,t)}function R(){var t=b.props.aria;if(t.content){var n='aria-'+t.content,r=k.id;$F(b.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+' '+r:r);else{var i=t&&t.replace(r,'').trim();i?e.setAttribute(n,i):e.removeAttribute(n)}}))}}function U(){!E&&b.props.aria.expanded&&$F(b.props.triggerTarget||e).forEach((function(e){b.props.interactive?e.setAttribute('aria-expanded',b.state.isVisible&&e===A()?'true':'false'):e.removeAttribute('aria-expanded')}))}function L(){C().removeEventListener('mousemove',g),nZ=nZ.filter((function(e){return e!==g}))}function V(t){if(!VF.isTouch||!f&&'mousedown'!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!zF(k,n)){if($F(b.props.triggerTarget||e).some((function(e){return zF(e,n)}))){if(VF.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf('click')>=0)return}else D('onClickOutside',[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),p=!0,setTimeout((function(){p=!1})),b.state.isMounted||Z())}}}function M(){f=!0}function B(){f=!1}function F(){var e=C();e.addEventListener('mousedown',V,!0),e.addEventListener('touchend',V,_F),e.addEventListener('touchstart',B,_F),e.addEventListener('touchmove',M,_F)}function Z(){var e=C();e.removeEventListener('mousedown',V,!0),e.removeEventListener('touchend',V,_F),e.removeEventListener('touchstart',B,_F),e.removeEventListener('touchmove',M,_F)}function H(e,t){var n=N().box;function r(e){e.target===n&&(LF(n,'remove',r),t())}if(0===e)return t();LF(n,'remove',a),LF(n,'add',r),a=r}function q(t,n,r){void 0===r&&(r=!1),$F(b.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})}))}function K(){I()&&(q('touchstart',W,{passive:!0}),q('touchend',Y,{passive:!0})),function(e){return e.split(/\s+/).filter(Boolean)}(b.props.trigger).forEach((function(e){if('manual'!==e)switch(q(e,W),e){case'mouseenter':q('mouseleave',Y);break;case'focus':q(HF?'focusout':'blur',X);break;case'focusin':q('focusout',X)}}))}function G(){m.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)})),m=[]}function W(e){var t,n=!1;if(b.state.isEnabled&&!Q(e)&&!p){var r='focus'===(null==(t=o)?void 0:t.type);o=e,l=e.currentTarget,U(),!b.state.isVisible&&PF(e)&&nZ.forEach((function(t){return t(e)})),'click'===e.type&&(b.props.trigger.indexOf('mouseenter')<0||d)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:re(e),'click'===e.type&&(d=!n),n&&!r&&ie(e)}}function J(e){var t=e.target,n=A().contains(t)||k.contains(t);if('mousemove'!==e.type||!n){var r=ne().concat(k).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:u}:null})).filter(Boolean);(function(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,i=e.popperState,o=e.props.interactiveBorder,a=IF(i.placement),s=i.modifiersData.offset;if(!s)return!0;var l='bottom'===a?s.top.y:0,c='top'===a?s.bottom.y:0,u='right'===a?s.left.x:0,d='left'===a?s.right.x:0,p=t.top-r+l>o,f=r-t.bottom-c>o,h=t.left-n+u>o,m=n-t.right-d>o;return p||f||h||m}))})(r,e)&&(L(),ie(e))}}function Y(e){Q(e)||b.props.trigger.indexOf('click')>=0&&d||(b.props.interactive?b.hideWithInteractivity(e):ie(e))}function X(e){b.props.trigger.indexOf('focusin')<0&&e.target!==A()||b.props.interactive&&e.relatedTarget&&k.contains(e.relatedTarget)||ie(e)}function Q(e){return!!VF.isTouch&&I()!==e.type.indexOf('touch')>=0}function ee(){te();var t=b.props,n=t.popperOptions,r=t.placement,i=t.offset,o=t.getReferenceClientRect,a=t.moveTransition,l=T()?QF(k).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||A()}:e,u={name:'$$tippy',enabled:!0,phase:'beforeWrite',requires:['computeStyles'],fn:function(e){var t=e.state;if(T()){var n=N().box;['placement','reference-hidden','escaped'].forEach((function(e){'placement'===e?n.setAttribute('data-placement',t.placement):t.attributes.popper['data-popper-'+e]?n.setAttribute('data-'+e,''):n.removeAttribute('data-'+e)})),t.attributes.popper={}}}},d=[{name:'offset',options:{offset:i}},{name:'preventOverflow',options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:'flip',options:{padding:5}},{name:'computeStyles',options:{adaptive:!a}},u];T()&&l&&d.push({name:'arrow',options:{element:l,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),b.popperInstance=mF(c,k,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:d}))}function te(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function ne(){return TF(k.querySelectorAll('[data-tippy-root]'))}function re(e){b.clearDelayTimeouts(),e&&D('onTrigger',[b,e]),F();var t=P(!0),r=O(),i=r[0],o=r[1];VF.isTouch&&'hold'===i&&o&&(t=o),t?n=setTimeout((function(){b.show()}),t):b.show()}function ie(e){if(b.clearDelayTimeouts(),D('onUntrigger',[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf('mouseenter')>=0&&b.props.trigger.indexOf('click')>=0&&['mouseleave','mousemove'].indexOf(e.type)>=0&&d)){var t=P(!1);t?r=setTimeout((function(){b.state.isVisible&&b.hide()}),t):i=requestAnimationFrame((function(){b.hide()}))}}else Z()}}function oZ(e,t){void 0===t&&(t={});var n=qF.plugins.concat(t.plugins||[]);document.addEventListener('touchstart',BF,_F),window.addEventListener('blur',ZF);var r=Object.assign({},t,{plugins:n}),i=jF(e).reduce((function(e,t){var n=t&&iZ(t,r);return n&&e.push(n),e}),[]);return NF(e)?i[0]:i}oZ.defaultProps=qF,oZ.setDefaultProps=function(e){Object.keys(e).forEach((function(t){qF[t]=e[t]}))},oZ.currentInput=VF;var aZ=Object.assign({},_B,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:'0',top:'0',margin:'0'},arrow:{position:'absolute'},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),sZ=function(e,t){var n;void 0===t&&(t={});var r,i=e,o=[],a=[],s=t.overrides,l=[],c=!1;function u(){a=i.map((function(e){return $F(e.props.triggerTarget||e.reference)})).reduce((function(e,t){return e.concat(t)}),[])}function d(){o=i.map((function(e){return e.reference}))}function p(e){i.forEach((function(t){e?t.enable():t.disable()}))}function f(e){return i.map((function(t){var n=t.setProps;return t.setProps=function(i){n(i),t.reference===r&&e.setProps(i)},function(){t.setProps=n}}))}function h(e,t){var n=a.indexOf(t);if(t!==r){r=t;var l=(s||[]).concat('content').reduce((function(e,t){return e[t]=i[n].props[t],e}),{});e.setProps(Object.assign({},l,{getReferenceClientRect:'function'==typeof l.getReferenceClientRect?l.getReferenceClientRect:function(){var e;return null==(e=o[n])?void 0:e.getBoundingClientRect()}}))}}p(!1),d(),u();var m={fn:function(){return{onDestroy:function(){p(!0)},onHidden:function(){r=null},onClickOutside:function(e){e.props.showOnCreate&&!c&&(c=!0,r=null)},onShow:function(e){e.props.showOnCreate&&!c&&(c=!0,h(e,o[0]))},onTrigger:function(e,t){h(e,t.currentTarget)}}}},g=oZ(CF(),Object.assign({},function(e,t){var n=Object.assign({},e);return t.forEach((function(e){delete n[e]})),n}(t,['overrides']),{plugins:[m].concat(t.plugins||[]),triggerTarget:a,popperOptions:Object.assign({},t.popperOptions,{modifiers:[].concat((null==(n=t.popperOptions)?void 0:n.modifiers)||[],[aZ])})})),v=g.show;g.show=function(e){if(v(),!r&&null==e)return h(g,o[0]);if(!r||null!=e){if('number'==typeof e)return o[e]&&h(g,o[e]);if(i.indexOf(e)>=0){var t=e.reference;return h(g,t)}return o.indexOf(e)>=0?h(g,e):void 0}},g.showNext=function(){var e=o[0];if(!r)return g.show(0);var t=o.indexOf(r);g.show(o[t+1]||e)},g.showPrevious=function(){var e=o[o.length-1];if(!r)return g.show(e);var t=o.indexOf(r),n=o[t-1]||e;g.show(n)};var y=g.setProps;return g.setProps=function(e){s=e.overrides||s,y(e)},g.setInstances=function(e){p(!0),l.forEach((function(e){return e()})),i=e,p(!1),d(),u(),l=f(g),g.setProps({triggerTarget:a})},l=f(g),g},lZ={name:'animateFill',defaultValue:!1,fn:function(e){var t;if(null==(t=e.props.render)||!t.$$tippy)return{};var n=QF(e.popper),r=n.box,i=n.content,o=e.props.animateFill?function(){var e=CF();return e.className=vF,RF([e],'hidden'),e}():null;return{onCreate:function(){o&&(r.insertBefore(o,r.firstElementChild),r.setAttribute('data-animatefill',''),r.style.overflow='hidden',e.setProps({arrow:!1,animation:'shift-away'}))},onMount:function(){if(o){var e=r.style.transitionDuration,t=Number(e.replace('ms',''));i.style.transitionDelay=Math.round(t/10)+'ms',o.style.transitionDuration=e,RF([o],'visible')}},onShow:function(){o&&(o.style.transitionDuration='0ms')},onHide:function(){o&&RF([o],'hidden')}}}};var cZ={clientX:0,clientY:0},uZ=[];function dZ(e){var t=e.clientX,n=e.clientY;cZ={clientX:t,clientY:n}}var pZ={name:'followCursor',defaultValue:!1,fn:function(e){var t=e.reference,n=UF(e.props.triggerTarget||t),r=!1,i=!1,o=!0,a=e.props;function s(){return'initial'===e.props.followCursor&&e.state.isVisible}function l(){n.addEventListener('mousemove',d)}function c(){n.removeEventListener('mousemove',d)}function u(){r=!0,e.setProps({getReferenceClientRect:null}),r=!1}function d(n){var r=!n.target||t.contains(n.target),i=e.props.followCursor,o=n.clientX,a=n.clientY,s=t.getBoundingClientRect(),l=o-s.left,c=a-s.top;!r&&e.props.interactive||e.setProps({getReferenceClientRect:function(){var e=t.getBoundingClientRect(),n=o,r=a;'initial'===i&&(n=e.left+l,r=e.top+c);var s='horizontal'===i?e.top:r,u='vertical'===i?e.right:n,d='horizontal'===i?e.bottom:r,p='vertical'===i?e.left:n;return{width:u-p,height:d-s,top:s,right:u,bottom:d,left:p}}})}function p(){e.props.followCursor&&(uZ.push({instance:e,doc:n}),function(e){e.addEventListener('mousemove',dZ)}(n))}function f(){0===(uZ=uZ.filter((function(t){return t.instance!==e}))).filter((function(e){return e.doc===n})).length&&function(e){e.removeEventListener('mousemove',dZ)}(n)}return{onCreate:p,onDestroy:f,onBeforeUpdate:function(){a=e.props},onAfterUpdate:function(_,t){var n=t.followCursor;r||void 0!==n&&a.followCursor!==n&&(f(),n?(p(),!e.state.isMounted||i||s()||l()):(c(),u()))},onMount:function(){e.props.followCursor&&!i&&(o&&(d(cZ),o=!1),s()||l())},onTrigger:function(_,e){PF(e)&&(cZ={clientX:e.clientX,clientY:e.clientY}),i='focus'===e.type},onHidden:function(){e.props.followCursor&&(u(),c(),o=!0)}}}};var fZ={name:'inlinePositioning',defaultValue:!1,fn:function(e){var t,n=e.reference;var r=-1,i=!1,o=[],a={name:'tippyInlinePositioning',enabled:!0,phase:'afterWrite',fn:function(i){var a=i.state;e.props.inlinePositioning&&(-1!==o.indexOf(a.placement)&&(o=[]),t!==a.placement&&-1===o.indexOf(a.placement)&&(o.push(a.placement),e.setProps({getReferenceClientRect:function(){return function(e){return function(e,t,n,r){if(n.length<2||null===e)return t;if(2===n.length&&r>=0&&n[0].left>n[1].right)return n[r]||t;switch(e){case'top':case'bottom':var i=n[0],o=n[n.length-1],a='top'===e,s=i.top,l=o.bottom,c=a?i.left:o.left,u=a?i.right:o.right;return{top:s,bottom:l,left:c,right:u,width:u-c,height:l-s};case'left':case'right':var d=Math.min.apply(Math,n.map((function(e){return e.left}))),p=Math.max.apply(Math,n.map((function(e){return e.right}))),f=n.filter((function(t){return'left'===e?t.left===d:t.right===p})),h=f[0].top,m=f[f.length-1].bottom;return{top:h,bottom:m,left:d,right:p,width:p-d,height:m-h};default:return t}}(IF(e),n.getBoundingClientRect(),TF(n.getClientRects()),r)}(a.placement)}})),t=a.placement)}};function s(){var t;i||(t=function(e,t){var n;return{popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat(((null==(n=e.popperOptions)?void 0:n.modifiers)||[]).filter((function(e){return e.name!==t.name})),[t])})}}(e.props,a),i=!0,e.setProps(t),i=!1)}return{onCreate:s,onAfterUpdate:s,onTrigger:function(_,t){if(PF(t)){var n=TF(e.reference.getClientRects()),i=n.find((function(e){return e.left-2<=t.clientX&&e.right+2>=t.clientX&&e.top-2<=t.clientY&&e.bottom+2>=t.clientY})),o=n.indexOf(i);r=o>-1?o:r}},onHidden:function(){r=-1}}}};var hZ={name:'sticky',defaultValue:!1,fn:function(e){var t=e.reference,n=e.popper;function r(t){return!0===e.props.sticky||e.props.sticky===t}var i=null,o=null;function a(){var s=r('reference')?(e.popperInstance?e.popperInstance.state.elements.reference:t).getBoundingClientRect():null,l=r('popper')?n.getBoundingClientRect():null;(s&&mZ(i,s)||l&&mZ(o,l))&&e.popperInstance&&e.popperInstance.update(),i=s,o=l,e.state.isMounted&&requestAnimationFrame(a)}return{onMount:function(){e.props.sticky&&a()}}}};function mZ(e,t){return!e||!t||(e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left)}oZ.setDefaultProps({render:eZ}),oZ.setDefaultProps({onShow:e=>{if(!e.props.content)return!1}});function gZ(e,t={},n={mount:!0,appName:'Tippy'}){n=Object.assign({mount:!0,appName:'Tippy'},n);const r=cs(),i=Mr(),o=Mr({isEnabled:!1,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1}),a=Br();let s=null;const l=()=>s||(s=document.createDocumentFragment(),s),c=e=>{let t,i=Vr(e)?e.value:e;return Za(i)?(a.value||(a.value=Dl({name:n.appName,setup:()=>()=>Vr(e)?e.value:e}),r&&Object.assign(a.value._context,r.appContext),a.value.mount(l())),t=()=>l()):'object'==typeof i?(a.value||(a.value=Dl({name:n.appName,setup:()=>()=>xs(Vr(e)?e.value:e)}),r&&Object.assign(a.value._context,r.appContext),a.value.mount(l())),t=()=>l()):t=i,t},u=e=>{let t={};return t=Vr(e)?e.value||{}:(Nr(e),{...e}),t.content&&(t.content=c(t.content)),t.triggerTarget&&(t.triggerTarget=Vr(t.triggerTarget)?t.triggerTarget.value:t.triggerTarget),t.plugins&&Array.isArray(t.plugins)||(t.plugins=[]),t.plugins=t.plugins.filter((e=>'vueTippyReactiveState'!==e.name)),t.plugins.push({name:'vueTippyReactiveState',fn:()=>({onCreate(){o.value.isEnabled=!0},onMount(){o.value.isMounted=!0},onShow(){o.value.isMounted=!0,o.value.isVisible=!0},onShown(){o.value.isShown=!0},onHide(){o.value.isMounted=!1,o.value.isVisible=!1},onHidden(){o.value.isShown=!1},onUnmounted(){o.value.isMounted=!1},onDestroy(){o.value.isDestroyed=!0}})}),t},d=()=>{i.value&&i.value.setProps(u(t))},p=()=>{i.value&&t.content&&i.value.setContent(c(t.content))},f=()=>{var e;i.value&&(i.value.destroy(),i.value=void 0),s=null,null===(e=a.value)||void 0===e||e.unmount(),a.value=void 0},h=()=>{if(!e)return;let n=Vr(e)?e.value:e;'function'==typeof n&&(n=n()),(e=>e instanceof Object&&'$'in e&&'$el'in e)(n)&&(n=n.$el),n&&(i.value=oZ(n,u(t)),n.$tippy=m)},m={tippy:i,refresh:d,refreshContent:p,setContent:e=>{var t;null===(t=i.value)||void 0===t||t.setContent(c(e))},setProps:e=>{var t;null===(t=i.value)||void 0===t||t.setProps(u(e))},destroy:f,hide:()=>{var e;null===(e=i.value)||void 0===e||e.hide()},show:()=>{var e;null===(e=i.value)||void 0===e||e.show()},disable:()=>{var e;null===(e=i.value)||void 0===e||e.disable(),o.value.isEnabled=!1},enable:()=>{var e;null===(e=i.value)||void 0===e||e.enable(),o.value.isEnabled=!0},unmount:()=>{var e;null===(e=i.value)||void 0===e||e.unmount()},mount:h,state:o};return n.mount&&(r?r.isMounted?h():Eo(h):h()),r&&Oo((()=>{f()})),Vr(t)||Nr(t)?_a(t,d,{immediate:!1}):Vr(t.content)&&_a(t.content,p,{immediate:!1}),m}function vZ(e){var t,n;const r='function'==typeof(i=e)?i():Hr(i);var i;return null!==(n=null===(t=r)||void 0===t?void 0:t.$el)&&void 0!==n?n:r}const yZ=fo({props:{to:{type:[String,Function]},tag:{type:[String,Object],default:'span'},contentTag:{type:[String,Object],default:'span'},contentClass:{type:String,default:null},appendTo:{default:()=>oZ.defaultProps.appendTo},aria:{default:()=>oZ.defaultProps.aria},delay:{default:()=>oZ.defaultProps.delay},duration:{default:()=>oZ.defaultProps.duration},getReferenceClientRect:{default:()=>oZ.defaultProps.getReferenceClientRect},hideOnClick:{type:[Boolean,String],default:()=>oZ.defaultProps.hideOnClick},ignoreAttributes:{type:Boolean,default:()=>oZ.defaultProps.ignoreAttributes},interactive:{type:Boolean,default:()=>oZ.defaultProps.interactive},interactiveBorder:{default:()=>oZ.defaultProps.interactiveBorder},interactiveDebounce:{default:()=>oZ.defaultProps.interactiveDebounce},moveTransition:{default:()=>oZ.defaultProps.moveTransition},offset:{default:()=>oZ.defaultProps.offset},onAfterUpdate:{default:()=>oZ.defaultProps.onAfterUpdate},onBeforeUpdate:{default:()=>oZ.defaultProps.onBeforeUpdate},onCreate:{default:()=>oZ.defaultProps.onCreate},onDestroy:{default:()=>oZ.defaultProps.onDestroy},onHidden:{default:()=>oZ.defaultProps.onHidden},onHide:{default:()=>oZ.defaultProps.onHide},onMount:{default:()=>oZ.defaultProps.onMount},onShow:{default:()=>oZ.defaultProps.onShow},onShown:{default:()=>oZ.defaultProps.onShown},onTrigger:{default:()=>oZ.defaultProps.onTrigger},onUntrigger:{default:()=>oZ.defaultProps.onUntrigger},onClickOutside:{default:()=>oZ.defaultProps.onClickOutside},placement:{default:()=>oZ.defaultProps.placement},plugins:{default:()=>oZ.defaultProps.plugins},popperOptions:{default:()=>oZ.defaultProps.popperOptions},render:{default:()=>oZ.defaultProps.render},showOnCreate:{type:Boolean,default:()=>oZ.defaultProps.showOnCreate},touch:{type:[Boolean,String,Array],default:()=>oZ.defaultProps.touch},trigger:{default:()=>oZ.defaultProps.trigger},triggerTarget:{default:()=>oZ.defaultProps.triggerTarget},animateFill:{type:Boolean,default:()=>oZ.defaultProps.animateFill},followCursor:{type:[Boolean,String],default:()=>oZ.defaultProps.followCursor},inlinePositioning:{type:Boolean,default:()=>oZ.defaultProps.inlinePositioning},sticky:{type:[Boolean,String],default:()=>oZ.defaultProps.sticky},allowHTML:{type:Boolean,default:()=>oZ.defaultProps.allowHTML},animation:{default:()=>oZ.defaultProps.animation},arrow:{default:()=>oZ.defaultProps.arrow},content:{default:()=>oZ.defaultProps.content},inertia:{default:()=>oZ.defaultProps.inertia},maxWidth:{default:()=>oZ.defaultProps.maxWidth},role:{default:()=>oZ.defaultProps.role},theme:{default:()=>oZ.defaultProps.theme},zIndex:{default:()=>oZ.defaultProps.zIndex}},emits:['state'],setup(e,{slots:t,emit:n,expose:r}){const i=Mr(),o=Mr(),a=Mr(),s=Mr(!1),l=()=>{let t={...e};for(const e of['to','tag','contentTag','contentClass'])t.hasOwnProperty(e)&&delete t[e];return t};let c=()=>vZ(i);e.to&&('undefined'!=typeof Element&&e.to instanceof Element?c=()=>e.to:'parent'===e.to?c=()=>{let e=i.value;return e||(e=i.value=o.value.parentElement),e}:('string'==typeof e.to||e.to instanceof String)&&(c=()=>document.querySelector(e.to)));const u=gZ(c,l());let d=t.content;d||'parent'!==e.to||(d=t.default),Eo((()=>{s.value=!0,yi((()=>{d&&u.setContent((()=>a.value))}))})),_a(u.state,(()=>{n('state',Hr(u.state))}),{immediate:!0,deep:!0}),_a((()=>e),(()=>{u.setProps(l()),d&&u.setContent((()=>a.value))}),{deep:!0});let p=Or({elem:i,contentElem:a,mounted:s,...u});return r(p),()=>{const n=(e.contentTag,e.contentTag),r=d?xs(n,{ref:a,style:{display:s.value?'inherit':'none'},class:e.contentClass},d(p)):null;if('parent'===e.to){const e=[];if(!i.value){const t=xs('span',{ref:o,'data-v-tippy':'',style:{display:'none'}});e.push(t)}return r&&e.push(r),e}const l=t.default?t.default(p):[];if(!e.tag){const e=xs(l[0],{ref:i,'data-v-tippy':''});return r?[e,r]:e}return xs((e.tag,e.tag),{ref:i,'data-v-tippy':''},r?[l,r]:l)}}}),bZ=['a11y','allowHTML','arrow','flip','flipOnUpdate','hideOnClick','ignoreAttributes','inertia','interactive','lazy','multiple','showOnInit','touch','touchHold'];let _Z={};Object.keys(oZ.defaultProps).forEach((e=>{bZ.includes(e)?_Z[e]={type:Boolean,default:function(){return oZ.defaultProps[e]}}:_Z[e]={default:function(){return oZ.defaultProps[e]}}}));const wZ=fo({props:_Z,setup(e){const t=Mr([]),{singleton:n}=function(e,t){const n=Mr();return Eo((()=>{const r=(Array.isArray(e)?e.map((e=>e.value)):'function'==typeof e?e():e.value).map((e=>e instanceof Element?e._tippy:e)).filter(Boolean);n.value=sZ(r,t?{allowHTML:!0,...t}:{allowHTML:!0})})),{singleton:n}}(t,e);return{instances:t,singleton:n}},mounted(){var e;const t=this.$el.parentElement.querySelectorAll('[data-v-tippy]');this.instances=Array.from(t).map((e=>e._tippy)).filter(Boolean),null===(e=this.singleton)||void 0===e||e.setInstances(this.instances)},render(){let e=this.$slots.default?this.$slots.default():[];return xs((()=>e))}}),kZ={mounted(e,t,n){const r='string'==typeof t.value?{content:t.value}:t.value||{},i=Object.keys(t.modifiers||{}),o=i.find((e=>'arrow'!==e)),a=-1!==i.findIndex((e=>'arrow'===e));o&&(r.placement=r.placement||o),a&&(r.arrow=void 0===r.arrow||r.arrow),n.props&&n.props.onTippyShow&&(r.onShow=function(...e){var t;return null===(t=n.props)||void 0===t?void 0:t.onTippyShow(...e)}),n.props&&n.props.onTippyShown&&(r.onShown=function(...e){var t;return null===(t=n.props)||void 0===t?void 0:t.onTippyShown(...e)}),n.props&&n.props.onTippyHidden&&(r.onHidden=function(...e){var t;return null===(t=n.props)||void 0===t?void 0:t.onTippyHidden(...e)}),n.props&&n.props.onTippyHide&&(r.onHide=function(...e){var t;return null===(t=n.props)||void 0===t?void 0:t.onTippyHide(...e)}),n.props&&n.props.onTippyMount&&(r.onMount=function(...e){var t;return null===(t=n.props)||void 0===t?void 0:t.onTippyMount(...e)}),e.getAttribute('title')&&!r.content&&(r.content=e.getAttribute('title'),e.removeAttribute('title')),e.getAttribute('content')&&!r.content&&(r.content=e.getAttribute('content')),gZ(e,r)},unmounted(e){e.$tippy?e.$tippy.destroy():e._tippy&&e._tippy.destroy()},updated(e,t){const n='string'==typeof t.value?{content:t.value}:t.value||{};n.content||(n.content=null),e.getAttribute('title')&&!n.content&&(n.content=e.getAttribute('title'),e.removeAttribute('title')),e.getAttribute('content')&&!n.content&&(n.content=e.getAttribute('content')),e.$tippy?e.$tippy.setProps(n||{}):e._tippy&&e._tippy.setProps(n||{})}},xZ={install(e,t={}){oZ.setDefaultProps(t.defaultProps||{}),e.directive(t.directive||'tippy',kZ),e.component(t.component||'tippy',yZ),e.component(t.componentSingleton||'tippy-singleton',wZ)}};(0,oZ.setDefaultProps)({ignoreAttributes:!0,plugins:[hZ,fZ,pZ,lZ]});const SZ=['string','number','boolean','array','object','null'],EZ=mv().trim().min(1,''),$Z=Symbol('TreeSelectionContext'),OZ=Symbol('TreeControlContext'),IZ=fo({__name:'Card',props:Zo({depth:{default:0},typeLabel:{default:void 0},icon:{default:void 0},collapsible:{type:Boolean,default:!0},collapsed:{type:Boolean},defaultCollapsed:{type:Boolean,default:!1},searchInput:{},allowAddChild:{type:Boolean,default:!1}},{name:{},nameModifiers:{}}),emits:Zo(['open-menu','toggle-collapse','update:collapsed','delete','add-child'],['update:name']),setup(e,{expose:t,emit:n}){t();const r=ka(e,'name'),i=e,o=n,a=ks((()=>{const e=r.value;return null==e||''===`${e}`.trim()?'':`${e}`})),s=Mr(i.collapsed??i.defaultCollapsed??!1);_a((()=>i.collapsed),(e=>{void 0!==e&&e!==s.value&&(s.value=e)})),_a((()=>s.value),(e=>{o('update:collapsed',e)}));const l=()=>{if(!i.collapsible)return;const e=!s.value;s.value=e,o('toggle-collapse',e)},c=()=>{i.collapsible&&l()},u=Mr(null),d=Mr(null),p=Mr(null),f=Mr(!1),h=Mr(''),m=Mr(null);let g=null;const v=e=>{if(!e)return null;const t=e.getBoundingClientRect();return{width:`${Math.max(t.width||e.offsetWidth||40,40)}px`,height:`${Math.max(t.height||e.offsetHeight||24,24)}px`}},y=ks((()=>'string'==typeof r.value)),b=ks((()=>{if(m.value)return{width:m.value.width,height:m.value.height}})),w=ks((()=>{const e=['overflow-hidden font-semibold text-ellipsis whitespace-nowrap text-[var(--SmartThemeQuoteColor)]'];return y.value?e.push('cursor-text select-text'):i.collapsible?e.push('cursor-pointer select-none'):e.push('select-none'),e}));let k=null,x=0;const S=()=>{null!==k&&(clearTimeout(k),k=null)},E=()=>{y.value&&(S(),h.value='string'==typeof r.value?r.value:'',m.value=v(d.value),f.value=!0,yi((()=>{p.value&&(p.value.focus(),p.value.select())})),g&&g(),g=KI(p,(()=>{I()})))},O=()=>{f.value=!1,g&&(g(),g=null),m.value=null},I=()=>{if(!f.value)return;if(!y.value)return void O();const e='string'==typeof r.value?r.value:'',t=h.value.trim();t.length?(O(),t!==e&&(r.value=t,toastr.success(Se``,Se``))):toastr.error(Se``,Se``)},T=()=>{f.value&&(h.value='string'==typeof r.value?r.value:'',O())};_a((()=>r.value),(e=>{f.value&&(h.value='string'==typeof e?e:'')}));const A=Jo(OZ,null);A&&(Eo((()=>{i.collapsible&&('expand'===A.lastAction.value?s.value=!1:'collapse'===A.lastAction.value&&(s.value=!0))})),zI((()=>A.collapseAllSignal.value),(()=>{i.collapsible&&(s.value=!0)})),zI((()=>A.expandAllSignal.value),(()=>{i.collapsible&&(s.value=!1)})));const C=[getComputedStyle(document.documentElement).getPropertyValue('--SmartThemeQuoteColor'),'#8b5cf6','#ec4899','#f59e0b','#10b981','#06b6d4'],N=e=>C[e%C.length],P=ks((()=>`vm-card--depth-${Math.min(i.depth??0,5)}`)),j=ks((()=>{const e=i.depth??0;return{width:'2px',backgroundColor:N(e),opacity:.7+.05*e}})),D=ks((()=>document.body)),R=ks((()=>null!==i.searchInput));$o((()=>{S(),g&&(g(),g=null)}));const U={nameModel:r,props:i,emit:o,displayNameFixed:a,isCollapsed:s,toggleCollapse:l,handleTitleClick:c,menuRef:u,handleAddChildClick:()=>{i.allowAddChild&&(o('add-child'),u.value?.hide?.())},handleDeleteClick:()=>{o('delete'),u.value?.hide?.()},nameDisplayRef:d,nameInputRef:p,isEditingName:f,nameDraft:h,nameInputSize:m,get stopNameOutside(){return g},set stopNameOutside(e){g=e},MIN_INPUT_WIDTH:40,MIN_INPUT_HEIGHT:24,SINGLE_CLICK_DELAY:250,DOUBLE_TAP_THRESHOLD:300,computeInputSize:v,canEditName:y,nameInputInlineStyle:b,nameDisplayClass:w,get nameClickTimer(){return k},set nameClickTimer(e){k=e},get lastNameTapTime(){return x},set lastNameTapTime(e){x=e},clearNameClickTimer:S,startNameEditing:E,finishNameEditing:O,saveNameEditing:I,cancelNameEditing:T,handleNameInputKeydown:e=>{'Enter'===e.key?(e.preventDefault(),I()):'Escape'===e.key&&(e.preventDefault(),T())},handleNameClick:e=>{!f.value&&i.collapsible&&(e.detail>1?S():(S(),k=window.setTimeout((()=>{k=null,c()}),250)))},handleNameDoubleClick:()=>{S(),!f.value&&y.value&&E()},handleNameTouchEnd:e=>{if(f.value)return;const t=e.timeStamp;t-x<=300?(e.preventDefault(),e.stopPropagation(),S(),y.value&&E()):i.collapsible&&(S(),k=window.setTimeout((()=>{k=null,c()}),250)),x=t},treeControl:A,depthColors:C,getDepthColor:N,depthClass:P,depthIndicatorStyle:j,appendToElement:D,isSearching:R,onEnter:e=>{const t=e;t.style.height='0',t.style.overflow='hidden',t.style.transition='height 0.2s ease-in-out',requestAnimationFrame((()=>{t.style.height=`${t.scrollHeight}px`}))},onAfterEnter:e=>{const t=e;t.style.height='',t.style.overflow='',t.style.transition=''},onLeave:e=>{const t=e;t.style.height=`${t.scrollHeight}px`,t.style.overflow='hidden',t.style.transition='height 0.2s ease-in-out',requestAnimationFrame((()=>{t.style.height='0'}))},onAfterLeave:e=>{const t=e;t.style.height='',t.style.overflow='',t.style.transition=''},get Tippy(){return yZ}};return Object.defineProperty(U,'__isScriptSetup',{enumerable:!1,value:!0}),U}}),TZ={class:'min-w-0 flex-1 p-0.5'},AZ=['title'],CZ=['title'],NZ={key:0,class:'inline-flex items-center rounded-full bg-[color-mix(in_srgb,var(--SmartThemeQuoteColor)_15%,transparent)] px-0.25 text-[length:8px] text-[var(--SmartThemeQuoteColor)]'},PZ={class:'flex items-center gap-1'},jZ=['title'],DZ={class:'flex flex-col items-start justify-center gap-0.5 rounded-sm bg-(--grey30) px-1 py-0.5 text-sm'},RZ={class:'overflow-visible text-[var(--SmartThemeBodyColor)]'};const UZ=sI(IZ,[['render',function(e,t,n,r,i,o){const a=fD;return La(),Ba('div',{class:nn(['relative flex w-full rounded border border-solid border-[color-mix(in_srgb,var(--SmartThemeQuoteColor)_25%,transparent)] transition-all duration-200 ease-in-out hover:border-[var(--SmartThemeQuoteColor)] hover:bg-[color-mix(in_srgb,var(--SmartThemeQuoteColor)_5%,transparent)] hover:shadow-[0_0_0_1px_color-mix(in_srgb,var(--SmartThemeQuoteColor)_45%,transparent)]',r.depthClass])},[Ga('div',{class:'flex-shrink-0 transition-all duration-200 ease-in-out',style:Yt(r.depthIndicatorStyle)},null,4),Ga('div',TZ,[Ga('div',{class:nn(['flex items-center justify-between gap-2 select-none',{'cursor-pointer':n.collapsible}])},[Ga('div',{class:'flex min-w-0 items-center gap-0.5',onClick:r.handleTitleClick},[n.collapsible?(La(),Ba('div',{key:0,class:'inline-flex flex-shrink-0 cursor-pointer items-center justify-center rounded border-none bg-none text-xs text-[var(--SmartThemeBodyColor)] transition-all duration-200 ease-in-out',type:'button',title:r.isCollapsed?e.t``:e.t``,onClick:Al(r.toggleCollapse,['stop'])},[Ga('i',{class:'fa-solid fa-angle-right',style:Yt({transform:r.isCollapsed?'rotate(0deg)':'rotate(90deg)'})},null,4)],8,AZ)):es('',!0),r.isEditingName?Li((La(),Ba('input',{key:2,ref:'nameInputRef','onUpdate:modelValue':t[0]||(t[0]=e=>r.nameDraft=e),style:Yt(r.nameInputInlineStyle),class:'inline-flex min-w-0 rounded border border-(--SmartThemeQuoteColor)/40 bg-transparent px-0.25 text-sm text-[var(--SmartThemeQuoteColor)] focus:border-(--SmartThemeQuoteColor) focus:outline-none',onKeydown:r.handleNameInputKeydown},null,36)),[[_l,r.nameDraft]]):(La(),Ba('span',{key:1,ref:'nameDisplayRef',class:nn(r.nameDisplayClass),title:r.displayNameFixed,onClick:Al(r.handleNameClick,['stop']),onDblclick:Al(r.handleNameDoubleClick,['stop','prevent']),onTouchend:r.handleNameTouchEnd},[Wa(a,{query:r.props.searchInput},{default:Ui((()=>[Xa(un(r.displayNameFixed),1)])),_:1},8,['query'])],42,CZ)),Do(e.$slots,'tag',{},(()=>[n.typeLabel?(La(),Ba('span',NZ,un(n.typeLabel),1)):es('',!0)]))]),Ga('div',PZ,[Wa(r.Tippy,{ref:'menuRef',trigger:'click',offset:[0,4],interactive:!0,'z-index':99999,'append-to':r.appendToElement},{content:Ui((()=>[Ga('div',DZ,[n.allowAddChild?(La(),Ba('div',{key:0,class:'flex cursor-pointer items-center gap-0.5 text-white',onClick:r.handleAddChildClick},[t[2]||(t[2]=Ga('i',{class:'fa-solid fa-plus'},null,-1)),Ga('span',null,un(e.t``),1)])):es('',!0),Ga('div',{class:'flex cursor-pointer items-center gap-0.5 text-(--warning)',onClick:r.handleDeleteClick},[t[3]||(t[3]=Ga('i',{class:'fa-regular fa-trash-can'},null,-1)),Ga('span',null,un(e.t``),1)])])])),default:Ui((()=>[Ga('div',{class:'inline-flex cursor-pointer items-center justify-center border-none bg-none text-[var(--SmartThemeBodyColor)]',title:e.t``},[...t[1]||(t[1]=[Ga('i',{class:'fa-regular fa-ellipsis'},null,-1)])],8,jZ)])),_:1},8,['append-to'])])],2),Wa(Us,{name:'vm-card-collapse',onEnter:r.onEnter,onAfterEnter:r.onAfterEnter,onLeave:r.onLeave,onAfterLeave:r.onAfterLeave},{default:Ui((()=>[Li(Ga('div',RZ,[Do(e.$slots,'default')],512),[[Ys,!r.isCollapsed]])])),_:3})])],2)}],['__file','Card.vue']]),LZ=fo({__name:'RootVariableCreator',props:{onSubmit:{type:Function}},setup(e,{expose:t}){t();const n=e,r=Mr(!0),i=SZ.map((e=>({value:e,label:'string'===e?'':'number'===e?'':'boolean'===e?'':'array'===e?'':'object'===e?'':'Null'}))),o=Or({key:'',type:'string',stringValue:'',numberValue:'',booleanValue:'true',arrayValue:'[]',objectValue:'{}'}),a=ks((()=>[{name:'',shouldEmphasize:!0,onClick:c},{name:''}])),s=e=>{switch(e){case'string':return{success:!0,data:o.stringValue};case'number':{const e=o.numberValue.toString().trim();return{success:!0,data:''===e?0:Number(e)}}case'boolean':return{success:!0,data:'true'===o.booleanValue};case'array':{const e=o.arrayValue.trim();if(!e)return{success:!1,error:''};try{const t=JSON.parse(e);return Array.isArray(t)?{success:!0,data:t}:{success:!1,error:' JSON '}}catch(Jh){return{success:!1,error:' JSON '}}}case'object':{const e=o.objectValue.trim();if(!e)return{success:!1,error:''};try{const t=JSON.parse(e);return null===t||Array.isArray(t)||'object'!=typeof t?{success:!1,error:' JSON '}:{success:!0,data:t}}catch(Jh){return{success:!1,error:' JSON '}}}case'null':return{success:!0,data:null};default:return{success:!1,error:''}}},l=()=>{o.key='',o.type='string',o.stringValue='',o.numberValue='',o.booleanValue='true',o.arrayValue='[]',o.objectValue='{}'},c=async e=>{if(!o.key||!o.key.trim())return void toastr.error('','');const t=s(o.type);if(!t.success)return void toastr.error(t.error||'','');const r={key:o.key.trim(),type:o.type,value:t.data};!1!==(await(n.onSubmit?.(r))??!0)&&(e(),l())},u={props:n,isVisible:r,typeOptions:i,booleanOptions:[{label:'true',value:'true'},{label:'false',value:'false'}],form:o,popupButtons:a,validateValue:s,resetForm:l,submit:c,Popup:Cj};return Object.defineProperty(u,'__isScriptSetup',{enumerable:!1,value:!0}),u}}),zZ={class:'flex w-full flex-col gap-0.75 text-sm text-(--SmartThemeBodyColor)'},VZ={class:'flex flex-col gap-0.25'},MZ={class:'flex flex-col gap-0.25'},BZ=['value'],FZ={key:0,class:'flex flex-col gap-0.25'},ZZ={key:1,class:'flex flex-col gap-0.25'},HZ={key:2,class:'flex flex-col gap-0.25'},qZ=['value'],KZ={key:3,class:'flex flex-col gap-0.25'},GZ={key:4,class:'flex flex-col gap-0.25'};const WZ=sI(LZ,[['render',function(e,t,n,r,i,o){return La(),Fa(r.Popup,{modelValue:r.isVisible,'onUpdate:modelValue':t[7]||(t[7]=e=>r.isVisible=e),buttons:r.popupButtons},{default:Ui((()=>[Ga('div',zZ,[t[15]||(t[15]=Ga('div',{class:'text-md font-bold'},'',-1)),Ga('div',VZ,[t[8]||(t[8]=Ga('label',{class:'font-semibold'},'',-1)),Li(Ga('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>r.form.key=e),type:'text',class:'text_pole',placeholder:''},null,512),[[_l,r.form.key]])]),Ga('div',MZ,[t[9]||(t[9]=Ga('label',{class:'font-semibold'},'',-1)),Li(Ga('select',{'onUpdate:modelValue':t[1]||(t[1]=e=>r.form.type=e),class:'text_pole'},[(La(!0),Ba(Na,null,jo(r.typeOptions,(e=>(La(),Ba('option',{key:e.value,value:e.value},un(e.label),9,BZ)))),128))],512),[[Sl,r.form.type]])]),'string'===r.form.type?(La(),Ba('div',FZ,[t[10]||(t[10]=Ga('label',{class:'font-semibold'},'',-1)),Li(Ga('textarea',{'onUpdate:modelValue':t[2]||(t[2]=e=>r.form.stringValue=e),rows:'3',class:'text_pole',placeholder:''},null,512),[[_l,r.form.stringValue]])])):'number'===r.form.type?(La(),Ba('div',ZZ,[t[11]||(t[11]=Ga('label',{class:'font-semibold'},'',-1)),Li(Ga('input',{'onUpdate:modelValue':t[3]||(t[3]=e=>r.form.numberValue=e),type:'number',class:'text_pole',placeholder:''},null,512),[[_l,r.form.numberValue]])])):'boolean'===r.form.type?(La(),Ba('div',HZ,[t[12]||(t[12]=Ga('label',{class:'font-semibold'},'',-1)),Li(Ga('select',{'onUpdate:modelValue':t[4]||(t[4]=e=>r.form.booleanValue=e),class:'text_pole'},[(La(),Ba(Na,null,jo(r.booleanOptions,(e=>Ga('option',{key:e.value,value:e.value},un(e.label),9,qZ))),64))],512),[[Sl,r.form.booleanValue]])])):'array'===r.form.type?(La(),Ba('div',KZ,[t[13]||(t[13]=Ga('label',{class:'font-semibold'},'',-1)),Li(Ga('textarea',{'onUpdate:modelValue':t[5]||(t[5]=e=>r.form.arrayValue=e),rows:'4',class:'text_pole font-[family-name:var(--monoFontFamily)]!',placeholder:' JSON  [1, 2, 3]'},null,512),[[_l,r.form.arrayValue]])])):'object'===r.form.type?(La(),Ba('div',GZ,[t[14]||(t[14]=Ga('label',{class:'font-semibold'},'',-1)),Li(Ga('textarea',{'onUpdate:modelValue':t[6]||(t[6]=e=>r.form.objectValue=e),rows:'4',class:'text_pole font-[family-name:var(--monoFontFamily)]!',placeholder:' JSON  {"name": "Tavern"}'},null,512),[[_l,r.form.objectValue]])])):es('',!0)])])),_:1},8,['modelValue','buttons'])}],['__file','RootVariableCreator.vue']]),JZ=()=>({string:!0,number:!0,array:!0,boolean:!0,object:!0}),YZ=(e,t,n=0,r=new WeakSet)=>{const i=(e=>{if(Array.isArray(e))return'array';if(null==e)return'object';const t=typeof e;return'string'===t?'string':'number'===t?'number':'boolean'===t?'boolean':'object'===t?'object':null})(e);if(!i)return!1;if('array'===i){if('object'==typeof e&&null!==e){if(r.has(e))return!1;r.add(e)}const i=Array.isArray(e)?e:[],o=i.some((e=>YZ(e,t,n+1,r)));return t.array?0===i.length||(o||t.array):0===n&&o}if('object'===i){if('object'==typeof e&&null!==e){if(r.has(e))return!1;r.add(e)}const i='object'==typeof e&&null!==e?Object.values(e):[],o=i.some((e=>YZ(e,t,n+1,r)));return t.object?0===i.length||(o||t.object):0===n}return t[i]},XZ=e=>''!==e&&null!=e,QZ=(e,t)=>{if(t instanceof RegExp)try{return t.test(e)}catch{return!1}const n=String(t).toLowerCase();return!!n.length&&e.toLowerCase().includes(n)},eH=e=>{if(null===e)return'null';if(void 0===e)return'undefined';if('string'==typeof e)return e;if('number'==typeof e||'boolean'==typeof e)return String(e);try{return String(e)}catch{return''}},tH=(e,t,n=new WeakSet)=>{if(null==e)return QZ(eH(e),t);const r=typeof e;if('string'===r||'number'===r||'boolean'===r)return QZ(eH(e),t);if(Array.isArray(e)){for(const r of e)if(tH(r,t,n))return!0;return!1}if('object'===r){const r=e;if(n.has(r))return!1;n.add(r);for(const[e,i]of Object.entries(r)){if(QZ(String(e),t))return!0;if(tH(i,t,n))return!0}return!1}return!1},nH=(e,t,n)=>!(void 0===e||!QZ(String(e),n))||tH(t,n),rH=fo({__name:'CardArray',props:Zo({collapsed:{type:Boolean,default:!0},depth:{default:0},filters:{},searchInput:{}},{name:{required:!0},nameModifiers:{},content:{required:!0},contentModifiers:{}}),emits:Zo(['delete'],['update:name','update:content']),setup(e,{expose:t,emit:n}){t();const r=ka(e,'name'),i=ka(e,'content'),o=n,a=e,s=Mr(a.collapsed??!0);_a((()=>a.collapsed),(e=>{void 0!==e&&e!==s.value&&(s.value=e)}));const l=ks((()=>(a.depth??0)+1)),c=Symbol('vmCardArrayDragKey');let u=0;const d=new Map,p=()=>'vm-card-array-item-'+ ++u,f=e=>{const t=Reflect.get(e,c);if(t)return t;const n=p();return Object.defineProperty(e,c,{value:n,enumerable:!1,configurable:!1}),n},h=(e,t)=>{const n=d.get(e)??[];return n[t]||(n[t]=p(),d.set(e,n)),n[t]},m=ks((()=>{const e=new Map;return i.value.map((t=>{if(null!==t&&('object'==typeof t||'function'==typeof t))return f(t);const n=`${typeof t}:${String(t)}`,r=e.get(n)??0;return e.set(n,r+1),h(n,r)}))})),g=ks((()=>i.value.map(((e,t)=>{if(!YZ(e,a.filters,l.value))return!1;if(!XZ(a.searchInput))return!0;const n=a.searchInput;return nH(t,e,n)})))),v=ks((()=>{if(!XZ(a.searchInput))return!1;const e=a.searchInput;return nH(r.value,i.value,e)}));_a((()=>v.value),(e=>{e&&s.value&&(s.value=!1)}),{immediate:!0});const y={name:r,content:i,emit:o,props:a,isCollapsed:s,emitDelete:()=>{o('delete',{name:r.value,content:i.value})},nextDepth:l,DRAG_KEY_SYMBOL:c,get dragKeySeed(){return u},set dragKeySeed(e){u=e},primitiveKeyBuckets:d,createDragKey:p,ensureObjectKey:f,ensurePrimitiveKey:h,itemKeys:m,itemVisibility:g,removeItem:e=>{i.value.splice(e,1)},updateItem:(e,t)=>{const n=Array.isArray(i.value)?[...i.value]:[];n[e]=t,i.value=n},openAddChild:()=>{const{open:e}=xj({component:WZ,attrs:{onSubmit:async e=>{const t=[...Array.isArray(i.value)?i.value:[],e.value];return i.value=t,s.value=!1,toastr.success(Se``),!0}}});e()},searchMatched:v,get VueDraggable(){return Uz},CardBase:UZ,CardMode:hH};return Object.defineProperty(y,'__isScriptSetup',{enumerable:!1,value:!0}),y}}),iH=['data-id'],oH={key:0,class:'px-0 py-2 text-center text-[var(--SmartThemeBodyColor)] opacity-60'};const aH=sI(rH,[['render',function(e,t,n,r,i,o){return La(),Fa(r.CardBase,{name:r.name,'onUpdate:name':t[1]||(t[1]=e=>r.name=e),content:r.content,'onUpdate:content':t[2]||(t[2]=e=>r.content=e),collapsed:r.isCollapsed,'onUpdate:collapsed':t[3]||(t[3]=e=>r.isCollapsed=e),depth:r.props.depth,'type-label':`${e.t`Array`}  ${r.content.length}`,icon:'fa-solid fa-list','search-input':r.props.searchInput,'allow-add-child':!0,onDelete:r.emitDelete,onAddChild:r.openAddChild},{default:Ui((()=>[Wa(r.VueDraggable,{modelValue:r.content,'onUpdate:modelValue':t[0]||(t[0]=e=>r.content=e),class:'mt-0.5 flex min-w-0 flex-col gap-0.5 p-0',direction:'vertical',handle:'.vm-card-array__handle',animation:150,'force-fallback':!0,'fallback-offset':{x:0,y:0},'fallback-on-body':!0,'ghost-class':'opacity-60','chosen-class':'outline outline-1 outline-dashed outline-[var(--SmartThemeQuoteColor)]'},{default:Ui((()=>[(La(!0),Ba(Na,null,jo(r.content,((e,n)=>Li((La(),Ba('div',{key:r.itemKeys[n],class:'flex min-w-0 items-stretch gap-0.5 p-0','data-id':r.itemKeys[n]},[t[4]||(t[4]=Ga('div',{class:'inline-flex flex-shrink-0 cursor-grab items-center justify-center rounded text-sm text-[var(--SmartThemeBodyColor)] transition-colors duration-200 ease-in-out select-none hover:bg-[color-mix(in_srgb,var(--SmartThemeQuoteColor)_15%,transparent)] hover:text-[var(--SmartThemeQuoteColor)]',title:''},'  ',-1)),Wa(r.CardMode,{content:r.content[n],name:n,depth:r.nextDepth,filters:r.props.filters,'search-input':r.props.searchInput,'as-child':!0,'onUpdate:content':e=>r.updateItem(n,e),onDelete:e=>r.removeItem(n)},null,8,['content','name','depth','filters','search-input','onUpdate:content','onDelete'])],8,iH)),[[Ys,r.itemVisibility[n]]]))),128)),0===r.content.length?(La(),Ba('div',oH,'  ')):es('',!0)])),_:1},8,['modelValue'])])),_:1},8,['name','content','collapsed','depth','type-label','search-input'])}],['__file','CardArray.vue']]),sH=fo({__name:'CardObject',props:Zo({collapsed:{type:Boolean,default:!0},depth:{default:0},filters:{},searchInput:{}},{name:{required:!0},nameModifiers:{},content:{required:!0},contentModifiers:{}}),emits:Zo(['delete'],['update:name','update:content']),setup(e,{expose:t,emit:n}){t();const r=ka(e,'name'),i=ka(e,'content'),o=n,a=e,s=ks({get:()=>Object.entries(i.value),set:e=>{i.value=Object.fromEntries(e)}}),l=Mr(a.collapsed??!0);_a((()=>a.collapsed),(e=>{void 0!==e&&e!==l.value&&(l.value=e)}));const c=ks((()=>(a.depth??0)+1)),u=ks((()=>{if(!XZ(a.searchInput))return!1;const e=a.searchInput;return nH(r.value,i.value,e)}));_a((()=>u.value),(e=>{e&&l.value&&(l.value=!1)}),{immediate:!0});const d={name:r,content:i,emit:o,props:a,writable_content:s,isCollapsed:l,emitDelete:()=>{o('delete',{name:r.value,content:i.value})},nextDepth:c,removeField:e=>{const t=Object.entries(i.value).filter((([t])=>t!==e));i.value=Object.fromEntries(t)},updateField:(e,t)=>{i.value={...i.value,[e]:t}},renameField:(e,t)=>{const n=String(t||'').trim();if(!n)return void toastr.error(Se``,Se``);if(e===n)return;if(Object.prototype.hasOwnProperty.call(i.value,n))return void toastr.error(Se``,Se``);const r=Object.entries(i.value??{}).map((([t,r])=>t===e?[n,r]:[t,r]));i.value=Object.fromEntries(r)},openAddChild:()=>{const{open:e}=xj({component:WZ,attrs:{onSubmit:async e=>{const t=String(e.key||'').trim();if(!t)return toastr.error(Se``,Se``),!1;return Object.entries(i.value??{}).some((([e])=>e===t))?(toastr.error(Se``,Se``),!1):(i.value={...i.value,[t]:e.value},l.value=!1,toastr.success(Se``),!0)}}});e()},searchMatched:u,CardBase:UZ,CardMode:hH};return Object.defineProperty(d,'__isScriptSetup',{enumerable:!1,value:!0}),d}}),lH={class:'mt-0.5 flex min-w-0 flex-col gap-0.5 p-0'};const cH=sI(sH,[['render',function(e,t,n,r,i,o){return La(),Fa(r.CardBase,{name:r.name,'onUpdate:name':t[0]||(t[0]=e=>r.name=e),content:r.content,'onUpdate:content':t[1]||(t[1]=e=>r.content=e),collapsed:r.isCollapsed,'onUpdate:collapsed':t[2]||(t[2]=e=>r.isCollapsed=e),depth:r.props.depth,'type-label':e.t`Object`,icon:'fa-regular fa-folder-open','search-input':r.props.searchInput,'allow-add-child':!0,onDelete:r.emitDelete,onAddChild:r.openAddChild},{default:Ui((()=>[Ga('div',lH,[(La(!0),Ba(Na,null,jo(r.writable_content,(e=>(La(),Fa(r.CardMode,{key:e[0],name:e[0],content:e[1],depth:r.nextDepth,filters:r.props.filters,'search-input':r.props.searchInput,'as-child':!0,'onUpdate:name':t=>r.renameField(e[0],t),'onUpdate:content':t=>r.updateField(e[0],t),onDelete:t=>r.removeField(e[0])},null,8,['name','content','depth','filters','search-input','onUpdate:name','onUpdate:content','onDelete'])))),128))])])),_:1},8,['name','content','collapsed','depth','type-label','search-input'])}],['__file','CardObject.vue']]),uH=fo({__name:'CardValue',props:Zo({collapsed:{type:Boolean,default:!1},depth:{default:0},filters:{},searchInput:{}},{name:{required:!0},nameModifiers:{},content:{required:!0},contentModifiers:{}}),emits:Zo(['delete'],['update:name','update:content']),setup(e,{expose:t,emit:n}){t();const r=ka(e,'name'),i=ka(e,'content'),o=n,a=e,s=Mr(a.collapsed??!1);_a((()=>a.collapsed),(e=>{void 0!==e&&e!==s.value&&(s.value=e)}));const l=Mr(null),c=Mr(null),u=Mr(!1),d=Mr(''),p=Mr(null);let f=null;const h=e=>{if(!e)return null;const t=e.getBoundingClientRect();return{width:`${Math.max(t.width||e.offsetWidth||40,40)}px`,height:`${Math.max(t.height||e.offsetHeight||24,24)}px`}},m=ks((()=>{const e=i.value;if(null==e)return'nil';const t=typeof e;return'string'===t||'number'===t||'boolean'===t?t:'string'})),g=ks((()=>{const e=i.value;switch(m.value){case'string':return''===e?'""':String(e);case'number':default:return String(e);case'boolean':return e?'true':'false';case'nil':return null===e?'null':'undefined'}})),v=ks((()=>null!==a.searchInput)),y=ks((()=>{if(!XZ(a.searchInput))return!1;const e=a.searchInput;return nH(r.value,i.value,e)}));_a((()=>y.value),(e=>{e&&s.value&&(s.value=!1)}),{immediate:!0});const b=ks((()=>p.value?{width:p.value.width,height:p.value.height}:{})),w=e=>null===e?'null':void 0===e?'undefined':String(e),k=e=>{const t=e.trim();if('null'===t)return null;if('undefined'!==t){if('true'===t)return!0;if('false'===t)return!1;if(''!==t&&/^-?\d+(\.\d+)?$/.test(t))return Number(t);if(t.startsWith('{')&&t.endsWith('}')||t.startsWith('[')&&t.endsWith(']'))try{return JSON.parse(t)}catch{return e}return e}},x=e=>{const t=m.value,n=e.trim();if('string'===t)return{value:e,success:!0};if('number'===t){if(!n.length)return{value:i.value,success:!1};const t=Number(n);return Number.isNaN(t)?{value:k(e),success:!0}:{value:t,success:!0}}return'boolean'===t?/^(true|false)$/i.test(n)?{value:'true'===n.toLowerCase(),success:!0}:n.length?{value:k(e),success:!0}:{value:i.value,success:!1}:{value:k(e),success:!0}},S=()=>{u.value=!1,f&&(f(),f=null),p.value=null,toastr.success(Se``)},E=()=>{u.value||(d.value=w(i.value),p.value=h(l.value),u.value=!0,yi((()=>{c.value&&(c.value.focus(),c.value.select())})),f&&f(),f=KI(c,(()=>{O()})))},O=()=>{if(!u.value)return;const e=i.value,{value:t,success:n}=x(d.value);S(),n?Object.is(t,e)||(i.value=t):d.value=w(e)},I=()=>{u.value&&(d.value=w(i.value),S())};let T=0;_a((()=>i.value),(e=>{u.value&&(d.value=w(e))})),$o((()=>{f&&(f(),f=null)}));const A={name:r,content:i,emit:o,props:a,isCollapsed:s,valueDisplayRef:l,valueInputRef:c,isEditingValue:u,valueDraft:d,valueInputSize:p,get stopValueOutside(){return f},set stopValueOutside(e){f=e},MIN_INPUT_WIDTH:40,MIN_INPUT_HEIGHT:24,DOUBLE_TAP_THRESHOLD:300,computeInputSize:h,emitDelete:()=>{o('delete',{name:r.value,content:i.value})},contentType:m,formattedValue:g,isSearching:v,searchMatched:y,valueInputInlineStyle:b,formatValueForEdit:w,parseLooseValue:k,coerceValue:x,finishValueEditing:S,startValueEditing:E,saveValueEditing:O,cancelValueEditing:I,handleValueInputKeydown:e=>{'Enter'!==e.key||e.shiftKey?'Escape'===e.key&&(e.preventDefault(),I()):(e.preventDefault(),O())},get lastValueTapTime(){return T},set lastValueTapTime(e){T=e},handleValueTouchEnd:e=>{const t=e.timeStamp;t-T<=300&&(e.preventDefault(),e.stopPropagation(),E()),T=t},CardBase:UZ};return Object.defineProperty(A,'__isScriptSetup',{enumerable:!1,value:!0}),A}}),dH={class:'mt-0.25 text-xs leading-snug break-words break-all whitespace-normal text-(--SmartThemeBodyColor) sm:text-sm sm:leading-relaxed md:text-base md:leading-normal'};const pH=sI(uH,[['render',function(e,t,n,r,i,o){const a=fD;return La(),Fa(r.CardBase,{name:r.name,'onUpdate:name':t[1]||(t[1]=e=>r.name=e),content:r.content,'onUpdate:content':t[2]||(t[2]=e=>r.content=e),collapsed:r.isCollapsed,'onUpdate:collapsed':t[3]||(t[3]=e=>r.isCollapsed=e),depth:r.props.depth,'type-label':'string'===r.contentType?e.t`String`:'number'===r.contentType?e.t`Number`:'boolean'===r.contentType?e.t`Boolean`:e.t`Null`,icon:'string'===r.contentType?'fa-regular fa-font':'number'===r.contentType?'fa-solid fa-hashtag':'boolean'===r.contentType?'fa-solid fa-toggle-on':'fa-regular fa-circle-dot',collapsible:'','search-input':r.props.searchInput,onDelete:r.emitDelete},{default:Ui((()=>[Li(Ga('div',dH,[r.isEditingValue?Li((La(),Ba('textarea',{key:1,ref:'valueInputRef','onUpdate:modelValue':t[0]||(t[0]=e=>r.valueDraft=e),style:Yt(r.valueInputInlineStyle),class:'w-full resize-none rounded border border-(--SmartThemeQuoteColor)/40 bg-transparent px-0.5 py-0.25 text-xs text-(--SmartThemeQuoteColor) focus:border-(--SmartThemeQuoteColor) focus:outline-none sm:text-sm md:text-base',onKeydown:r.handleValueInputKeydown},null,36)),[[_l,r.valueDraft]]):(La(),Ba('div',{key:0,ref:'valueDisplayRef',class:'cursor-text break-words break-all whitespace-pre-wrap',onDblclick:Al(r.startValueEditing,['stop','prevent']),onTouchend:r.handleValueTouchEnd},[Wa(a,{query:r.props.searchInput},{default:Ui((()=>[Xa(un(r.formattedValue),1)])),_:1},8,['query'])],544))],512),[[Ys,!r.isCollapsed]])])),_:1},8,['name','content','collapsed','depth','type-label','icon','search-input'])}],['__file','CardValue.vue']]),fH=fo({__name:'CardMode',props:Zo({depth:{default:0},asChild:{type:Boolean,default:!1},filters:{},searchInput:{}},{name:{required:!0},nameModifiers:{},content:{required:!0},contentModifiers:{}}),emits:Zo(['save','delete'],['update:name','update:content']),setup(e,{expose:t,emit:n}){t();const r=ka(e,'name'),i=ka(e,'content'),o=e,a=e=>Array.isArray(e)?'array':null!==e&&'object'==typeof e?'object':'primitive',s=n,l=ks((()=>a(i.value))),c=ks((()=>'array'===l.value?aH:'object'===l.value?cH:pH)),u=ks((()=>o.asChild?o.depth??0:(o.depth??0)+1)),d=ks((()=>YZ(i.value,o.filters,u.value))),p=ks((()=>{if(!XZ(o.searchInput))return!0;const e=o.searchInput;return nH(r.value,i.value,e)})),f=ks((()=>d.value&&p.value)),h=ks((()=>({depth:o.depth??0,filters:o.filters,searchInput:o.searchInput}))),m={name:r,content:i,props:o,detect:a,emit:s,cardKind:l,resolvedComponent:c,filterDepth:u,filterMatched:d,searchMatched:p,isVisible:f,componentProps:h,handleSave:()=>{s('save',{name:r.value,content:i.value})},handleDelete:()=>{s('delete',{name:r.value,content:i.value})}};return Object.defineProperty(m,'__isScriptSetup',{enumerable:!1,value:!0}),m}});const hH=sI(fH,[['render',function(e,t,n,r,i,o){return Li((La(),Fa(Co(r.resolvedComponent),is({name:r.name,'onUpdate:name':t[0]||(t[0]=e=>r.name=e),content:r.content,'onUpdate:content':t[1]||(t[1]=e=>r.content=e)},r.componentProps,{onSave:r.handleSave,onDelete:r.handleDelete}),null,16,['name','content'])),[[Ys,r.isVisible]])}],['__file','CardMode.vue']]),mH=fo({__name:'TextMode',props:{data:{},searchInput:{}},emits:['update:data'],setup(e,{expose:t,emit:n}){t();const r=e,i=n,o=Mr(null),a=Mr(null),s=Mr(''),l=Mr(!1),c=Mr(!1),u=ks((()=>null!==r.searchInput)),d=e=>{try{return JSON.stringify(e,null,2)}catch(Jh){return console.error('Failed to format data:',Jh),'{}'}},p=e=>{try{return{data:JSON.parse(e),success:!0}}catch(Jh){return{data:null,success:!1,error:Jh instanceof Error?Jh.message:'Unknown error'}}},f=()=>{if(!l.value)return;const{data:e,success:t,error:n}=p(s.value);if(!t)return toastr.error(`JSON : ${n||''}`),s.value=d(r.data),void(l.value=!1);if(Array.isArray(r.data)!==Array.isArray(e))return toastr.error(''),s.value=d(r.data),void(l.value=!1);i('update:data',e),l.value=!1,toastr.success('')};_a((()=>r.data),(e=>{l.value||(s.value=d(e),c.value||(c.value=!0))}),{immediate:!0,deep:!0}),_a(s,(()=>{c.value&&(l.value=!0)}));const h=KI(o,(()=>{f()}));function m(){const e=o.value,t=a.value;if(!e||!t)return;const n=window.getComputedStyle(e),r=['font-size','line-height','padding-top','padding-right','padding-bottom','padding-left','border-top-width','border-right-width','border-bottom-width','border-left-width','border-top-style','border-right-style','border-bottom-style','border-left-style','border-top-color','border-right-color','border-bottom-color','border-left-color','border-radius','background-color'];for(const i of r){const e=n.getPropertyValue(i);e&&t.style.setProperty(i,e)}t.style.whiteSpace='pre-wrap',t.style.overflow='auto'}$o((()=>{h&&h()})),_a(u,(async e=>{await yi(),e?(m(),o.value&&a.value&&(a.value.scrollTop=o.value.scrollTop,a.value.scrollLeft=o.value.scrollLeft)):o.value&&a.value&&(o.value.scrollTop=a.value.scrollTop,o.value.scrollLeft=a.value.scrollLeft)})),Eo((()=>{u.value&&yi(m)}));const g={props:r,emit:i,textareaRef:o,highlightRef:a,textContent:s,isDirty:l,isInitialized:c,isSearching:u,formatDataToText:d,parseTextToData:p,handleSave:f,stopClickOutside:h,copyTextareaStyles:m};return Object.defineProperty(g,'__isScriptSetup',{enumerable:!1,value:!0}),g}}),gH={class:'relative h-full w-full overflow-hidden'},vH={ref:'highlightRef',class:'absolute inset-0 overflow-auto whitespace-pre-wrap'};const yH=sI(mH,[['render',function(e,t,n,r,i,o){const a=fD;return La(),Ba('div',gH,[Li(Ga('textarea',{ref:'textareaRef','onUpdate:modelValue':t[0]||(t[0]=e=>r.textContent=e),class:'absolute inset-0 h-full w-full resize-none! text-sm!',spellcheck:'false',onBlur:r.handleSave},null,544),[[Ys,!r.isSearching],[_l,r.textContent]]),Li(Ga('div',vH,[Wa(a,{query:r.props.searchInput},{default:Ui((()=>[Xa(un(r.textContent),1)])),_:1},8,['query'])],512),[[Ys,r.isSearching]])])}],['__file','TextMode.vue']]),bH=fo({name:'TreeMode',__name:'TreeMode',props:{data:{type:[Object,Array,String,Number,Boolean,null]},filters:{},searchInput:{},path:{default:()=>[]},depth:{default:0},nodeKey:{default:null},parentType:{default:null}},emits:['update:data','rename-key','delete-self'],setup(e,{expose:t,emit:n}){t();const r=n,i=e,o=Mr(null),a=Mr(null),s=Mr(null),l=Mr(null),[c,u]=VI(),d=Mr(!1),p=Mr(!1),f=Mr(''),h=Mr(''),m=Mr(null),g=Mr(null),v=0===(i.depth??0),y=ks((()=>v)),b=/^[A-Za-z_$][A-Za-z0-9_$]*$/,w=/^\d+$/,k=e=>{if('number'==typeof e)return`[${e}]`;const t=String(e);return w.test(t)?`[${t}]`:t},x=e=>e.length?e.reduce(((e,t)=>{if('number'==typeof t)return`${e}${e.length,''}[${t}]`;const n=String(t);return e.length?w.test(n)?`${e}[${n}]`:b.test(n)?`${e}.${n}`:`${e}[${JSON.stringify(n)}]`:b.test(n)?n:w.test(n)?`[${n}]`:`[${JSON.stringify(n)}]`}),''):'';let S=Jo($Z,null);if(!S&&v){const e=Mr(null),t=Mr([]),n=Mr(''),r=r=>{const i=[...r];e.value=i.length?i:null,t.value=i.map((e=>k(e))),n.value=i.length?x(i):''};S={selectedPath:e,selectedSegments:t,selectedJsPath:n,selectPath:r},Wo($Z,S)}const E=ks((()=>S?.selectedPath.value??null)),O=ks((()=>S?.selectedSegments.value??[])),I=ks((()=>S?.selectedJsPath.value??'')),T=ks((()=>O.value.length>0&&!!I.value.length)),A=ks((()=>i.path??[])),C=(e,t)=>!!e&&(e.length===t.length&&e.every(((e,n)=>e===t[n]))),N=ks((()=>C(E.value,A.value))),P=ks((()=>['flex items-center gap-0.25 py-0.25 rounded px-0.25 transition-colors duration-150',N.value?'bg-(--SmartThemeQuoteColor)/15':''])),j=()=>{if(!S)return;const e=Array.isArray(i.path)?[...i.path]:[];e.length&&S.selectPath(e)},D=e=>{const t=document.createElement('textarea');t.value=e,t.setAttribute('readonly',''),t.style.position='absolute',t.style.left='-9999px',document.body.appendChild(t),t.select(),document.execCommand('copy'),document.body.removeChild(t)},R=e=>e?{width:e.width,height:e.height}:{},U=ks((()=>R(m.value))),L=ks((()=>R(g.value)));let V=null,M=null;const[B,F]=RI((i.depth??0)>1),Z=ei(i,'filters'),H=ks((()=>null!==i.data&&'object'==typeof i.data&&!Array.isArray(i.data))),q=ks((()=>Array.isArray(i.data))),K=ks((()=>!H.value&&!q.value)),G=ks((()=>'object'===i.parentType&&null!==i.nodeKey)),W=e=>{if(!e)return null;const t=e.getBoundingClientRect();return{width:`${Math.max(t.width||e.offsetWidth||40,40)}px`,height:`${Math.max(t.height||e.offsetHeight||24,24)}px`}},J=Jo(OZ,null);J&&(Eo((()=>{K.value||('expand'===J.lastAction.value?B.value=!1:'collapse'===J.lastAction.value&&(B.value=!0))})),zI((()=>J.collapseAllSignal.value),(()=>{K.value||(B.value=!0)})),zI((()=>J.expandAllSignal.value),(()=>{K.value||(B.value=!1)})));const Y=ks((()=>null===i.data?'null':Array.isArray(i.data)?'array':typeof i.data)),X=ks((()=>null!==i.searchInput)),Q=ks((()=>'string'===Y.value)),ee=ks((()=>'string'==typeof i.data?`"${i.data}"`:'')),te=e=>{const t=i.searchInput;if(!t||''===t)return!1;try{if(t instanceof RegExp)return t.test(e)}catch{return!1}const n=String(t).toLowerCase();return e.toLowerCase().includes(n)},ne=(e,t=new WeakSet)=>{if('string'==typeof e)return te(e);if(e&&'object'==typeof e){if(t.has(e))return!1;if(t.add(e),Array.isArray(e))return e.some((e=>ne(e,t)));const n=e;return Object.values(n).some((e=>ne(e,t)))}return!1},re=ks((()=>!!X.value&&ne(i.data)));_a((()=>re.value),(e=>{!K.value&&e&&(B.value=!1)}),{immediate:!0});const ie=e=>null===e?'null':void 0===e?'undefined':String(e),oe=e=>{const t=e.trim();if('null'===t)return null;if('undefined'!==t){if('true'===t)return!0;if('false'===t)return!1;if(''!==t&&/^-?\d+(\.\d+)?$/.test(t))return Number(t);if(t.startsWith('{')&&t.endsWith('}')||t.startsWith('[')&&t.endsWith(']'))try{return JSON.parse(t)}catch{return e}return e}},ae=e=>{const t=Y.value,n=e.trim();if('string'===t)return{value:e,success:!0};if('number'===t){if(!n.length)return{value:i.data,success:!1};const t=Number(n);return Number.isNaN(t)?{value:oe(e),success:!0}:{value:t,success:!0}}return'boolean'===t?/^(true|false)$/i.test(n)?{value:'true'===n.toLowerCase(),success:!0}:n.length?{value:oe(e),success:!0}:{value:i.data,success:!1}:{value:oe(e),success:!0}},se=()=>{d.value=!1,V&&(V(),V=null),m.value=null,toastr.success(Se``)},le=()=>{G.value&&null!==i.nodeKey&&(f.value=String(i.nodeKey),m.value=W(o.value),d.value=!0,yi((()=>{a.value&&(a.value.focus(),a.value.select())})),V&&V(),V=KI(a,(()=>{ce()})))},ce=()=>{if(!d.value)return;const e=i.nodeKey,t=f.value.trim();se(),null!==e&&t.length&&t!==String(e)&&r('rename-key',t)},ue=()=>{d.value&&(f.value=null===i.nodeKey?'':String(i.nodeKey),se())},de=()=>{Ie(),d.value||(j(),G.value&&le())},pe=()=>{p.value=!1,M&&(M(),M=null),g.value=null,toastr.success(Se``)},fe=()=>{K.value&&!p.value&&(h.value=ie(i.data),g.value=W(s.value),p.value=!0,yi((()=>{l.value&&(l.value.focus(),l.value.select())})),M&&M(),M=KI(l,(()=>{he()})))},he=()=>{if(!p.value)return;const e=i.data,{value:t,success:n}=ae(h.value);pe(),n?Object.is(t,e)||r('update:data',t):h.value=ie(e)},me=()=>{p.value&&(h.value=ie(i.data),pe())};_a((()=>i.nodeKey),(e=>{d.value&&(f.value=null===e?'':String(e))})),_a((()=>i.data),(e=>{p.value&&K.value&&(h.value=ie(e)),!K.value&&p.value&&pe()})),$o((()=>{Ie(),V&&(V(),V=null),M&&(M(),M=null)}));const ge=ks((()=>{if(H.value){const e=i.data;return Object.keys(e).map((t=>[t,e[t]]))}return q.value?i.data.map(((e,t)=>[t,e])):[]})),ve=e=>{if(Array.isArray(e))return'array';if(null==e)return'object';const t=typeof e;return'string'===t?'string':'number'===t?'number':'boolean'===t?'boolean':'object'===t?'object':null},ye=(e,t)=>{const n=ve(e);if(!n)return!1;if('array'===n){const n=e,r=n.some((e=>ye(e,t+1)));return Z.value.array?0===n.length||(r||Z.value.array):0===t&&r}if('object'===n){const n=e,r=Object.values(n),i=r.some((e=>ye(e,t+1)));return Z.value.object?0===r.length||(i||Z.value.object):0===t}return Z.value[n]},be=ks((()=>ge.value.filter((([,e])=>ye(e,(i.depth??0)+1))))),_e=ks((()=>{const e=i.depth??0;return 0===e||ye(i.data,e)})),we=ks((()=>{const e=i.data;if(null===e)return'null';if('string'==typeof e)return`"${e}"`;if('boolean'==typeof e)return e.toString();if('number'==typeof e)return e.toString();if(Array.isArray(e))return`Array(${e.length})`;if('object'==typeof e){const t=Object.keys(e);return`Object {${t.length} ${1===t.length?'key':'keys'}}`}return String(e)})),ke=ks((()=>`padding-left: ${3*i.depth}px`)),xe=ks((()=>{const e=Y.value;return'string'===e?'text-(--SmartThemeBodyColor)':'number'===e?'text-(--SmartThemeEmColor)':'boolean'===e?'text-(--SmartThemeUnderlineColor)':'null'===e?'text-gray-500':''}));let Ee=0,$e=0,Oe=null;const Ie=()=>{null!==Oe&&(clearTimeout(Oe),Oe=null)},Te={emit:r,props:i,keyDisplayRef:o,keyInputRef:a,valueDisplayRef:s,valueInputRef:l,DefineActionButton:c,ActionButton:u,isEditingKey:d,isEditingValue:p,keyDraft:f,valueDraft:h,keyInputSize:m,valueInputSize:g,isRootNode:v,isRoot:y,identifierPattern:b,numericSegmentPattern:w,formatSegmentForDisplay:k,buildJsPath:x,get selectionContext(){return S},set selectionContext(e){S=e},selectedPath:E,breadcrumbSegments:O,selectedJsPath:I,canCopySelectedPath:T,nodePath:A,pathsEqual:C,isSelected:N,nodeRowClass:P,selectCurrentNode:j,copyUsingFallback:D,copySelectedPath:async()=>{if(!T.value)return;const e=I.value;if(e.length)try{navigator.clipboard?.writeText?await navigator.clipboard.writeText(e):D(e),toastr.success(Se``)}catch{try{D(e),toastr.success(Se``)}catch{toastr.error(Se``)}}},ensureInlineSize:R,keyInputInlineStyle:U,valueInputInlineStyle:L,get stopKeyOutside(){return V},set stopKeyOutside(e){V=e},get stopValueOutside(){return M},set stopValueOutside(e){M=e},collapsed:B,toggleCollapse:F,filters:Z,isObject:H,isArray:q,isPrimitive:K,canEditKey:G,MIN_INPUT_WIDTH:40,MIN_INPUT_HEIGHT:24,computeInputSize:W,treeControl:J,valueType:Y,isSearching:X,isStringValue:Q,stringValueWithQuotes:ee,testQuery:te,hasSearchHit:ne,hasMatchInSubtree:re,formatValueForEdit:ie,parseLooseValue:oe,coerceValue:ae,finishKeyEditing:se,startKeyEditing:le,saveKeyEditing:ce,cancelKeyEditing:ue,handleKeyInputKeydown:e=>{'Enter'===e.key?(e.preventDefault(),ce()):'Escape'===e.key&&(e.preventDefault(),ue())},handleKeyAreaClick:e=>{if(!d.value&&(j(),!K.value)){if(e.detail>1)return void Ie();Ie(),Oe=window.setTimeout((()=>{Oe=null}),150)}},handleKeyAreaDoubleActivate:de,finishValueEditing:pe,startValueEditing:fe,saveValueEditing:he,cancelValueEditing:me,handleValueInputKeydown:e=>{'Enter'!==e.key||e.shiftKey?'Escape'===e.key&&(e.preventDefault(),me()):(e.preventDefault(),he())},updateChildValue:(e,t)=>{if(H.value){const n=i.data,o=String(e);if(Object.prototype.hasOwnProperty.call(n,o)&&Object.is(n[o],t))return;const a=Object.entries(n).map((([e,n])=>e===o?[e,t]:[e,n]));r('update:data',Object.fromEntries(a))}else{if(q.value){const n=i.data,o=Number(e);if(Number.isNaN(o)||!Object.prototype.hasOwnProperty.call(n,o))return;if(Object.is(n[o],t))return;const a=n.slice();return a[o]=t,void r('update:data',a)}Object.is(i.data,t)||r('update:data',t)}},deleteChild:e=>{if(H.value){const t=i.data||{},n=String(e);if(!Object.prototype.hasOwnProperty.call(t,n))return;const o=Object.entries(t).filter((([e])=>e!==n));return r('update:data',Object.fromEntries(o)),void toastr.success(Se``)}if(q.value){const t=Array.isArray(i.data)?i.data:[],n=Number(e);if(Number.isNaN(n)||n<0||n>=t.length)return;const o=t.slice();return o.splice(n,1),r('update:data',o),void toastr.success(Se``)}},renameChildKey:(e,t)=>{if(!H.value)return;const n=i.data,o=String(e),a=String(t).trim();if(!a.length||o===a)return;if(!Object.prototype.hasOwnProperty.call(n,o))return;if(Object.prototype.hasOwnProperty.call(n,a))return;const s=Object.entries(n).map((([e,t])=>e===o?[a,t]:[e,t]));r('update:data',Object.fromEntries(s))},entries:ge,getFilterType:ve,getNodeMatches:ye,filteredEntries:be,shouldRender:_e,valuePreview:we,indentStyle:ke,valueTypeClass:xe,SINGLE_CLICK_DELAY:150,DOUBLE_TAP_THRESHOLD:300,get lastKeyTapTime(){return Ee},set lastKeyTapTime(e){Ee=e},get lastValueTapTime(){return $e},set lastValueTapTime(e){$e=e},get keyClickTimer(){return Oe},set keyClickTimer(e){Oe=e},clearKeyClickTimer:Ie,handleKeyAreaTouchEnd:e=>{j();const t=e.timeStamp;t-Ee<=300&&(e.preventDefault(),e.stopPropagation(),de()),Ee=t},handleValueTouchEnd:e=>{const t=e.timeStamp;t-$e<=300&&(e.preventDefault(),e.stopPropagation(),fe()),$e=t},openAddChild:()=>{if(K.value)return;const{open:e}=xj({component:WZ,attrs:{onSubmit:async e=>{if(H.value){const t=i.data||{},n=String(e.key||'').trim();if(!n)return toastr.error(Se``,Se``),!1;if(Object.prototype.hasOwnProperty.call(t,n))return toastr.error(Se``,Se``),!1;const o={...t,[n]:e.value};return r('update:data',o),toastr.success(Se``),!0}if(q.value){const t=(Array.isArray(i.data)?i.data:[]).slice();return t.push(e.value),r('update:data',t),toastr.success(Se``),!0}return!1}}});e()},clearRoot:()=>{if(y.value){if(H.value)return r('update:data',{}),void toastr.success(Se``);if(q.value)return r('update:data',[]),void toastr.success(Se``);r('update:data',{}),toastr.success(Se``)}},confirmAndDeleteSelf:()=>{if(null===i.nodeKey||null===i.parentType)return;const e=Se``,{open:t}=xj({component:Cj,attrs:{buttons:[{name:Se``,shouldEmphasize:!0,onClick:e=>{r('delete-self'),e()}},{name:Se``}]},slots:{default:`<div>${e}</div>`}});t()}};return Object.defineProperty(Te,'__isScriptSetup',{enumerable:!1,value:!0}),Te}}),_H=['title','disabled','onClick'],wH={key:0,class:'flex flex-wrap items-center justify-between gap-0.5 rounded border border-(--SmartThemeQuoteColor)/40 bg-(--SmartThemeBGColor)/60 px-0.5 py-0.25 text-sm'},kH=['title'],xH={class:'font-medium'},SH={key:0,class:'text-xs text-(--SmartThemeBodyColor)'},EH={key:1,class:'text-(--SmartThemeBodyColor)/70'},$H={class:'inline-flex items-center gap-0.25'},OH=['disabled'],IH={key:1,class:'text-sm select-text'},TH={key:1,class:'inline-block shrink-0 pl-[12px]'},AH={key:2,class:'flex flex-shrink-0 items-center gap-0.25 self-start text-(--SmartThemeQuoteColor)'},CH={key:3},NH={key:4,class:'flex items-center gap-0.5'},PH={class:'font-bold text-gray-500'},jH={key:0,class:'text-gray-500 italic'},DH={key:1,class:'font-bold text-gray-500'},RH={key:5,class:'ml-auto inline-flex items-center gap-0.25'},UH={key:6,class:'ml-auto inline-flex items-center gap-0.25'},LH={class:'font-bold text-gray-500'};const zH=sI(bH,[['render',function(e,t,n,r,i,o){const a=fD,s=To('TreeMode',!0);return La(),Ba(Na,null,[Wa(r.DefineActionButton,null,{default:Ui((({icon:e,title:t,colorClass:n,onClick:r,disabled:i})=>[Ga('div',{class:nn(['inline-flex items-center justify-center px-0.25',i?'cursor-not-allowed opacity-60':'cursor-pointer',n]),title:t,disabled:i,onClick:Al((()=>{i||r?.()}),['stop'])},[Ga('i',{class:nn(e)},null,2)],10,_H)])),_:1}),r.isRoot?(La(),Ba('div',wH,[Ga('div',{class:'flex flex-1 flex-wrap items-center gap-0.25 text-(--SmartThemeQuoteColor)',title:r.selectedJsPath||void 0},[r.breadcrumbSegments.length?(La(!0),Ba(Na,{key:0},jo(r.breadcrumbSegments,((e,t)=>(La(),Ba(Na,{key:`${e}-${t}`},[Ga('span',xH,un(e),1),t!==r.breadcrumbSegments.length-1?(La(),Ba('span',SH,' > ')):es('',!0)],64)))),128)):(La(),Ba('span',EH,''))],8,kH),Ga('div',$H,[Ga('div',{class:'inline-flex shrink-0 items-center gap-0.25 py-0.25 text-sm text-(--SmartThemeQuoteColor) transition-colors hover:bg-(--SmartThemeQuoteColor)/15 disabled:cursor-not-allowed disabled:opacity-60',type:'button',disabled:!r.canCopySelectedPath,title:'',onClick:r.copySelectedPath},[...t[3]||(t[3]=[Ga('i',{class:'fa-solid fa-copy'},null,-1)])],8,OH)])])):es('',!0),r.shouldRender?(La(),Ba('div',IH,[Ga('div',{class:nn(r.nodeRowClass),style:Yt(r.indentStyle)},[r.isPrimitive?(La(),Ba('span',TH)):(La(),Ba('span',{key:0,class:'inline-flex shrink-0 cursor-pointer items-center justify-center text-sm leading-none select-none',onClick:t[0]||(t[0]=e=>r.toggleCollapse())},[(La(),Ba('svg',{style:Yt({transform:r.collapsed?'rotate(0deg)':'rotate(90deg)'}),class:'transition-transform duration-200',width:'12',height:'12',viewBox:'0 0 12 12',fill:'currentColor'},[...t[4]||(t[4]=[Ga('path',{d:'M4.5 2L8.5 6L4.5 10V2Z'},null,-1)])],4))])),null!==n.nodeKey?(La(),Ba('span',AH,[r.isEditingKey?Li((La(),Ba('input',{key:1,ref:'keyInputRef','onUpdate:modelValue':t[1]||(t[1]=e=>r.keyDraft=e),style:Yt(r.keyInputInlineStyle),class:'rounded border border-(--SmartThemeQuoteColor)/40 bg-transparent px-0.25 text-sm! text-(--SmartThemeQuoteColor) focus:border-(--SmartThemeQuoteColor) focus:outline-none',onKeydown:r.handleKeyInputKeydown},null,36)),[[_l,r.keyDraft]]):(La(),Ba('span',{key:0,ref:'keyDisplayRef',class:nn(['inline-flex items-center break-all whitespace-pre-wrap transition-colors duration-150',r.canEditKey?'cursor-text select-text':'cursor-pointer select-none',r.isSelected?'font-semibold text-(--SmartThemeQuoteColor)':'']),onClick:r.handleKeyAreaClick,onDblclick:Al(r.handleKeyAreaDoubleActivate,['stop','prevent']),onTouchend:r.handleKeyAreaTouchEnd},[Wa(a,{query:r.props.searchInput},{default:Ui((()=>[Xa(un(n.nodeKey),1)])),_:1},8,['query'])],34)),t[5]||(t[5]=Ga('span',{class:'select-none'},':',-1))])):es('',!0),r.isPrimitive?(La(),Ba('span',CH,[r.isEditingValue?Li((La(),Ba('textarea',{key:1,ref:'valueInputRef','onUpdate:modelValue':t[2]||(t[2]=e=>r.valueDraft=e),style:Yt(r.valueInputInlineStyle),class:'resize-none rounded border border-(--SmartThemeQuoteColor)/40 bg-transparent px-0.25 text-sm! text-(--SmartThemeBodyColor) focus:border-(--SmartThemeQuoteColor) focus:outline-none',onKeydown:r.handleValueInputKeydown},null,36)),[[_l,r.valueDraft]]):(La(),Ba('span',{key:0,ref:'valueDisplayRef',class:nn(['cursor-text break-words break-all whitespace-pre-wrap',r.valueTypeClass]),onDblclick:Al(r.startValueEditing,['stop','prevent']),onTouchend:r.handleValueTouchEnd},[r.isSearching&&r.isStringValue?(La(),Fa(a,{key:0,query:r.props.searchInput},{default:Ui((()=>[Xa(un(r.stringValueWithQuotes),1)])),_:1},8,['query'])):(La(),Ba(Na,{key:1},[Xa(un(r.valuePreview),1)],64))],34))])):(La(),Ba('span',NH,[Ga('span',PH,un(r.isArray?'[':'{'),1),r.collapsed?(La(),Ba('span',jH,un(r.valuePreview),1)):es('',!0),r.collapsed?(La(),Ba('span',DH,un(r.isArray?']':'}'),1)):es('',!0)])),r.isSelected?(La(),Ba('span',RH,[r.isPrimitive?es('',!0):(La(),Fa(r.ActionButton,{key:0,icon:'fa-solid fa-plus',title:'','color-class':'text-(--SmartThemeQuoteColor)','on-click':r.openAddChild})),null!==n.nodeKey&&null!==n.parentType?(La(),Fa(r.ActionButton,{key:1,icon:'fa-solid fa-trash',title:r.isArray?'':'','color-class':'text-(--warning)','on-click':r.confirmAndDeleteSelf},null,8,['title'])):es('',!0)])):es('',!0),r.isSelected?es('',!0):(La(),Ba('div',UH,[r.isRoot&&!r.isPrimitive?(La(),Fa(r.ActionButton,{key:0,icon:'fa-solid fa-plus',title:'','color-class':'text-(--SmartThemeQuoteColor)','on-click':r.openAddChild})):es('',!0),r.isRoot?(La(),Fa(r.ActionButton,{key:1,icon:'fa-solid fa-trash',title:'','color-class':'text-(--warning)','on-click':r.clearRoot})):es('',!0)]))],6),r.isPrimitive||r.collapsed?es('',!0):(La(),Ba(Na,{key:0},[(La(!0),Ba(Na,null,jo(r.filteredEntries,(([e,t])=>(La(),Fa(s,{key:e,data:t,path:[...n.path,e],depth:n.depth+1,'node-key':e,filters:r.filters,'search-input':r.props.searchInput,'parent-type':r.isArray?'array':r.isObject?'object':null,'onUpdate:data':t=>r.updateChildValue(e,t),onRenameKey:t=>r.renameChildKey(e,t),onDeleteSelf:()=>r.deleteChild(e)},null,8,['data','path','depth','node-key','filters','search-input','parent-type','onUpdate:data','onRenameKey','onDeleteSelf'])))),128)),Ga('div',{class:'flex items-center gap-0.5',style:Yt(r.indentStyle)},[Ga('span',LH,un(r.isArray?']':'}'),1)],4)],64))])):es('',!0)],64)}],['__file','TreeMode.vue']]),VH=fo({__name:'Editor',props:Zo({filters:{},currentView:{},searchInput:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:['update:modelValue'],setup(e,{expose:t}){const n=e,r=ka(e,'modelValue'),{history:i,commit:o,undo:a,redo:s,canUndo:l,canRedo:c}=uT(r,{deep:!0,clone:!0,capacity:20,flush:'post'});UI(r,(()=>o()),{debounce:300,deep:!0});const u=e=>{const t=EZ.safeParse(e.key);if(!t.success)return t.error.issues.forEach((e=>{toastr.error(e.message,'')})),!1;const n=t.data;return Object.prototype.hasOwnProperty.call(r.value,n)?(toastr.error(` "${n}" `,''),!1):(r.value={[n]:e.value,...r.value},toastr.success(` "${n}"`,''),!0)},d=ks((()=>Object.keys(r.value).length>0));t({undo:a,redo:s,canUndo:l,canRedo:c,history:i,createRootVariable:u});const p=ks({get:()=>Object.entries(r.value),set:e=>{r.value=Object.fromEntries(e)}}),f={props:n,variables:r,history:i,commit:o,undo:a,redo:s,canUndo:l,canRedo:c,createRootVariable:u,hasVariables:d,openRootCreatorModal:()=>{const{open:e}=xj({component:WZ,attrs:{onSubmit:async e=>u(e)}});e()},clearAllVariables:()=>{d.value?(r.value={},toastr.success(Se``,Se``)):toastr.info(Se``,Se``)},writable_variables:p,removeVariable:e=>{const t=String(e);p.value=p.value.filter((([e])=>String(e)!==t))},updateVariable:(e,t)=>{const n=String(e);r.value={...r.value,[n]:t}},renameVariable:(e,t)=>{const n=String(e),i=String(t||'').trim();if(!i)return void toastr.error('','');if(n===i)return;if(Object.prototype.hasOwnProperty.call(r.value,i))return void toastr.error(` "${i}" `,'');const o=Object.entries(r.value).map((([e,t])=>e===n?[i,t]:[e,t]));r.value=Object.fromEntries(o)},CardMode:hH,TextMode:yH,TreeMode:zH};return Object.defineProperty(f,'__isScriptSetup',{enumerable:!1,value:!0}),f}}),MH={class:'flex-1 overflow-y-auto p-1'},BH={class:'flex h-full w-full flex-col gap-0.5'},FH={class:'flex items-center justify-center gap-0.5 rounded border border-(--SmartThemeQuoteColor)/40 bg-(--SmartThemeBGColor)/60 px-0.5 py-0.25 text-sm'},ZH=['title'],HH={key:1,class:'flex items-center justify-center rounded border border-dashed border-(--SmartThemeQuoteColor)/40 py-1 text-sm text-(--SmartThemeBodyColor)/70'};const qH=sI(VH,[['render',function(e,t,n,r,i,o){return La(),Ba('div',MH,[Ga('div',BH,[r.writable_variables.length>0||'text'===r.props.currentView||'card'===r.props.currentView?(La(),Ba(Na,{key:0},['tree'===r.props.currentView?(La(),Fa(r.TreeMode,{key:0,data:r.variables,'onUpdate:data':t[0]||(t[0]=e=>r.variables=e),filters:r.props.filters,'search-input':r.props.searchInput},null,8,['data','filters','search-input'])):'card'===r.props.currentView?(La(),Ba(Na,{key:1},[Ga('div',FH,[Ga('div',{class:'inline-flex cursor-pointer items-center gap-0.25 rounded px-0.5 py-0.25 text-(--SmartThemeQuoteColor) transition-colors hover:bg-(--SmartThemeQuoteColor)/15',onClick:r.openRootCreatorModal},[t[2]||(t[2]=Ga('i',{class:'fa-solid fa-plus'},null,-1)),Ga('span',null,un(e.t``),1)]),Ga('div',{class:nn(['inline-flex items-center gap-0.25 rounded px-0.5 py-0.25 transition-colors',r.hasVariables?'cursor-pointer text-(--warning) hover:bg-(--warning)/15':'cursor-not-allowed text-(--warning)/60 opacity-60']),title:r.hasVariables?e.t``:e.t``,onClick:r.clearAllVariables},[t[3]||(t[3]=Ga('i',{class:'fa-solid fa-trash'},null,-1)),Ga('span',null,un(e.t``),1)],10,ZH)]),r.writable_variables.length>0?(La(!0),Ba(Na,{key:0},jo(r.writable_variables,(e=>(La(),Fa(r.CardMode,{key:e[0],name:e[0],content:e[1],filters:r.props.filters,'search-input':r.props.searchInput,'onUpdate:name':t=>r.renameVariable(e[0],t),'onUpdate:content':t=>r.updateVariable(e[0],t),onDelete:t=>r.removeVariable(e[0])},null,8,['name','content','filters','search-input','onUpdate:name','onUpdate:content','onDelete'])))),128)):(La(),Ba('div',HH,un(e.t``),1))],64)):'text'===r.props.currentView?(La(),Fa(r.TextMode,{key:2,data:r.variables,'onUpdate:data':t[1]||(t[1]=e=>r.variables=e),'search-input':r.props.searchInput},null,8,['data','search-input'])):es('',!0)],64)):es('',!0)])])}],['__file','Editor.vue']]),KH=fo({__name:'ContentCharacter',props:{filters:{},currentView:{},searchInput:{}},setup(e,{expose:t}){const n=e,r=ei(DS(),'settings'),i=Mr(null),o=()=>i.value?.undo(),a=()=>i.value?.redo(),s=ks((()=>i.value?.canUndo??!1)),l=ks((()=>i.value?.canRedo??!1)),c=e=>i.value?.createRootVariable(e)??!1;t({undo:o,redo:a,canUndo:s,canRedo:l,createRootVariable:c});const u={props:n,settings:r,editorRef:i,undo:o,redo:a,canUndo:s,canRedo:l,createRootVariable:c,Editor:qH};return Object.defineProperty(u,'__isScriptSetup',{enumerable:!1,value:!0}),u}});const GH=sI(KH,[['render',function(e,t,n,r,i,o){return La(),Fa(r.Editor,{ref:'editorRef',modelValue:r.settings.variables,'onUpdate:modelValue':t[0]||(t[0]=e=>r.settings.variables=e),filters:r.props.filters,'current-view':r.props.currentView,'search-input':r.props.searchInput},null,8,['modelValue','filters','current-view','search-input'])}],['__file','ContentCharacter.vue']]),WH=fo({__name:'ContentChat',props:{filters:{},currentView:{},searchInput:{}},setup(e,{expose:t}){const n=e,r=Br(e$({type:'chat'}));DI((()=>{const e=e$({type:'chat'});_.isEqual(r.value,e)||(r.value=e)}),2e3),UI(r,(e=>{i$(Rr(e),{type:'chat'})}),{debounce:1e3});const i=Mr(null),o=()=>i.value?.undo(),a=()=>i.value?.redo(),s=ks((()=>i.value?.canUndo??!1)),l=ks((()=>i.value?.canRedo??!1)),c=e=>i.value?.createRootVariable(e)??!1;t({undo:o,redo:a,canUndo:s,canRedo:l,createRootVariable:c});const u={props:n,variables:r,editorRef:i,undo:o,redo:a,canUndo:s,canRedo:l,createRootVariable:c,Editor:qH};return Object.defineProperty(u,'__isScriptSetup',{enumerable:!1,value:!0}),u}});const JH=sI(WH,[['render',function(e,t,n,r,i,o){return La(),Fa(r.Editor,{ref:'editorRef',modelValue:r.variables,'onUpdate:modelValue':t[0]||(t[0]=e=>r.variables=e),filters:r.props.filters,'current-view':r.props.currentView,'search-input':r.props.searchInput},null,8,['modelValue','filters','current-view','search-input'])}],['__file','ContentChat.vue']]),YH=fo({__name:'ContentGlobal',props:{filters:{},currentView:{},searchInput:{}},setup(e,{expose:t}){const n=Mr(null),r=e,i=Br(e$({type:'global'}));PM(u.SETTINGS_UPDATED,_.debounce((()=>{const e=e$({type:'global'});_.isEqual(i.value,e)||(i.value=e)}),1e3)),UI(i,(e=>{i$(Rr(e),{type:'global'})}),{debounce:1e3,deep:!0});const o=()=>n.value?.undo(),a=()=>n.value?.redo(),s=ks((()=>n.value?.canUndo??!1)),l=ks((()=>n.value?.canRedo??!1)),c=e=>n.value?.createRootVariable(e)??!1;t({undo:o,redo:a,canUndo:s,canRedo:l,createRootVariable:c});const d={editorRef:n,props:r,variables:i,undo:o,redo:a,canUndo:s,canRedo:l,createRootVariable:c,Editor:qH};return Object.defineProperty(d,'__isScriptSetup',{enumerable:!1,value:!0}),d}});const XH=sI(YH,[['render',function(e,t,n,r,i,o){return La(),Fa(r.Editor,{ref:'editorRef',modelValue:r.variables,'onUpdate:modelValue':t[0]||(t[0]=e=>r.variables=e),filters:r.props.filters,'current-view':r.props.currentView,'search-input':r.props.searchInput},null,8,['modelValue','filters','current-view','search-input'])}],['__file','ContentGlobal.vue']]),QH=fo({__name:'ContentMessage',props:{filters:{},currentView:{},searchInput:{}},setup(e,{expose:t}){t();const n=e,i=Mr(-1),o=Mr(-1),a=Mr(!0);_a(a,(()=>{a.value?(i.value=Vl(i.value),o.value=Vl(o.value)):(i.value=Ml(i.value),o.value=Ml(o.value))}));const s=ks((()=>i.value>o.value?_.range(o.value,i.value+1):_.range(i.value,o.value+1)));function l(){return Object.fromEntries(s.value.map((e=>[e,e$({type:'message',message_id:e})])))}UI(s,(()=>{c.value=l()}),{debounce:1e3});const c=Br(l());DI((()=>{const e=l();_.isEqual(c.value,e)||(c.value=e)}),2e3),UI(c,(e=>{i$(Rr(e),{type:'chat'})}),{debounce:1e3});const u={props:n,from:i,to:o,sync_bottom:a,message_range:s,get_variables_array:l,variables_map:c,Editor:qH,get chat(){return r}};return Object.defineProperty(u,'__isScriptSetup',{enumerable:!1,value:!0}),u}}),eq={class:'my-0.75 rounded-sm bg-(--SmartThemeQuoteColor) p-0.75 text-sm'},tq={class:'flex flex-col gap-0.5'},nq={class:'flex items-center justify-between gap-0.75'},rq={class:'flex flex-1 items-center'},iq=['min','max'],oq=['min','max'];const aq=sI(QH,[['render',function(e,t,n,r,i,o){return La(),Ba(Na,null,[Ga('div',eq,[Ga('div',tq,[Ga('div',nq,[Ga('div',rq,[Li(Ga('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>r.from=e),type:'number',class:'TH-floor-input',min:r.sync_bottom?-r.chat.length:0,max:r.sync_bottom?-1:r.chat.length-1},null,8,iq),[[_l,r.from]]),t[2]||(t[2]=Ga('span',{class:'mx-0.5 text-(--SmartThemeBodyColor)'},'~',-1)),Li(Ga('input',{'onUpdate:modelValue':t[1]||(t[1]=e=>r.to=e),type:'number',class:'TH-floor-input',min:r.sync_bottom?-r.chat.length:0,max:r.sync_bottom?-1:r.chat.length-1},null,8,oq),[[_l,r.to]])]),t[3]||(t[3]=Ga('button',{class:'flex items-center gap-0.5 rounded-sm border-none bg-(--SmartThemeQuoteColor) px-0.75 py-0.25 text-sm text-(--SmartThemeTextColor)'},[Ga('i',{class:'fa-solid fa-check'}),Ga('span',null,'')],-1))]),t[4]||(t[4]=Ga('div',{class:'py-0.25 text-sm text-(--warning)'},'',-1))])]),(La(!0),Ba(Na,null,jo(r.variables_map,((e,t)=>(La(),Fa(r.Editor,{key:t,modelValue:r.variables_map[t],'onUpdate:modelValue':e=>r.variables_map[t]=e,filters:r.props.filters,'current-view':r.props.currentView,'search-input':r.props.searchInput},null,8,['modelValue','onUpdate:modelValue','filters','current-view','search-input'])))),128))],64)}],['__scopeId','data-v-9714721c'],['__file','ContentMessage.vue']]),sq=fo({__name:'ContentPreset',props:{filters:{},currentView:{},searchInput:{}},setup(e,{expose:t}){const n=e,r=ei(MS(),'settings'),i=Mr(null),o=()=>i.value?.undo(),a=()=>i.value?.redo(),s=ks((()=>i.value?.canUndo??!1)),l=ks((()=>i.value?.canRedo??!1)),c=e=>i.value?.createRootVariable(e)??!1;t({undo:o,redo:a,canUndo:s,canRedo:l,createRootVariable:c});const u={props:n,settings:r,editorRef:i,undo:o,redo:a,canUndo:s,canRedo:l,createRootVariable:c,Editor:qH};return Object.defineProperty(u,'__isScriptSetup',{enumerable:!1,value:!0}),u}});const lq=sI(sq,[['render',function(e,t,n,r,i,o){return La(),Fa(r.Editor,{ref:'editorRef',modelValue:r.settings.variables,'onUpdate:modelValue':t[0]||(t[0]=e=>r.settings.variables=e),filters:r.props.filters,'current-view':r.props.currentView,'search-input':r.props.searchInput},null,8,['modelValue','filters','current-view','search-input'])}],['__file','ContentPreset.vue']]),cq=fo({__name:'Toolbar',props:Zo({canUndo:{type:Boolean},canRedo:{type:Boolean}},{search_input:{required:!0},search_inputModifiers:{},filters:{default:JZ},filtersModifiers:{},currentView:{default:'tree'},currentViewModifiers:{}}),emits:Zo(['collapse-all','expand-all','undo','redo'],['update:search_input','update:filters','update:currentView']),setup(e,{expose:t,emit:n}){t();const r=e,{canUndo:i,canRedo:o}=Yr(r),[a,s]=VI(),l=ka(e,'search_input'),c=n,u=[{type:'string',name:Se`String`},{type:'number',name:Se`Number`},{type:'array',name:Se`Array`},{type:'boolean',name:Se`Boolean`},{type:'object',name:Se`Object`}],d=ka(e,'filters'),p=ka(e,'currentView'),[f,h]=RI(!1),[m,g]=RI(!1),v=Mr(null),y=ks((()=>Object.values(d.value).some((e=>!e)))),b={props:r,canUndo:i,canRedo:o,DefineIconButton:a,IconButton:s,search_input:l,emit:c,viewOptions:[{label:'',value:'tree'},{label:'',value:'card'},{label:'',value:'text'}],filterDefinitions:u,filters:d,currentView:p,isSearchVisible:f,toggleSearchVisible:h,isFilterVisible:m,toggleFilterVisible:g,teleportTarget:v,isFilterActive:y,setView:e=>{p.value=e},showSearch:()=>h(),showFilter:()=>g(),collapseAll:()=>{c('collapse-all')},expandAll:()=>{c('expand-all')},onFilterChange:(e,t)=>{const n=t.target;d.value={...d.value,[e]:n.checked}}};return Object.defineProperty(b,'__isScriptSetup',{enumerable:!1,value:!0}),b}}),uq=['title','disabled','onClick'],dq={class:'mx-0.75 flex flex-col flex-wrap rounded-sm bg-(--SmartThemeQuoteColor)/50 p-0.5 pr-0.75 text-sm'},pq={class:'flex items-center justify-between'},fq={class:'flex items-center gap-1'},hq={class:'inline-flex overflow-hidden rounded border border-white'},mq=['onClick'],gq={class:'flex items-center gap-0.75'},vq={class:'flex items-center gap-0.75'},yq={ref:'teleportTarget'},bq={key:0,class:'mt-0.5 flex flex-wrap gap-0.5 rounded-sm text-(--SmartThemeBodyColor)'},_q=['id','data-type','checked','onChange'],wq=['for'];const kq=sI(cq,[['render',function(e,t,n,r,i,o){const a=nD;return La(),Ba(Na,null,[Wa(r.DefineIconButton,null,{default:Ui((({title:e,icon:t,onClick:n,active:r,disabled:i})=>[Ga('div',{class:nn(['flex items-center justify-center rounded-sm transition-colors duration-200',i?'cursor-not-allowed opacity-50':'cursor-pointer']),title:e,disabled:i,onClick:()=>{i||n?.()}},[Ga('i',{class:nn([t,r?'text-(--SmartThemeQuoteColor)':''])},null,2)],10,uq)])),_:1}),Ga('div',dq,[Ga('div',pq,[Ga('div',fq,[Ga('div',hq,[(La(),Ba(Na,null,jo(r.viewOptions,(e=>Ga('div',{key:e.value,class:'min-w-3 px-0.5 py-[3px] text-center text-sm! transition-colors duration-200',style:Yt(e.value===r.currentView?'background-color: white; color: var(--SmartThemeQuoteColor);':'background-color: transparent; color: white;'),onClick:t=>r.setView(e.value)},un(e.label),13,mq))),64))]),t[1]||(t[1]=Ga('div',{class:'h-1 w-px bg-(--SmartThemeBodyColor)'},null,-1)),Ga('div',gq,[Wa(r.IconButton,{title:'',icon:'fa-solid fa-expand','on-click':r.expandAll,disabled:'text'===r.currentView},null,8,['disabled']),Wa(r.IconButton,{title:'',icon:'fa-solid fa-compress','on-click':r.collapseAll,disabled:'text'===r.currentView},null,8,['disabled']),Wa(r.IconButton,{title:'',icon:'fa-solid fa-filter','on-click':r.showFilter,active:r.isFilterActive,disabled:'text'===r.currentView},null,8,['active','disabled']),Wa(r.IconButton,{title:'',icon:'fa-solid fa-magnifying-glass','on-click':r.showSearch})])]),Ga('div',vq,[Wa(r.IconButton,{title:'',icon:'fa-solid fa-rotate-left','on-click':()=>r.emit('undo'),disabled:!r.canUndo},null,8,['on-click','disabled']),Wa(r.IconButton,{title:'',icon:'fa-solid fa-rotate-right','on-click':()=>r.emit('redo'),disabled:!r.canRedo},null,8,['on-click','disabled'])])]),Ga('div',yq,null,512)]),(La(),Fa(Wi,{to:r.teleportTarget,disabled:!r.teleportTarget},[Wa(Us,{name:'vm-toolbar-teleport'},{default:Ui((()=>[r.isSearchVisible?(La(),Fa(a,{key:0,modelValue:r.search_input,'onUpdate:modelValue':t[0]||(t[0]=e=>r.search_input=e),placeholder:e.t`( )`,clearable:!0,class:'mt-0.5 w-full'},null,8,['modelValue','placeholder'])):es('',!0)])),_:1})],8,['to','disabled'])),(La(),Fa(Wi,{to:r.teleportTarget,disabled:!r.teleportTarget},[Wa(Us,{name:'vm-toolbar-teleport'},{default:Ui((()=>[r.isFilterVisible?(La(),Ba('div',bq,[(La(),Ba(Na,null,jo(r.filterDefinitions,(e=>Ga('div',{key:e.type,class:'flex items-center gap-0.25'},[Ga('input',{id:`filter-${e.type}`,type:'checkbox',class:'m-0','data-type':e.type,checked:r.filters[e.type],onChange:t=>r.onFilterChange(e.type,t)},null,40,_q),Ga('label',{for:`filter-${e.type}`},un(e.name),9,wq)]))),64))])):es('',!0)])),_:1})],8,['to','disabled']))],64)}],['__scopeId','data-v-79d51f7c'],['__file','Toolbar.vue']]),xq=fo({__name:'VariableManager',setup(e,{expose:t}){t();const n=Mr(0),r=Mr(0),i=Mr(null),o=Mr([]),a=ks((()=>o.value[c.value]??null)),s=ks((()=>!!a.value?.canUndo)),l=ks((()=>!!a.value?.canRedo));Wo(OZ,{collapseAllSignal:n,expandAllSignal:r,lastAction:i});const c=fT('TH-VariableManager:active_tab',0),u=[{name:Se``,component:XH},{name:Se``,component:lq},{name:Se``,component:GH},{name:Se``,component:JH},{name:Se``,component:aq}],d=Mr(null),p=Mr({string:!0,number:!0,array:!0,boolean:!0,object:!0}),f=Mr('tree'),h={collapseAllSignal:n,expandAllSignal:r,lastAction:i,tabRefs:o,setTabRef:(e,t)=>{o.value[e]=t},activeHistory:a,canUndo:s,canRedo:l,handleUndo:()=>a.value?.undo?.(),handleRedo:()=>a.value?.redo?.(),handleCreateRootVariable:async e=>{const t=a.value;return t&&'function'==typeof t.createRootVariable?t.createRootVariable(e):(toastr.error('',''),!1)},active_tab:c,tabs:u,search_input:d,filters:p,currentView:f,collapseAllTree:()=>{n.value+=1,i.value='collapse'},expandAllTree:()=>{r.value+=1,i.value='expand'},Toolbar:kq};return Object.defineProperty(h,'__isScriptSetup',{enumerable:!1,value:!0}),h}}),Sq={class:'flex h-full w-full flex-col overflow-hidden py-0.5'},Eq={class:'relative flex h-4 flex-shrink-0 justify-start py-0.5'},$q=['onClick'],Oq={class:'TH-tab-item-text'},Iq={class:'flex-shrink-0'},Tq={class:'flex-1 overflow-hidden'};const Aq=sI(xq,[['render',function(e,t,n,r,i,o){return La(),Ba('div',Sq,[Ga('div',Eq,[(La(),Ba(Na,null,jo(r.tabs,(({name:e},t)=>Ga('div',{key:t,class:nn(['TH-tab-item',{'TH-tab-active':r.active_tab===t}]),onClick:e=>r.active_tab=t},[Ga('div',Oq,un(e),1)],10,$q))),64))]),Ga('div',Iq,[Wa(r.Toolbar,{search_input:r.search_input,'onUpdate:search_input':t[0]||(t[0]=e=>r.search_input=e),filters:r.filters,'onUpdate:filters':t[1]||(t[1]=e=>r.filters=e),'current-view':r.currentView,'onUpdate:currentView':t[2]||(t[2]=e=>r.currentView=e),'can-undo':r.canUndo,'can-redo':r.canRedo,'on-create-root':r.handleCreateRootVariable,onCollapseAll:r.collapseAllTree,onExpandAll:r.expandAllTree,onUndo:r.handleUndo,onRedo:r.handleRedo},null,8,['search_input','filters','current-view','can-undo','can-redo'])]),Ga('div',Tq,[(La(),Ba(Na,null,jo(r.tabs,(({component:e},t)=>(La(),Ba(Na,{key:t},[r.active_tab===t?(La(),Fa(Co(e),{key:0,ref_for:!0,ref:e=>r.setTabRef(t,e),class:'h-full',filters:r.filters,'current-view':r.currentView,'search-input':r.search_input},null,8,['filters','current-view','search-input'])):es('',!0)],64)))),64))])])}],['__scopeId','data-v-8f4aebd6'],['__file','VariableManager.vue']]),Cq=fo({__name:'Editor',props:{content:{}},setup(e,{expose:t}){t();const n=e,r=ho('editor');let i;Eo((()=>{i=pt({target:r.value,props:{content:{json:n.content},language:Ee().includes('zh')?'zh':'en'}})})),$o((()=>{i.destroy()}));const o={props:n,editor_ref:r,get editor(){return i},set editor(e){i=e}};return Object.defineProperty(o,'__isScriptSetup',{enumerable:!1,value:!0}),o}}),Nq={ref:'editor',class:'h-full w-full'};const Pq=sI(Cq,[['render',function(e,t,n,r,i,o){return La(),Ba('div',Nq,null,512)}],['__file','Editor.vue']]);const jq=sI(fo({__name:'Global',setup(e,{expose:t}){t();const n={variables:{_id:'68e9bd3e958440229e6b3353',index:0,guid:'4eaefccd-02b8-4768-9193-9fefb09773af',isActive:!1,balance:'$3,860.45',picture:'http://placehold.it/32x32',age:29,eyeColor:'green',name:'Virginia Cooper',gender:'female',company:'ZOGAK',email:'virginiacooper@zogak.com',phone:'+1 (878) 425-3018',address:'562 Prescott Place, Shawmut, West Virginia, 9758',about:'Culpa ut elit incididunt sunt duis non aliqua labore velit sit nostrud eu sunt. Commodo deserunt consectetur cillum nisi et magna veniam adipisicing minim cupidatat sunt ut sunt. Sint ut adipisicing aute amet nulla do irure occaecat veniam commodo voluptate velit mollit. Laboris non nostrud non amet qui do minim. Laborum sunt ea elit qui mollit. In ea enim consequat esse.\r\n',registered:'2020-03-16T06:04:42 -08:00',latitude:-13.40219,longitude:78.835286,tags:['anim','reprehenderit','aute','mollit','Lorem','mollit','voluptate'],friends:[{id:0,name:'Yvette Larsen'},{id:1,name:'Lolita Lee'},{id:2,name:'Spencer Pruitt'}],greeting:'Hello, Virginia Cooper! You have 4 unread messages.',favoriteFruit:'strawberry'},Editor:Pq};return Object.defineProperty(n,'__isScriptSetup',{enumerable:!1,value:!0}),n}}),[['render',function(e,t,n,r,i,o){return La(),Fa(r.Editor,{content:r.variables})}],['__file','Global.vue']]),Dq={class:'flex h-full w-full flex-col overflow-hidden'},Rq={class:'relative flex h-4 flex-shrink-0 justify-start py-0.5'},Uq=['onClick'],Lq={class:'TH-tab-item-text'},zq={class:'flex-1 overflow-hidden'};const Vq=sI(fo({__name:'VariableManager2',setup(e,{expose:t}){t();const n={active_tab:fT('TH-VariableManager:active_tab',0),tabs:[{name:Se``,component:jq}]};return Object.defineProperty(n,'__isScriptSetup',{enumerable:!1,value:!0}),n}}),[['render',function(e,t,n,r,i,o){return La(),Ba('div',Dq,[Ga('div',Rq,[(La(),Ba(Na,null,jo(r.tabs,(({name:e},t)=>Ga('div',{key:t,class:nn(['TH-tab-item',{'TH-tab-active':r.active_tab===t}]),onClick:e=>r.active_tab=t},[Ga('div',Lq,un(e),1)],10,Uq))),64))]),Ga('div',zq,[(La(),Ba(Na,null,jo(r.tabs,(({component:e},t)=>(La(),Ba(Na,{key:t},[r.active_tab===t?(La(),Fa(Co(e),{key:0})):es('',!0)],64)))),64))])])}],['__scopeId','data-v-4b33319e'],['__file','VariableManager2.vue']]),Mq={class:'flex flex-col gap-0.75'},Bq={class:'extension_container'};const Fq=sI(fo({__name:'Toolbox',setup(e,{expose:t}){t();const n=Mr(!1),r=Mr(!1),i=Mr(!1),{open:o}=xj({component:Cj,slots:{default:`<div class="text-left p-1.5">${QN.parse(Ee().includes('zh')?'\x3c!-- markdownlint-disable MD041 MD036 --\x3e\n<u>****</u>:\n\n### \n\n, ,  <i class="fa-solid fa-paper-plane"></i>. , ,  ( AI), .\n\n###  <i class="fa-solid fa-rotate-right"></i> \n\n, .\n\n### \n\n:\n\n-  <i class="fa-solid fa-paper-plane"></i>\n-  `generate``generateRaw` \n- \n\n, .\n':'\x3c!-- markdownlint-disable MD041 MD036 --\x3e\nPrompt Viewer <u>**always shows the latest prompts**</u>:\n\n### When opening Prompt Viewer\n\nWhen opening Prompt Viewer, it will send a fake generation request, which is equivalent to clicking the send button <i class="fa-solid fa-paper-plane"></i> right now. Then, Prompt Viewer will wait for SillyTavern processing the prompts to send, intercept prompts (in order not to really sent them to AI), and thus obtain the latest prompts.\n\n### When clicking the refresh button <i class="fa-solid fa-rotate-right"></i>\n\nEach time the refresh button is clicked, the viewer will also send a fake generation request.\n\n### When a generation request is actually sent\n\nRegardless of whether you:\n\n- Click the send button <i class="fa-solid fa-paper-plane"></i>\n- Use the `generate``generateRaw` function of Tavern Helper\n- Any other ways to send prompts through SillyTavern\n\nPrompt Viewer will listen to the generation request and obtain the latest prompts.\n')}</div>`}}),a={enable_prompt_viewer:n,enable_variable_manager:r,enable_variable_manager2:i,showPromptViewerHelp:o,AudioPlayer:_M,PromptViewer:tB,VariableManager:Aq,VariableManager2:Vq};return Object.defineProperty(a,'__isScriptSetup',{enumerable:!1,value:!0}),a}}),[['render',function(e,t,n,r,i,o){const a=ET,s=ST,l=NV;return La(),Ba(Na,null,[Ga('div',Mq,[Wa(s,{type:'box'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t``),1)])),content:Ui((()=>[Wa(a,{onClick:t[0]||(t[0]=e=>r.enable_prompt_viewer=!0)},{default:Ui((()=>[Xa(un(e.t``),1)])),_:1})])),_:1}),Wa(s,{type:'box'},{title:Ui((()=>[Xa(un(e.t``),1)])),description:Ui((()=>[Xa(un(e.t``),1)])),content:Ui((()=>[Wa(a,{onClick:t[1]||(t[1]=e=>r.enable_variable_manager=!0)},{default:Ui((()=>[Xa(un(e.t``),1)])),_:1})])),_:1}),Wa(r.AudioPlayer)]),(La(),Fa(Wi,{defer:'',to:'#extensionsMenu'},[Ga('div',Bq,[Ga('div',{class:'list-group-item flex-container flexGap5 interactable',tabindex:'0',role:'listitem',onClick:t[2]||(t[2]=e=>r.enable_prompt_viewer=!0)},[t[8]||(t[8]=Ga('div',{class:'fa-solid fa-magnifying-glass extensionsMenuExtensionButton'},null,-1)),Ga('span',null,un(e.t``),1)]),Ga('div',{class:'list-group-item flex-container flexGap5 interactable',tabindex:'0',role:'listitem',onClick:t[3]||(t[3]=e=>r.enable_variable_manager=!0)},[t[9]||(t[9]=Ga('div',{class:'fa-solid fa-square-root-variable extensionsMenuExtensionButton'},null,-1)),Ga('span',null,un(e.t``),1)]),Ga('div',{class:'list-group-item flex-container flexGap5 interactable',tabindex:'0',role:'listitem',onClick:t[4]||(t[4]=e=>r.enable_variable_manager2=!0)},[t[10]||(t[10]=Ga('div',{class:'fa-solid fa-square-root-variable extensionsMenuExtensionButton'},null,-1)),Ga('span',null,un(e.t`2`),1)])])])),(La(),Fa(Wi,{to:'body'},[r.enable_prompt_viewer?(La(),Fa(l,{key:0,'storage-id':'prompt-viewer',title:e.t``,'show-guide':!0,onClose:t[5]||(t[5]=e=>r.enable_prompt_viewer=!1),onOpenGuidePopup:r.showPromptViewerHelp},{default:Ui((()=>[Wa(r.PromptViewer)])),_:1},8,['title','onOpenGuidePopup'])):es('',!0),r.enable_variable_manager?(La(),Fa(l,{key:1,'storage-id':'variable-manager',title:e.t``,onClose:t[6]||(t[6]=e=>r.enable_variable_manager=!1)},{default:Ui((()=>[Wa(r.VariableManager)])),_:1},8,['title'])):es('',!0),r.enable_variable_manager2?(La(),Fa(l,{key:2,'storage-id':'variable-manager',title:e.t`2`,onClose:t[7]||(t[7]=e=>r.enable_variable_manager2=!1)},{default:Ui((()=>[Wa(r.VariableManager2)])),_:1},8,['title'])):es('',!0)]))],64)}],['__file','Toolbox.vue']]);function Zq(){[{setting:'auto_fix_generated_markdown',expected:!1},{setting:'trim_sentences',expected:!1},{setting:'forbid_external_media',expected:!1},{setting:'encode_tags',expected:!1},{setting:'allow_name1_display',expected:!0},{setting:'allow_name2_display',expected:!0}].map((e=>function(e){return _.get(Ke,e.setting)!==e.expected&&(_.set(Ke,e.setting,e.expected),$(`#${e.setting}`).prop('checked',e.expected),!0)}(e))).some((e=>!!e))&&b()}const Hq={userAvatarPath:()=>`./User Avatars/${Y}`,charAvatarPath:()=>{const e=o.at(a),t=Z('avatar',e?.avatar||e?.name||'');return'/characters/'+t.substring(t.lastIndexOf('=')+1)}};const qq=Symbol.for('yaml.alias'),Kq=Symbol.for('yaml.document'),Gq=Symbol.for('yaml.map'),Wq=Symbol.for('yaml.pair'),Jq=Symbol.for('yaml.scalar'),Yq=Symbol.for('yaml.seq'),Xq=Symbol.for('yaml.node.type'),Qq=e=>!!e&&'object'==typeof e&&e[Xq]===qq,eK=e=>!!e&&'object'==typeof e&&e[Xq]===Kq,tK=e=>!!e&&'object'==typeof e&&e[Xq]===Gq,nK=e=>!!e&&'object'==typeof e&&e[Xq]===Wq,rK=e=>!!e&&'object'==typeof e&&e[Xq]===Jq,iK=e=>!!e&&'object'==typeof e&&e[Xq]===Yq;function oK(e){if(e&&'object'==typeof e)switch(e[Xq]){case Gq:case Yq:return!0}return!1}function aK(e){if(e&&'object'==typeof e)switch(e[Xq]){case qq:case Gq:case Jq:case Yq:return!0}return!1}const sK=e=>(rK(e)||oK(e))&&!!e.anchor,lK=Symbol('break visit'),cK=Symbol('skip children'),uK=Symbol('remove node');function dK(e,t){const n=mK(t);if(eK(e)){pK(null,e.contents,n,Object.freeze([e]))===uK&&(e.contents=null)}else pK(null,e,n,Object.freeze([]))}function pK(e,t,n,r){const i=gK(e,t,n,r);if(aK(i)||nK(i))return vK(e,r,i),pK(e,i,n,r);if('symbol'!=typeof i)if(oK(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const i=pK(e,t.items[e],n,r);if('number'==typeof i)e=i-1;else{if(i===lK)return lK;i===uK&&(t.items.splice(e,1),e-=1)}}}else if(nK(t)){r=Object.freeze(r.concat(t));const e=pK('key',t.key,n,r);if(e===lK)return lK;e===uK&&(t.key=null);const i=pK('value',t.value,n,r);if(i===lK)return lK;i===uK&&(t.value=null)}return i}async function fK(e,t){const n=mK(t);if(eK(e)){await hK(null,e.contents,n,Object.freeze([e]))===uK&&(e.contents=null)}else await hK(null,e,n,Object.freeze([]))}async function hK(e,t,n,r){const i=await gK(e,t,n,r);if(aK(i)||nK(i))return vK(e,r,i),hK(e,i,n,r);if('symbol'!=typeof i)if(oK(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const i=await hK(e,t.items[e],n,r);if('number'==typeof i)e=i-1;else{if(i===lK)return lK;i===uK&&(t.items.splice(e,1),e-=1)}}}else if(nK(t)){r=Object.freeze(r.concat(t));const e=await hK('key',t.key,n,r);if(e===lK)return lK;e===uK&&(t.key=null);const i=await hK('value',t.value,n,r);if(i===lK)return lK;i===uK&&(t.value=null)}return i}function mK(e){return'object'==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function gK(e,t,n,r){return'function'==typeof n?n(e,t,r):tK(t)?n.Map?.(e,t,r):iK(t)?n.Seq?.(e,t,r):nK(t)?n.Pair?.(e,t,r):rK(t)?n.Scalar?.(e,t,r):Qq(t)?n.Alias?.(e,t,r):void 0}function vK(e,t,n){const r=t[t.length-1];if(oK(r))r.items[e]=n;else if(nK(r))'key'===e?r.key=n:r.value=n;else{if(!eK(r)){const e=Qq(r)?'alias':'scalar';throw new Error(`Cannot replace node with ${e} parent`)}r.contents=n}}dK.BREAK=lK,dK.SKIP=cK,dK.REMOVE=uK,fK.BREAK=lK,fK.SKIP=cK,fK.REMOVE=uK;const yK={'!':'%21',',':'%2C','[':'%5B',']':'%5D','{':'%7B','}':'%7D'},bK=e=>e.replace(/[!,[\]{}]/g,(e=>yK[e]));class _K{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},_K.defaultYaml,e),this.tags=Object.assign({},_K.defaultTags,t)}clone(){const e=new _K(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new _K(this.yaml,this.tags);switch(this.yaml.version){case'1.1':this.atNextDocument=!0;break;case'1.2':this.atNextDocument=!1,this.yaml={explicit:_K.defaultYaml.explicit,version:'1.2'},this.tags=Object.assign({},_K.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:_K.defaultYaml.explicit,version:'1.1'},this.tags=Object.assign({},_K.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case'%TAG':{if(2!==n.length&&(t(0,'%TAG directive should contain exactly two parts'),n.length<2))return!1;const[e,r]=n;return this.tags[e]=r,!0}case'%YAML':{if(this.yaml.explicit=!0,1!==n.length)return t(0,'%YAML directive should contain exactly one part'),!1;const[e]=n;if('1.1'===e||'1.2'===e)return this.yaml.version=e,!0;return t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if('!'===e)return'!';if('!'!==e[0])return t(`Not a valid tag: ${e}`),null;if('<'===e[1]){const n=e.slice(2,-1);return'!'===n||'!!'===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):('>'!==e[e.length-1]&&t('Verbatim tags must end with a >'),n)}const[,n,r]=e.match(/^(.*!)([^!]*)$/s);r||t(`The ${e} tag has no suffix`);const i=this.tags[n];if(i)try{return i+decodeURIComponent(r)}catch(Jh){return t(String(Jh)),null}return'!'===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+bK(e.substring(n.length));return'!'===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||'1.2'}`]:[],n=Object.entries(this.tags);let r;if(e&&n.length>0&&aK(e.contents)){const t={};dK(e.contents,((e,n)=>{aK(n)&&n.tag&&(t[n.tag]=!0)})),r=Object.keys(t)}else r=[];for(const[i,o]of n)'!!'===i&&'tag:yaml.org,2002:'===o||e&&!r.some((e=>e.startsWith(o)))||t.push(`%TAG ${i} ${o}`);return t.join('\n')}}function wK(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function kK(e){const t=new Set;return dK(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function xK(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}function SK(e,t,n,r){if(r&&'object'==typeof r)if(Array.isArray(r))for(let i=0,o=r.length;i<o;++i){const t=r[i],n=SK(e,r,String(i),t);void 0===n?delete r[i]:n!==t&&(r[i]=n)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const t=r.get(i),n=SK(e,r,i,t);void 0===n?r.delete(i):n!==t&&r.set(i,n)}else if(r instanceof Set)for(const i of Array.from(r)){const t=SK(e,r,i,i);void 0===t?r.delete(i):t!==i&&(r.delete(i),r.add(t))}else for(const[i,o]of Object.entries(r)){const t=SK(e,r,i,o);void 0===t?delete r[i]:t!==o&&(r[i]=t)}return e.call(t,n,r)}function EK(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>EK(e,String(t),n)));if(e&&'function'==typeof e.toJSON){if(!n||!sK(e))return e.toJSON(t,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(e,r),n.onCreate=e=>{r.res=e,delete n.onCreate};const i=e.toJSON(t,n);return n.onCreate&&n.onCreate(i),i}return'bigint'!=typeof e||n?.keep?e:Number(e)}_K.defaultYaml={explicit:!1,version:'1.2'},_K.defaultTags={'!!':'tag:yaml.org,2002:'};class $K{constructor(e){Object.defineProperty(this,Xq,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:r,reviver:i}={}){if(!eK(e))throw new TypeError('A document argument is required');const o={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:'number'==typeof n?n:100},a=EK(this,'',o);if('function'==typeof r)for(const{count:s,res:l}of o.anchors.values())r(l,s);return'function'==typeof i?SK(i,{'':a},'',a):a}}class OK extends $K{constructor(e){super(qq),this.source=e,Object.defineProperty(this,'tag',{set(){throw new Error('Alias nodes cannot have tags')}})}resolve(e,t){let n,r;t?.aliasResolveCache?n=t.aliasResolveCache:(n=[],dK(e,{Node:(e,t)=>{(Qq(t)||sK(t))&&n.push(t)}}),t&&(t.aliasResolveCache=n));for(const i of n){if(i===this)break;i.anchor===this.source&&(r=i)}return r}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:i}=t,o=this.resolve(r,t);if(!o){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}let a=n.get(o);if(a||(EK(o,null,t),a=n.get(o)),!a||void 0===a.res){throw new ReferenceError('This should not happen: Alias anchor was not resolved?')}if(i>=0&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=IK(r,o,n)),a.count*a.aliasCount>i)){throw new ReferenceError('Excessive alias count indicates a resource exhaustion attack')}return a.res}toString(e,t,n){const r=`*${this.source}`;if(e){if(wK(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${r} `}return r}}function IK(e,t,n){if(Qq(t)){const r=t.resolve(e),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}if(oK(t)){let r=0;for(const i of t.items){const t=IK(e,i,n);t>r&&(r=t)}return r}if(nK(t)){const r=IK(e,t.key,n),i=IK(e,t.value,n);return Math.max(r,i)}return 1}const TK=e=>!e||'function'!=typeof e&&'object'!=typeof e;class AK extends $K{constructor(e){super(Jq),this.value=e}toJSON(e,t){return t?.keep?this.value:EK(this.value,e,t)}toString(){return String(this.value)}}AK.BLOCK_FOLDED='BLOCK_FOLDED',AK.BLOCK_LITERAL='BLOCK_LITERAL',AK.PLAIN='PLAIN',AK.QUOTE_DOUBLE='QUOTE_DOUBLE',AK.QUOTE_SINGLE='QUOTE_SINGLE';function CK(e,t,n){if(eK(e)&&(e=e.contents),aK(e))return e;if(nK(e)){const t=n.schema[Gq].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||'undefined'!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:o,schema:a,sourceObjects:s}=n;let l;if(r&&e&&'object'==typeof e){if(l=s.get(e),l)return l.anchor??(l.anchor=i(e)),new OK(l.anchor);l={anchor:null,node:null},s.set(e,l)}t?.startsWith('!!')&&(t='tag:yaml.org,2002:'+t.slice(2));let c=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),r=e.find((e=>!e.format))??e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find((t=>t.identify?.(e)&&!t.format))}(e,t,a.tags);if(!c){if(e&&'function'==typeof e.toJSON&&(e=e.toJSON()),!e||'object'!=typeof e){const t=new AK(e);return l&&(l.node=t),t}c=e instanceof Map?a[Gq]:Symbol.iterator in Object(e)?a[Yq]:a[Gq]}o&&(o(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,e,n):'function'==typeof c?.nodeClass?.from?c.nodeClass.from(n.schema,e,n):new AK(e);return t?u.tag=t:c.default||(u.tag=c.tag),l&&(l.node=u),u}function NK(e,t,n){let r=n;for(let i=t.length-1;i>=0;--i){const e=t[i];if('number'==typeof e&&Number.isInteger(e)&&e>=0){const t=[];t[e]=r,r=t}else r=new Map([[e,r]])}return CK(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error('This should not happen, please report a bug.')},schema:e,sourceObjects:new Map})}const PK=e=>null==e||'object'==typeof e&&!!e[Symbol.iterator]().next().done;class jK extends $K{constructor(e,t){super(e),Object.defineProperty(this,'schema',{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map((t=>aK(t)||nK(t)?t.clone(e):t)),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(PK(e))this.add(t);else{const[n,...r]=e,i=this.get(n,!0);if(oK(i))i.addIn(r,t);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,NK(this.schema,r,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const r=this.get(t,!0);if(oK(r))return r.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...r]=e,i=this.get(n,!0);return 0===r.length?!t&&rK(i)?i.value:i:oK(i)?i.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!nK(t))return!1;const n=t.value;return null==n||e&&rK(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const r=this.get(t,!0);return!!oK(r)&&r.hasIn(n)}setIn(e,t){const[n,...r]=e;if(0===r.length)this.set(n,t);else{const e=this.get(n,!0);if(oK(e))e.setIn(r,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,NK(this.schema,r,t))}}}}const DK=e=>e.replace(/^(?!$)(?: $)?/gm,'#');function RK(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const UK=(e,t,n)=>e.endsWith('\n')?RK(n,t):n.includes('\n')?'\n'+RK(n,t):(e.endsWith(' ')?'':' ')+n,LK='flow',zK='block',VK='quoted';function MK(e,t,n='flow',{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:a,onOverflow:s}={}){if(!i||i<0)return e;i<o&&(o=0);const l=Math.max(1+o,1+i-t.length);if(e.length<=l)return e;const c=[],u={};let d,p,f=i-t.length;'number'==typeof r&&(r>i-Math.max(2,o)?c.push(0):f=i-r);let h=!1,m=-1,g=-1,v=-1;n===zK&&(m=BK(e,m,t.length),-1!==m&&(f=m+l));for(let b;b=e[m+=1];){if(n===VK&&'\\'===b){switch(g=m,e[m+1]){case'x':m+=3;break;case'u':m+=5;break;case'U':m+=9;break;default:m+=1}v=m}if('\n'===b)n===zK&&(m=BK(e,m,t.length)),f=m+t.length+l,d=void 0;else{if(' '===b&&p&&' '!==p&&'\n'!==p&&'\t'!==p){const t=e[m+1];t&&' '!==t&&'\n'!==t&&'\t'!==t&&(d=m)}if(m>=f)if(d)c.push(d),f=d+l,d=void 0;else if(n===VK){for(;' '===p||'\t'===p;)p=b,b=e[m+=1],h=!0;const t=m>v+1?m-2:g-1;if(u[t])return e;c.push(t),u[t]=!0,f=t+l,d=void 0}else h=!0}p=b}if(h&&s&&s(),0===c.length)return e;a&&a();let y=e.slice(0,c[0]);for(let b=0;b<c.length;++b){const r=c[b],i=c[b+1]||e.length;0===r?y=`\n${t}${e.slice(0,i)}`:(n===VK&&u[r]&&(y+=`${e[r]}\\`),y+=`\n${t}${e.slice(r+1,i)}`)}return y}function BK(e,t,n){let r=t,i=t+1,o=e[i];for(;' '===o||'\t'===o;)if(t<i+n)o=e[++t];else{do{o=e[++t]}while(o&&'\n'!==o);r=t,i=t+1,o=e[i]}return r}const FK=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),ZK=e=>/^(%|---|\.\.\.)/m.test(e);function HK(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,i=t.options.doubleQuotedMinMultiLineLength,o=t.indent||(ZK(e)?'  ':'');let a='',s=0;for(let l=0,c=n[l];c;c=n[++l])if(' '===c&&'\\'===n[l+1]&&'n'===n[l+2]&&(a+=n.slice(s,l)+'\\ ',l+=1,s=l,c='\\'),'\\'===c)switch(n[l+1]){case'u':{a+=n.slice(s,l);const e=n.substr(l+2,4);switch(e){case'0000':a+='\\0';break;case'0007':a+='\\a';break;case'000b':a+='\\v';break;case'001b':a+='\\e';break;case'0085':a+='\\N';break;case'00a0':a+='\\_';break;case'2028':a+='\\L';break;case'2029':a+='\\P';break;default:'00'===e.substr(0,2)?a+='\\x'+e.substr(2):a+=n.substr(l,6)}l+=5,s=l+1}break;case'n':if(r||'"'===n[l+2]||n.length<i)l+=1;else{for(a+=n.slice(s,l)+'\n\n';'\\'===n[l+2]&&'n'===n[l+3]&&'"'!==n[l+4];)a+='\n',l+=2;a+=o,' '===n[l+2]&&(a+='\\'),l+=1,s=l+1}break;default:l+=1}return a=s?a+n.slice(s):n,r?a:MK(a,o,VK,FK(t,!1))}function qK(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes('\n')||/[ \t]\n|\n[ \t]/.test(e))return HK(e,t);const n=t.indent||(ZK(e)?'  ':''),r='\''+e.replace(/'/g,'\'\'').replace(/\n+/g,`$&\n${n}`)+'\'';return t.implicitKey?r:MK(r,n,LK,FK(t,!1))}function KK(e,t){const{singleQuote:n}=t.options;let r;if(!1===n)r=HK;else{const t=e.includes('"'),i=e.includes('\'');r=t&&!i?qK:i&&!t?HK:n?qK:HK}return r(e,t)}let GK;try{GK=new RegExp('(^|(?<!\n))\n+(?!\n|$)','g')}catch{GK=/\n+(?!\n|$)/g}function WK({comment:e,type:t,value:n},r,i,o){const{blockQuote:a,commentString:s,lineWidth:l}=r.options;if(!a||/\n[\t ]+$/.test(n))return KK(n,r);const c=r.indent||(r.forceBlockIndent||ZK(n)?'  ':''),u='literal'===a||'folded'!==a&&t!==AK.BLOCK_FOLDED&&(t===AK.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const r=t-n,i=e.length;if(i<=r)return!1;for(let o=0,a=0;o<i;++o)if('\n'===e[o]){if(o-a>r)return!0;if(a=o+1,i-a<=r)return!1}return!0}(n,l,c.length));if(!n)return u?'|\n':'>\n';let d,p;for(p=n.length;p>0;--p){const e=n[p-1];if('\n'!==e&&'\t'!==e&&' '!==e)break}let f=n.substring(p);const h=f.indexOf('\n');-1===h?d='-':n===f||h!==f.length-1?(d='+',o&&o()):d='',f&&(n=n.slice(0,-f.length),'\n'===f[f.length-1]&&(f=f.slice(0,-1)),f=f.replace(GK,`$&${c}`));let m,g=!1,v=-1;for(m=0;m<n.length;++m){const e=n[m];if(' '===e)g=!0;else{if('\n'!==e)break;v=m}}let y=n.substring(0,v<m?v+1:m);y&&(n=n.substring(y.length),y=y.replace(/\n+/g,`$&${c}`));let b=(g?c?'2':'1':'')+d;if(e&&(b+=' '+s(e.replace(/ ?[\r\n]+/g,' ')),i&&i()),!u){const e=n.replace(/\n+/g,'\n$&').replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,'$1$2').replace(/\n+/g,`$&${c}`);let i=!1;const o=FK(r,!0);'folded'!==a&&t!==AK.BLOCK_FOLDED&&(o.onOverflow=()=>{i=!0});const s=MK(`${y}${e}${f}`,c,zK,o);if(!i)return`>${b}\n${c}${s}`}return`|${b}\n${c}${y}${n=n.replace(/\n+/g,`$&${c}`)}${f}`}function JK(e,t,n,r){const{implicitKey:i,inFlow:o}=t,a='string'==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:s}=e;s!==AK.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(s=AK.QUOTE_DOUBLE);const l=e=>{switch(e){case AK.BLOCK_FOLDED:case AK.BLOCK_LITERAL:return i||o?KK(a.value,t):WK(a,t,n,r);case AK.QUOTE_DOUBLE:return HK(a.value,t);case AK.QUOTE_SINGLE:return qK(a.value,t);case AK.PLAIN:return function(e,t,n,r){const{type:i,value:o}=e,{actualString:a,implicitKey:s,indent:l,indentStep:c,inFlow:u}=t;if(s&&o.includes('\n')||u&&/[[\]{},]/.test(o))return KK(o,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return s||u||!o.includes('\n')?KK(o,t):WK(e,t,n,r);if(!s&&!u&&i!==AK.PLAIN&&o.includes('\n'))return WK(e,t,n,r);if(ZK(o)){if(''===l)return t.forceBlockIndent=!0,WK(e,t,n,r);if(s&&l===c)return KK(o,t)}const d=o.replace(/\n+/g,`$&\n${l}`);if(a){const e=e=>e.default&&'tag:yaml.org,2002:str'!==e.tag&&e.test?.test(d),{compat:n,tags:r}=t.doc.schema;if(r.some(e)||n?.some(e))return KK(o,t)}return s?d:MK(d,l,LK,FK(t,!1))}(a,t,n,r);default:return null}};let c=l(s);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,r=i&&e||n;if(c=l(r),null===c)throw new Error(`Unsupported default string type ${r}`)}return c}function YK(e,t){const n=Object.assign({blockQuote:!0,commentString:DK,defaultKeyType:null,defaultStringType:'PLAIN',directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:'false',flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:'null',simpleKeys:!1,singleQuote:null,trueStr:'true',verifyAliasOrder:!0},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case'block':r=!1;break;case'flow':r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?' ':'',indent:'',indentStep:'number'==typeof n.indent?' '.repeat(n.indent):'  ',inFlow:r,options:n}}function XK(e,t,n,r){if(nK(e))return e.toString(t,n,r);if(Qq(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError('Cannot stringify circular structure without alias nodes');t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let i;const o=aK(e)?e:t.doc.createNode(e,{onTagObj:e=>i=e});i??(i=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))??n[0]}let n,r;if(rK(t)){r=t.value;let i=e.filter((e=>e.identify?.(r)));if(i.length>1){const e=i.filter((e=>e.test));e.length>0&&(i=e)}n=i.find((e=>e.format===t.format))??i.find((e=>!e.format))}else r=t,n=e.find((e=>e.nodeClass&&r instanceof e.nodeClass));if(!n)throw new Error(`Tag not resolved for ${r?.constructor?.name??(null===r?'null':typeof r)} value`);return n}(t.doc.schema.tags,o));const a=function(e,t,{anchors:n,doc:r}){if(!r.directives)return'';const i=[],o=(rK(e)||oK(e))&&e.anchor;o&&wK(o)&&(n.add(o),i.push(`&${o}`));const a=e.tag??(t.default?null:t.tag);return a&&i.push(r.directives.tagString(a)),i.join(' ')}(o,i,t);a.length>0&&(t.indentAtStart=(t.indentAtStart??0)+a.length+1);const s='function'==typeof i.stringify?i.stringify(o,t,n,r):rK(o)?JK(o,t,n,r):o.toString(t,n,r);return a?rK(o)||'{'===s[0]||'['===s[0]?`${a} ${s}`:`${a}\n${t.indent}${s}`:s}function QK(e,t){'debug'!==e&&'warn'!==e||console.warn(t)}const eG='<<',tG={identify:e=>e===eG||'symbol'==typeof e&&e.description===eG,default:'key',tag:'tag:yaml.org,2002:merge',test:/^<<$/,resolve:()=>Object.assign(new AK(Symbol(eG)),{addToJSMap:nG}),stringify:()=>eG};function nG(e,t,n){if(n=e&&Qq(n)?n.resolve(e.doc):n,iK(n))for(const r of n.items)rG(e,t,r);else if(Array.isArray(n))for(const r of n)rG(e,t,r);else rG(e,t,n)}function rG(e,t,n){const r=e&&Qq(n)?n.resolve(e.doc):n;if(!tK(r))throw new Error('Merge sources must be maps or map aliases');const i=r.toJSON(null,e,Map);for(const[o,a]of i)t instanceof Map?t.has(o)||t.set(o,a):t instanceof Set?t.add(o):Object.prototype.hasOwnProperty.call(t,o)||Object.defineProperty(t,o,{value:a,writable:!0,enumerable:!0,configurable:!0});return t}function iG(e,t,{key:n,value:r}){if(aK(n)&&n.addToJSMap)n.addToJSMap(e,t,r);else if(((e,t)=>(tG.identify(t)||rK(t)&&(!t.type||t.type===AK.PLAIN)&&tG.identify(t.value))&&e?.doc.schema.tags.some((e=>e.tag===tG.tag&&e.default)))(e,n))nG(e,t,r);else{const i=EK(n,'',e);if(t instanceof Map)t.set(i,EK(r,i,e));else if(t instanceof Set)t.add(i);else{const o=function(e,t,n){if(null===t)return'';if('object'!=typeof t)return String(t);if(aK(e)&&n?.doc){const t=YK(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const r=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(r);e.length>40&&(e=e.substring(0,36)+'..."'),QK(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(t)}(n,i,e),a=EK(r,o,e);o in t?Object.defineProperty(t,o,{value:a,writable:!0,enumerable:!0,configurable:!0}):t[o]=a}}return t}function oG(e,t,n){const r=CK(e,void 0,n),i=CK(t,void 0,n);return new aG(r,i)}class aG{constructor(e,t=null){Object.defineProperty(this,Xq,{value:Wq}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return aK(t)&&(t=t.clone(e)),aK(n)&&(n=n.clone(e)),new aG(t,n)}toJSON(_,e){return iG(e,e?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,r,i){const{allNullValues:o,doc:a,indent:s,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:d}}=n;let p=aK(e)&&e.comment||null;if(d){if(p)throw new Error('With simple keys, key nodes cannot have comments');if(oK(e)||!aK(e)&&'object'==typeof e)throw new Error('With simple keys, collection cannot be used as a key value')}let f=!d&&(!e||p&&null==t&&!n.inFlow||oK(e)||(rK(e)?e.type===AK.BLOCK_FOLDED||e.type===AK.BLOCK_LITERAL:'object'==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!f&&(d||!o),indent:s+l});let h,m,g,v=!1,y=!1,b=XK(e,n,(()=>v=!0),(()=>y=!0));if(!f&&!n.inFlow&&b.length>1024){if(d)throw new Error('With simple keys, single line scalar must not span more than 1024 characters');f=!0}if(n.inFlow){if(o||null==t)return v&&r&&r(),''===b?'?':f?`? ${b}`:b}else if(o&&!d||null==t&&f)return b=`? ${b}`,p&&!v?b+=UK(b,n.indent,c(p)):y&&i&&i(),b;v&&(p=null),f?(p&&(b+=UK(b,n.indent,c(p))),b=`? ${b}\n${s}:`):(b=`${b}:`,p&&(b+=UK(b,n.indent,c(p)))),aK(t)?(h=!!t.spaceBefore,m=t.commentBefore,g=t.comment):(h=!1,m=null,g=null,t&&'object'==typeof t&&(t=a.createNode(t))),n.implicitKey=!1,f||p||!rK(t)||(n.indentAtStart=b.length+1),y=!1,u||!(l.length>=2)||n.inFlow||f||!iK(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let w=!1;const k=XK(t,n,(()=>w=!0),(()=>y=!0));let x=' ';if(p||h||m)x=h?'\n':'',m&&(x+=`\n${RK(c(m),n.indent)}`),''!==k||n.inFlow?x+=`\n${n.indent}`:'\n'===x&&(x='\n\n');else if(!f&&oK(t)){const e=k[0],r=k.indexOf('\n'),i=-1!==r,o=n.inFlow??t.flow??0===t.items.length;if(i||!o){let t=!1;if(i&&('&'===e||'!'===e)){let n=k.indexOf(' ');'&'===e&&-1!==n&&n<r&&'!'===k[n+1]&&(n=k.indexOf(' ',n+1)),(-1===n||r<n)&&(t=!0)}t||(x=`\n${n.indent}`)}}else''!==k&&'\n'!==k[0]||(x='');return b+=x+k,n.inFlow?w&&r&&r():g&&!w?b+=UK(b,n.indent,c(g)):y&&i&&i(),b}(this,e,t,n):JSON.stringify(this)}}function sG(e,t,n){return(t.inFlow??e.flow?cG:lG)(e,t,n)}function lG({comment:e,items:t},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:a,onComment:s}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:o,type:null});let d=!1;const p=[];for(let h=0;h<t.length;++h){const e=t[h];let i=null;if(aK(e))!d&&e.spaceBefore&&p.push(''),uG(n,p,e.commentBefore,d),e.comment&&(i=e.comment);else if(nK(e)){const t=aK(e.key)?e.key:null;t&&(!d&&t.spaceBefore&&p.push(''),uG(n,p,t.commentBefore,d))}d=!1;let a=XK(e,u,(()=>i=null),(()=>d=!0));i&&(a+=UK(a,o,c(i))),d&&i&&(d=!1),p.push(r+a)}let f;if(0===p.length)f=i.start+i.end;else{f=p[0];for(let e=1;e<p.length;++e){const t=p[e];f+=t?`\n${l}${t}`:'\n'}}return e?(f+='\n'+RK(c(e),l),s&&s()):d&&a&&a(),f}function cG({items:e},t,{flowChars:n,itemIndent:r}){const{indent:i,indentStep:o,flowCollectionPadding:a,options:{commentString:s}}=t;r+=o;const l=Object.assign({},t,{indent:r,inFlow:!0,type:null});let c=!1,u=0;const d=[];for(let h=0;h<e.length;++h){const n=e[h];let i=null;if(aK(n))n.spaceBefore&&d.push(''),uG(t,d,n.commentBefore,!1),n.comment&&(i=n.comment);else if(nK(n)){const e=aK(n.key)?n.key:null;e&&(e.spaceBefore&&d.push(''),uG(t,d,e.commentBefore,!1),e.comment&&(c=!0));const r=aK(n.value)?n.value:null;r?(r.comment&&(i=r.comment),r.commentBefore&&(c=!0)):null==n.value&&e?.comment&&(i=e.comment)}i&&(c=!0);let o=XK(n,l,(()=>i=null));h<e.length-1&&(o+=','),i&&(o+=UK(o,r,s(i))),!c&&(d.length>u||o.includes('\n'))&&(c=!0),d.push(o),u=d.length}const{start:p,end:f}=n;if(0===d.length)return p+f;if(!c){const e=d.reduce(((e,t)=>e+t.length+2),2);c=t.options.lineWidth>0&&e>t.options.lineWidth}if(c){let e=p;for(const t of d)e+=t?`\n${o}${i}${t}`:'\n';return`${e}\n${i}${f}`}return`${p}${a}${d.join(' ')}${a}${f}`}function uG({indent:e,options:{commentString:t}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,'')),r){const i=RK(t(r),e);n.push(i.trimStart())}}function dG(e,t){const n=rK(t)?t.value:t;for(const r of e)if(nK(r)){if(r.key===t||r.key===n)return r;if(rK(r.key)&&r.key.value===n)return r}}class pG extends jK{static get tagName(){return'tag:yaml.org,2002:map'}constructor(e){super(Gq,e),this.items=[]}static from(e,t,n){const{keepUndefined:r,replacer:i}=n,o=new this(e),a=(e,a)=>{if('function'==typeof i)a=i.call(t,e,a);else if(Array.isArray(i)&&!i.includes(e))return;(void 0!==a||r)&&o.items.push(oG(e,a,n))};if(t instanceof Map)for(const[s,l]of t)a(s,l);else if(t&&'object'==typeof t)for(const s of Object.keys(t))a(s,t[s]);return'function'==typeof e.sortMapEntries&&o.items.sort(e.sortMapEntries),o}add(e,t){let n;n=nK(e)?e:e&&'object'==typeof e&&'key'in e?new aG(e.key,e.value):new aG(e,e?.value);const r=dG(this.items,n.key),i=this.schema?.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);rK(r.value)&&TK(n.value)?r.value.value=n.value:r.value=n.value}else if(i){const e=this.items.findIndex((e=>i(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=dG(this.items,e);if(!t)return!1;return this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=dG(this.items,e),r=n?.value;return(!t&&rK(r)?r.value:r)??void 0}has(e){return!!dG(this.items,e)}set(e,t){this.add(new aG(e,t),!0)}toJSON(_,e,t){const n=t?new t:e?.mapAsMap?new Map:{};e?.onCreate&&e.onCreate(n);for(const r of this.items)iG(e,n,r);return n}toString(e,t,n){if(!e)return JSON.stringify(this);for(const r of this.items)if(!nK(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),sG(this,e,{blockItemPrefix:'',flowChars:{start:'{',end:'}'},itemIndent:e.indent||'',onChompKeep:n,onComment:t})}}const fG={collection:'map',default:!0,nodeClass:pG,tag:'tag:yaml.org,2002:map',resolve:(e,t)=>(tK(e)||t('Expected a mapping for this tag'),e),createNode:(e,t,n)=>pG.from(e,t,n)};class hG extends jK{static get tagName(){return'tag:yaml.org,2002:seq'}constructor(e){super(Yq,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=mG(e);if('number'!=typeof t)return!1;return this.items.splice(t,1).length>0}get(e,t){const n=mG(e);if('number'!=typeof n)return;const r=this.items[n];return!t&&rK(r)?r.value:r}has(e){const t=mG(e);return'number'==typeof t&&t<this.items.length}set(e,t){const n=mG(e);if('number'!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];rK(r)&&TK(t)?r.value=t:this.items[n]=t}toJSON(_,e){const t=[];e?.onCreate&&e.onCreate(t);let n=0;for(const r of this.items)t.push(EK(r,String(n++),e));return t}toString(e,t,n){return e?sG(this,e,{blockItemPrefix:'- ',flowChars:{start:'[',end:']'},itemIndent:(e.indent||'')+'  ',onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){const{replacer:r}=n,i=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let o of t){if('function'==typeof r){const n=t instanceof Set?o:String(e++);o=r.call(t,n,o)}i.items.push(CK(o,void 0,n))}}return i}}function mG(e){let t=rK(e)?e.value:e;return t&&'string'==typeof t&&(t=Number(t)),'number'==typeof t&&Number.isInteger(t)&&t>=0?t:null}const gG={collection:'seq',default:!0,nodeClass:hG,tag:'tag:yaml.org,2002:seq',resolve:(e,t)=>(iK(e)||t('Expected a sequence for this tag'),e),createNode:(e,t,n)=>hG.from(e,t,n)},vG={identify:e=>'string'==typeof e,default:!0,tag:'tag:yaml.org,2002:str',resolve:e=>e,stringify:(e,t,n,r)=>JK(e,t=Object.assign({actualString:!0},t),n,r)},yG={identify:e=>null==e,createNode:()=>new AK(null),default:!0,tag:'tag:yaml.org,2002:null',test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new AK(null),stringify:({source:e},t)=>'string'==typeof e&&yG.test.test(e)?e:t.options.nullStr},bG={identify:e=>'boolean'==typeof e,default:!0,tag:'tag:yaml.org,2002:bool',test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new AK('t'===e[0]||'T'===e[0]),stringify({source:e,value:t},n){if(e&&bG.test.test(e)){if(t===('t'===e[0]||'T'===e[0]))return e}return t?n.options.trueStr:n.options.falseStr}};function _G({format:e,minFractionDigits:t,tag:n,value:r}){if('bigint'==typeof r)return String(r);const i='number'==typeof r?r:Number(r);if(!isFinite(i))return isNaN(i)?'.nan':i<0?'-.inf':'.inf';let o=JSON.stringify(r);if(!e&&t&&(!n||'tag:yaml.org,2002:float'===n)&&/^\d/.test(o)){let e=o.indexOf('.');e<0&&(e=o.length,o+='.');let n=t-(o.length-e-1);for(;n-- >0;)o+='0'}return o}const wG={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>'nan'===e.slice(-3).toLowerCase()?NaN:'-'===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_G},kG={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',format:'EXP',test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():_G(e)}},xG={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new AK(parseFloat(e)),n=e.indexOf('.');return-1!==n&&'0'===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:_G},SG=e=>'bigint'==typeof e||Number.isInteger(e),EG=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function $G(e,t,n){const{value:r}=e;return SG(r)&&r>=0?n+r.toString(t):_G(e)}const OG={identify:e=>SG(e)&&e>=0,default:!0,tag:'tag:yaml.org,2002:int',format:'OCT',test:/^0o[0-7]+$/,resolve:(e,t,n)=>EG(e,2,8,n),stringify:e=>$G(e,8,'0o')},IG={identify:SG,default:!0,tag:'tag:yaml.org,2002:int',test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>EG(e,0,10,n),stringify:_G},TG={identify:e=>SG(e)&&e>=0,default:!0,tag:'tag:yaml.org,2002:int',format:'HEX',test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>EG(e,2,16,n),stringify:e=>$G(e,16,'0x')},AG=[fG,gG,vG,yG,bG,OG,IG,TG,wG,kG,xG];function CG(e){return'bigint'==typeof e||Number.isInteger(e)}const NG=({value:e})=>JSON.stringify(e),PG=[{identify:e=>'string'==typeof e,default:!0,tag:'tag:yaml.org,2002:str',resolve:e=>e,stringify:NG},{identify:e=>null==e,createNode:()=>new AK(null),default:!0,tag:'tag:yaml.org,2002:null',test:/^null$/,resolve:()=>null,stringify:NG},{identify:e=>'boolean'==typeof e,default:!0,tag:'tag:yaml.org,2002:bool',test:/^true$|^false$/,resolve:e=>'true'===e,stringify:NG},{identify:CG,default:!0,tag:'tag:yaml.org,2002:int',test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>CG(e)?e.toString():JSON.stringify(e)},{identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:NG}],jG=[fG,gG].concat(PG,{default:!0,tag:'',test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),DG={identify:e=>e instanceof Uint8Array,default:!1,tag:'tag:yaml.org,2002:binary',resolve(e,t){if('function'==typeof atob){const t=atob(e.replace(/[\n\r]/g,'')),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t('This environment does not support reading binary tags; either Buffer or atob is required'),e},stringify({comment:e,type:t,value:n},r,i,o){if(!n)return'';const a=n;let s;if('function'!=typeof btoa)throw new Error('This environment does not support writing binary tags; either Buffer or btoa is required');{let e='';for(let t=0;t<a.length;++t)e+=String.fromCharCode(a[t]);s=btoa(e)}if(t??(t=AK.BLOCK_LITERAL),t!==AK.QUOTE_DOUBLE){const e=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(s.length/e),i=new Array(n);for(let t=0,r=0;t<n;++t,r+=e)i[t]=s.substr(r,e);s=i.join(t===AK.BLOCK_LITERAL?'\n':' ')}return JK({comment:e,type:t,value:s},r,i,o)}};function RG(e,t){if(iK(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!nK(r)){if(tK(r)){r.items.length>1&&t('Each pair must have its own sequence indicator');const e=r.items[0]||new aG(new AK(null));if(r.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${r.commentBefore}\n${e.key.commentBefore}`:r.commentBefore),r.comment){const t=e.value??e.key;t.comment=t.comment?`${r.comment}\n${t.comment}`:r.comment}r=e}e.items[n]=nK(r)?r:new aG(r)}}else t('Expected a sequence for this tag');return e}function UG(e,t,n){const{replacer:r}=n,i=new hG(e);i.tag='tag:yaml.org,2002:pairs';let o=0;if(t&&Symbol.iterator in Object(t))for(let a of t){let e,s;if('function'==typeof r&&(a=r.call(t,String(o++),a)),Array.isArray(a)){if(2!==a.length)throw new TypeError(`Expected [key, value] tuple: ${a}`);e=a[0],s=a[1]}else if(a&&a instanceof Object){const t=Object.keys(a);if(1!==t.length)throw new TypeError(`Expected tuple with one key, not ${t.length} keys`);e=t[0],s=a[e]}else e=a;i.items.push(oG(e,s,n))}return i}const LG={collection:'seq',default:!1,tag:'tag:yaml.org,2002:pairs',resolve:RG,createNode:UG};class zG extends hG{constructor(){super(),this.add=pG.prototype.add.bind(this),this.delete=pG.prototype.delete.bind(this),this.get=pG.prototype.get.bind(this),this.has=pG.prototype.has.bind(this),this.set=pG.prototype.set.bind(this),this.tag=zG.tag}toJSON(_,e){if(!e)return super.toJSON(_);const t=new Map;e?.onCreate&&e.onCreate(t);for(const n of this.items){let r,i;if(nK(n)?(r=EK(n.key,'',e),i=EK(n.value,r,e)):r=EK(n,'',e),t.has(r))throw new Error('Ordered maps must not include duplicate keys');t.set(r,i)}return t}static from(e,t,n){const r=UG(e,t,n),i=new this;return i.items=r.items,i}}zG.tag='tag:yaml.org,2002:omap';const VG={collection:'seq',identify:e=>e instanceof Map,nodeClass:zG,default:!1,tag:'tag:yaml.org,2002:omap',resolve(e,t){const n=RG(e,t),r=[];for(const{key:i}of n.items)rK(i)&&(r.includes(i.value)?t(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new zG,n)},createNode:(e,t,n)=>zG.from(e,t,n)};function MG({value:e,source:t},n){return t&&(e?BG:FG).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const BG={identify:e=>!0===e,default:!0,tag:'tag:yaml.org,2002:bool',test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new AK(!0),stringify:MG},FG={identify:e=>!1===e,default:!0,tag:'tag:yaml.org,2002:bool',test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new AK(!1),stringify:MG},ZG={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>'nan'===e.slice(-3).toLowerCase()?NaN:'-'===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_G},HG={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',format:'EXP',test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,'')),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():_G(e)}},qG={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new AK(parseFloat(e.replace(/_/g,''))),n=e.indexOf('.');if(-1!==n){const r=e.substring(n+1).replace(/_/g,'');'0'===r[r.length-1]&&(t.minFractionDigits=r.length)}return t},stringify:_G},KG=e=>'bigint'==typeof e||Number.isInteger(e);function GG(e,t,n,{intAsBigInt:r}){const i=e[0];if('-'!==i&&'+'!==i||(t+=1),e=e.substring(t).replace(/_/g,''),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return'-'===i?BigInt(-1)*t:t}const o=parseInt(e,n);return'-'===i?-1*o:o}function WG(e,t,n){const{value:r}=e;if(KG(r)){const e=r.toString(t);return r<0?'-'+n+e.substr(1):n+e}return _G(e)}const JG={identify:KG,default:!0,tag:'tag:yaml.org,2002:int',format:'BIN',test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>GG(e,2,2,n),stringify:e=>WG(e,2,'0b')},YG={identify:KG,default:!0,tag:'tag:yaml.org,2002:int',format:'OCT',test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>GG(e,1,8,n),stringify:e=>WG(e,8,'0')},XG={identify:KG,default:!0,tag:'tag:yaml.org,2002:int',test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>GG(e,0,10,n),stringify:_G},QG={identify:KG,default:!0,tag:'tag:yaml.org,2002:int',format:'HEX',test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>GG(e,2,16,n),stringify:e=>WG(e,16,'0x')};class eW extends pG{constructor(e){super(e),this.tag=eW.tag}add(e){let t;t=nK(e)?e:e&&'object'==typeof e&&'key'in e&&'value'in e&&null===e.value?new aG(e.key,null):new aG(e,null);dG(this.items,t.key)||this.items.push(t)}get(e,t){const n=dG(this.items,e);return!t&&nK(n)?rK(n.key)?n.key.value:n.key:n}set(e,t){if('boolean'!=typeof t)throw new Error('Expected boolean value for set(key, value) in a YAML set, not '+typeof t);const n=dG(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new aG(e))}toJSON(_,e){return super.toJSON(_,e,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error('Set items must all have null values')}static from(e,t,n){const{replacer:r}=n,i=new this(e);if(t&&Symbol.iterator in Object(t))for(let o of t)'function'==typeof r&&(o=r.call(t,o,o)),i.items.push(oG(o,null,n));return i}}eW.tag='tag:yaml.org,2002:set';const tW={collection:'map',identify:e=>e instanceof Set,nodeClass:eW,default:!1,tag:'tag:yaml.org,2002:set',createNode:(e,t,n)=>eW.from(e,t,n),resolve(e,t){if(tK(e)){if(e.hasAllNullValues(!0))return Object.assign(new eW,e);t('Set items must all have null values')}else t('Expected a mapping for this tag');return e}};function nW(e,t){const n=e[0],r='-'===n||'+'===n?e.substring(1):e,i=e=>t?BigInt(e):Number(e),o=r.replace(/_/g,'').split(':').reduce(((e,t)=>e*i(60)+i(t)),i(0));return'-'===n?i(-1)*o:o}function rW(e){let{value:t}=e,n=e=>e;if('bigint'==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return _G(e);let r='';t<0&&(r='-',t*=n(-1));const i=n(60),o=[t%i];return t<60?o.unshift(0):(t=(t-o[0])/i,o.unshift(t%i),t>=60&&(t=(t-o[0])/i,o.unshift(t))),r+o.map((e=>String(e).padStart(2,'0'))).join(':').replace(/000000\d*$/,'')}const iW={identify:e=>'bigint'==typeof e||Number.isInteger(e),default:!0,tag:'tag:yaml.org,2002:int',format:'TIME',test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>nW(e,n),stringify:rW},oW={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',format:'TIME',test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>nW(e,!1),stringify:rW},aW={identify:e=>e instanceof Date,default:!0,tag:'tag:yaml.org,2002:timestamp',test:RegExp('^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$'),resolve(e){const t=e.match(aW.test);if(!t)throw new Error('!!timestamp expects a date, starting with yyyy-mm-dd');const[,n,r,i,o,a,s]=t.map(Number),l=t[7]?Number((t[7]+'00').substr(1,3)):0;let c=Date.UTC(n,r-1,i,o||0,a||0,s||0,l);const u=t[8];if(u&&'Z'!==u){let e=nW(u,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,'')??''},sW=[fG,gG,vG,yG,BG,FG,JG,YG,XG,QG,ZG,HG,qG,DG,tG,VG,LG,tW,iW,oW,aW],lW=new Map([['core',AG],['failsafe',[fG,gG,vG]],['json',jG],['yaml11',sW],['yaml-1.1',sW]]),cW={binary:DG,bool:bG,float:xG,floatExp:kG,floatNaN:wG,floatTime:oW,int:IG,intHex:TG,intOct:OG,intTime:iW,map:fG,merge:tG,null:yG,omap:VG,pairs:LG,seq:gG,set:tW,timestamp:aW},uW={'tag:yaml.org,2002:binary':DG,'tag:yaml.org,2002:merge':tG,'tag:yaml.org,2002:omap':VG,'tag:yaml.org,2002:pairs':LG,'tag:yaml.org,2002:set':tW,'tag:yaml.org,2002:timestamp':aW};function dW(e,t,n){const r=lW.get(t);if(r&&!e)return n&&!r.includes(tG)?r.concat(tG):r.slice();let i=r;if(!i){if(!Array.isArray(e)){const e=Array.from(lW.keys()).filter((e=>'yaml11'!==e)).map((e=>JSON.stringify(e))).join(', ');throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}i=[]}if(Array.isArray(e))for(const o of e)i=i.concat(o);else'function'==typeof e&&(i=e(i.slice()));return n&&(i=i.concat(tG)),i.reduce(((e,t)=>{const n='string'==typeof t?cW[t]:t;if(!n){const e=JSON.stringify(t),n=Object.keys(cW).map((e=>JSON.stringify(e))).join(', ');throw new Error(`Unknown custom tag ${e}; use one of ${n}`)}return e.includes(n)||e.push(n),e}),[])}const pW=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class fW{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?dW(e,'compat'):e?dW(null,e):null,this.name='string'==typeof i&&i||'core',this.knownTags=r?uW:{},this.tags=dW(t,this.name,n),this.toStringOptions=a??null,Object.defineProperty(this,Gq,{value:fG}),Object.defineProperty(this,Jq,{value:vG}),Object.defineProperty(this,Yq,{value:gG}),this.sortMapEntries='function'==typeof o?o:!0===o?pW:null}clone(){const e=Object.create(fW.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}let hW=class e{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Xq,{value:Kq});let r=null;'function'==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t,t=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:'warn',prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:'1.2'},n);this.options=i;let{version:o}=i;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new _K({version:o}),this.setSchema(o,n),this.contents=void 0===e?null:this.createNode(e,r,n)}clone(){const t=Object.create(e.prototype,{[Xq]:{value:Kq}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=aK(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(e){mW(this.contents)&&this.contents.add(e)}addIn(e,t){mW(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=kK(this);e.anchor=!t||n.has(t)?xK(t||'a',n):t}return new OK(e.anchor)}createNode(e,t,n){let r;if('function'==typeof t)e=t.call({'':e},'',e),r=t;else if(Array.isArray(t)){const e=e=>'number'==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),r=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:a,keepUndefined:s,onTagObj:l,tag:c}=n??{},{onAnchor:u,setAnchors:d,sourceObjects:p}=function(e,t){const n=[],r=new Map;let i=null;return{onAnchor:r=>{n.push(r),i??(i=kK(e));const o=xK(t,i);return i.add(o),o},setAnchors:()=>{for(const e of n){const t=r.get(e);if('object'!=typeof t||!t.anchor||!rK(t.node)&&!oK(t.node)){const t=new Error('Failed to resolve repeated object (this should not happen)');throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:r}}(this,o||'a'),f=CK(e,c,{aliasDuplicateObjects:i??!0,keepUndefined:s??!1,onAnchor:u,onTagObj:l,replacer:r,schema:this.schema,sourceObjects:p});return a&&oK(f)&&(f.flow=!0),d(),f}createPair(e,t,n={}){const r=this.createNode(e,null,n),i=this.createNode(t,null,n);return new aG(r,i)}delete(e){return!!mW(this.contents)&&this.contents.delete(e)}deleteIn(e){return PK(e)?null!=this.contents&&(this.contents=null,!0):!!mW(this.contents)&&this.contents.deleteIn(e)}get(e,t){return oK(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return PK(e)?!t&&rK(this.contents)?this.contents.value:this.contents:oK(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!oK(this.contents)&&this.contents.has(e)}hasIn(e){return PK(e)?void 0!==this.contents:!!oK(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=NK(this.schema,[e],t):mW(this.contents)&&this.contents.set(e,t)}setIn(e,t){PK(e)?this.contents=t:null==this.contents?this.contents=NK(this.schema,Array.from(e),t):mW(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch('number'==typeof e&&(e=String(e)),e){case'1.1':this.directives?this.directives.yaml.version='1.1':this.directives=new _K({version:'1.1'}),n={resolveKnownTags:!1,schema:'yaml-1.1'};break;case'1.2':case'next':this.directives?this.directives.yaml.version=e:this.directives=new _K({version:e}),n={resolveKnownTags:!0,schema:'core'};break;case null:this.directives&&delete this.directives,n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!n)throw new Error('With a null YAML version, the { schema: Schema } option is required');this.schema=new fW(Object.assign(n,t))}}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:'number'==typeof r?r:100},s=EK(this.contents,t??'',a);if('function'==typeof i)for(const{count:l,res:c}of a.anchors.values())i(c,l);return'function'==typeof o?SK(o,{'':s},'',s):s}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error('Document with errors cannot be stringified');if('indent'in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let r=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(n.push(t),r=!0):e.directives.docStart&&(r=!0)}r&&n.push('---');const i=YK(e,t),{commentString:o}=i.options;if(e.commentBefore){1!==n.length&&n.unshift('');const t=o(e.commentBefore);n.unshift(RK(t,''))}let a=!1,s=null;if(e.contents){if(aK(e.contents)){if(e.contents.spaceBefore&&r&&n.push(''),e.contents.commentBefore){const t=o(e.contents.commentBefore);n.push(RK(t,''))}i.forceBlockIndent=!!e.comment,s=e.contents.comment}const t=s?void 0:()=>a=!0;let l=XK(e.contents,i,(()=>s=null),t);s&&(l+=UK(l,'',o(s))),'|'!==l[0]&&'>'!==l[0]||'---'!==n[n.length-1]?n.push(l):n[n.length-1]=`--- ${l}`}else n.push(XK(e.contents,i));if(e.directives?.docEnd)if(e.comment){const t=o(e.comment);t.includes('\n')?(n.push('...'),n.push(RK(t,''))):n.push(`... ${t}`)}else n.push('...');else{let t=e.comment;t&&a&&(t=t.replace(/^\n+/,'')),t&&(a&&!s||''===n[n.length-1]||n.push(''),n.push(RK(o(t),'')))}return n.join('\n')+'\n'}(this,e)}};function mW(e){if(oK(e))return!0;throw new Error('Expected a YAML collection as document contents')}class gW extends Error{constructor(e,t,n,r){super(),this.name=e,this.code=n,this.message=r,this.pos=t}}class vW extends gW{constructor(e,t,n){super('YAMLParseError',e,t,n)}}class yW extends gW{constructor(e,t,n){super('YAMLWarning',e,t,n)}}const bW=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((e=>t.linePos(e)));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,a=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,'');if(o>=60&&a.length>80){const e=Math.min(o-39,a.length-79);a=''+a.substring(e),o-=e-1}if(a.length>80&&(a=a.substring(0,79)+''),r>1&&/^ *$/.test(a.substring(0,o))){let n=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);n.length>80&&(n=n.substring(0,79)+'\n'),a=n+a}if(/[^ ]/.test(a)){let e=1;const t=n.linePos[1];t&&t.line===r&&t.col>i&&(e=Math.max(1,Math.min(t.col-i,80-o)));const s=' '.repeat(o)+'^'.repeat(e);n.message+=`:\n\n${a}\n${s}\n`}};function _W(e,{flow:t,indicator:n,next:r,offset:i,onError:o,parentIndent:a,startOnNewline:s}){let l=!1,c=s,u=s,d='',p='',f=!1,h=!1,m=null,g=null,v=null,y=null,b=null,w=null,k=null;for(const E of e)switch(h&&('space'!==E.type&&'newline'!==E.type&&'comma'!==E.type&&o(E.offset,'MISSING_CHAR','Tags and anchors must be separated from the next token by white space'),h=!1),m&&(c&&'comment'!==E.type&&'newline'!==E.type&&o(m,'TAB_AS_INDENT','Tabs are not allowed as indentation'),m=null),E.type){case'space':t||'doc-start'===n&&'flow-collection'===r?.type||!E.source.includes('\t')||(m=E),u=!0;break;case'comment':{u||o(E,'MISSING_CHAR','Comments must be separated from other tokens by white space characters');const e=E.source.substring(1)||' ';d?d+=p+e:d=e,p='',c=!1;break}case'newline':c?d?d+=E.source:w&&'seq-item-ind'===n||(l=!0):p+=E.source,c=!0,f=!0,(g||v)&&(y=E),u=!0;break;case'anchor':g&&o(E,'MULTIPLE_ANCHORS','A node can have at most one anchor'),E.source.endsWith(':')&&o(E.offset+E.source.length-1,'BAD_ALIAS','Anchor ending in : is ambiguous',!0),g=E,k??(k=E.offset),c=!1,u=!1,h=!0;break;case'tag':v&&o(E,'MULTIPLE_TAGS','A node can have at most one tag'),v=E,k??(k=E.offset),c=!1,u=!1,h=!0;break;case n:(g||v)&&o(E,'BAD_PROP_ORDER',`Anchors and tags must be after the ${E.source} indicator`),w&&o(E,'UNEXPECTED_TOKEN',`Unexpected ${E.source} in ${t??'collection'}`),w=E,c='seq-item-ind'===n||'explicit-key-ind'===n,u=!1;break;case'comma':if(t){b&&o(E,'UNEXPECTED_TOKEN',`Unexpected , in ${t}`),b=E,c=!1,u=!1;break}default:o(E,'UNEXPECTED_TOKEN',`Unexpected ${E.type} token`),c=!1,u=!1}const x=e[e.length-1],S=x?x.offset+x.source.length:i;return h&&r&&'space'!==r.type&&'newline'!==r.type&&'comma'!==r.type&&('scalar'!==r.type||''!==r.source)&&o(r.offset,'MISSING_CHAR','Tags and anchors must be separated from the next token by white space'),m&&(c&&m.indent<=a||'block-map'===r?.type||'block-seq'===r?.type)&&o(m,'TAB_AS_INDENT','Tabs are not allowed as indentation'),{comma:b,found:w,spaceBefore:l,comment:d,hasNewline:f,anchor:g,tag:v,newlineAfterProp:y,end:S,start:k??S}}function wW(e){if(!e)return null;switch(e.type){case'alias':case'scalar':case'double-quoted-scalar':case'single-quoted-scalar':if(e.source.includes('\n'))return!0;if(e.end)for(const t of e.end)if('newline'===t.type)return!0;return!1;case'flow-collection':for(const t of e.items){for(const e of t.start)if('newline'===e.type)return!0;if(t.sep)for(const e of t.sep)if('newline'===e.type)return!0;if(wW(t.key)||wW(t.value))return!0}return!1;default:return!0}}function kW(e,t,n){if('flow-collection'===t?.type){const r=t.end[0];if(r.indent===e&&(']'===r.source||'}'===r.source)&&wW(t)){n(r,'BAD_INDENT','Flow end indicator should be more indented than parent',!0)}}}function xW(e,t,n){const{uniqueKeys:r}=e.options;if(!1===r)return!1;const i='function'==typeof r?r:(e,t)=>e===t||rK(e)&&rK(t)&&e.value===t.value;return t.some((e=>i(e.key,n)))}const SW='All mapping items must start at the same column';function EW(e,t,n,r){let i='';if(e){let o=!1,a='';for(const s of e){const{source:e,type:l}=s;switch(l){case'space':o=!0;break;case'comment':{n&&!o&&r(s,'MISSING_CHAR','Comments must be separated from other tokens by white space characters');const t=e.substring(1)||' ';i?i+=a+t:i=t,a='';break}case'newline':i&&(a+=e),o=!0;break;default:r(s,'UNEXPECTED_TOKEN',`Unexpected ${l} at node end`)}t+=e.length}}return{comment:i,offset:t}}const $W='Block collections are not allowed within flow collections',OW=e=>e&&('block-map'===e.type||'block-seq'===e.type);function IW(e,t,n,r,i,o){const a='block-map'===n.type?function({composeNode:e,composeEmptyNode:t},n,r,i,o){const a=new(o?.nodeClass??pG)(n.schema);n.atRoot&&(n.atRoot=!1);let s=r.offset,l=null;for(const c of r.items){const{start:o,key:u,sep:d,value:p}=c,f=_W(o,{indicator:'explicit-key-ind',next:u??d?.[0],offset:s,onError:i,parentIndent:r.indent,startOnNewline:!0}),h=!f.found;if(h){if(u&&('block-seq'===u.type?i(s,'BLOCK_AS_IMPLICIT_KEY','A block sequence may not be used as an implicit map key'):'indent'in u&&u.indent!==r.indent&&i(s,'BAD_INDENT',SW)),!f.anchor&&!f.tag&&!d){l=f.end,f.comment&&(a.comment?a.comment+='\n'+f.comment:a.comment=f.comment);continue}(f.newlineAfterProp||wW(u))&&i(u??o[o.length-1],'MULTILINE_IMPLICIT_KEY','Implicit keys need to be on a single line')}else f.found?.indent!==r.indent&&i(s,'BAD_INDENT',SW);n.atKey=!0;const m=f.end,g=u?e(n,u,f,i):t(n,m,o,null,f,i);n.schema.compat&&kW(r.indent,u,i),n.atKey=!1,xW(n,a.items,g)&&i(m,'DUPLICATE_KEY','Map keys must be unique');const v=_W(d??[],{indicator:'map-value-ind',next:p,offset:g.range[2],onError:i,parentIndent:r.indent,startOnNewline:!u||'block-scalar'===u.type});if(s=v.end,v.found){h&&('block-map'!==p?.type||v.hasNewline||i(s,'BLOCK_AS_IMPLICIT_KEY','Nested mappings are not allowed in compact mappings'),n.options.strict&&f.start<v.found.offset-1024&&i(g.range,'KEY_OVER_1024_CHARS','The : indicator must be at most 1024 chars after the start of an implicit block mapping key'));const o=p?e(n,p,v,i):t(n,s,d,null,v,i);n.schema.compat&&kW(r.indent,p,i),s=o.range[2];const l=new aG(g,o);n.options.keepSourceTokens&&(l.srcToken=c),a.items.push(l)}else{h&&i(g.range,'MISSING_CHAR','Implicit map keys need to be followed by map values'),v.comment&&(g.comment?g.comment+='\n'+v.comment:g.comment=v.comment);const e=new aG(g);n.options.keepSourceTokens&&(e.srcToken=c),a.items.push(e)}}return l&&l<s&&i(l,'IMPOSSIBLE','Map comment with trailing content'),a.range=[r.offset,s,l??s],a}(e,t,n,r,o):'block-seq'===n.type?function({composeNode:e,composeEmptyNode:t},n,r,i,o){const a=new(o?.nodeClass??hG)(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let s=r.offset,l=null;for(const{start:c,value:u}of r.items){const o=_W(c,{indicator:'seq-item-ind',next:u,offset:s,onError:i,parentIndent:r.indent,startOnNewline:!0});if(!o.found){if(!(o.anchor||o.tag||u)){l=o.end,o.comment&&(a.comment=o.comment);continue}u&&'block-seq'===u.type?i(o.end,'BAD_INDENT','All sequence items must start at the same column'):i(s,'MISSING_CHAR','Sequence item without - indicator')}const d=u?e(n,u,o,i):t(n,o.end,c,null,o,i);n.schema.compat&&kW(r.indent,u,i),s=d.range[2],a.items.push(d)}return a.range=[r.offset,s,l??s],a}(e,t,n,r,o):function({composeNode:e,composeEmptyNode:t},n,r,i,o){const a='{'===r.start.source,s=a?'flow map':'flow sequence',l=new(o?.nodeClass??(a?pG:hG))(n.schema);l.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let u=r.offset+r.start.source.length;for(let m=0;m<r.items.length;++m){const o=r.items[m],{start:c,key:d,sep:p,value:f}=o,h=_W(c,{flow:s,indicator:'explicit-key-ind',next:d??p?.[0],offset:u,onError:i,parentIndent:r.indent,startOnNewline:!1});if(!h.found){if(!(h.anchor||h.tag||p||f)){0===m&&h.comma?i(h.comma,'UNEXPECTED_TOKEN',`Unexpected , in ${s}`):m<r.items.length-1&&i(h.start,'UNEXPECTED_TOKEN',`Unexpected empty item in ${s}`),h.comment&&(l.comment?l.comment+='\n'+h.comment:l.comment=h.comment),u=h.end;continue}!a&&n.options.strict&&wW(d)&&i(d,'MULTILINE_IMPLICIT_KEY','Implicit keys of flow sequence pairs need to be on a single line')}if(0===m)h.comma&&i(h.comma,'UNEXPECTED_TOKEN',`Unexpected , in ${s}`);else if(h.comma||i(h.start,'MISSING_CHAR',`Missing , between ${s} items`),h.comment){let e='';e:for(const t of c)switch(t.type){case'comma':case'space':break;case'comment':e=t.source.substring(1);break e;default:break e}if(e){let t=l.items[l.items.length-1];nK(t)&&(t=t.value??t.key),t.comment?t.comment+='\n'+e:t.comment=e,h.comment=h.comment.substring(e.length+1)}}if(a||p||h.found){n.atKey=!0;const m=h.end,g=d?e(n,d,h,i):t(n,m,c,null,h,i);OW(d)&&i(g.range,'BLOCK_IN_FLOW',$W),n.atKey=!1;const v=_W(p??[],{flow:s,indicator:'map-value-ind',next:f,offset:g.range[2],onError:i,parentIndent:r.indent,startOnNewline:!1});if(v.found){if(!a&&!h.found&&n.options.strict){if(p)for(const e of p){if(e===v.found)break;if('newline'===e.type){i(e,'MULTILINE_IMPLICIT_KEY','Implicit keys of flow sequence pairs need to be on a single line');break}}h.start<v.found.offset-1024&&i(v.found,'KEY_OVER_1024_CHARS','The : indicator must be at most 1024 chars after the start of an implicit flow sequence key')}}else f&&('source'in f&&f.source&&':'===f.source[0]?i(f,'MISSING_CHAR',`Missing space after : in ${s}`):i(v.start,'MISSING_CHAR',`Missing , or : between ${s} items`));const y=f?e(n,f,v,i):v.found?t(n,v.end,p,null,v,i):null;y?OW(f)&&i(y.range,'BLOCK_IN_FLOW',$W):v.comment&&(g.comment?g.comment+='\n'+v.comment:g.comment=v.comment);const b=new aG(g,y);if(n.options.keepSourceTokens&&(b.srcToken=o),a){const e=l;xW(n,e.items,g)&&i(m,'DUPLICATE_KEY','Map keys must be unique'),e.items.push(b)}else{const e=new pG(n.schema);e.flow=!0,e.items.push(b);const t=(y??g).range;e.range=[g.range[0],t[1],t[2]],l.items.push(e)}u=y?y.range[2]:v.end}else{const r=f?e(n,f,h,i):t(n,h.end,p,null,h,i);l.items.push(r),u=r.range[2],OW(f)&&i(r.range,'BLOCK_IN_FLOW',$W)}}const d=a?'}':']',[p,...f]=r.end;let h=u;if(p&&p.source===d)h=p.offset+p.source.length;else{const e=s[0].toUpperCase()+s.substring(1);i(u,c?'MISSING_CHAR':'BAD_INDENT',c?`${e} must end with a ${d}`:`${e} in block collection must be sufficiently indented and end with a ${d}`),p&&1!==p.source.length&&f.unshift(p)}if(f.length>0){const e=EW(f,h,n.options.strict,i);e.comment&&(l.comment?l.comment+='\n'+e.comment:l.comment=e.comment),l.range=[r.offset,h,e.offset]}else l.range=[r.offset,h,h];return l}(e,t,n,r,o),s=a.constructor;return'!'===i||i===s.tagName?(a.tag=s.tagName,a):(i&&(a.tag=i),a)}function TW(e,t,n){const r=t.offset,i=function({offset:e,props:t},n,r){if('block-scalar-header'!==t[0].type)return r(t[0],'IMPOSSIBLE','Block scalar header not found'),null;const{source:i}=t[0],o=i[0];let a=0,s='',l=-1;for(let p=1;p<i.length;++p){const t=i[p];if(s||'-'!==t&&'+'!==t){const n=Number(t);!a&&n?a=n:-1===l&&(l=e+p)}else s=t}-1!==l&&r(l,'UNEXPECTED_TOKEN',`Block scalar header includes extra characters: ${i}`);let c=!1,u='',d=i.length;for(let p=1;p<t.length;++p){const e=t[p];switch(e.type){case'space':c=!0;case'newline':d+=e.source.length;break;case'comment':if(n&&!c){r(e,'MISSING_CHAR','Comments must be separated from other tokens by white space characters')}d+=e.source.length,u=e.source.substring(1);break;case'error':r(e,'UNEXPECTED_TOKEN',e.message),d+=e.source.length;break;default:{r(e,'UNEXPECTED_TOKEN',`Unexpected token in block scalar header: ${e.type}`);const t=e.source;t&&'string'==typeof t&&(d+=t.length)}}}return{mode:o,indent:a,chomp:s,comment:u,length:d}}(t,e.options.strict,n);if(!i)return{value:'',type:null,comment:'',range:[r,r,r]};const o='>'===i.mode?AK.BLOCK_FOLDED:AK.BLOCK_LITERAL,a=t.source?function(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),i=r?.[1]?[r[1],n.slice(r[1].length)]:['',n],o=[i];for(let a=1;a<t.length;a+=2)o.push([t[a],t[a+1]]);return o}(t.source):[];let s=a.length;for(let m=a.length-1;m>=0;--m){const e=a[m][1];if(''!==e&&'\r'!==e)break;s=m}if(0===s){const e='+'===i.chomp&&a.length>0?'\n'.repeat(Math.max(1,a.length-1)):'';let n=r+i.length;return t.source&&(n+=t.source.length),{value:e,type:o,comment:i.comment,range:[r,n,n]}}let l=t.indent+i.indent,c=t.offset+i.length,u=0;for(let m=0;m<s;++m){const[t,r]=a[m];if(''!==r&&'\r'!==r){if(t.length<l){const e='Block scalars with more-indented leading empty lines must use an explicit indentation indicator';n(c+t.length,'MISSING_CHAR',e)}if(0===i.indent&&(l=t.length),u=m,0===l&&!e.atRoot){n(c,'BAD_INDENT','Block scalar values in collections must be indented')}break}0===i.indent&&t.length>l&&(l=t.length),c+=t.length+r.length+1}for(let m=a.length-1;m>=s;--m)a[m][0].length>l&&(s=m+1);let d='',p='',f=!1;for(let m=0;m<u;++m)d+=a[m][0].slice(l)+'\n';for(let m=u;m<s;++m){let[e,t]=a[m];c+=e.length+t.length+1;const r='\r'===t[t.length-1];if(r&&(t=t.slice(0,-1)),t&&e.length<l){const o=`Block scalar lines must not be less indented than their ${i.indent?'explicit indentation indicator':'first line'}`;n(c-t.length-(r?2:1),'BAD_INDENT',o),e=''}o===AK.BLOCK_LITERAL?(d+=p+e.slice(l)+t,p='\n'):e.length>l||'\t'===t[0]?(' '===p?p='\n':f||'\n'!==p||(p='\n\n'),d+=p+e.slice(l)+t,p='\n',f=!0):''===t?'\n'===p?d+='\n':p='\n':(d+=p+t,p=' ',f=!1)}switch(i.chomp){case'-':break;case'+':for(let e=s;e<a.length;++e)d+='\n'+a[e][0].slice(l);'\n'!==d[d.length-1]&&(d+='\n');break;default:d+='\n'}const h=r+i.length+t.source.length;return{value:d,type:o,comment:i.comment,range:[r,h,h]}}function AW(e,t,n){const{offset:r,type:i,source:o,end:a}=e;let s,l;const c=(e,t,i)=>n(r+e,t,i);switch(i){case'scalar':s=AK.PLAIN,l=function(e,t){let n='';switch(e[0]){case'\t':n='a tab character';break;case',':n='flow indicator character ,';break;case'%':n='directive indicator character %';break;case'|':case'>':n=`block scalar indicator ${e[0]}`;break;case'@':case'`':n=`reserved character ${e[0]}`}n&&t(0,'BAD_SCALAR_START',`Plain value cannot start with ${n}`);return CW(e)}(o,c);break;case'single-quoted-scalar':s=AK.QUOTE_SINGLE,l=function(e,t){'\''===e[e.length-1]&&1!==e.length||t(e.length,'MISSING_CHAR','Missing closing \'quote');return CW(e.slice(1,-1)).replace(/''/g,'\'')}(o,c);break;case'double-quoted-scalar':s=AK.QUOTE_DOUBLE,l=function(e,t){let n='';for(let r=1;r<e.length-1;++r){const i=e[r];if('\r'!==i||'\n'!==e[r+1])if('\n'===i){const{fold:t,offset:i}=NW(e,r);n+=t,r=i}else if('\\'===i){let i=e[++r];const o=PW[i];if(o)n+=o;else if('\n'===i)for(i=e[r+1];' '===i||'\t'===i;)i=e[1+ ++r];else if('\r'===i&&'\n'===e[r+1])for(i=e[1+ ++r];' '===i||'\t'===i;)i=e[1+ ++r];else if('x'===i||'u'===i||'U'===i){const o={x:2,u:4,U:8}[i];n+=jW(e,r+1,o,t),r+=o}else{const i=e.substr(r-1,2);t(r-1,'BAD_DQ_ESCAPE',`Invalid escape sequence ${i}`),n+=i}}else if(' '===i||'\t'===i){const t=r;let o=e[r+1];for(;' '===o||'\t'===o;)o=e[1+ ++r];'\n'===o||'\r'===o&&'\n'===e[r+2]||(n+=r>t?e.slice(t,r+1):i)}else n+=i}'"'===e[e.length-1]&&1!==e.length||t(e.length,'MISSING_CHAR','Missing closing "quote');return n}(o,c);break;default:return n(e,'UNEXPECTED_TOKEN',`Expected a flow scalar value, but found: ${i}`),{value:'',type:null,comment:'',range:[r,r+o.length,r+o.length]}}const u=r+o.length,d=EW(a,u,t,n);return{value:l,type:s,comment:d.comment,range:[r,u,d.offset]}}function CW(e){let t,n;try{t=new RegExp('(.*?)(?<![ \t])[ \t]*\r?\n','sy'),n=new RegExp('[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n','sy')}catch{t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=t.exec(e);if(!r)return e;let i=r[1],o=' ',a=t.lastIndex;for(n.lastIndex=a;r=n.exec(e);)''===r[1]?'\n'===o?i+=o:o='\n':(i+=o+r[1],o=' '),a=n.lastIndex;const s=/[ \t]*(.*)/sy;return s.lastIndex=a,r=s.exec(e),i+o+(r?.[1]??'')}function NW(e,t){let n='',r=e[t+1];for(;!(' '!==r&&'\t'!==r&&'\n'!==r&&'\r'!==r||'\r'===r&&'\n'!==e[t+2]);)'\n'===r&&(n+='\n'),r=e[(t+=1)+1];return n||(n=' '),{fold:n,offset:t}}const PW={0:'\0',a:'',b:'\b',e:'',f:'\f',n:'\n',r:'\r',t:'\t',v:'\v',N:'',_:'',L:'\u2028',P:'\u2029',' ':' ','"':'"','/':'/','\\':'\\','\t':'\t'};function jW(e,t,n,r){const i=e.substr(t,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const i=e.substr(t-2,n+2);return r(t-2,'BAD_DQ_ESCAPE',`Invalid escape sequence ${i}`),i}return String.fromCodePoint(o)}function DW(e,t,n,r){const{value:i,type:o,comment:a,range:s}='block-scalar'===t.type?TW(e,t,r):AW(t,e.options.strict,r),l=n?e.directives.tagName(n.source,(e=>r(n,'TAG_RESOLVE_FAILED',e))):null;let c,u;c=e.options.stringKeys&&e.atKey?e.schema[Jq]:l?function(e,t,n,r,i){if('!'===n)return e[Jq];const o=[];for(const s of e.tags)if(!s.collection&&s.tag===n){if(!s.default||!s.test)return s;o.push(s)}for(const s of o)if(s.test?.test(t))return s;const a=e.knownTags[n];if(a&&!a.collection)return e.tags.push(Object.assign({},a,{default:!1,test:void 0})),a;return i(r,'TAG_RESOLVE_FAILED',`Unresolved tag: ${n}`,'tag:yaml.org,2002:str'!==n),e[Jq]}(e.schema,i,l,n,r):'scalar'===t.type?function({atKey:e,directives:t,schema:n},r,i,o){const a=n.tags.find((t=>(!0===t.default||e&&'key'===t.default)&&t.test?.test(r)))||n[Jq];if(n.compat){const e=n.compat.find((e=>e.default&&e.test?.test(r)))??n[Jq];if(a.tag!==e.tag){o(i,'TAG_RESOLVE_FAILED',`Value may be parsed as either ${t.tagString(a.tag)} or ${t.tagString(e.tag)}`,!0)}}return a}(e,i,t,r):e.schema[Jq];try{const o=c.resolve(i,(e=>r(n??t,'TAG_RESOLVE_FAILED',e)),e.options);u=rK(o)?o:new AK(o)}catch(Jh){const o=Jh instanceof Error?Jh.message:String(Jh);r(n??t,'TAG_RESOLVE_FAILED',o),u=new AK(i)}return u.range=s,u.source=i,o&&(u.type=o),l&&(u.tag=l),c.format&&(u.format=c.format),a&&(u.comment=a),u}function RW(e,t,n){if(t){n??(n=t.length);for(let r=n-1;r>=0;--r){let n=t[r];switch(n.type){case'space':case'comment':case'newline':e-=n.source.length;continue}for(n=t[++r];'space'===n?.type;)e+=n.source.length,n=t[++r];break}}return e}const UW={composeNode:LW,composeEmptyNode:zW};function LW(e,t,n,r){const i=e.atKey,{spaceBefore:o,comment:a,anchor:s,tag:l}=n;let c,u=!0;switch(t.type){case'alias':c=function({options:e},{offset:t,source:n,end:r},i){const o=new OK(n.substring(1));''===o.source&&i(t,'BAD_ALIAS','Alias cannot be an empty string');o.source.endsWith(':')&&i(t+n.length-1,'BAD_ALIAS','Alias ending in : is ambiguous',!0);const a=t+n.length,s=EW(r,a,e.strict,i);o.range=[t,a,s.offset],s.comment&&(o.comment=s.comment);return o}(e,t,r),(s||l)&&r(t,'ALIAS_PROPS','An alias node must not specify any properties');break;case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':case'block-scalar':c=DW(e,t,l,r),s&&(c.anchor=s.source.substring(1));break;case'block-map':case'block-seq':case'flow-collection':c=function(e,t,n,r,i){const o=r.tag,a=o?t.directives.tagName(o.source,(e=>i(o,'TAG_RESOLVE_FAILED',e))):null;if('block-seq'===n.type){const{anchor:e,newlineAfterProp:t}=r,n=e&&o?e.offset>o.offset?e:o:e??o;n&&(!t||t.offset<n.offset)&&i(n,'MISSING_CHAR','Missing newline after block sequence props')}const s='block-map'===n.type?'map':'block-seq'===n.type?'seq':'{'===n.start.source?'map':'seq';if(!o||!a||'!'===a||a===pG.tagName&&'map'===s||a===hG.tagName&&'seq'===s)return IW(e,t,n,i,a);let l=t.schema.tags.find((e=>e.tag===a&&e.collection===s));if(!l){const r=t.schema.knownTags[a];if(!r||r.collection!==s)return r?i(o,'BAD_COLLECTION_TYPE',`${r.tag} used for ${s} collection, but expects ${r.collection??'scalar'}`,!0):i(o,'TAG_RESOLVE_FAILED',`Unresolved tag: ${a}`,!0),IW(e,t,n,i,a);t.schema.tags.push(Object.assign({},r,{default:!1})),l=r}const c=IW(e,t,n,i,a,l),u=l.resolve?.(c,(e=>i(o,'TAG_RESOLVE_FAILED',e)),t.options)??c,d=aK(u)?u:new AK(u);return d.range=c.range,d.tag=a,l?.format&&(d.format=l.format),d}(UW,e,t,n,r),s&&(c.anchor=s.source.substring(1));break;default:r(t,'UNEXPECTED_TOKEN','error'===t.type?t.message:`Unsupported token (type: ${t.type})`),c=zW(e,t.offset,void 0,null,n,r),u=!1}if(s&&''===c.anchor&&r(s,'BAD_ALIAS','Anchor cannot be an empty string'),i&&e.options.stringKeys&&(!rK(c)||'string'!=typeof c.value||c.tag&&'tag:yaml.org,2002:str'!==c.tag)){r(l??t,'NON_STRING_KEY','With stringKeys, all keys must be strings')}return o&&(c.spaceBefore=!0),a&&('scalar'===t.type&&''===t.source?c.comment=a:c.commentBefore=a),e.options.keepSourceTokens&&u&&(c.srcToken=t),c}function zW(e,t,n,r,{spaceBefore:i,comment:o,anchor:a,tag:s,end:l},c){const u=DW(e,{type:'scalar',offset:RW(t,n,r),indent:-1,source:''},s,c);return a&&(u.anchor=a.source.substring(1),''===u.anchor&&c(a,'BAD_ALIAS','Anchor cannot be an empty string')),i&&(u.spaceBefore=!0),o&&(u.comment=o,u.range[2]=l),u}function VW(e){if('number'==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+('string'==typeof n?n.length:1)]}function MW(e){let t='',n=!1,r=!1;for(let i=0;i<e.length;++i){const o=e[i];switch(o[0]){case'#':t+=(''===t?'':r?'\n\n':'\n')+(o.substring(1)||' '),n=!0,r=!1;break;case'%':'#'!==e[i+1]?.[0]&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class BW{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,r)=>{const i=VW(e);r?this.warnings.push(new yW(i,t,n)):this.errors.push(new vW(i,t,n))},this.directives=new _K({version:e.version||'1.2'}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:r}=MW(this.prelude);if(n){const i=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(r||e.directives.docStart||!i)e.commentBefore=n;else if(oK(i)&&!i.flow&&i.items.length>0){let e=i.items[0];nK(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=i.commentBefore;i.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:MW(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const r of e)yield*this.next(r);yield*this.end(t,n)}*next(e){switch(e.type){case'directive':this.directives.add(e.source,((t,n,r)=>{const i=VW(e);i[0]+=t,this.onError(i,'BAD_DIRECTIVE',n,r)})),this.prelude.push(e.source),this.atDirectives=!0;break;case'document':{const t=function(e,t,{offset:n,start:r,value:i,end:o},a){const s=Object.assign({_directives:t},e),l=new hW(void 0,s),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=_W(r,{indicator:'doc-start',next:i??o?.[0],offset:n,onError:a,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,!i||'block-map'!==i.type&&'block-seq'!==i.type||u.hasNewline||a(u.end,'MISSING_CHAR','Block collection cannot start on same line with directives-end marker')),l.contents=i?LW(c,i,u,a):zW(c,u.end,r,null,u,a);const d=l.contents.range[2],p=EW(o,d,!1,a);return p.comment&&(l.comment=p.comment),l.range=[n,d,p.offset],l}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,'MISSING_CHAR','Missing directives-end/doc-start indicator line'),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case'byte-order-mark':case'space':break;case'comment':case'newline':this.prelude.push(e.source);break;case'error':{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new vW(VW(e),'UNEXPECTED_TOKEN',t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case'doc-end':{if(!this.doc){const t='Unexpected doc-end without preceding document';this.errors.push(new vW(VW(e),'UNEXPECTED_TOKEN',t));break}this.doc.directives.docEnd=!0;const t=EW(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new vW(VW(e),'UNEXPECTED_TOKEN',`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),n=new hW(void 0,e);this.atDirectives&&this.onError(t,'MISSING_CHAR','Missing directives-end indicator line'),n.range=[0,t,t],this.decorate(n,!1),yield n}}}function FW(e,t){if(t)for(const n of t)switch(n.type){case'space':case'comment':e.push(n);break;case'newline':return e.push(n),!0}return!1}function ZW(e,t,n){switch(e.type){case'scalar':case'double-quoted-scalar':case'single-quoted-scalar':e.type=n,e.source=t;break;case'block-scalar':{const r=e.props.slice(1);let i=t.length;'block-scalar-header'===e.props[0].type&&(i-=e.props[0].source.length);for(const e of r)e.offset+=i;delete e.props,Object.assign(e,{type:n,source:t,end:r});break}case'block-map':case'block-seq':{const r={type:'newline',offset:e.offset+t.length,indent:e.indent,source:'\n'};delete e.items,Object.assign(e,{type:n,source:t,end:[r]});break}default:{const r='indent'in e?e.indent:-1,i='end'in e&&Array.isArray(e.end)?e.end.filter((e=>'space'===e.type||'comment'===e.type||'newline'===e.type)):[];for(const t of Object.keys(e))'type'!==t&&'offset'!==t&&delete e[t];Object.assign(e,{type:n,indent:r,source:t,end:i})}}}function HW(e){switch(e.type){case'block-scalar':{let t='';for(const n of e.props)t+=HW(n);return t+e.source}case'block-map':case'block-seq':{let t='';for(const n of e.items)t+=qW(n);return t}case'flow-collection':{let t=e.start.source;for(const n of e.items)t+=qW(n);for(const n of e.end)t+=n.source;return t}case'document':{let t=qW(e);if(e.end)for(const n of e.end)t+=n.source;return t}default:{let t=e.source;if('end'in e&&e.end)for(const n of e.end)t+=n.source;return t}}}function qW({start:e,key:t,sep:n,value:r}){let i='';for(const o of e)i+=o.source;if(t&&(i+=HW(t)),n)for(const o of n)i+=o.source;return r&&(i+=HW(r)),i}const KW=Symbol('break visit'),GW=Symbol('skip children'),WW=Symbol('remove item');function JW(e,t){'type'in e&&'document'===e.type&&(e={start:e.start,value:e.value}),YW(Object.freeze([]),e,t)}function YW(e,t,n){let r=n(t,e);if('symbol'==typeof r)return r;for(const i of['key','value']){const o=t[i];if(o&&'items'in o){for(let t=0;t<o.items.length;++t){const r=YW(Object.freeze(e.concat([[i,t]])),o.items[t],n);if('number'==typeof r)t=r-1;else{if(r===KW)return KW;r===WW&&(o.items.splice(t,1),t-=1)}}'function'==typeof r&&'key'===i&&(r=r(t,e))}}return'function'==typeof r?r(t,e):r}JW.BREAK=KW,JW.SKIP=GW,JW.REMOVE=WW,JW.itemAtPath=(e,t)=>{let n=e;for(const[r,i]of t){const e=n?.[r];if(!e||!('items'in e))return;n=e.items[i]}return n},JW.parentCollection=(e,t)=>{const n=JW.itemAtPath(e,t.slice(0,-1)),r=t[t.length-1][0],i=n?.[r];if(i&&'items'in i)return i;throw new Error('Parent collection not found')};const XW='\ufeff',QW='',eJ='',tJ='';function nJ(e){switch(e){case XW:return'byte-order-mark';case QW:return'doc-mode';case eJ:return'flow-error-end';case tJ:return'scalar';case'---':return'doc-start';case'...':return'doc-end';case'':case'\n':case'\r\n':return'newline';case'-':return'seq-item-ind';case'?':return'explicit-key-ind';case':':return'map-value-ind';case'{':return'flow-map-start';case'}':return'flow-map-end';case'[':return'flow-seq-start';case']':return'flow-seq-end';case',':return'comma'}switch(e[0]){case' ':case'\t':return'space';case'#':return'comment';case'%':return'directive-line';case'*':return'alias';case'&':return'anchor';case'!':return'tag';case'\'':return'single-quoted-scalar';case'"':return'double-quoted-scalar';case'|':case'>':return'block-scalar-header'}return null}const rJ=Object.freeze(Object.defineProperty({__proto__:null,BOM:XW,DOCUMENT:QW,FLOW_END:eJ,SCALAR:tJ,createScalarToken:function(e,t){const{implicitKey:n=!1,indent:r,inFlow:i=!1,offset:o=-1,type:a='PLAIN'}=t,s=JK({type:a,value:e},{implicitKey:n,indent:r>0?' '.repeat(r):'',inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=t.end??[{type:'newline',offset:-1,indent:r,source:'\n'}];switch(s[0]){case'|':case'>':{const e=s.indexOf('\n'),t=s.substring(0,e),n=s.substring(e+1)+'\n',i=[{type:'block-scalar-header',offset:o,indent:r,source:t}];return FW(i,l)||i.push({type:'newline',offset:-1,indent:r,source:'\n'}),{type:'block-scalar',offset:o,indent:r,props:i,source:n}}case'"':return{type:'double-quoted-scalar',offset:o,indent:r,source:s,end:l};case'\'':return{type:'single-quoted-scalar',offset:o,indent:r,source:s,end:l};default:return{type:'scalar',offset:o,indent:r,source:s,end:l}}},isCollection:e=>!!e&&'items'in e,isScalar:e=>!!e&&('scalar'===e.type||'single-quoted-scalar'===e.type||'double-quoted-scalar'===e.type||'block-scalar'===e.type),prettyToken:function(e){switch(e){case XW:return'<BOM>';case QW:return'<DOC>';case eJ:return'<FLOW_END>';case tJ:return'<SCALAR>';default:return JSON.stringify(e)}},resolveAsScalar:function(e,t=!0,n){if(e){const r=(e,t,r)=>{const i='number'==typeof e?e:Array.isArray(e)?e[0]:e.offset;if(!n)throw new vW([i,i+1],t,r);n(i,t,r)};switch(e.type){case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':return AW(e,t,r);case'block-scalar':return TW({options:{strict:t}},e,r)}}return null},setScalarValue:function(e,t,n={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:o=!1,type:a}=n,s='indent'in e?e.indent:null;if(r&&'number'==typeof s&&(s+=2),!a)switch(e.type){case'single-quoted-scalar':a='QUOTE_SINGLE';break;case'double-quoted-scalar':a='QUOTE_DOUBLE';break;case'block-scalar':{const t=e.props[0];if('block-scalar-header'!==t.type)throw new Error('Invalid block scalar header');a='>'===t.source[0]?'BLOCK_FOLDED':'BLOCK_LITERAL';break}default:a='PLAIN'}const l=JK({type:a,value:t},{implicitKey:i||null===s,indent:null!==s&&s>0?' '.repeat(s):'',inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case'|':case'>':!function(e,t){const n=t.indexOf('\n'),r=t.substring(0,n),i=t.substring(n+1)+'\n';if('block-scalar'===e.type){const t=e.props[0];if('block-scalar-header'!==t.type)throw new Error('Invalid block scalar header');t.source=r,e.source=i}else{const{offset:t}=e,n='indent'in e?e.indent:-1,o=[{type:'block-scalar-header',offset:t,indent:n,source:r}];FW(o,'end'in e?e.end:void 0)||o.push({type:'newline',offset:-1,indent:n,source:'\n'});for(const r of Object.keys(e))'type'!==r&&'offset'!==r&&delete e[r];Object.assign(e,{type:'block-scalar',indent:n,props:o,source:i})}}(e,l);break;case'"':ZW(e,l,'double-quoted-scalar');break;case'\'':ZW(e,l,'single-quoted-scalar');break;default:ZW(e,l,'scalar')}},stringify:e=>'type'in e?HW(e):qW(e),tokenType:nJ,visit:JW},Symbol.toStringTag,{value:'Module'}));function iJ(e){switch(e){case void 0:case' ':case'\n':case'\r':case'\t':return!0;default:return!1}}const oJ=new Set('0123456789ABCDEFabcdef'),aJ=new Set('0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*\'()'),sJ=new Set(',[]{}'),lJ=new Set(' ,[]{}\n\r\t'),cJ=e=>!e||lJ.has(e);class uJ{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer='',this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if('string'!=typeof e)throw TypeError('source is not a string');this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let n=this.next??'stream';for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;' '===t||'\t'===t;)t=this.buffer[++e];return!t||'#'===t||'\n'===t||'\r'===t&&'\n'===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;' '===t;)t=this.buffer[++n+e];if('\r'===t){const t=this.buffer[n+e+1];if('\n'===t||!t&&!this.atEnd)return e+n+1}return'\n'===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if('-'===t||'.'===t){const t=this.buffer.substr(e,3);if(('---'===t||'...'===t)&&iJ(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return('number'!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf('\n',this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:('\r'===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case'stream':return yield*this.parseStream();case'line-start':return yield*this.parseLineStart();case'block-start':return yield*this.parseBlockStart();case'doc':return yield*this.parseDocument();case'flow':return yield*this.parseFlowCollection();case'quoted-scalar':return yield*this.parseQuotedScalar();case'block-scalar':return yield*this.parseBlockScalar();case'plain-scalar':return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext('stream');if(e[0]===XW&&(yield*this.pushCount(1),e=e.substring(1)),'%'===e[0]){let t=e.length,n=e.indexOf('#');for(;-1!==n;){const r=e[n-1];if(' '===r||'\t'===r){t=n-1;break}n=e.indexOf('#',n+1)}for(;;){const n=e[t-1];if(' '!==n&&'\t'!==n)break;t-=1}const r=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),'stream'}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),'stream'}return yield QW,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext('line-start');if('-'===e||'.'===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext('line-start');const e=this.peek(3);if(('---'===e||'...'===e)&&iJ(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,'---'===e?'doc':'stream'}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!iJ(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext('block-start');if(('-'===e||'?'===e||':'===e)&&iJ(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return'doc'}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext('doc');let t=yield*this.pushIndicators();switch(e[t]){case'#':yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case'{':case'[':return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,'flow';case'}':case']':return yield*this.pushCount(1),'doc';case'*':return yield*this.pushUntil(cJ),'doc';case'"':case'\'':return yield*this.parseQuotedScalar();case'|':case'>':return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const r=this.getLine();if(null===r)return this.setNext('flow');if(-1!==n&&n<this.indentNext&&'#'!==r[0]||0===n&&(r.startsWith('---')||r.startsWith('...'))&&iJ(r[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&(']'===r[0]||'}'===r[0])))return this.flowLevel=0,yield eJ,yield*this.parseLineStart()}let i=0;for(;','===r[i];)i+=(yield*this.pushCount(1)),i+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(i+=(yield*this.pushIndicators()),r[i]){case void 0:return'flow';case'#':return yield*this.pushCount(r.length-i),'flow';case'{':case'[':return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,'flow';case'}':case']':return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?'flow':'doc';case'*':return yield*this.pushUntil(cJ),'flow';case'"':case'\'':return this.flowKey=!0,yield*this.parseQuotedScalar();case':':{const e=this.charAt(1);if(this.flowKey||iJ(e)||','===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),'flow'}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if('\''===e)for(;-1!==t&&'\''===this.buffer[t+1];)t=this.buffer.indexOf('\'',t+2);else for(;-1!==t;){let e=0;for(;'\\'===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let r=n.indexOf('\n',this.pos);if(-1!==r){for(;-1!==r;){const e=this.continueScalar(r+1);if(-1===e)break;r=n.indexOf('\n',e)}-1!==r&&(t=r-('\r'===n[r-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext('quoted-scalar');t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?'flow':'doc'}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if('+'===t)this.blockScalarKeep=!0;else if(t>'0'&&t<='9')this.blockScalarIndent=Number(t)-1;else if('-'!==t)break}return yield*this.pushUntil((e=>iJ(e)||'#'===e))}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let i=this.pos;e=this.buffer[i];++i)switch(e){case' ':n+=1;break;case'\n':t=i,n=0;break;case'\r':{const e=this.buffer[i+1];if(!e&&!this.atEnd)return this.setNext('block-scalar');if('\n'===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext('block-scalar');if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf('\n',e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext('block-scalar');t=this.buffer.length}}let r=t+1;for(e=this.buffer[r];' '===e;)e=this.buffer[++r];if('\t'===e){for(;'\t'===e||' '===e||'\r'===e||'\n'===e;)e=this.buffer[++r];t=r-1}else if(!this.blockScalarKeep)for(;;){let e=t-1,r=this.buffer[e];'\r'===r&&(r=this.buffer[--e]);const i=e;for(;' '===r;)r=this.buffer[--e];if(!('\n'===r&&e>=this.pos&&e+1+n>i))break;t=e}return yield tJ,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,r=this.pos-1;for(;t=this.buffer[++r];)if(':'===t){const t=this.buffer[r+1];if(iJ(t)||e&&sJ.has(t))break;n=r}else if(iJ(t)){let i=this.buffer[r+1];if('\r'===t&&('\n'===i?(r+=1,t='\n',i=this.buffer[r+1]):n=r),'#'===i||e&&sJ.has(i))break;if('\n'===t){const e=this.continueScalar(r+1);if(-1===e)break;r=Math.max(r,e-2)}}else{if(e&&sJ.has(t))break;n=r}return t||this.atEnd?(yield tJ,yield*this.pushToIndex(n+1,!0),e?'flow':'doc'):this.setNext('plain-scalar')}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield''),0)}*pushIndicators(){switch(this.charAt(0)){case'!':return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case'&':return(yield*this.pushUntil(cJ))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case'-':case'?':case':':{const e=this.flowLevel>0,t=this.charAt(1);if(iJ(t)||e&&sJ.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if('<'===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!iJ(t)&&'>'!==t;)t=this.buffer[++e];return yield*this.pushToIndex('>'===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(aJ.has(t))t=this.buffer[++e];else{if('%'!==t||!oJ.has(this.buffer[e+1])||!oJ.has(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return'\n'===e?yield*this.pushCount(1):'\r'===e&&'\n'===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(' '===t||e&&'\t'===t);const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class dJ{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const r=t+n>>1;this.lineStarts[r]<e?t=r+1:n=r}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(0===t)return{line:0,col:e};return{line:t,col:e-this.lineStarts[t-1]+1}}}}function pJ(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function fJ(e){for(let t=0;t<e.length;++t)switch(e[t].type){case'space':case'comment':case'newline':break;default:return t}return-1}function hJ(e){switch(e?.type){case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':case'flow-collection':return!0;default:return!1}}function mJ(e){switch(e.type){case'document':return e.start;case'block-map':{const t=e.items[e.items.length-1];return t.sep??t.start}case'block-seq':return e.items[e.items.length-1].start;default:return[]}}function gJ(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case'doc-start':case'explicit-key-ind':case'map-value-ind':case'seq-item-ind':case'newline':break e}for(;'space'===e[++t]?.type;);return e.splice(t,e.length)}function vJ(e){if('flow-seq-start'===e.start.type)for(const t of e.items)!t.sep||t.value||pJ(t.start,'explicit-key-ind')||pJ(t.sep,'map-value-ind')||(t.key&&(t.value=t.key),delete t.key,hJ(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class yJ{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source='',this.type='',this.lexer=new uJ,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=nJ(e);if(t)if('scalar'===t)this.atNewLine=!1,this.atScalar=!0,this.type='scalar';else{switch(this.type=t,yield*this.step(),t){case'newline':this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case'space':this.atNewLine&&' '===e[0]&&(this.indent+=e.length);break;case'explicit-key-ind':case'map-value-ind':case'seq-item-ind':this.atNewLine&&(this.indent+=e.length);break;case'doc-mode':case'flow-error-end':return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:'error',offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if('doc-end'!==this.type||e&&'doc-end'===e.type){if(!e)return yield*this.stream();switch(e.type){case'document':return yield*this.document(e);case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':return yield*this.scalar(e);case'block-scalar':return yield*this.blockScalar(e);case'block-map':return yield*this.blockMap(e);case'block-seq':return yield*this.blockSequence(e);case'flow-collection':return yield*this.flowCollection(e);case'doc-end':return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:'doc-end',offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch('block-scalar'===t.type?t.indent='indent'in e?e.indent:0:'flow-collection'===t.type&&'document'===e.type&&(t.indent=0),'flow-collection'===t.type&&vJ(t),e.type){case'document':e.value=t;break;case'block-scalar':e.props.push(t);break;case'block-map':{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!n.explicitKey);n.value=t;break}case'block-seq':{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case'flow-collection':{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!('document'!==e.type&&'block-map'!==e.type&&'block-seq'!==e.type||'block-map'!==t.type&&'block-seq'!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===fJ(n.start)&&(0===t.indent||n.start.every((e=>'comment'!==e.type||e.indent<t.indent)))&&('document'===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e='Tried to pop an empty stack';yield{type:'error',offset:this.offset,source:'',message:e}}}*stream(){switch(this.type){case'directive-line':return void(yield{type:'directive',offset:this.offset,source:this.source});case'byte-order-mark':case'space':case'comment':case'newline':return void(yield this.sourceToken);case'doc-mode':case'doc-start':{const e={type:'document',offset:this.offset,start:[]};return'doc-start'===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:'error',offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case'doc-start':return void(-1!==fJ(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case'anchor':case'tag':case'space':case'comment':case'newline':return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:'error',offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if('map-value-ind'===this.type){const t=gJ(mJ(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const r={type:'block-map',offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case'space':case'comment':case'newline':return void e.props.push(this.sourceToken);case'scalar':if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf('\n')+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf('\n',e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case'newline':if(this.onKeyLine=!1,t.value){const n='end'in t.value?t.value.end:void 0,r=Array.isArray(n)?n[n.length-1]:void 0;'comment'===r?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case'space':case'comment':if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],r=n?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent,r=n&&(t.sep||t.explicitKey)&&'seq-item-ind'!==this.type;let i=[];if(r&&t.sep&&!t.value){const n=[];for(let r=0;r<t.sep.length;++r){const i=t.sep[r];switch(i.type){case'newline':n.push(r);break;case'space':break;case'comment':i.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(i=t.sep.splice(n[1]))}switch(this.type){case'anchor':case'tag':return void(r||t.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case'explicit-key-ind':return t.sep||t.explicitKey?r||t.value?(i.push(this.sourceToken),e.items.push({start:i,explicitKey:!0})):this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(t.start.push(this.sourceToken),t.explicitKey=!0),void(this.onKeyLine=!0);case'map-value-ind':if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(pJ(t.sep,'map-value-ind'))this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(hJ(t.key)&&!pJ(t.sep,'newline')){const e=gJ(t.start),n=t.key,r=t.sep;r.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:r}]})}else i.length>0?t.sep=t.sep.concat(i,this.sourceToken):t.sep.push(this.sourceToken);else if(pJ(t.start,'newline'))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=gJ(t.start);this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):pJ(t.sep,'map-value-ind')?this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':{const n=this.flowScalar(this.type);return void(r||t.value?(e.items.push({start:i,key:n,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(n):(Object.assign(t,{key:n,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(e);if(r){if('block-seq'===r.type){if(!t.explicitKey&&t.sep&&!pJ(t.sep,'newline'))return void(yield*this.pop({type:'error',offset:this.offset,message:'Unexpected block-seq-ind on same line with key',source:this.source}))}else n&&e.items.push({start:i});return void this.stack.push(r)}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case'newline':if(t.value){const n='end'in t.value?t.value.end:void 0,r=Array.isArray(n)?n[n.length-1]:void 0;'comment'===r?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case'space':case'comment':if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],r=n?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case'anchor':case'tag':if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case'seq-item-ind':if(this.indent!==e.indent)break;return void(t.value||pJ(t.start,'seq-item-ind')?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if('flow-error-end'===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while(e&&'flow-collection'===e.type)}else if(0===e.end.length){switch(this.type){case'comma':case'explicit-key-ind':return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case'map-value-ind':return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case'space':case'comment':case'newline':case'anchor':case'tag':return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case'flow-map-end':case'flow-seq-end':return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if('block-map'===t.type&&('map-value-ind'===this.type&&t.indent===e.indent||'newline'===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if('map-value-ind'===this.type&&'flow-collection'!==t.type){const n=gJ(mJ(t));vJ(e);const r=e.end.splice(1,e.end.length);r.push(this.sourceToken);const i={type:'block-map',offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf('\n')+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf('\n',e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':return this.flowScalar(this.type);case'block-scalar-header':return{type:'block-scalar',offset:this.offset,indent:this.indent,props:[this.sourceToken],source:''};case'flow-map-start':case'flow-seq-start':return{type:'flow-collection',offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case'seq-item-ind':return{type:'block-seq',offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case'explicit-key-ind':{this.onKeyLine=!0;const t=gJ(mJ(e));return t.push(this.sourceToken),{type:'block-map',offset:this.offset,indent:this.indent,items:[{start:t,explicitKey:!0}]}}case'map-value-ind':{this.onKeyLine=!0;const t=gJ(mJ(e));return{type:'block-map',offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return'comment'===this.type&&(!(this.indent<=t)&&e.every((e=>'newline'===e.type||'space'===e.type)))}*documentEnd(e){'doc-mode'!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],'newline'===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case'comma':case'doc-start':case'doc-end':case'flow-seq-end':case'flow-map-end':case'map-value-ind':yield*this.pop(),yield*this.step();break;case'newline':this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],'newline'===this.type&&(yield*this.pop())}}}function bJ(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new dJ||null,prettyErrors:t}}function _J(e,t={}){const{lineCounter:n,prettyErrors:r}=bJ(t),i=new yJ(n?.addNewLine),o=new BW(t);let a=null;for(const s of o.compose(i.parse(e),!0,e.length))if(a){if('silent'!==a.options.logLevel){a.errors.push(new vW(s.range.slice(0,2),'MULTIPLE_DOCS','Source contains multiple documents; please use YAML.parseAllDocuments()'));break}}else a=s;return r&&n&&(a.errors.forEach(bW(e,n)),a.warnings.forEach(bW(e,n))),a}const YAML=Object.freeze(Object.defineProperty({__proto__:null,Alias:OK,CST:rJ,Composer:BW,Document:hW,Lexer:uJ,LineCounter:dJ,Pair:aG,Parser:yJ,Scalar:AK,Schema:fW,YAMLError:gW,YAMLMap:pG,YAMLParseError:vW,YAMLSeq:hG,YAMLWarning:yW,isAlias:Qq,isCollection:oK,isDocument:eK,isMap:tK,isNode:aK,isPair:nK,isScalar:rK,isSeq:iK,parse:function(e,t,n){let r;'function'==typeof t?r=t:void 0===n&&t&&'object'==typeof t&&(n=t);const i=_J(e,n);if(!i)return null;if(i.warnings.forEach((e=>QK(i.options.logLevel,e))),i.errors.length>0){if('silent'!==i.options.logLevel)throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))},parseAllDocuments:function(e,t={}){const{lineCounter:n,prettyErrors:r}=bJ(t),i=new yJ(n?.addNewLine),o=new BW(t),a=Array.from(o.compose(i.parse(e)));if(r&&n)for(const s of a)s.errors.forEach(bW(e,n)),s.warnings.forEach(bW(e,n));return a.length>0?a:Object.assign([],{empty:!0},o.streamInfo())},parseDocument:_J,stringify:function(e,t,n){let r=null;if('function'==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t),'string'==typeof n&&(n=n.length),'number'==typeof n){const e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=n??t??{};if(!e)return}return eK(e)&&!r?e.toString(n):new hW(e,r,n).toString(n)},visit:dK,visitAsync:fK},Symbol.toStringTag,{value:'Module'}));async function wJ(e){const t=e.event,n=e.data??[];return await c.emit(t,...n),t}function kJ(){ct.addCommandObject(tt.fromProps({name:'event-emit',callback:wJ,returns:'',namedArgumentList:[nt.fromProps({name:'event',description:'',typeList:[rt.STRING],isRequired:!0}),nt.fromProps({name:'data',description:'',typeList:[rt.STRING],isRequired:!1,acceptsMultiple:!0})],unnamedArgumentList:[],helpString:'\n    <div>\n         `event` , .\n         listener , .\n         STScript ,  string ;  number , .\n    </div>\n    <div>\n        <strong>Example:</strong>\n        <ul>\n            <li>\n                <pre><code class="language-stscript">/event-emit event=""</code></pre>\n            </li>\n            <li>\n                <pre><code class="language-stscript">/event-emit event="" data={{getvar::}} data=8 data= {{user}}</code></pre>\n            </li>\n            <li>\n                <pre><code class="language-stscript">/event-emit event="" data=" " data={{user}}</code></pre>\n            </li>\n        </ul>\n    </div>\n  '})),ct.addCommandObject(tt.fromProps({name:'audioenable',callback:tI,namedArgumentList:[nt.fromProps({name:'type',description:' (bgm  ambient)',typeList:[rt.STRING],enumList:[new st('bgm',null,lt.enum,ot.file),new st('ambient',null,lt.enum,ot.file)],isRequired:!0}),new nt('state','',[rt.STRING],!1,!1,'true',at.boolean('trueFalse')())],helpString:'\n        <div>\n            \n        </div>\n        <div>\n            <strong>Example:</strong>\n            <ul>\n                <li>\n                    <pre><code>/audioenable type=bgm state=true</code></pre>\n                    \n                </li>\n                <li>\n                    <pre><code>/audioenable type=ambient state=false</code></pre>\n                    \n                </li>\n            </ul>\n        </div>\n    '})),ct.addCommandObject(tt.fromProps({name:'audioplay',callback:nI,namedArgumentList:[nt.fromProps({name:'type',description:' (bgm  ambient)',typeList:[rt.STRING],enumList:[new st('bgm',null,lt.enum,ot.file),new st('ambient',null,lt.enum,ot.file)],isRequired:!0}),new nt('play','',[rt.STRING],!0,!1,'true',at.boolean('trueFalse')())],helpString:'\n        <div>\n            \n        </div>\n        <div>\n            <strong>Example:</strong>\n            <ul>\n                <li>\n                    <pre><code>/audioplay type=bgm</code></pre>\n                    \n                </li>\n                <li>\n                    <pre><code>/audioplay type=ambient play=false</code></pre>\n                    \n                </li>\n            </ul>\n        </div>\n      '})),ct.addCommandObject(tt.fromProps({name:'audioselect',callback:oI,namedArgumentList:[nt.fromProps({name:'type',description:' (bgm  ambient)',typeList:[rt.STRING],enumList:[new st('bgm',null,lt.enum,ot.file),new st('ambient',null,lt.enum,ot.file)],isRequired:!0})],unnamedArgumentList:[new it('url',[rt.STRING],!0)],helpString:'\n        <div>\n            \n        </div>\n        <div>\n            <strong>Example:</strong>\n            <ul>\n                <li>\n                    <pre><code>/audioselect type=bgm https://example.com/song.mp3</code></pre>\n                    \n                </li>\n                <li>\n                    <pre><code>/audioselect type=ambient https://example.com/sound.mp3</code></pre>\n                    \n                </li>\n            </ul>\n        </div>\n      '})),ct.addCommandObject(tt.fromProps({name:'audioimport',callback:iI,namedArgumentList:[nt.fromProps({name:'type',description:' (bgm  ambient)',typeList:[rt.STRING],enumList:[new st('bgm',null,lt.enum,ot.file),new st('ambient',null,lt.enum,ot.file)],isRequired:!0}),nt.fromProps({name:'play',description:'',typeList:[rt.BOOLEAN],defaultValue:'true',isRequired:!1})],unnamedArgumentList:[new it('url',[rt.STRING],!0)],helpString:'\n        <div>\n            \n        </div>\n        <div>\n            <strong>Example:</strong>\n            <ul>\n                <li>\n                    <pre><code>/audioimport type=bgm https://example.com/song1.mp3,https://example.com/song2.mp3</code></pre>\n                     BGM \n                </li>\n                <li>\n                    <pre><code>/audioimport type=ambient play=false url=https://example.com/sound1.mp3,https://example.com/sound2.mp3 </code></pre>\n                     ()\n                </li>\n            </ul>\n        </div>\n      '})),ct.addCommandObject(tt.fromProps({name:'audiomode',callback:rI,namedArgumentList:[nt.fromProps({name:'type',description:' (bgm  ambient)',typeList:[rt.STRING],enumList:[new st('bgm',null,lt.enum,ot.file),new st('ambient',null,lt.enum,ot.file)],isRequired:!0}),nt.fromProps({name:'mode',description:'',typeList:[rt.STRING],enumList:[new st('repeat',null,lt.enum),new st('random',null,lt.enum),new st('single',null,lt.enum),new st('stop',null,lt.enum)],isRequired:!0})],helpString:'\n        <div>\n            \n        </div>\n        <div>\n            <strong>Example:</strong>\n            <ul>\n                <li>\n                    <pre><code>/audiomode type=bgm mode=repeat</code></pre>\n                    \n                </li>\n                <li>\n                    <pre><code>/audiomode type=ambient mode=random</code></pre>\n                    \n                </li>\n                <li>\n                    <pre><code>/audiomode type=bgm mode=single</code></pre>\n                    \n                </li>\n                <li>\n                    <pre><code>/audiomode type=ambient mode=stop</code></pre>\n                    \n                </li>\n            </ul>\n        </div>\n    '}))}const xJ=fo({__name:'Panel',setup(e,{expose:t}){t(),_c(Ee().includes('zh')?Gh():sh()),Zq(),function(){for(const[e,t]of Object.entries(Hq))Oe.registerMacro(e,t)}(),aI(),globalThis.YAML=YAML,globalThis.z=u_,kJ();const n=[{name:Se``,icon:'fa-solid fa-gear',component:Lj},{name:Se``,icon:'fa-solid fa-magic-wand-sparkles',component:Yj},{name:Se``,icon:'fa-solid fa-dice-d6',component:SV},{name:Se``,icon:'fa-solid fa-toolbox',component:Fq}],r=fT('TH-Panel:active_tab',0),i=Mr(!1);Eo((async()=>{i.value=await nP()}));const o={tabs:n,active_tab:r,has_update:i,get ModalsContainer(){return $j},get getSmartThemeQuoteTextColor(){return fc}};return Object.defineProperty(o,'__isScriptSetup',{enumerable:!1,value:!0}),o}}),SJ={class:'inline-drawer'},EJ={class:'inline-drawer-toggle inline-drawer-header'},$J={key:0,class:'text-xs font-bold text-red-500'},OJ={class:'inline-drawer-content'},IJ={class:'mt-0.5 mb-0.75'},TJ={class:'flex w-full items-center rounded-full border border-(--grey5050a) p-0.5 text-base'},AJ=['onClick'],CJ={class:'flex-grow text-center'};const NJ=sI(xJ,[['render',function(e,t,n,r,i,o){return La(),Ba('div',SJ,[Ga('div',EJ,[Ga('b',null,[Xa(un(e.t``)+' ',1),r.has_update?(La(),Ba('span',$J,'New!')):es('',!0)]),t[0]||(t[0]=Ga('div',{class:'inline-drawer-icon fa-solid fa-circle-chevron-down'},null,-1))]),Ga('div',OJ,[Ga('div',IJ,[Ga('div',TJ,[(La(),Ba(Na,null,jo(r.tabs,(({name:e,icon:t},n)=>Ga('div',{key:n,class:nn(['flex h-full flex-1 items-center justify-center rounded-full text-(--grey50)',{'bg-[color-mix(in_srgb,_var(--SmartThemeQuoteColor)_80%,_transparent)] transition duration-300 ease-in-out':r.active_tab===n}]),onClick:e=>r.active_tab=n},[Ga('div',{class:'flex flex-wrap items-center justify-center gap-0.25',style:Yt({color:r.active_tab===n?r.getSmartThemeQuoteTextColor()??'inherit':'inherit'})},[Ga('i',{class:nn(['flex-shrink-0 text-[80%]',t])},null,2),Ga('span',CJ,un(e),1)],4)],10,AJ))),64))]),(La(),Ba(Na,null,jo(r.tabs,(({component:e},t)=>Li(Ga('div',{key:t,class:'mt-0.75 flex flex-col gap-0.25 px-0.75'},[(La(),Fa(Co(e)))],512),[[Ys,r.active_tab===t]]))),64))])]),Wa(r.ModalsContainer)])}],['__file','Panel.vue']]),PJ=Dl(NJ),jJ=function(){const e=gn(!0),t=e.run((()=>Mr({})));let n=[],r=[];const i=Ur({install(e){zx(i),i._a=e,e.provide(Vx,i),e.config.globalProperties.$pinia=i,Zx&&vS(e,i),r.forEach((e=>n.push(e))),r=[]},use(e){return this._a?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return Zx&&'undefined'!=typeof Proxy&&i.use(wS),i}();PJ.use(jJ);const DJ=function(){const e=Ir([]),t=Ir([]),n=Ir([]),r=Ir([]),i=Mr([]),o=Ur({install(e){e.provide(mj,o),e.config.globalProperties.$vfm=o},modals:e,openedModals:t,openedModalOverlays:n,dynamicModals:r,modalsContainers:i,get:t=>e.find((e=>{var n,r;return(null==(r=null==(n=yj(e))?void 0:n.value.modalId)?void 0:r.value)===t})),toggle(e,t){var n;return null==(n=yj(o.get(e)))?void 0:n.value.toggle(t)},open:e=>o.toggle(e,!0),close:e=>o.toggle(e,!1),closeAll:()=>Promise.allSettled(t.reduce(((e,t)=>{const n=yj(t),r=null==n?void 0:n.value.toggle(!1);return r&&e.push(r),e}),[]))});return(e=>{gj=e})(o),o}();PJ.use(DJ),PJ.use(xZ);const RJ={install:e=>{e.config.globalProperties.t=Se}};PJ.use(RJ),$((()=>{const e=$('<div id="tavern_helper_new">').appendTo('#extensions_settings');PJ.config.performance=!0,PJ.mount(e[0])}));
//# sourceMappingURL=index.js.map
